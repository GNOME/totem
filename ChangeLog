2007-11-21  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/*: Move this...
	* plparse/*: ... here

	* src/disc-test.c: Move to the plparse directory

	* Makefile.am:
	* browser-plugin/Makefile.am:
	* configure.in:
	* src/Makefile.am:
	* src/backend/Makefile.am:
	* src/plugins/bemused/Makefile.am:
	* src/plugins/properties/Makefile.am:
	* src/plugins/skipto/Makefile.am:
	Changes for the above

	(Closes: #496674)

2007-11-19  Matthias Clasen  <mclasen@redhat.com>

	* src/plugins/totem-plugins-engine.c (totem_plugins_engine_load_file):
	Plug a tiny memory leak.  (#498076)

2007-11-17  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (is_error),
	  (GST_DEBUG_BIN_TO_DOT_FILE), (bvw_error_msg), (bvw_bus_message_cb):
	  Add support for graphviz output (set GST_DEBUG_DUMP_DOT_DIR to a
	  directory of your choice to enable output; does nothing for core
	  versions < 0.10.15). (Closes: #488567)

2007-11-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (entry_parsed):
	Skip 0-length streams in playlists (Closes: #497440)

2007-11-12  Philip Withnall  <pwithnall@svn.gnome.org>

	* src/plparse/totem-pl-parser-podcast.c: (parse_rss_items):
	* src/plugins/youtube/youtube.py:
	* src/totem-object.c: (totem_get_playlist):
	* src/totem-playlist.h:
	* src/totem-video-list.c: (row_activated_cb):
	* src/totem.h: Fix some compile warnings, show a busy cursor
	while downloading results in the YouTube plugin, and convert
	TotemVideoList to use the playlist instead of directly playing
	MRLs.

============ Version 2.21.2

2007-11-12  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.21.2
	* lib/Makefile.am: Fix extraneous character breaking the build

2007-11-07  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-lines.c: (totem_pl_parser_add_m3u):
	Add support for parsing M3U files with drive letters, as used on
	some devices like the Sony Ericsson W950i (See #427975)

2007-11-06  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-podcast.c: (parse_rss_items),
	(totem_pl_parser_add_rss): Look for the feed metadata first,
	as it might be at the end of the file (fixes parsing of
	http://www.pinksilver.net/podcast/feed.xml, thanks Jonathan for
	the test case)

2007-11-06  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/xmllexer.c: (lexer_decode_entities):
	Update decoding of decimal entities to match upstream
	patch by Darren Salt, thanks Darren!

2007-11-06  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-podcast.c:
	(totem_pl_parser_add_xml_feed): Implement, fixes parsing
	of feeds from Feedburner.com (see #484768)

2007-11-05  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* lib/Makefile.am:
	* lib/asprintf.c: (totem_private_asprintf):
	* lib/totem_internal.h:
	* src/plparse/Makefile.am:
	* src/plparse/xmlparser.c: (xml_parser_get_node_internal):
	Fix compilation on Solaris, which lacks asprintf,
	based on patch by Damien Carbery <damien.carbery@sun.com>
	(Closes: #492074)

2007-11-05  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/xmllexer.c: (lexer_get_token),
	(lexer_decode_entities): Fix decoding of decimal entities,
	useful for Podcasts (see #484768)

2007-11-05  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Add gnome-keyring dep as used in the xine-lib
	backend

2007-11-01  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPPlugin.cpp: Implement
	totemIGMPControls::GetCurrentPosition (Helps: #364054)
	* browser-plugin/totemPlugin.cpp: Support vidheight and
	vidwidth as used by WMP (doesn't make much of a difference,
	mind you)

2007-11-01  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemGMPPlugin.h:
	* browser-plugin/totemGMPSettings.cpp:
	* browser-plugin/totemGMPSettings.h:
	Implement totemIGMPPlayer::SetURL and ::GetURL,
	and totemIGMPSettings::SetVolume and ::GetVolume
	(Helps: #364054)
	* browser-plugin/totemNarrowSpacePlugin.cpp:
	Implement totemINarrowSpace::SetVolume and ::GetVolume

2007-11-01  Bastien Nocera  <hadess@hadess.net>

	* bindings/vala/totem.vala: Fix vala bindings for the latest
	Vala (Closes: #491346)

2007-11-01  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-include.sh: Small fix to work with
	Solaris' sh, spotted by Damien Carbery <damien.carbery@sun.com>
	(Closes: #492068)

2007-11-01  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_class_init):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_class_init):
	TICK is already used as a define on Solaris, use TICK_SIGNAL
	instead. Patch from Damien Carbery <damien.carbery@sun.com>
	(Closes: #492087)

2007-10-31  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (on_about1_activate),
	(totem_embedded_on_fullscreen_exit):
	* src/totem-menu.c: (about_action_callback): Update Copyright
	text to mention 2007

============ Version 2.21.1

2007-10-31  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.21.1

2007-10-30  Bastien Nocera  <hadess@hadess.net>

	* src/totem-audio-preview.c: (main): Also allow playback of
	a single file passed on the command-line

2007-10-27  Philip Withnall  <pwithnall@svn.gnome.org>

	* src/plugins/youtube/youtube.py:
	* src/plugins/youtube/youtube.ui: Split videos out into two
	treeviews; one for search results and one for related videos,
	meaning that search results are no longer lost (Closes: #487100)

2007-10-25  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add audio/x-xm (XM tracker files)
	as supported (Closes: #489580)

2007-10-24  Philip Withnall  <pwithnall@svn.gnome.org>

	Update svn:ignore properties.

2007-10-24  Philip Withnall  <pwithnall@svn.gnome.org>

	* src/Makefile.am:
	* src/plugins/youtube/youtube.py:
	* src/totem-video-list.c: (totem_video_list_class_init),
	(query_tooltip_cb), (row_activated_cb),
	(default_starting_video_cb):
	* src/totem-video-list.h:
	* src/totemvideolist-marshal.list: Add a signal to TotemVideoList
	to allow users of it to set the MRL just before a video is played,
	which solves YouTube's slowness problem. Also, display the MRL as part
	of the tooltips on the TotemVideoList.

2007-10-24  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-podcast.c:
	(totem_pl_parser_add_itms), (totem_pl_parser_is_itms_feed),
	(parse_opml_outline): Fix parsing of the URLs as supplied on
	the "Connecting to the iTunes Store." page, so that a single-click
	can bring you to rhythmbox

2007-10-24  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-podcast.c: (totem_pl_parser_is_opml),
	(totem_pl_parser_is_xml_feed), (parse_rss_items),
	(totem_pl_parser_add_rss), (parse_opml_outline),
	(parse_opml_head_body), (totem_pl_parser_add_opml):
	* src/plparse/totem-pl-parser-podcast.h:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_ignore),
	(totem_pl_parser_ignore_from_mimetype),
	(totem_pl_parser_parse_internal),
	(totem_pl_parser_can_parse_from_data): Add support for OPML feeds
	(Closes: #489519)

2007-10-23  Philip Withnall  <pwithnall@svn.gnome.org>

	* src/Makefile.am:
	* src/plugins/youtube/youtube.py:
	* src/plugins/youtube/youtube.ui:
	* src/totem-cell-renderer-video.c:
	(totem_cell_renderer_video_class_init),
	(totem_cell_renderer_video_init),
	(totem_cell_renderer_video_set_property),
	(totem_cell_renderer_video_get_property), (get_size),
	(totem_cell_renderer_video_render):
	* src/totem-video-list.c: (totem_video_list_new),
	(totem_video_list_class_init), (totem_video_list_init),
	(totem_video_list_set_property), (totem_video_list_get_property),
	(query_tooltip_cb), (selection_changed_cb), (row_activated_cb):
	* src/totem-video-list.h: Create a new TotemVideoList object,
	enabling tooltips on lists of videos (as in the YouTube plugin),
	and moving other functionality -- such as play-on-cell-activation
	 -- support out too (Closes: #488826)

2007-10-23  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/plparser.symbols: export totem_pl_parser_parse_date
	as used by Podcasts
	* src/plparse/totem-pl-parser.h: summary is
	description in Podcasts
	* src/plparse/xmlparser.c: (xml_parser_get_node_internal):
	Fix uninitialised variable warning in valgrind

2007-10-23  Philip Withnall  <pwithnall@svn.gnome.org>

	* configure.in: Decrease Python dependency back to 2.3,
	and bump up PyGTK dependency to 2.12 (it should've been
	bumped when the YouTube plugin was committed) (Closes: #489306)

2007-10-22  Philip Withnall  <pwithnall@svn.gnome.org>

	Update svn:ignore properties.

2007-10-22  Philip Withnall  <pwithnall@svn.gnome.org>

	* bindings/python/Makefile.am:
	* bindings/python/totem.defs:
	* bindings/python/totem.override:
	* src/Makefile.am:
	* src/plugins/youtube/youtube.py:
	* src/plugins/youtube/youtube.ui:
	* src/totem-cell-renderer-video.c: (totem_cell_renderer_video_new),
	(totem_cell_renderer_video_class_init),
	(totem_cell_renderer_video_init),
	(totem_cell_renderer_video_dispose),
	(totem_cell_renderer_video_set_property),
	(totem_cell_renderer_video_get_property), (get_size),
	(totem_cell_renderer_video_get_size),
	(totem_cell_renderer_video_render):
	* src/totem-cell-renderer-video.h: Move the cell renderer used in
	the YouTube plugin out to a C-based GObject and clean it up a bit.
	Add the new object to the Python bindings, and make the YouTube
	plugin use it. Additional cleanup to the YouTube plugin and the
	Python bindings.

2007-10-22  Philip Withnall  <pwithnall@svn.gnome.org>

	* src/plugins/youtube/youtube.py: Fix popping from an empty list
	in some cases (Closes: #486504)

============ Version 2.21.0

2007-10-21  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* data/Makefile.am:
	* src/plugins/mythtv/Makefile.am: Fix distcheck errors

2007-10-21  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* src/plugins/youtube/youtube.py: Use a regular expression to extract
	the token (allows the extraction also if the token is not the last
	argument) and close the HTTP connection (Closes #488763)

2007-10-19  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_toggle_fullscreen):
	Put the fullscreen window on the screen where the video
	widget is, when using Xinerama (Closes: #487932)

2007-10-19  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt:
	* data/totem.desktop.in.in.in: Patch from Stephane Loeuillet
	<leroutier@gmail.com> to fix some warnings in the .desktop
	file (Closes: #481700)

2007-10-19  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Fix some confusing error message when
	Python was there but not PyGTK (Closes: #479272)

2007-10-19  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in:
	* data/totem.ui:
	* src/totem-preferences.c: (checkbutton3_toggled_cb),
	(autoload_subtitles_changed_cb), (totem_setup_preferences):
	* src/totem-private.h:
	* src/totem.c: (totem_action_set_mrl_with_warning),
	(totem_action_drop_files), (totem_action_set_playlist_index),
	(playlist_changed_cb), (totem_action_handle_key_press),
	(playlist_widget_setup):
	Add a preference as to whether or not to load text subtitles
	automatically when a new file is loaded. It's off by default,
	as it makes loading videos slower for everyone that doesn't
	want/need this feature (Closes: #481822)

2007-10-19  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-podcast.c:
	(totem_pl_parser_add_atom): Add some docs

2007-10-18  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/mythtv/Makefile.am: Install the .totem-plugin
	as well, so we can activate it

2007-10-17  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/mythtv/Makefile.am:
	* src/plugins/mythtv/totem-mythtv.c: (get_thumbnail),
	(set_thumbnail_icon), (row_activated_cb), (create_treeview),
	(totem_mythtv_list_recordings), (totem_mythtv_update_binfo),
	(refresh_cb), (totem_mythtv_plugin_init),
	(totem_mythtv_plugin_finalize), (impl_activate), (impl_deactivate):
	* src/plugins/mythtv/totem-mythtv.schemas.in:
	Add GConf schemas and use those
	Cache the thumbnail locally, to avoid getting it again constantly
	Add a refresh button, to reload the list of recordings

2007-10-17  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Work-around problems with python being installed
	in /usr/lib64 rather than /usr/lib

2007-10-16  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/mime-type-include.sh: generate nautilus-audio-mime-types.h
	for use in nautilus itself

2007-10-16  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/totem-audio-preview.c: (print_mimetypes), (main):
	* src/totem-resources.c: (set_resource_limits),
	(totem_resources_monitor_start):
	* src/totem-resources.h:
	Add a totem-audio-preview program that plays audio on the
	the standard input, for use in nautilus's sound preview
	(See #486827)

2007-10-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_open_stream):
	Fix replaying the stream when we were redirected
	(Closes: #486459)

2007-10-14  Philip Withnall  <pwithnall@svn.gnome.org>

	* src/plugins/youtube/youtube.py: Code from Jan Arne Petersen
	to resolve and use the actual FLV URL for YouTube videos.

2007-10-14  Philip Withnall  <pwithnall@svn.gnome.org>

	* src/plugins/youtube/youtube.ui: Move search entry to the
	top of the sidebar, and modify svn:ignore on the "totem"
	plugin's directory.

2007-10-13  Philip Withnall  <pwithnall@svn.gnome.org>

	* src/plugins/youtube/youtube.py: Change spaces to plusses in
	YouTube query strings, and order by relevance instead of view
	count, in response to a suggestion by Chris Lord.

2007-10-10  Christian Persch  <chpe@gnome.org>

	* data/totem.ui:
	* src/totem-menu.c: (add_lang_action), (connect_proxy_cb):
	Remove redundant connect-proxy callback, and just put the code into
	the existing callback for the recent actions action group. Bug
	#484136.

2007-10-09  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (xine_event),
	(bacon_video_widget_stop), (bacon_video_widget_get_current_frame):
	Guard against bogus progress percentages (Closes: #484888)

2007-10-09  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/plugins/Makefile.am:
	* src/plugins/totem/Makefile.am: Add a dummy totem
	Python module to please the loader

2007-10-08  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_set_logo_by_name), (totem_embedded_launch_player),
	(totem_embedded_update_menu), (on_about1_activate),
	(totem_embedded_on_fullscreen_exit), (parse_plugin_type):
	Add cone to the list of possible plugins in the viewer
	* configure.in: enable cone by default
	* src/plugins/mythtv/totem-mythtv.c: (get_thumbnail):
	Don't try to load huge thumbnails
	* src/plugins/totem-python-module.c:
	(totem_python_module_init_python): Enable threads after having
	init'ed pygtk, fixes a crash enabling the YouTube plugin
	* src/totem-resources.c: (totem_resources_monitor_start):
	Remove unneeded blank line

2007-10-08  Philip Withnall  <pwithnall@svn.gnome.org>

	* bindings/python/totem.defs:
	* bindings/python/totem.override:
	* configure.in:
	* src/plugins/totem-python-module.c:
	(totem_python_module_init_python), (totem_python_garbage_collect),
	(totem_python_shutdown):
	* src/plugins/youtube/Makefile.am:
	* src/plugins/youtube/youtube.py:
	* src/plugins/youtube/youtube.totem-plugin.in:
	* src/plugins/youtube/youtube.ui: Add a plugin to browse YouTube.
	Additionally, port some Python module changes from Rhythmbox,
	and extend our Python bindings a little. (Closes: #484438)

2007-10-08  Philip Withnall  <pwithnall@svn.gnome.org>

	* README:
	* data/totem.ui:
	* src/plugins/gromit/totem-gromit.c: (on_window_key_press_event):
	* src/plugins/skipto/totem-skipto-plugin.c:
	(on_window_key_press_event), (impl_activate):
	* src/totem.c: (totem_action_handle_key_press),
	(window_key_press_event_cb): Rejigger keyboard shortcuts
	(Closes: #480664)

2007-10-08  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-podcast.c: (parse_rss_item),
	(parse_rss_items), (totem_pl_parser_add_itpc), (check_header),
	(decompress_gzip), (totem_pl_parser_parse_itms_doc),
	(totem_pl_parser_get_feed_url), (totem_pl_parser_get_itms_url),
	(totem_pl_parser_add_itms), (totem_pl_parser_is_itms_feed):
	Add some fixes in iTunes RSS handling, support itunes:subtitle,
	Fix stupidness in itpc URL handling, add support for itms podcasts
	* src/plparse/totem-pl-parser-podcast.h:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse_internal):
	Special case itms podcast references
	* src/plparse/xmlparser.c: Increase maxdepth for iTunes' crazy UI
	definition file

	Note: not adding linking to -lz as gnome-vfs should drag it from
	libxml2

	(Closes: #469563)

2007-10-06  Philip Withnall  <pwithnall@svn.gnome.org>

	* data/totem.ui: Fix the signal for the UIManager (Closes: #484126)

2007-10-06  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	  Allow taking screenshots of the visualisation if there is one
	  (Closes: #476855).

2007-10-06  Philip Withnall  <pwithnall@svn.gnome.org>

	* data/Makefile.am:
	* data/playlist-ui.xml:
	* data/playlist.ui:
	* data/totem-ui.xml:
	* data/totem.ui:
	* src/backend/bacon-video-widget.h:
	* src/totem-menu.c: (totem_ui_manager_setup):
	* src/totem-playlist.c: (playlist_copy_location_action_callback),
	(playlist_remove_action_callback), (totem_playlist_init):
	* src/totem.c: (update_seekable), (totem_callback_connect): Move
	UIManager stuff to GtkBuilder (Closes: #454242)

2007-10-04  Bastien Nocera  <hadess@hadess.net>

	* src/totem-fullscreen.c: (totem_fullscreen_get_volume_popup),
	(totem_fullscreen_is_volume_popup_visible),
	(totem_fullscreen_parent_window_notify): Only hide the popup if the
	volume popup isn't visible (Closes: #477529), requires GTK+ patch
	from bug #478371
	* src/totem.c: Remove unneeded functions leftover from glade use in
	the past

2007-10-04  Bastien Nocera  <hadess@hadess.net>

	* data/lirc_example: Add up/down/left/right/select DVD menu
	items to the list of actions as examples (Closes: #483239)
	* src/totem.c: (totem_action_handle_key_press): Add
	ability to select a menu item with button "5" on the keypad

2007-10-02  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (main): Fix a few coding
	style issues

2007-10-02  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-podcast.c: (parse_rss_items),
	(totem_pl_parser_add_rss), (parse_atom_entry),
	(parse_atom_entries), (totem_pl_parser_add_atom):
	Add Atom feed support, remove useless debug

2007-10-01  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/test-parser.c: (entry_metadata_foreach): Truncate the
	description if it's too long, useful for podcasts testing

	* src/plparse/totem-pl-parser-podcast.c: (totem_pl_parser_is_rss),
	(totem_pl_parser_is_atom), (totem_pl_parser_is_xml_feed),
	(parse_rss_item), (parse_rss_items), (totem_pl_parser_add_rss),
	(totem_pl_parser_add_xml_feed): Add _is_xml_feed, _is_rss and _is_atom
	implement RSS parsing
	* src/plparse/totem-pl-parser-podcast.h: upd
	* src/plparse/totem-pl-parser.c: Also check whether XML files are
	RSS or Atom feeds

2007-10-01  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-qt.c:
	(totem_pl_parser_add_quicktime_metalink):
	* src/plparse/totem-pl-parser-smil.c:
	(totem_pl_parser_add_smil_with_data):
	* src/plparse/totem-pl-parser-wm.c: (totem_pl_parser_add_asx):
	Update for change xine-lib xml parser API changes

2007-10-01  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/Makefile.am:
	* src/plparse/xmllexer.c: (lexer_get_token):
	* src/plparse/xmllexer.h:
	* src/plparse/xmlparser.c:
	* src/plparse/xmlparser.h: Update from xine-lib-1.2 branch,
	with debug removed, and token buffer size increased to 32k

2007-10-01  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (on_tick):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_tick_send): More float/double problems,
	especially in the browser viewer, which was causing the seekbar
	to yo-yo with some streams

2007-10-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem-uri.c: (totem_uri_get_subtitle_for_uri),
	(totem_uri_get_subtitle_in_subdir), (totem_uri_get_subtitle_uri):
	Look for subtitles in the subtitles/ directory as well
	(Closes: #481032)

2007-09-26  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_set_state):
	* lib/totem-scrsaver.c: (totem_scrsaver_disable),
	(totem_scrsaver_enable), (totem_scrsaver_set_state):
	Fix crash when there's no screensaver objects, and add assertion
	guards in totem-scrsaver.c (Closes: #480558)

2007-09-25  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: Add audio/x-vorbis as used in
	http://www.play.cz/radio-7

2007-09-23  Bastien Nocera  <hadess@hadess.net>

	* src/totem-fullscreen.c: (totem_fullscreen_parent_window_notify):
	When an error occurs and we dismiss the error dialogue, don't hide
	the cursor if we're not in fullscreen
	* src/totem.c: (totem_action_seek), (seek_slider_released_cb):
	When a seek error occurs, reset the seeking so that the interface
	is ready to use again

2007-09-21  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/totem-python-module.c:
	(totem_python_module_init_python): Initialise PyGObject threads
	as soon as possible, or it could cause assertions when using
	threaded python code (See: #469852)

2007-09-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-fullscreen.c: (totem_fullscreen_set_cursor),
	(totem_fullscreen_motion_notify),
	(totem_fullscreen_parent_window_notify): Only show the popup on
	motion notifies if the window is active, show the cursor on the
	video window when it's not active, or when it becomes active
	(Closes: #471381)

2007-09-19  Bastien Nocera  <hadess@hadess.net>

	* data/fullscreen.ui:
	* src/totem-fullscreen.c: (totem_fullscreen_popup_timeout_add),
	(totem_fullscreen_is_volume_popup_visible),
	(totem_fullscreen_force_popup_hide), (totem_fullscreen_popup_hide),
	(totem_fullscreen_set_fullscreen), (totem_fullscreen_new):
	Remove the vol_lock, and check whether the popup is visible instead
	Force the volume scale to popdown when going out of fullscreen
	(Closes: #477529, #452245)

2007-09-18  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_construct):
	Create the cursor before setting the playback state so the cursor can
	be set properly. Set the logo to be a play button when no autostart
	is used (Closes: #474059)

2007-09-17  Bastien Nocera  <hadess@hadess.net>

	* data/mozilla-viewer.ui:
	* data/totem.ui: Sliders should be at 0 when starting up

2007-09-14  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_class_init), (got_time_tick),
	(bacon_video_widget_get_property), (bacon_video_widget_seek):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_class_init), (bacon_video_widget_tick_send),
	(bacon_video_widget_play), (bacon_video_widget_seek),
	(bacon_video_widget_seek_time), (bacon_video_widget_get_property),
	(bacon_video_widget_get_position),
	(bacon_video_widget_get_current_time):
	* src/backend/bacon-video-widget.h:
	* src/backend/baconvideowidget-marshal.list:
	* src/totem-video-thumbnailer.c: (capture_interesting_frame):
	* src/totem.c: (update_current_time): Update the xine-lib and
	GStreamer backends to use doubles for the current fraction position,
	to avoid loss of precision, fix PROP_POSITION being a gint64 when it
	was a double (or rather float as before), fix _get_position in the
	xine-lib backend to not return value > 1.0

	In the xine-lib backend, when seeking by fraction, try to seek by time
	instead, gives better precision for most demuxers (Closes: #304308)

2007-09-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_got_metadata_event): Patch from
	Diego Escalante Urrelo <diegoe@gnome.org> to make the
	screenshot button sensitive only when we can get frames from
	the stream (Closes: #352142)

2007-09-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: Make the basic plugin handle
	autoplay and controller as used in QuickTime (Closes: #476256)

2007-09-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemNarrowSpacePlugin.cpp: make sure mPlugin
	is valid as pointed out by Christian Persch (Helps: #474841)

2007-09-10  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer-commands.h: Rename this...
	* browser-plugin/totem-plugin-viewer-constants.h: ...to that
	and add the states to those constants

	* browser-plugin/Makefile.am:
	* browser-plugin/org_gnome_totem_PluginViewer.xml:
	* browser-plugin/totempluginviewer-marshal.list:
	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h:
	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_class_init), (totem_embedded_set_state),
	(totem_embedded_set_logo_by_name), (totem_embedded_open_internal),
	(totem_embedded_play), (totem_embedded_pause),
	(totem_embedded_stop), (on_play_pause), (on_got_redirect),
	(on_video_button_press_event), (on_eos_event), (on_error_event),
	(on_tick), (totem_embedded_construct), (main):
	Add a Tick signal to the viewer, and catch it in the plugin. It
	gets the Time, Duration and state of the player
	Remember the length of a stream

	* browser-plugin/totemNarrowSpacePlugin.cpp:
	* browser-plugin/totemNarrowSpacePlugin.h: implement
	GetRate, GetMaxBytesLoaded, GetMovieSize, GetTime and GetDuration
	(Helps: #474841)

2007-09-08  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/plparser.symbols:
	* src/plparse/totem-pl-parser.h:
	* src/plparse/totem-pl-parser-private.h:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_resolve_url),
	(totem_pl_parser_parse_duration): Rename
	totem_plparser_parse_duration to totem_pl_parser_parse_duration
	to match the other functions,
	Make totem_parser_resolve_url public as totem_pl_parser_resolve_url

	* src/backend/video-utils.c:
	* src/backend/video-utils.h: Remove the broken
	totem_resolve_relative_link ()

	* browser-plugin/totem-plugin-viewer.c: (on_got_redirect),
	(entry_parsed):
	* src/plparse/test-parser.c: (test_resolve_real), (test_resolve),
	(test_duration_real), (main):
	* src/plparse/totem-pl-parser-pls.c:
	(totem_pl_parser_add_pls_with_contents):
	* src/plparse/totem-pl-parser-smil.c: (parse_smil_entry):
	* src/plparse/totem-pl-parser-wm.c: (parse_asx_entry),
	(parse_asx_entryref):
	* src/plparse/totem-pl-parser-xspf.c: (parse_xspf_track):
	* src/totem-playlist.c: (totem_playlist_entry_parsed):
	* src/totem.c: (on_got_redirect):
	Changes to use new APIs
	Add test from the Apple site to the test parser

	(Closes: #474842)

2007-09-05  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (totem_cd_detect_type_with_url):
	Use the canonical device when giving the cdda MRL
	* src/plparse/totem-pl-parser-media.c: (totem_pl_parser_add_block):
	Don't leak the error if there's a problem

2007-09-04  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse_date):
	* src/plparse/totem-pl-parser.h: Add totem_pl_parser_parse_date
	to parse dates from RSS feeds, nicked from Rhythmbox

2007-09-04  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/Makefile.am:
	* src/plparse/totem-pl-parser-podcast.c: (totem_pl_parser_add_rss),
	(totem_pl_parser_add_itpc), (totem_pl_parser_add_atom):
	* src/plparse/totem-pl-parser-podcast.h:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_init),
	(totem_pl_parser_parse_internal):
	* src/plparse/totem-pl-parser.h: Add stubs for RSS, Atom, and ITPC
	podcasts

2007-09-04  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-private.h:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_class_init),
	(totem_pl_parser_playlist_end), (totem_pl_parser_init),
	(totem_pl_parser_add_url_valist):
	* src/plparse/totem-pl-parser.h: Change the API for the start and
	end of playlist, so we can pass additional data as part of the
	playlist start

	* configure.in: up the library version after yet another API breakage

	* src/plparse/totem-pl-parser-pla.c: (totem_pl_parser_add_pla):
	* src/plparse/totem-pl-parser-pls.c:
	(totem_pl_parser_add_pls_with_contents): Change to reflect new API

	* src/plparse/totem-pl-parser-wm.c: (parse_asx_entry),
	(parse_asx_entries), (totem_pl_parser_add_asx): Ditto, Don't pass the
	playlist title for entries, interested apps can use the
	playlist-started signal instead

	* src/plparse/test-parser.c: (playlist_started), (playlist_ended),
	(test_parsing), (main): Ditto, and add --g-fatal-warnings support

2007-09-03  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/mythtv/totem-mythtv.c: (list_recordings),
	(totem_mythtv_plugin_init): Also ignore empty descriptions, as
	opposed to a NULL string, update IP for my new install (I really
	new to write a config dialog)

2007-09-02  Bastien Nocera  <hadess@hadess.net>

	* src/totem-uri.c: (totem_add_files): Handle the old path not
	being accessible

2007-09-02  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/idl/totemICone.idl: Mark the attributes
	as readonly as they should be
	* browser-plugin/totemConePlugin.cpp: Patch from Christian Persch
	<chpe@gnome.org> to add stubs for the main totemConePlugin object
	(Helps: 462544)

2007-09-02  Christian Persch  <chpe@gnome.org>

	* src/Makefile.am: Fix non-srcdir builds. Bug #472955.

2007-09-01  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: Don't call out to the
	viewer when it's not started yet

2007-08-31  Bastien Nocera  <hadess@hadess.net>

	* MAINTAINERS: Updated

2007-08-31  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Fix Cone disabled message, it should say disabled...

	* src/totem-uri.c: (totem_get_volume_for_media),
	(totem_is_special_mrl): Fix totem_is_special_mrl, as a file:/// URI
	has a volume, but isn't so special, make totem_is_special_mrl static,
	we're not using it anywhere else, Only get the volume monitor when
	we really need it

	* src/totem-uri.h: remove totem_is_special_mrl()

	* src/totem.c: (totem_action_eject), (totem_action_remote): Close the
	currently played item, and free it before we remove items from
	the playlist (in the eject's callbacks), _set_mrl_and_play with a NULL
	MRL means nothing

2007-08-31  Bastien Nocera  <hadess@hadess.net>

	* src/disc-test.c: (main): Print the URL that we detected from
	the device, for DVD and VCDs

	* src/backend/bacon-video-widget-xine.c: (bacon_video_widget_init),
	(setup_config), (bacon_video_widget_can_play),
	(bacon_video_widget_get_mrls): Remove CDDA playback altogether,
	don't say we have VCD support if we only have the old VCD plugin,
	Fake the DVD MRLs in _get_mrls so that we have the device in the
	MRL

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_can_play), (bacon_video_widget_get_mrls):
	Handle VCD MRLs with a device in the MRL, Remove CDDA support

	* src/plparse/totem-disc.c: (totem_cd_detect_type_with_url):
	Use the mountpoint in the MRL for the device when we have it
	available, so that we can look for the volume for that path

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse_with_base):
	Return an error when we get invalid input

	* src/totem-menu.c: (add_device_to_menu), (on_movie_menu_select):
	Don't set the activation_uri data on the menu item, we're not
	using it
	Don't forget to reset ->drives_changed to avoid
	rebuilding the devices menu each time we open the menuâ¢

	* src/totem-playlist.c: (totem_playlist_compare_with_volume):
	* src/totem-playlist.h: Remove totem_playlist_clear_with_prefix, not
	using it anymore, use totem_get_volume_for_media in
	totem_playlist_clear_with_gnome_vfs_volume

	* src/totem-uri.c: (totem_get_volume_for_uri),
	(totem_get_mountpoint_for_dvd), (totem_get_mountpoint_for_vcd),
	(totem_get_volume_for_media), (totem_is_special_mrl),
	(totem_action_on_unmount):
	* src/totem-uri.h: Remove totem_is_media and add a
	totem_get_volume_for_uri so that we know what to umount when using
	the eject menu item

	* src/totem.c: (totem_action_eject),
	(totem_action_load_media_device), (totem_action_open_files_list),
	(totem_action_remote), (update_media_menu_items):
	Use the gnome-vfs volume when ejecting the device, so that we
	work for more than just the "special" media, and use gnome-vfs'
	eject functionality
	Remove CDDA handling
	Use crafted MRLs to playback DVD and VCD, as they only give us one
	MRL anyway

	* configure.in: Disable the Cone plugin build for now, as the
	Javascript stubs aren't written (Closes: #472226)

2007-08-31  Bastien Nocera  <hadess@hadess.net>

	* data/totem.ui: Make sure the volume widget is disabled on
	startup so that the volume widget can't be popped up at startup,
	Fixes a critical warning leaving enter pressed on startup

2007-08-31  Bastien Nocera  <hadess@hadess.net>

	* src/totem-interface.c: (link_button_clicked_cb): Escape the URI
	before using it in a shell, otherwise the fragment ends up being
	a comment, and it's not being used

2007-08-29  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemConePlugin.cpp: Add the application/vlc
	mime-type to the Cone plugin (Closes: #469568)

2007-08-29  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/Makefile.am:
	* browser-plugin/idl/Makefile.am:
	* browser-plugin/idl/totemICone.idl:
	* browser-plugin/idl/totemIConeAudio.idl:
	* browser-plugin/idl/totemIConeInput.idl:
	* browser-plugin/idl/totemIConePlaylist.idl:
	* browser-plugin/idl/totemIConeVideo.idl:
	* browser-plugin/totemConePlugin.cpp:
	* browser-plugin/totemConePlugin.h:
	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPluginGlue.h:
	* configure.in: Add the Cone plugin, a plugin to mimic the
	VLC plugin, write IDL files from the web developers 
	documentation available on their site (Helps: #462544)

	* browser-plugin/totemBasicPlugin.h:
	* browser-plugin/totemComplexPlugin.h:
	* browser-plugin/totemGMPError.h:
	* browser-plugin/totemGMPPlugin.h:
	* browser-plugin/totemMullYPlugin.h:
	* browser-plugin/totemNarrowSpacePlugin.h:
	Fix some includes #ifdef

2007-08-29  Philip Withnall  <pwithnall@svn.gnome.org>

	Update svn:ignore properties.

2007-08-28  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: Add application/sdp for Real and Quicktime
	Session Description Protocol for multicast streaming (Helps: #426657)

2007-08-28  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add application/x-netshow-channel as a
	supported mime-type
	* src/plparse/totem-pl-parser-wm.c:
	(totem_pl_parser_add_asf_parser): Make NSC files unhandled by the
	playlist parsers, as GStreamer is supposed to handle it
	(Helps: #350595)

2007-08-28  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* browser-plugin/totem-plugin-viewer.c:
	  Fix compile.

2007-08-27  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-smil.c: (parse_smil_entry): Add
	support for the author, "dur", "clip-begin", abstract, and copyright
	attributes of SMIL (Closes: #470875)

2007-08-27  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/org_gnome_totem_PluginViewer.xml:
	Add SetVolume function

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_play),
	(totem_embedded_set_volume), (property_notify_cb_volume):
	Return an error if _play doesn't a URI to chew on,
	implement _set_volume()

	* browser-plugin/totemComplexPlugin.cpp:
	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h: Implement SetVolume in the
	base class and in the Complex plugin, Implement SetSource
	in the Complex plugin and make SetSrc in the base class
	request the stream (Helps: #470876)

2007-08-27  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-pls.c:
	(totem_pl_parser_add_pls_with_contents): Don't try to parse
	entries that have -1 as the length, it means they've been
	tagged as streams (Closes: #437934)
	* src/plparse/totem-pl-parser-wm.c: (parse_asx_entries):
	Minor cleanup, the new XML parser is case-unsensitive

2007-08-27  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-wm.c: (parse_asx_entry):
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_init):
	* src/plparse/totem-pl-parser.h: Add support for the abstract,
	copyright, author and moreinfo properties for ASX playlists
	(Closes: #469576)

2007-08-27  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-qt.c:
	(totem_pl_parser_add_quicktime_metalink): Add support
	for the autoplay property

2007-08-27  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (on_play_pause),
	(popup_menu_position_func), (popup_menu_over_arrow),
	(on_popup_button_toggled), (on_popup_button_button_pressed),
	(on_video_button_press_event), (totem_embedded_construct):
	* data/mozilla-viewer.ui:

	Add a toggle button to the control bar that shows the right-click
	menu when toggled (Closes: #439105)

	Fix the button-press-event handler eating events thus preventing
	the popup menu to popdown

2007-08-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (treeview_row_changed),
	(totem_playlist_get_playing):
	* src/totem-playlist.h:
	* src/totem.c: (playlist_changed_cb): Fix activation (adding to
	the playlist, switching opened files, etc.) when 2 of the items in
	the playlist have the same MRL, see bug for details (Closes: #364311)

2007-08-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem-fullscreen.c: (totem_fullscreen_parent_window_notify),
	(totem_fullscreen_new): Patch from Sunil Mohan Adapa
	<sunilmohan@gnu.org.in> to show the cursor when an error dialogue
	pops up (Closes: #439269)

2007-08-26  Bastien Nocera  <hadess@hadess.net>

	* src/backend/Makefile.am:
	* src/backend/bacon-video-widget-xine.c: (xine_event_message),
	(add_auth_to_uri), (bacon_video_widget_open_with_subtitle):
	Patch from Dmitri Fedortchenko <zeraien@gmail.com> to make
	the backend try to get authentication information from the
	GNOME keyring when it gets a permission denied on HTTP.
	(Closes: #418316)

2007-08-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_entry_parsed):
	We ignore 0-length items in playlists, they're usually just banners
	(Closes: #441702)

2007-08-26  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (entry_parsed):
	* src/plparse/plparser.symbols:
	* src/plparse/test-parser.c: (test_duration_real), (test_duration),
	(main):
	* src/plparse/totem-pl-parser.c: (totem_plparser_parse_duration):
	* src/plparse/totem-pl-parser.h:
	Move totem_embedded_parse_duration from the plugin viewer to the
	playlist parser, add test cases in test-parser, move the PLS
	parsing to the be last one, as it's the less restrictive and sscanf
	is dumb (Closes: #467408)

2007-08-26  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/plugins/mythtv/*: Add the first pass at a MythTV plugin,
	only shows recordings, and has hard-coded server

2007-08-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (drop_cb), (button_release_cb),
	(drag_end_cb), (treeview_row_changed), (init_treeview),
	(totem_playlist_add_one_mrl): Add support for dropping files
	at a specific place in the playlist tree (Closes: #469810)

2007-08-25  Bastien Nocera  <hadess@hadess.net>

	* data/totem.ui:
	* src/totem-preferences.c: (totem_setup_preferences):
	Remove work-around for bug 470243 and add the CellRenderer to
	the .ui file instead

2007-08-25  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (totem_setup_preferences): 
	Block the signal from the "enable viz" toggle to avoid asking
	twice if the user really wants to enable visualisations, and
	answers yes the first time asked (Closes: #469300)

2007-08-25  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (totem_setup_preferences):
	Work-around no visuals showing up in the visuals combo box, see
	http://bugzilla.gnome.org/show_bug.cgi?id=470243 for details

2007-08-25  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: Add audio/x-sbc as used by bluez-gnome
	for the SBC decoder

2007-08-25  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: Patch from Sebastien Bacher
	<seb128@ubuntu.com> to add audio/ogg as a supported mime-type
	(Closes: #469525)

2007-08-25  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (skip_forward_action_callback),
	(skip_backwards_action_callback):
	* src/totem.c: (totem_seek_time_rel), (totem_action_seek_relative),
	(totem_action_seek_time), (totem_action_remote),
	(totem_action_handle_key_release), (totem_action_handle_seek),
	(totem_action_handle_key_press), (totem_action_handle_scroll):
	* src/totem.h: Clean up the seek to time functions, and don't
	set the statusbar or the full screen label as seeking when
	there's no MRL loaded (Closes: #469413)

2007-08-25  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: Patch from the Cygwin Ports maintainer to make
	the nautilus extension compilable under Cygwin (Closes: #470011)

2007-08-25  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_construct):
	Patch from Jaap A. Haitsma <jaap@haitsma.org> the plugin viewer to
	show an icon for the about dialogue (Closes: #470019)

2007-08-23  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_free):
	Don't umount CDs/DVDs when we're freeing the cache, gnome-vfs will
	eject them (Closes: #469636)

2007-08-22  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/Makefile.am:
	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_set_state),
	(totem_embedded_construct): Inhibit the screensaver when playback is
	ongoing (Closes: #425469)

2007-08-22  Sebastien Bacher  <seb128@ubuntu.com>

	* src/plugins/screensaver/totem-screensaver.c:
	(totem_screensaver_update_from_state), (impl_activate),
	(impl_deactivate): stop the screensaver when playing, not only when 
	the fullscreen mode is used (Closes: #425473)

2007-08-21  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/media-player-keys/media-player-keys.totem-plugin.in:
	Make the media player keys plugin be builtin, caused by GKeyFile
	thinking "True" is different from "true", see
	http://bugzilla.gnome.org/show_bug.cgi?id=468882

2007-08-21  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_parse_duration): Add support for PLS' duration
	format (just the number of seconds)

2007-08-21  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-pls.c:
	(totem_pl_parser_add_pls_with_contents): Add support for the duration
	metadata being pushed from .pls files

2007-08-21  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_play),
	(on_play_pause), (totem_embedded_parse_duration): Tweak the 
	duration parsing so that items < 1 second in length show up
	as 1 second in length. Stop the button glow whenever we click
	the play button

2007-08-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (drop_cb), (totem_playlist_add_mrl):
	* src/totem.c: (totem_action_drop_files):

	Fix parsing of drops from web browsers, broken since
	totem_create_full_path was changed to return NULL if the path passed
	was already a URI (Closes: #468524)

	Fix the playlist error message not showing the playlist URI or name

	Don't use fallback by default, so we can set the item "display name"
	when falling back ourselves

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse_internal):
	The default return value is unhandled, as if we don't even set 
	a retval, then that's because we don't know how to handle the
	item

	* src/plparse/totem-pl-parser-wm.c: (parse_asx_entry),
	(parse_asx_entryref): When we push playlist items, we're successful,
	so return the value that shows this

2007-08-20  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_parse_duration):
	* src/plparse/totem-pl-parser-lines.c:
	(totem_pl_parser_parse_ram_url):
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_init):
	* src/plparse/totem-pl-parser.h: Add starttime and endtime support
	to RAM files parsing

2007-08-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-interface.c: (link_button_clicked_cb),
	(totem_interface_error_with_link):
	* src/totem-interface.h:
	* src/totem.c: (totem_action_load_media): Patch from Philip Withnall
	<pwithnall@svn.gnome.org> to enhance the "DVD plugin missing" error
	messages, and link to the website for help (Closes: #439550)

2007-08-19  Jens Granseuer  <jensgr@gmx.net>

	* src/totem-interface.c: (totem_interface_boldify_label),
	(totem_interface_italicise_label): declare variables at the
	beginning of code blocks. Fixes compilation with gcc 2.x
	(Closes: #468181)

2007-08-18  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_open_files_list): Fix the playback
	not starting when using "totem dvb:"

2007-08-18  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget.h: move MEDIA_TYPE_DVB to ...
	* src/plparse/totem-disc.c: (totem_cd_get_human_readable_name):
	* src/plparse/totem-disc.h: ... totem-disc. It's not a disc, but
	it's a media type. Fixes a crash when trying to play "dvb:" with
	the GStreamer backend

	* src/plparse/totem-pl-parser-private.h:
	* src/plparse/totem-pl-parser-xspf.c:
	(totem_pl_parser_parse_xml_file):
	* src/plparse/totem-pl-parser.c: Move
	totem_pl_parser_parse_xml_file to the xspf parser file, it's the
	only thing using it, Fixes compilation

2007-08-18  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_tick_send): Another case where xine-lib
	forces us to calculate the current position ourselves, the
	decoder might think that the position is to the end, when
	the file isn't seekable, but the time and positions are correct
	and changing (test by streaming an AVI file remotely)

============ Version 2.19.90

2007-08-17  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.19.90

2007-08-17  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_pad_pixbuf_for_size),
	(totem_embedded_open_internal): Fix the brain-dead code that made
	logos invisible, add whether to start playback to the _open_internal
	debug output

2007-08-17  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_open_internal),
	(totem_embedded_open_playlist_item), (on_got_redirect),
	(on_eos_event): Set the glow when we open a new item, but shouldn't
	start playing, as when autostart is disabled,
	Replace a few _open_internal followed by _play with _open_internal
	with start_play set, so we can set the glow if we don't start playing
	* data/mozilla-viewer.ui: Set the default sensitivity of the seekbar
	to be FALSE

2007-08-17  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_tick_send): Another xine-lib crappiness, it
	doesn't update the current_position when the file isn't seekable,
	so we have to fake it from the current_time (Closes: #436092)

2007-08-17  Bastien Nocera  <hadess@hadess.net>

	* src/totem-fullscreen.c: (totem_fullscreen_new): Fix is-active
	property connection, it was completely wrong

2007-08-17  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_open_internal), (totem_embedded_play),
	(totem_embedded_open_uri), (totem_embedded_open_stream),
	(totem_embedded_open_playlist_item),
	(totem_embedded_set_local_file), (on_got_redirect), (on_eos_event):
	The heuristics for totem_embedded_open_internal actually starting
	play suck, so we pass that info on from the caller, but we should
	do better than that (open should play...)
	Fixes files now cached locally starting to play straight away

2007-08-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_set_uri),
	(totem_embedded_set_local_cache), (on_got_redirect): re-add the
	stream_uri, that's what it's there for. When setting a local file
	cache, remember the original URI, so we can resolve redirects
	against that, rather than the local file (Closes: #345328)

2007-08-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: Only go "audioonly" if the
	controller is shown, even if we're smaller than the minimum
	size (Closes: #424784)

2007-08-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_open_playlist_item),
	(totem_embedded_parse_duration), (entry_parsed):
	parse the starttime as passed on by the playlists, and seek
	to that time straight after having opened the playlist item
	if need be (Closes: #401049)

2007-08-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPPlugin.cpp: Support application/asx
	for the benefit of [http://www.yle.fi/eurovision/main.php?id=2034]
	* src/plparse/totem-pl-parser-wm.c: (parse_asx_entry):
	Push starttime from ASX files to the applications

2007-08-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (on_error_event):
	Don't skip past the last unplayable item in a playlist, otherwise
	we might end up playing all the files in a loop, even though we're
	not repeating

2007-08-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (skip_unplayable_stream),
	(on_error_event), (on_buffering), (totem_embedded_construct):
	Skip to the next stream if the current one has an error in an
	idle, so that we don't hang for some sources

	Also skip unplayable streams if we don't have repeat on, as we
	don't have a good way of telling unplayable streams from other
	ones (Closes: #359048)

	Connect to the buffering signal, but don't print anything, useful
	for debugging

2007-08-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_open_playlist_item), (on_eos_event),
	(on_error_event), (totem_pl_item_free),
	(totem_embedded_clear_playlist), (totem_embedded_parse_duration),
	(entry_parsed):
	
	Store the playlist items in a struct, with associated information

	Parse (naively) duration information from the playlist parser

	When an error occurs during playback, and the file to play was marked
	as "short" (less than 60 seconds), skip to the next item in the
	playlist, so that unsupported "header" (adverts) are skipped

	(Closes: #358277)

2007-08-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_pad_pixbuf_for_size): Fix an
	assertion when setting the startup logo when the
	logo is bigger than the target destination
	(Closes: #446858)

2007-08-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/org_gnome_totem_PluginViewer.xml:
	Add SetLocalCache method
	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_set_local_cache), (on_eos_event),
	(totem_embedded_construct):
	Remove unused stream_uri struct member

	Implement SetLocalCache that replaces the
	->current_uri with a file in the local cache

	Try to use the file in the local cache when reaching
	EOS and having played from the browser stream, it's
	better than doing nothing

	Don't show a warning on startup when the plugin is hidden

	* browser-plugin/totemPlugin.cpp:
	Remove warning about
	totem_pl_parser_can_parse_from_filename() reading
	the whole file in memory, it mmaps it

	Call SetLocalCache when we've been streaming the file
	from the browser already

	(Closes: #428833)

2007-08-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/org_gnome_totem_PluginViewer.xml:
	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_save_volume), (property_notify_cb_volume):
	* browser-plugin/totemPlugin.cpp: Revert "SaveState" patch
	and save the volume in GConf as soon as it's changed in the
	UI (Closes: #452063)

2007-08-15  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Update the gnome-vfs requirements to get
	gnome_vfs_uri_resolve_symbolic_link in the library
	(Closes: #467071)

2007-08-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/org_gnome_totem_PluginViewer.xml:
	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_save_state):
	* browser-plugin/totemPlugin.cpp: Call SaveState just before
	killing the plugin, so that it can save some details (such as the
	volume), does nothing yet though (Helps: #452063)

2007-08-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemNarrowSpacePlugin.cpp:
	* browser-plugin/totemNarrowSpacePlugin.h:
	* browser-plugin/totemPlugin.cpp: Implement GetPluginStatus so that
	the .Mac galleries work, make sure all parts of the plugin advertise
	the same version of QuickTime (Closes: #464519)

2007-08-15  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_callback_connect): Patch from Jan Arne Petersen
	<jpetersen@jpetersen.org> to fix the fullscreen seekbar not working
	(Closes: #462286)

2007-08-15  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-lines.c:
	(totem_pl_parser_append_path), (totem_pl_parser_add_m3u):
	Escape the relative paths found in m3u files, as they're filenames
	not URIs (Closes: #461951)

2007-08-15  Bastien Nocera  <hadess@hadess.net>

	* src/totem-uri.c: (totem_uri_get_subtitle_uri): Remove
	the "%.*s" construct, it's completely broken with wide-characters
	and non-UTF8 ones

2007-08-15  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): Some systems seem to like it when GTypes
	are initialised early on (Closes: #441803)

2007-08-13  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_add_url_valist):
	Avoid possible crashes in applications by trying to convert non-UTF8
	text to UTF-8 before passing it on to the application

2007-08-13  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemNarrowSpacePlugin.cpp: Patch from Markus Golser
	to add video/x-m4v as a supported mime-type for the NarrowSpace plugin

2007-08-13  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/test-parser.c: (test_resolve): Add another pattern
	to test
	* src/plparse/totem-pl-parser-wm.c: (parse_asx_entry): Ignore 
	"showwhilebuffering" entries, as we don't show anything whilst
	buffering
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_remove_filename),
	(totem_pl_resolve_url): Remove parameters and fragment IDs from URLs
	when getting the base

2007-08-12  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c:
	(totem_pl_parser_can_parse_from_data):
	Add more debug when a mime-type isn't known

	* src/totem.h: Add patch from Ed Catmur <ed@catmur.co.uk>
	to avoid hangs with specific versions of GCC and a set of
	optimisations (Closes: #463730)

2007-08-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (on_recent_file_item_activated):
	* src/totem-playlist.c: (totem_playlist_set_waiting_cursor),
	(totem_playlist_unset_waiting_cursor), (drop_cb),
	(totem_playlist_add_files), (totem_playlist_add_mrl_with_cursor),
	(totem_playlist_add_mrl):
	* src/totem-playlist.h:
	* src/totem-session.c: (totem_session_restore):
	* src/totem.c: (totem_action_drop_files),
	(totem_action_open_files_list), (totem_action_remote):
	When adding items to the playlist, set the cursor waiting on the
	outermost loop, so that we don't set it once per file added to
	the playlist (and get flicker when doing "totem ~/Movies/*")

2007-08-10  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/Makefile.am: Don't delete the glow button when
	cleaning up (Closes: #465499)

2007-08-10  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	  Close audio device again after initial probing. Playbin will open it
	  again later if and when needed. Closes: #465095. Saves: kittens. 

2007-08-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-uri.c: (totem_uri_get_subtitle_uri): Add a check
	for a non-NULL subtitle

2007-08-10  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-glow-button.c: (totem_glow_button_glow),
	(totem_glow_button_expose), (totem_glow_button_enter),
	(totem_glow_button_leave), (totem_glow_button_class_init),
	(totem_glow_button_set_timeout), (totem_glow_button_set_glow):
	Adapted patch from Sunil Mohan Adapa <sunilmohan@gnu.org.in> to
	speed-up the button glow when the pointer enters in the play
	button (Closes: #458879)

2007-08-10  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/Makefile.am:
	* browser-plugin/test-glow-button.c:
	Add a test program for the glow button widget, to ease debugging

2007-08-09  Bastien Nocera  <hadess@hadess.net>

	* data/totem.1:
	* totem.spec.in: Fix the URL to Totem's webpage (Closes: #463602)

2007-08-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: Patch from Jan Arne Petersen
	<jpetersen@jpetersen.org> to fix the sidebar accelerator conflicting
	with the sound menu's one (Closes: #457386)

2007-08-09  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_construct):
	Rephrase slightly so as to remove "startup" from the string

	* src/plugins/media-player-keys/media-player-keys.totem-plugin.in:
	* src/plugins/properties/movie-properties.totem-plugin.in:
	* src/plugins/screensaver/screensaver.totem-plugin.in:
	* src/plugins/skipto/skipto.totem-plugin.in:
	Remove translations from the builtin plugins, as they're not
	visible in the UI anyway

	* src/totem-options.c: Add a hint for translators

	(Closes: #464453)

2007-08-07  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemNarrowSpacePlugin.cpp: Update version of
	the Quicktime-compatible plugin to 7.2.0 to be able to use
	the new .Mac galleries

2007-08-05  Jonathan Matthew  <jonathan@kaolin.wh9.net>

	* src/plparse/totem-pl-parser-private.h:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_write_string),
	(totem_pl_parser_write_buffer):
	Add a function to write a sized buffer, use it to implement
	totem_pl_parser_write_string.

	* src/plparse/totem-pl-parser-pla.c: (totem_pl_parser_write_pla),
	(totem_pl_parser_add_pla):
	* src/plparse/totem-pl-parser-pla.h:
	Implement playlist writer for iRiver PLA format.  Fix a few issues in
	the reading code too.
	
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_write_with_title):
	* src/plparse/totem-pl-parser.h:
	Use iRiver PLA format writer.  (Closes: #347584)

2007-08-04  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	* src/backend/bacon-video-widget-gst-0.10.c:
	  Bump GStreamer core and -base requirements to 0.10.12 and remove
	  a bunch of hacks that were added in 2.17.x to avoid a requirement
	  on the new API back then (note: the marker prefix of the codec
	  install detail string was also wrong in that code, we wrongly set it
	  to 'gstreamer.net' instead of 'gstreamer', which shouldn't matter
	  though since no one ever checked that anyway).

2007-08-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_setup_window): Make the default
	window size bigger than the minimum widget size as it
	used to be on first startup (Closes: #461536)

============ Version 2.19.6

2007-07-30  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.19.6
	* src/plugins/skipto/Makefile.am: Fix distchecking

2007-07-30  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_finalize),
	(totem_embedded_set_state), (totem_embedded_set_pp_state),
	(totem_embedded_open_internal), (on_fullscreen1_activate),
	(totem_embedded_toggle_fullscreen),
	(totem_embedded_on_fullscreen_exit), (on_tick),
	(property_notify_cb_volume), (on_seek_start), (cb_on_seek),
	(totem_embedded_action_volume_relative),
	(totem_embedded_handle_key_press),
	(totem_embedded_key_press_event), (totem_embedded_construct):
	* data/mozilla-viewer.ui:
	* src/Makefile.am:
	* src/totem-fullscreen.c: (totem_fullscreen_new),
	(totem_fullscreen_set_video_widget):
	* src/totem-fullscreen.h:
	* src/totem.c: (main): Patch from Sunil Mohan Adapa
	<sunilmohan@gnu.org.in> to add a fullscreen option to the
	browser plugin (Closes: #354181)

2007-07-27  Frederic Crozat  <fcrozat@mandriva.com>

	* configure.in: Bump shared-mime-info required version.
	* browser-plugin/totemBasicPlugin.cpp: Add support for audio/ogg
	and video/ogg.

2007-07-24  Jonathan Matthew  <jonathan@kaolin.wh9.net>

	* src/plparse/Makefile.am:
	* src/plparse/totem-pl-parser-pla.c: (totem_pl_parser_add_pla):
	* src/plparse/totem-pl-parser-pla.h:
	* src/plparse/totem-pl-parser.c:
	Add read-only support for iRiver PLA playlist format.  From #347584.

2007-07-23  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/skipto/totem-skipto-plugin.h: Add another
	missing file

2007-07-23  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: Remove unused file

2007-07-23  Bastien Nocera  <hadess@hadess.net>

	* data/totem.ui: Use the stock_contrast icon, as shipped by the
	gnome icon theme (Helps: #454244)

2007-07-23  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/skipto/*: upd for the changed below

	* src/plugins/totem-plugin.c: (totem_plugin_load_interface):
	* src/plugins/totem-plugin.h: Add totem_plugin_load_interface
	to allow plugins to load their interfaces from their own directory

	* src/totem-interface.c: (totem_interface_load),
	(totem_interface_load_with_full_path):
	* src/totem-interface.h: Implement helper functions to load GtkBuilder
	UI files

	* src/totem-statusbar.h:
	* src/totem-time-label.h: Remove unnecessary glade helper functions

	This change and above from a patch by Sunil Mohan Adapa
	<sunilmohan@gnu.org.in> (Helps: #454244)

	* src/totem-object.c: (totem_object_class_init),
	(totem_object_get_property), (totem_get_current_time): Fix
	totem_get_current_time to return the current time, and not the length
	of the stream, add a "current-time" property as well

2007-07-21  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-glow-button.c: (totem_glow_button_expose):
	Patch from Sunil Mohan Adapa <sunilmohan@gnu.org.in> to avoid
	the button not glowing when it's slightly clipped
	(Closes: #452069)

2007-07-18  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemBasicPlugin.cpp: Add support for FLV
	and NSV mime-types in the basic plugin
	* src/plugins/bemused/totem-bemused.c: (write_directory_listing):
	Fix the tiny memleak

2007-07-18  Christian Persch  <chpe@gnome.org>

	* browser-plugin/totemClassInfo.h:
	* browser-plugin/totemGMPPlaylist.cpp:
	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPluginGlue.cpp: Use C++-style casts. Bug #457081.

2007-07-13  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_thread): Don't forget to update the VFX
	state after opening it, fixes the visual effects showing up in the
	middle of video when using the browser plugin

2007-07-11  Christian Persch  <chpe@gnome.org>

	* configure.in: Bump gtk req. to 2.11.6.
	* src/totem.c: (totem_callback_connect): Port to new tooltips API.
	Bug #455655.

2007-07-10  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/bemused/bemused.totem-plugin: This is a generated file
	shouldn't be here

2007-07-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-object.c: (totem_get_playlist_length),
	(totem_get_playlist_pos), (totem_get_title_at_playlist_pos),
	(totem_get_short_title):
	* src/totem-playlist.c: (totem_playlist_get_title),
	(totem_playlist_get_current):
	* src/totem-playlist.h:
	* src/totem.c: (totem_get_nice_name_for_stream),
	(totem_action_set_playlist_index), (totem_action_remote),
	(totem_action_remote_set_setting),
	(totem_action_remote_get_setting), (totem_is_paused):
	* src/totem.h: Add a number of externally callable functions to
	allow the Bemused plugin to call

	* configure.in:
	* src/plugins/bemused/*: Add a Bemused Server plugin

2007-07-09  Bastien Nocera  <hadess@hadess.net>

	* data/fullscreen.glade:
	* data/mozilla-viewer.glade:
	* data/playlist.glade:
	* data/plugins.glade:
	* data/properties.glade:
	* data/totem.glade:
	* data/uri.glade: Re-add the .glade files, to be able to convert
	them if necessary

2007-07-09  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (on_preferences1_activate),
	(totem_embedded_construct):
	* data/mozilla-viewer.ui: Patch from Sunil Mohan Adapa
	<sunilmohan@gnu.org.in> to fix the UI loading, and related problems
	in the browser plugin viewer (Closes: #454638)

2007-07-05  Bastien Nocera  <hadess@hadess.net>

	* Load of files: Patch from Philip Withnall <pwithnall@svn.gnome.org>
	to use GtkBuilder instead of libglade (Closes: #450635)

2007-07-03  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/totem-uri.c: (totem_pictures_dir), (totem_add_default_dirs),
	(totem_add_pictures_dir): Use g_get_user_special_dir() instead of
	our copy of xdg_user_dir_lookup

2007-07-02  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* src/totem-private.h:
	* src/totem.c: (totem_action_set_mrl_with_warning),
	(volume_button_value_changed), (update_volume_sliders), (main): Use
	g_signal_handlers_block_by_func/g_signal_handlers_unblock_by_func
	instead of a custom lock (Closes #452616)

2007-06-29  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/fullscreen.glade:
	* data/totem.glade:
	* src/Makefile.am:
	* src/totem-fullscreen.*:
	* src/totem-private.h:
	* src/totem.c: (totem_action_exit), (window_state_event_cb),
	(update_mrl_label), (totem_action_set_mrl_with_warning),
	(update_seekable), (update_current_time), (update_volume_sliders),
	(seek_slider_pressed_cb), (seek_slider_changed_cb),
	(seek_slider_released_cb), (totem_action_remote),
	(on_mouse_click_fullscreen), (totem_action_handle_scroll),
	(totem_callback_connect), (video_widget_create), (main):
	Patch from Sunil Mohan Adapa <sunilmohan@gnu.org.in> to split
	the fullscreen popup code into a separate widget (Helps: #354181),
	Patch from Jan Arne Petersen <jpetersen@jpetersen.org> to share
	adjustments between fullscreen and windowed seekbars (Closes: #451912)

2007-06-28  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/tests/8.html: fix syntax error
	* browser-plugin/tests/9.html: add new test for bug #452069

2007-06-29  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* data/playlist.glade:
	* src/ev-sidebar.c: (ev_sidebar_destroy),
	(ev_sidebar_combobox_changed_cb), (ev_sidebar_init),
	(ev_sidebar_get_current_page), (ev_sidebar_get_iter_for_page_id),
	(ev_sidebar_set_current_page), (ev_sidebar_add_page),
	(ev_sidebar_remove_page): Use a default GtkComboBox instead of the
	custom button menu combination (Closes #397776)

2007-06-28  Christian Persch  <chpe@gnome.org>

        * src/totem.c:
        * src/totem.h:
        * src/totem-private.h:
        * src/backend/bacon-video-widget.h:
        * src/backend/bacon-video-widget-xine.c:
        * src/backend/bacon-video-widget-gst-0.10.c: Use double for the volume
        instead of integer. Bug #451856.

2007-06-28  Christian Persch  <chpe@gnome.org>

        * src/Makefile.am: Fix missing prototypes in totem-marshal.h. Bug #451854.

2007-06-28  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-wm.c: (parse_asx_entry),
	(parse_asx_entryref), (parse_asx_entries): Patch from
	Karel Kolman <kolmis@gmail.com> to handle ASX files with
	entryrefs without a parent entry (Closes: #450457)

2007-06-28  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_init): patch from Sunil Mohan Adapa
	<sunilmohan@gnu.org.in> to not mark the video widget as having
	no backing window (Helps: #354181)
	* src/totem-private.h:
	* src/totem.c: (main): Remove unused ->fsvolume widget

2007-06-28  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (cb_vol),
	(totem_embedded_construct), (totem_volume_create):
	* configure.in:
	* data/totem.glade:
	* src/Makefile.am:
	* src/bacon-volume.c:
	* src/bacon-volume.h:
	* src/totem-private.h:
	* src/totem.c: (totem_action_set_mrl_with_warning),
	(update_volume_sliders), (volume_button_value_changed),
	(popup_hide), (totem_callback_connect), (totem_volume_create),
	(main): Remove the BaconVolume widget, and use the GtkVolumeButton
	in the new GTK+ instead, use the scale button in fullscreen mode as
	well, make both volume buttons share the same GtkAdjustment,
	modified version of patch from Jan Arne Petersen <jpetersen@jpetersen.org>
	(Helps: #450635)

2007-06-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (totem_action_add_recent): fix valgrind error
	with a not-fully initialised GtkRecentData
	* src/totem.c: (window_state_event_cb): fix tests when more than
	one flag has changed

2007-06-27  Philip Withnall  <pwithnall@svn.gnome.org>

	* src/totem-menu.c: (totem_setup_recent):
	* src/totem-open-location.c: (totem_open_location_new): Convert to
	using gtk_recent_manager_get_default, as the per-screen constructor
	is now deprecated. (Closes: #449225)

2007-06-23  Gabor Kelemen  <kelemeng@gnome.hu>

	* src/totem.c: Use g_option_context_set_translation_domain to translate 
	program description in --help output. (Closes: #450167) 

2007-06-21  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem-menu.c: (show_controls_action_callback):
	* src/totem-options.c: (totem_options_process_late),
	(totem_options_process_early):
	* src/totem-options.h:
	* src/totem-private.h:
	* src/totem.c: (totem_action_save_state), (totem_action_exit),
	(totem_action_load_media), (totem_action_play_pause),
	(totem_action_pause), (window_state_event_cb),
	(totem_action_fullscreen_toggle), (show_controls),
	(video_widget_create), (main): Handle better having --fullscreen
	passed to the master program (Helps: #376149)

	* src/backend/bacon-video-widget-xine.c: (load_video_out_driver),
	(bacon_video_widget_realize), (xine_event),
	(bacon_video_widget_unrealize), (bacon_video_widget_show),
	(bacon_video_widget_hide), (show_vfx_update),
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_set_show_cursor),
	(bacon_video_widget_set_scale_ratio): Remove the video_window
	struct member, it was barely used. Fix the double-buffering on the
	widget being set/unset wrongly

2007-06-21  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_realize), (bacon_video_widget_expose_event),
	(parse_stream_info), (bacon_video_widget_set_logo_mode):
	Default to having a black background on the window, faster to clear,
	use double-buffering when in logo mode, or drawing the logo for
	audio-only files

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_draw_logo), (frame_output_cb),
	(bacon_video_widget_realize), (bacon_video_widget_expose),
	(show_vfx_update), (bacon_video_widget_set_logo_mode):
	same as for the GStreamer backend, but also tell xine-lib to draw
	where the sun doesn't shine (not in the visible area), so that
	it doesn't try to overwrite our logo when having played a video

	* src/backend/bacon-video-widget.h: make it a child of an eventbox
	so it has a backing window by default

	* data/totem.glade: Make the video vbox an event box, so it has
	a backing window
	* src/totem.c: (show_controls), (totem_setup_window),
	(playlist_widget_setup), (video_widget_create): Draw a nice black
	background, so that the video area appears black before the
	video widget is ready

2007-06-20  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/plparser.symbols: export totem_pl_resolve_url for
	use in the test parser
	* src/plparse/test-parser.c: (test_resolve_real), (test_resolve),
	(main): add tests for totem_pl_resolve_url, to make sure we don't
	regress bug #439041
	* src/plparse/totem-pl-parser.c: (totem_pl_resolve_url): Fix parsing
	of absolute URIs (Closes: #447598)

2007-06-20  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-glow-button.c:
	(totem_glow_button_do_expose), (totem_glow_button_glow),
	(take_screenshot), (totem_glow_button_expose),
	(totem_glow_button_map), (totem_glow_button_unmap),
	(totem_glow_button_class_init), (totem_glow_button_init),
	(totem_glow_button_set_glow), (totem_glow_button_get_glow):
	* browser-plugin/totem-glow-button.h:
	When the animations are disabled, only draw the button in the highest
	glowing state and stop. Stop drawing anything when the button is unmapped.
	(comments on #447363)

2007-06-20  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/Makefile.am:
	* browser-plugin/idl/Makefile.am:
	* configure.in: Patch from Andreas Hanke <andreas.hanke@gmx-topmail.de>
	to respect the MOZILLA_PLUGINDIR destination variable (Closes: #414457)

2007-06-18  Philip Withnall  <pwithnall@svn.gnome.org>

	Remove all .cvsignore files and update svn:ignore properties.
	(Closes: #448873)

2007-06-16  Jaap A. Haitsma  <jaap@haitsma.org>

	* src/totem-menu.c: 
	Add website to about dialog

2007-06-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/Makefile.am:
	* browser-plugin/totem-glow-button.[ch]:
	Add a "glow button" that will glow like the tasklist with urgency hint
	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_set_state),
	(totem_embedded_set_pp_state), (on_play_pause),
	(totem_embedded_construct), (totem_pp_create):
	* data/mozilla-viewer.glade: Make the play button glow when autostart
	is off so that users know that they need to click play to see something
	(Closes: #447363)

2007-06-15  Philip Withnall  <pwithnall@svn.gnome.org>

	* data/properties.glade:
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata):
	* src/backend/bacon-video-widget.h:
	* src/plugins/properties/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_reset),
	(bacon_video_widget_properties_update),
	(bacon_video_widget_properties_new): Patch from PrzemysÅaw Grzegorczyk
	<pgrzegorczyk@gmail.com> to add support for displaying MP3/Vorbis
	comment tags in the properties view. (Closes: #430984)

2007-06-12  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Fix distcheck by adding the test python and vala
	plugins to the allowed plugins
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_idle_signal): Fix the second file played in
	a playlist not having any ticks (current time not updated)
	(Closes: #445577)

2007-06-12  Philip Withnall  <pwithnall@svn.gnome.org>

	* src/totem-open-location.c: (totem_compare_recent_stream_items),
	(totem_open_location_new): Optimise list handling for recent items
	in "Open Location" (Closes: #446540)

2007-06-11  Philip Withnall  <pwithnall@svn.gnome.org>

	* bindings/python/totem.defs:
	* bindings/python/totem.override:
	* data/uri.glade:
	* src/Makefile.am:
	* src/totem-open-location.c: (totem_open_location_class_init),
	(totem_open_location_init), (totem_open_location_finalize),
	(totem_open_location_match), (totem_compare_recent_stream_items),
	(totem_open_location_get_uri),
	(totem_open_location_set_from_clipboard),
	(totem_open_location_new):
	* src/totem-open-location.h:
	* src/totem-private.h:
	* src/totem.c: (totem_action_load_media),
	(totem_open_location_destroy), (totem_open_location_response_cb),
	(totem_action_open_location): Move "Open Location" dialog to a
	separate widget and fix a Python binding compilation error
	(Closes: #394966, #446412)

2007-06-11  Philip Withnall  <pwithnall@svn.gnome.org>

	* src/Makefile.am: Fix compilation error due to Python bindings

2007-06-11  Philip Withnall  <pwithnall@svn.gnome.org>

	* Makefile.am:
	* bindings/Makefile.am:
	* bindings/python/Makefile.am:
	* bindings/python/override_common.c: (_helper_wrap_gobject_glist),
	(_helper_wrap_pointer_glist), (_helper_wrap_boxed_glist),
	(_helper_wrap_string_glist), (_helper_wrap_boxed_gptrarray),
	(_helper_unwrap_pointer_pylist), (_helper_unwrap_string_pylist):
	* bindings/python/override_common.h:
	* bindings/python/totem.defs:
	* bindings/python/totem.override:
	* bindings/vala/Makefile.am:
	* bindings/vala/totem.deps:
	* bindings/vala/totem.vala:
	* configure.in:
	* py-compile:
	* src/Makefile.am:
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_can_play), (bacon_video_widget_get_mrls):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_can_play), (bacon_video_widget_get_mrls):
	* src/backend/bacon-video-widget.h:
	* src/disc-test.c: (main):
	* src/plparse/totem-disc.c: (cd_cache_disc_is_cdda),
	(totem_cd_detect_type_from_dir), (totem_cd_detect_type_with_url),
	(totem_cd_get_human_readable_name):
	* src/plparse/totem-disc.h:
	* src/plparse/totem-pl-parser-media.c:
	(totem_pl_parser_add_directory), (totem_pl_parser_add_block):
	* src/plugins/Makefile.am:
	* src/plugins/sample-python/Makefile.am:
	* src/plugins/sample-python/sample-python.py:
	* src/plugins/sample-python/sample-python.totem-plugin.in:
	* src/plugins/sample-vala/Makefile.am:
	* src/plugins/sample-vala/sample-vala.totem-plugin.in:
	* src/plugins/sample-vala/totem-sample-vala-plugin.vala:
	* src/plugins/totem-plugin.h:
	* src/plugins/totem-plugins-engine.c: (totem_plugins_engine_load),
	(totem_plugins_engine_init),
	(totem_plugins_engine_garbage_collect),
	(totem_plugins_engine_shutdown), (load_plugin_module):
	* src/plugins/totem-python-module.c:
	(pyg_value_g_value_as_pyobject), (pyg_value_g_value_from_pyobject),
	(totem_python_module_init_python), (totem_python_module_load),
	(totem_python_module_unload), (totem_python_module_new_object),
	(totem_python_module_init), (totem_python_module_finalize),
	(totem_python_module_get_property),
	(totem_python_module_set_property),
	(totem_python_module_class_init), (totem_python_module_new),
	(run_gc), (totem_python_garbage_collect), (finalise_collect_cb),
	(totem_python_shutdown):
	* src/plugins/totem-python-module.h:
	* src/plugins/totem-python-plugin.c: (call_python_method),
	(check_py_object_is_gtk_widget), (impl_deactivate),
	(impl_activate), (impl_create_configure_dialog),
	(impl_is_configurable), (totem_python_object_init),
	(totem_python_object_finalize), (totem_python_object_class_init),
	(totem_python_object_get_type):
	* src/plugins/totem-python-plugin.h:
	* src/totem-object.c: (totem_remote_command_quark),
	(totem_remote_command_get_type), (totem_disc_media_type_quark),
	(totem_disc_media_type_get_type):
	* src/totem.c: (totem_action_load_media),
	(totem_action_load_media_device), (totem_action_play_media):
	* src/totem.h: Add support for Python and Vala plugins (Closes: #439557)

2007-06-11  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: Patch from <fta+bugzilla@sofaraway.org> to fix
	a missing symbol problem in the nautilus properties pages (Closes: #444564)

2007-06-06  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPPlugin.cpp: Some sites
	expect us to support application/x-ms-wms (Windows Media Skins) as well

2007-06-05  Gabor Kelemen  <kelemeng@gnome.hu>

	* browser-plugin/totem-plugin-viewer.c: Mark "Open with %s" string translatable
	(Closes: #443882)

2007-06-04  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key_press):
	Add support for XFree86 multimedia keys: Back, Forward,
	Open, Open URL, Eject, Save, Zoom In, Zoom out

2007-06-04  Philip Withnall  <pwithnall@svn.gnome.org>

	* src/plugins/totem-plugin-manager.c: (cursor_changed_cb),
	(plugin_manager_construct_tree): Prevent crash when using find on
	the plugins list (Closes: #441901)

2007-06-04  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_resolve_url):
	Use gnome_vfs_uri_append_file_name instead
	of gnome_vfs_uri_resolve_relative to "resolve" relative paths,
	otherwise, we get a broken path if the base doesn't finish with a '/'
	(Closes: #439041)

2007-06-04  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (totem_cd_dir_get_parent),
	(totem_cd_detect_type_from_dir): Make totem_cd_detect_type_from_dir
	detect if we have a DVD or VCD sub-directory passed, such as
	VIDEO_TS (Closes: #443303)

============ Version 2.19.4

2007-06-04  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.19.4

2007-06-01  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/skipto/totem-skipto-plugin.c: (run_skip_to_dialog),
	(impl_activate):
	* src/plugins/skipto/totem-skipto.c: (totem_skipto_new):
	Show an error when activating the plugin if skip_to.glade can't be
	found (Closes: #438934)

2007-06-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (next_angle_action_callback):
	* src/totem.c: (totem_action_next_angle),
	(totem_action_handle_key_press):
	* src/totem.h: Make the "Switch angles" menu item work again
	(somebody forgot to implement the callback...)

2007-06-01  Christian Persch  <chpe@gnome.org>

	* src/totem-menu.c: (connect_proxy_cb),
	(totem_recent_manager_changed_callback), (totem_setup_recent):
	Don't use UTF-8 unsafe string manipulations to ellipsise but simply
	ellipsise the label itself. Bug #442371.

2007-06-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_show_properties):
	Ignore Ctrl+P when in fullscreen (Closes: #442673)

2007-05-24  Jan Schmidt  <thaytan@mad.scientist.com>

	* src/totem-uri.c: (totem_uri_get_subtitle_uri):
	When checking whether a subtitle file exists alongside
	the media file, properly handle media files that have extensions
	which aren't 3 characters long, or no extension at all.
	(Closes: #440911)

============ Version 2.19.3

2007-05-21  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.19.3

	* browser-plugin/Makefile.am:
	* src/Makefile.am:
	* src/bacon-video-widget-properties.c:
	* src/bacon-video-widget-properties.h:
	* src/plugins/properties/Makefile.am: Move the
	bacon-video-widget-properties.[ch] to the properties
	plugin directory to avoid cyclic builds, and fix make distcheck

	* src/plugins/sidebar-test/Makefile.am:
	* src/plugins/properties/Makefile.am: Fix distclean

2007-05-18  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am:
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_update):
	* src/bacon-video-widget-properties.h:
	* src/plugins/properties/Makefile.am:
	* src/plugins/properties/movie-properties.totem-plugin.in:
	* src/plugins/properties/totem-movie-properties.c:
	(totem_movie_properties_plugin_class_init),
	(totem_movie_properties_plugin_init),
	(totem_movie_properties_plugin_finalize),
	(stream_length_notify_cb),
	(totem_movie_properties_plugin_file_opened),
	(totem_movie_properties_plugin_file_closed),
	(totem_movie_properties_plugin_metadata_updated), (impl_activate),
	(impl_deactivate):
	* src/plugins/skipto/totem-skipto.c: (totem_skipto_new):
	* src/totem-object.c: (totem_object_class_init),
	(totem_object_get_property), (totem_get_video_widget),
	(totem_get_current_time), (totem_file_opened), (totem_file_closed),
	(totem_metadata_updated):
	* src/totem-private.h:
	* src/totem-properties-view.c: (on_got_metadata_event):
	* src/totem-sidebar.c: (totem_sidebar_setup):
	* src/totem.c: (totem_action_set_mrl_with_warning),
	(on_got_redirect), (on_channels_change_event),
	(on_playlist_change_name), (on_got_metadata_event),
	(update_current_time), (totem_action_open_files_list), (main):
	* src/totem.h:
	* src/totemobject-marshal.list:
	Add a properties plugin (Closes: #428291)

2007-05-17  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-lines.c:
	(totem_pl_parser_parse_ram_url), (totem_pl_parser_add_ram):
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_init):
	* src/plparse/totem-pl-parser.h: Remove known
	arguments from pnm and rtsp lines found in RAM files, so
	that servers aren't confused by arguments they don't know about,
	Adds RAM parameters support (Closes: #439160)

2007-05-16  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Clean up the configure output

2007-05-15  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/galago/Makefile.am:
	* src/plugins/media-player-keys/Makefile.am:
	* src/plugins/ontop/Makefile.am:
	* src/plugins/screensaver/Makefile.am:
	* src/plugins/sidebar-test/Makefile.am:
	* src/plugins/skipto/Makefile.am: Fix more .totem-plugin
	files mentioning ".desktop" as a prefix, fixes some plugins
	not showing up in the UI, or being available

2007-05-14  Philip Withnall  <pwithnall@svn.gnome.org>

	* configure.in:
	* data/Makefile.am:
	* data/skip_to.glade:
	* data/totem-ui.xml:
	* src/Makefile.am:
	* src/plugins/skipto/Makefile.am:
	* src/plugins/skipto/skip_to.glade:
	* src/plugins/skipto/skipto.totem-plugin.in:
	* src/plugins/skipto/totem-skipto-plugin.c:
	(totem_skipto_plugin_class_init), (totem_skipto_plugin_init),
	(destroy_dialog), (totem_skipto_plugin_finalize),
	(totem_skipto_update_from_state), (property_notify_cb),
	(skip_to_response_callback), (run_skip_to_dialog),
	(skip_to_action_callback), (on_window_key_press_event),
	(impl_activate), (impl_deactivate):
	* src/plugins/skipto/totem-skipto.c: (totem_skipto_class_init),
	(totem_skipto_response_cb), (totem_skipto_init),
	(totem_skipto_finalize), (totem_skipto_update_range),
	(totem_skipto_get_range), (totem_skipto_set_seekable),
	(totem_skipto_set_current), (spin_button_activate_cb),
	(spin_button_value_changed_cb), (totem_skipto_new):
	* src/plugins/skipto/totem-skipto.h:
	* src/plugins/totem-plugin.h:
	* src/totem-menu.c:
	* src/totem-object.c: (totem_object_class_init),
	(totem_object_get_property), (totem_get_ui_manager),
	(totem_get_current_time), (totem_remove_sidebar_page):
	* src/totem-private.h:
	* src/totem-skipto.c:
	* src/totem-skipto.h:
	* src/totem.c: (update_mrl_label), (totem_action_seek_relative),
	(totem_action_seek_time), (update_seekable), (update_current_time),
	(totem_is_fullscreen), (totem_is_playing), (totem_is_seekable),
	(totem_action_handle_key_press), (totem_callback_connect):
	* src/totem.h: Move the skipto dialog into a
	new plugin. (Closes #428293)

2007-05-14  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-volume.c: (bacon_volume_button_new): Fix the ATK
	names being the wrong way around

============ Version 2.19.2

2007-05-14  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: Release 2.19.2
	* browser-plugin/Makefile.am:
	* src/Makefile.am:
	* src/plugins/galago/Makefile.am:
	* src/plugins/media-player-keys/Makefile.am:
	* src/plugins/ontop/Makefile.am:
	* src/plugins/screensaver/Makefile.am:
	Fix distchecking in a lot of files

2007-05-14  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* browser-plugin/Makefile.am:
	* browser-plugin/README: move to...
	* browser-plugin/README.browser-plugin: ...this file,
	and add details on how to disable specific mime-types
	* browser-plugin/totemPluginGlue.cpp:
	Allow to disable specific mime-types, using a .ini style
	file, as documented in README.browser-plugin
	(Closes: #401079)

2007-05-13  Bastien Nocera  <hadess@hadess.net>

	* license_change:
	* src/plugins/totem-module.c:
	* src/plugins/totem-module.h:
	* src/plugins/totem-plugin-manager.c:
	* src/plugins/totem-plugin-manager.h:
	* src/plugins/totem-plugin.c:
	* src/plugins/totem-plugin.h:
	* src/plugins/totem-plugins-engine.c:
	* src/plugins/totem-plugins-engine.h:
	Add exception clauses to the above mentioned filed, thanks to the
	copyright holders for agreeing to the relicensing
	(Closes: #435523)

	* src/plugins/screensaver/totem-screensaver.c:
	* src/plugins/media-player-keys/totem-media-player-keys.c:
	* src/plugins/sidebar-test/totem-sidebar-test.c:
	* src/plugins/galago/totem-galago.c:
	* src/plugins/ontop/totem-ontop.c:
	Remove wrong mention of a relicensing date, all those files
	date from after the relicensing, just mention the
	license_change file instead

	* src/plparse/totem-disc.c: Update copyright, fix
	excemption/exception again

2007-05-11  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (xine_event_message):
	XINE_MSG_FILE_EMPTY is in all the versions now

2007-05-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-private.h: Remove tooltip struct member
	* src/totem.c: (totem_callback_connect), (main): Patch from
	IvÃ¡n Frade <frade@asturlinux.org> to set tooltips for the
	Play/Pause, Previous and Next buttons (Closes: #396077)

2007-05-11  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-volume.c: (bacon_volume_button_class_init),
	(bacon_volume_button_init), (bacon_volume_button_dispose),
	(bacon_volume_button_new), (bacon_volume_button_update_icon):
	* src/bacon-volume.h: Merge Christian Persch <chpe@svn.gnome.org> 's
	simplifications, set the tooltip on startup, otherwise we wouldn't
	have any tooltip when the volume starts at 0 (Closes: #419571)

2007-05-10  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemComplexPlugin.cpp: make the Complex
	plugin report version "10.0" through GetVersionInfo
	(Closes: #395881)
	* browser-plugin/totemGMPPlugin.cpp: remove FIXME
	for the WMP version

2007-05-07  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (window_state_event_cb): When the window becomes
	maximised, disable the fit window to movie menu entries, as we
	can't fit to movie when we're maximised (Closes: #129580)

2007-05-07  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (bacon_video_widget_seek),
	(bacon_video_widget_seek_time):
	Make sure the slider goes back to where it's supposed to be when
	seeking back and the playback is paused or stopped (Closes: #431738)

2007-05-05  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Up the required xine-lib version, to get the
	xine-lib fix at
	http://hg.debian.org/hg/xine-lib/xine-lib?cmd=changeset;node=2b182beaba68;style=gitweb
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_finalize), (bacon_video_widget_new),
	(bacon_video_widget_open_thread), (bacon_video_widget_play),
	(bacon_video_widget_stop), (bacon_video_widget_close),
	(bacon_video_widget_pause):
	Queue the actions that occur during the threaded open() so
	that we can apply them when we really finished the open(),
	Fixes the xine-lib backend for use in the browser plugin
	(Closes: #375866)

2007-05-04  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_async),
	(bacon_video_widget_open_with_subtitle), (bacon_video_widget_play):
	Yield to the newly created open() thread so that we can block on open
	later, fix "cat foo | totem fd://0" not working, fix a comment about
	the icyx protocol
	* src/totem-menu.c: (totem_action_add_recent): don't try to add
	movies without a mime-type to the recent files list

2007-05-04  Bastien Nocera  <hadess@hadess.net>

	* COPYING: another excemption/exemption/exception usage
	* src/totem-properties-main.c: Remove exception from
	totem-properties-main.c, as it is based on GPL code
	and will link to a GPL application anyway (Closes: #397254)

2007-05-03  Bastien Nocera  <hadess@hadess.net>

	* license_change:
	* src/backend/bacon-video-widget-common.c:
	* src/backend/bacon-video-widget-common.h:
	* src/backend/bacon-video-widget-gst-0.10.c:
	* src/backend/bacon-video-widget.h:
	* src/ev-sidebar.c:
	* src/ev-sidebar.h:
	* src/plugins/galago/totem-galago.c:
	* src/plugins/gromit/totem-gromit.c:
	* src/plugins/lirc/totem-lirc.c:
	* src/plugins/media-player-keys/totem-media-player-keys.c:
	* src/plugins/ontop/totem-ontop.c:
	* src/plugins/screensaver/totem-screensaver.c:
	* src/plugins/sidebar-test/totem-sidebar-test.c:
	* src/test-properties-page.c:
	* src/totem-interface.c:
	* src/totem-object.c:
	* src/totem-preferences.c:
	* src/totem-preferences.h:
	* src/totem-private.h:
	* src/totem-properties-main.c:
	* src/totem-properties-view.c:
	* src/totem-properties-view.h:
	* src/totem-subtitle-encoding.c:
	* src/totem-video-indexer.c:
	* src/totem.c:
	* src/totem.h: Fix excemption/exemption/exception usage
	Add exception clauses to ev-sidebar.[ch], thanks to the
	copyright holders for agreeing to the relicensing
	(Closes: #433115)

2007-05-03  Bastien Nocera  <hadess@hadess.net>

	* src/test-properties-page.c:
	* src/totem-properties-main.c:
	* src/totem-properties-view.c:
	* src/totem-properties-view.h: Fix inexistant version of
	the GPL being listed as the license (Helps: #397254),
	Patch from Philip Withnall <bugzilla@tecnocode.co.uk>

2007-05-03  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_play),
	(totem_action_set_mrl_with_warning), (playlist_changed_cb):
	Fix the pause icon being shown in the playlist when playing
	a file, and drag'n'dropping another one to play straight away

2007-05-03  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/totem-plugins-engine.c:
	(totem_plugins_engine_shutdown):
	* src/totem-uri.c: (totem_destroy_file_filters):
	* src/totem.c: (totem_action_save_state), (main):
	Don't crash on exit when launching remote commands to an existing
	instance of Totem

2007-05-02  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (totem_setup_preferences):
	Don't muck around with a stock translated string, as we'd get
	extra bits we don't want for a window title, fixes "XXX(Y)" appearing
	as a window title for non-latin languages (Closes: #412560)

2007-04-27  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/sidebar-test/totem-sidebar-test.c: (impl_activate):
	Fixed the test sidebar plugin for the new activation API

2007-04-26  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* configure.in:
	* src/Makefile.am:
	* src/plugins/gromit/Makefile.am:
	* src/plugins/gromit/gromit.totem-plugin.in:
	* src/plugins/gromit/totem-gromit.c:
	(totem_gromit_plugin_class_init), (totem_gromit_plugin_init),
	(totem_gromit_plugin_finalize), (totem_gromit_available),
	(totem_gromit_exit), (totem_gromit_timeout_cb),
	(totem_gromit_toggle), (totem_gromit_clear),
	(on_window_key_press_event), (impl_activate), (impl_deactivate):
	* src/totem-gromit.c:
	* src/totem-gromit.h:
	* src/totem.c: (totem_action_exit),
	(totem_action_handle_key_press): Move gromit annotation support into a
	new plugin. (Closes #428290)

2007-04-26  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in: Fix typo in the schema

2007-04-26  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* src/plugins/galago/totem-galago.c:
	(totem_galago_plugin_finalize), (impl_activate):
	* src/plugins/lirc/totem-lirc.c: (impl_activate):
	* src/plugins/media-player-keys/totem-media-player-keys.c:
	(impl_activate):
	* src/plugins/ontop/totem-ontop.c: (impl_activate):
	* src/plugins/screensaver/totem-screensaver.c: (impl_activate):
	* src/plugins/totem-plugin.c: (totem_plugin_error_quark),
	(totem_plugin_activate):
	* src/plugins/totem-plugin.h:
	* src/plugins/totem-plugins-engine.c:
	(totem_plugins_engine_activate_plugin_real),
	(totem_plugins_engine_activate_plugin): Add support for plugin
	activation failure. Fix an uninitialized variable. (Closes #433371)

2007-04-25  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* src/plugins/lirc/totem-lirc.c: (totem_lirc_plugin_finalize):
	* src/plugins/media-player-keys/totem-media-player-keys.c:
	(totem_media_player_keys_plugin_finalize):
	* src/totem-object.c: (totem_object_finalize),
	(totem_object_plugins_shutdown):
	* src/totem.c: (totem_action_exit):
	* src/totem.h: Explicitly shutdown the plugins engine at the totem
	exit. Remove workarounds. (Closes: #433064)

2007-04-25  Christian Persch  <chpe@gnome.org>

	* src/totem-object.c: (totem_object_class_init),
	(totem_object_finalize): Chain up to the finalise handler of the
	parent class. Bug #433113.

2007-04-24  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* configure.in:
	* src/Makefile.am:
	* src/plugins/lirc/Makefile.am:
	* src/plugins/lirc/lirc.totem-plugin.in:
	* src/plugins/lirc/totem-lirc.c: (totem_lirc_plugin_class_init),
	(totem_lirc_plugin_init), (totem_lirc_plugin_finalize),
	(totem_lirc_read_code), (impl_activate), (impl_deactivate):
	* src/totem-options.c:
	* src/totem-private.h:
	* src/totem-remote.c:
	* src/totem-remote.h:
	* src/totem.c: (totem_action_exit), (main):
	* src/totem.h: Move LIRC support to a plugin (Closes: #428294)

2007-04-24  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/galago/totem-galago.c: (property_notify_cb),
	(impl_activate), (impl_deactivate):
	* src/plugins/ontop/totem-ontop.c: (property_notify_cb),
	(impl_activate):
	* src/plugins/screensaver/totem-screensaver.c:
	(property_notify_cb), (impl_activate), (impl_deactivate):
	* src/totem.c: (property_notify_cb_volume),
	(property_notify_cb_logo_mode), (property_notify_cb_seekable),
	(video_widget_create):
	Patches from Philip Withnall <bugzilla@tecnocode.co.uk> to avoid
	connection to all the object property notifications, and only
	to the ones we're interested in (Closes: #430738)

2007-04-24  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new):
	  Use separate bus to test whether the audiosink is working on
	  startup, so that errors from testing the audiosink won't lead to
	  an error dialog later on even if we've already plugged a fakesink
	  as fallback instead. Should fix #432687.

2007-04-24  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/xmlparser.c: (xml_parser_build_tree_relaxed):
	Fix build-time warning

2007-04-23  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (capture_interesting_frame),
	(capture_frame_at_time), (main): Patch from Aidan Delaney
	<a.j.delaney@brighton.ac.uk> to allow capture a frame at a specific
	time in the film (Closes: #431463)

2007-04-23  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/galago/Makefile.am:
	* src/plugins/galago/galago.totem-plugin.desktop.in:
	* src/plugins/media-player-keys/Makefile.am:
	* src/plugins/media-player-keys/media-player-keys.totem-plugin.desk
	top.in:
	* src/plugins/media-player-keys/media-player-keys.totem-plugin.in:
	* src/plugins/ontop/Makefile.am:
	* src/plugins/ontop/ontop.totem-plugin.desktop.in:
	* src/plugins/screensaver/Makefile.am:
	* src/plugins/screensaver/screensaver.totem-plugin.desktop.in:
	* src/plugins/sidebar-test/Makefile.am:
	* src/plugins/sidebar-test/sidebar-test.totem-plugin.desktop.in:
	Rename all .totem-plugin.desktop.in to totem-plugin.in, as
	pointed out by Christian Persch <chpe@gnome.org>
	(Closes: #430274)

2007-04-23  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/xmllexer.c: (lexer_get_token):
	* src/plparse/xmllexer.h:
	* src/plparse/xmlparser.c: (xml_parser_get_node_internal),
	(xml_parser_get_node), (xml_parser_build_tree_relaxed),
	(xml_parser_build_tree), (xml_parser_dump_tree):
	* src/plparse/xmlparser.h:
	Update from xine-lib's xml-relaxation playground repository,
	allows parsing of top-level entities, handle single-quoted
	attributes, allow some elements with missing close tags

	* src/plparse/totem-pl-parser.c: 
	* src/plparse/totem-pl-parser-misc.c:
	* src/plparse/totem-pl-parser-smil.c:
	(totem_pl_parser_add_smil_with_data):
	* src/plparse/totem-pl-parser-wm.c: (totem_pl_parser_add_asx):
	Use the relaxed xml parsing by default (even more relaxed than
	usual), remove some unneeded libxml includes

	* src/plparse/totem-pl-parser-qt.c:
	(totem_pl_parser_add_quicktime_metalink): Use xine-lib's XML
	parser instead of libxml2, allows parsing of some QuickTime link
	files with broken xml (Closes: #431663)

2007-04-23  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* configure.in:
	* src/Makefile.am:
	* src/plugins/media-player-keys/Makefile.am:
	* src/plugins/media-player-keys/media-player-keys.totem-plugin.desk
	top.in:
	* src/plugins/media-player-keys/totem-marshal.list:
	* src/plugins/media-player-keys/totem-media-player-keys.c:
	(totem_media_player_keys_plugin_class_init),
	(totem_media_player_keys_plugin_init),
	(totem_media_player_keys_plugin_finalize),
	(on_media_player_key_pressed), (on_window_focus_in_event),
	(impl_activate), (impl_deactivate):
	* src/totem-marshal.list:
	* src/totem-remote.c: (totem_remote_finalize), (totem_remote_init):
	* src/totem.c: (totem_callback_connect): Move media player keys
	support to a plugin (Closes: #428295)

2007-04-23  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_mrls): Remove
	bacon_video_widget_set_media_device (Closes: #420803)

2007-04-23  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-wm.c: (totem_pl_parser_add_asx):
	Fix ASX parsing, test was the wrong way around

2007-04-22  Brian Pepple  <bpepple@fedoraproject.org>

	* data/Makefile.am (update-icon-cache): fix gtk-update-icon-cache for
	uninstall-hook. (Closes: #432424)

2007-04-20  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-wm.c: (parse_asx_entries),
	(totem_pl_parser_add_asx): Add more checks for the ASX
	playlist type

2007-04-19  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/totem-plugin.h: Patch from Christian Persch
	<chpe@gnome.org> to avoid relocations (Closes: #430272)

2007-04-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: remove unused
	HALF_SECOND definition, spotted by Aidan Delaney
	<a.j.delaney@brighton.ac.uk> (Closes: #431404)

2007-04-17  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_set_reorderable),
	(set_playing_icon), (init_treeview), (totem_playlist_add_one_mrl),
	(totem_playlist_set_playing):
	* src/totem-playlist.h:
	* src/totem-remote.c: (totem_lirc_to_command):
	* src/totem-remote.h:
	* src/totem.c: (play_pause_set_label), (totem_action_stop),
	(totem_action_set_mrl_with_warning), (totem_action_remote),
	(playlist_changed_cb), (video_widget_create):
	Use the play and pause icons in the playlist to show the current
	state, as in Rhythmbox, adapted from patch by <jgoday@gmail.com>
	(Closes: #408402)

	Add --printvolume to get the current volume on the command-line

2007-04-17  Frederic Crozat  <fcrozat@mandriva.com>

	* src/totem.c: (totem_action_open_location):
	Remove one libglade call by moving variables init (bug #430661).

2007-04-17  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (add_lang_action), (create_lang_actions):
	Fix language labels when we have multiple occurences of the
	same languages (eg. was "en #2", is "English #2" now)

2007-04-16  Bastien Nocera  <hadess@hadess.net>

	* src/totem-options.c: (totem_options_process_for_server):
	Plug a few leaks

2007-04-15  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/galago/*: Patch from Philip Withnall
	<bugzilla@tecnocode.co.uk> to merge the Galago calling code
	and the rest of the plugin, fixes a crasher, and unsets
	idleness properly if accounts have been added/removed
	while playing in fullscreen (Closes: #428770)

2007-04-13  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/screenshot.glade:
	* data/totem.schemas.in:
	* src/totem-screenshot.c: (totem_screenshot_make_filename_for_dir),
	(totem_screenshot_temp_file_create),
	(totem_screenshot_temp_file_remove), (drag_begin),
	(totem_screenshot_response), (totem_screenshot_init),
	(totem_screenshot_finalize), (totem_screenshot_new),
	(totem_screenshot_class_init):
	* src/totem-screenshot.h:
	* src/totem-uri.c: (totem_pictures_dir), (totem_add_pictures_dir):
	* src/totem-uri.h:
	* src/totem.c: (totem_action_take_screenshot):
	Kill the old screenshot dialogue, and use a simple file chooser widget
	with a preview image instead. Remember the path of where the previous
	screenshot was saved. Use the Pictures directory as the default save
	directory (Closes: RH #232788)

2007-04-13  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-qt.c:
	(totem_pl_parser_add_quicktime_rtsptext),
	(totem_pl_parser_add_quicktime_metalink),
	(totem_pl_parser_is_quicktime):
	Fix RTSPtext parsing for one-line URLs (Closes: #429383)

2007-04-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (totem_statusbar_create):
	Use the GtkStatusbar's set_has_resize_grip, not the TotemStatusbar one

2007-04-12  Bastien Nocera  <hadess@hadess.net>

	* src/totem-statusbar.c: (totem_statusbar_size_allocate):
	Fix compilation with GTK+ < 2.11

2007-04-12  Christian Persch  <chpe@gnome.org>

	* src/totem-statusbar.c: (totem_statusbar_class_init),
	(totem_statusbar_init), (totem_statusbar_set_text),
	(totem_statusbar_timeout_pop), (totem_statusbar_push),
	(totem_statusbar_sync_description), (totem_statusbar_dispose),
	(totem_statusbar_size_allocate):
	* src/totem-statusbar.h: Make TotemStatusbar subclass GtkStatusbar.
	This fixes the visual inconsistence with other applications. Bug
	#428988.

	* src/totem.c: (window_state_event_cb): Hide the resize grip when the
	window is maximised.

2007-04-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_construct):
	* src/backend/bacon-resize.c:
	* src/backend/bacon-video-widget-common.c:
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_class_init), (bacon_video_widget_finalize),
	(bacon_video_widget_close), (bacon_video_widget_get_current_frame):
	* src/backend/bacon-video-widget-xine.c: (bacon_video_widget_play),
	(bacon_video_widget_can_set_volume),
	(bacon_video_widget_is_playing), (bacon_video_widget_is_seekable),
	(bacon_video_widget_get_mrls):
	* src/backend/bvw-test.c:
	* src/bacon-message-connection.c:
	* src/test-properties-page.c:
	* src/totem-interface.c: (totem_gtk_plug_get_toplevel),
	(totem_interface_get_license):
	* src/totem-menu.c: (totem_action_add_recent):
	* src/totem-playlist.c: (totem_playlist_get_current_mrl),
	(totem_playlist_get_current_title):
	* src/totem-screenshot.c:
	* src/totem-skipto.c:
	* src/totem-statusbar.c: (totem_statusbar_init):
	* src/totem-subtitle-encoding.c: (subtitle_encoding_init):
	* src/totem-time-label.c:
	* src/totem-video-indexer.c:

	Plenty of code cleanups by Kjartan Maraas <kmaraas@broadpark.no>

2007-04-12  Bastien Nocera  <hadess@hadess.net>

	* lib/totem-galago.c:
	* lib/totem-galago.h:
	Move those files to src/plugins/galago

	* lib/Makefile.am:
	* src/plugins/galago/Makefile.am:
	Update for the file move above

	Fixes build without galago available

2007-04-12  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Use "autodetect" in the plugins list
	to only compile the plugins for which the deps are present,
	error out when "all" is passed and a dep isn't present
	* src/plugins/galago/totem-galago.c: moved to totem-galago-plugin.c
	* src/plugins/galago/Makefile.am: upd for above

2007-04-12  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Move the allowed plugins list to the top

	* src/ev-sidebar.h:
	* src/ev-sidebar.c: (ev_sidebar_get_index_for_page_id),
	(ev_sidebar_set_current_page), (ev_sidebar_add_page),
	(ev_sidebar_remove_page): Add the ability to remove pages,
	make the widget unsensitive when there's no pages added to it,
	only set the current page to the newly added one when there's
	no other pages

	* src/plugins/galago/galago.totem-plugin.desktop.in:
	Fix the plugin not loading because of the wrong Module name

	* src/plugins/galago/totem-galago.c:
	* src/plugins/ontop/totem-ontop.c:
	* src/plugins/screensaver/totem-screensaver.c:
	Remove unneeded TotemObject private struct member

	* src/plugins/totem-module.c: (totem_module_load):
	* src/plugins/totem-plugins-engine.c: (totem_plugins_engine_load):
	More warnings

	* src/totem-object.c: (totem_object_init),
	(totem_object_plugins_init), (totem_add_sidebar_page),
	(totem_remove_sidebar_page):
	* src/totem.c: (main):
	* src/totem.h: Load the plugins later on in the game, add the
	ability for plugins to add and remove pages from the sidebar

	* src/plugins/sidebar-test/*: Add a test plugin for the sidebar plugin
	system, which shouldn't be installed

	(Closes: #349070)

2007-04-11  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/galago/Makefile.am:
	Rename the plugin from libgalago.so to lib tgp (totem
	galago plugin) to avoid clashing with system-wide libraries
	* src/plugins/galago/galago.totem-plugin.desktop.in:
	Remove Galago from the name of the plugin

2007-04-11  Bastien Nocera  <hadess@hadess.net>

	* lib/totem-galago.c: (totem_galago_init),
	(totem_galago_set_idleness), (totem_galago_finalize):
	Don't print errors when we can't set the status as Galago
	isn't available, we already printed out an error in _init()

2007-04-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* lib/Makefile.am:
	* lib/totem-galago.[ch]:
	* lib/totem-galago.h:
	* src/plugins/Makefile.am:
	* src/plugins/galago/*:

	Patch from Philip Withnall <bugzilla@tecnocode.co.uk> to add a
	Galago plugin that will set your IM status as away when playing
	a film in fullscreen (Closes: #427580)

2007-04-11  Bastien Nocera  <hadess@hadess.net>

	* README: Remove outdated TODO items
	* src/plparse/totem-pl-parser-wm.c: (parse_asx_entries):
	Push playlist title out for ASX playlists that have one

2007-04-11  Bastien Nocera  <hadess@hadess.net>

	* src/plugins/ontop/*: SVN let me down, and wouldn't commit the new
	files for the ontop plugin

2007-04-11  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	* src/totem-session.c: (totem_session_create_key):
	* src/totem-uri.c: (totem_ensure_dot_dir), (totem_dot_dir):
	* src/totem.c: (totem_action_save_state), (totem_setup_window):
	Use totem_dot_dir() all over, and make sure that ~/.gnome2/Totem
	is created before trying to put stuff into it

2007-04-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem-remote.c: (totem_remote_finalize): Patch from Philip Withnall
	<bugzilla@tecnocode.co.uk> to avoid crashing on exit when LIRC is
	being used (Closes: #427681)

2007-04-09  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* data/totem-ui.xml:
	* src/plugins/Makefile.am:
	* src/totem-menu.c:
	* src/totem-object.c: (totem_get_main_window):
	* src/totem-preferences.c: (totem_setup_preferences):
	Add a plugin to replace the not-so-useful "Always On Top" menu item
	which will make Totem "on top" if it's playing something
	(Closes: #171691)

2007-04-09  Bastien Nocera  <hadess@hadess.net>

	* data/totem-ui.xml: Show the plugins menu entry above the Preferences
	menu entry

	* src/backend/bacon-video-widget-xine.c: (bacon_video_widget_seek),
	(bacon_video_widget_seek_time): In some cases, when seeking, we might
	not have reset the tick signal properly

	* src/plugins/screensaver/totem-screensaver.c:
	(totem_screensaver_update_from_state), (property_notify_cb),
	(impl_activate): Make sure we're in the proper state when the
	plugin is activated (ie. if it's not activated on startup, which
	shouldn't happen)

	* src/totem.c: (totem_is_playing): Don't print out an error if
	there's no video widget yet

	* src/totem-object.c: (totem_get_main_window):
	* src/totem.h: Add a way to get the main window from a plugin

2007-04-05  Bastien Nocera  <hadess@hadess.net>

	* src/totem-remote.c: (on_media_player_key_pressed):
	Fix compilation (as reported by many people)

2007-04-05  Bastien Nocera  <hadess@hadess.net>

	* src/totem-remote.c: (on_media_player_key_pressed):
	Handle the "Stop" button as well (Closes: #422956)

2007-04-04  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Up the version, to correctly test for
	playlist parser API changes

2007-04-04  Bastien Nocera  <hadess@hadess.net>

	* src/totem-interface.c: (totem_interface_italicise_label):
	* src/totem-interface.h: Add a way to italicise labels

	* data/properties.glade:
	* data/screenshot.glade:
	* data/totem.glade:
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_new):
	* src/totem-preferences.c: (totem_setup_preferences):
	* src/totem-screenshot.c: (totem_screenshot_new):
	Use the newly added totem_interface_boldify_label, and
	totem_interface_italicise_label to remove the markup
	from the glade files (Closes: #100036)

2007-04-04  Bastien Nocera  <hadess@hadess.net>

	* src/totem-options.c: (totem_options_process_for_server):
	Patch from Michael Plump <plumpy@skylab.org> to avoid removing
	just added files when in remote mode (Closes: #416253)

2007-04-04  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* configure.in:
	* data/Makefile.am:
	* data/plugins.glade:
	* data/totem-ui.xml:
	* data/totem.schemas.in:
	* src/Makefile.am:
	* src/plugins/*:
	* src/totem-menu.c: (totem_plugins_window_delete_cb),
	(totem_plugins_response_cb), (plugins_action_callback):
	* src/totem-object.c: (totem_object_class_init),
	(totem_object_init), (totem_object_finalize),
	(totem_object_set_property), (totem_object_get_property):
	* src/totem-private.h:
	* src/totem.c: (play_pause_set_label), (totem_action_play),
	(totem_action_seek), (totem_action_stop),
	(totem_action_play_pause), (totem_action_pause),
	(window_state_event_cb), (totem_action_seek_relative),
	(commit_hide_skip_to), (totem_is_playing), (on_eos_event),
	(video_widget_create), (main):
	* src/totem.h: Turn Totem into a TotemObject, remove calling
	the screensaver directly, and emit property notifies when
	switching to fullscreen, or playing/stopping playing,
	Add a plugin system, Move the screensaver handling to a
	builtin plugin.

	* src/totem-scrsaver.c:
	* src/totem-scrsaver.h: Move to...

	* lib/*: ...here

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_class_init): Some cleanups

	* src/totem-interface.c: (totem_interface_boldify_label):
	* src/totem-interface.h: Add totem_interface_boldify_label()

	* src/totem-uri.c: (totem_dot_dir):
	* src/totem-uri.h: Add the totem_dot_dir

2007-04-03  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_get_metadata_string):
	  In the audio tab report "Mono", "Stereo" and "Surround 5.1" for
	  the 'Channels' field instead of "1", "2", and "5.1".
	  (Closes: #403561)

2007-04-03  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new):
	  If we are forced to fall back to using fakesinks instead of real
	  output sinks, make sure they sync to the clock. Should fix current
	  position reporting when there is no audio sink available (#425458).

2007-04-02  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_check_missing_plugins_error):
	  Make the missing-plugins stuff work in the case where we have
	  a subtitles streams but no video stream (presumably because we are
	  missing the appropriate video decoder). This should probably be
	  handled better in playbin itself, but for now we'll work around it.
	  (Closes: #418383)

2007-04-02  Bastien Nocera  <hadess@hadess.net>

	* src/totem-options.h:
	* src/totem.c:
	* src/totem.h: Remove extraneous includes

2007-04-02  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/totem-resources.c: (set_resource_limits), (time_monitor),
	(totem_resources_monitor_start), (totem_resources_monitor_stop):
	* src/totem-resources.h:
	* src/totem-video-indexer.c: (main):
	* src/totem-video-thumbnailer.c: (main): Move the resource
	monitoring, and the wall-clock checking thread to a separate file,
	add resource monitoring support to the video indexer

2007-04-02  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemBasicPlugin.cpp:
	* browser-plugin/totemComplexPlugin.cpp:
	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemMullYPlugin.cpp:
	* browser-plugin/totemNarrowSpacePlugin.cpp:
	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h:
	* browser-plugin/totemPluginGlue.cpp: Remove the rejection
	of streams based on mime-type, too many false positives
	(Closes: #418387)

2007-04-01  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_stream_length): Return a cached
	stream length if we couldn't get the current one accurately

2007-03-31  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_current_frame): Take into account
	the original image ratio before scaling the captured frame,
	Fixes 4:3 aspect with a very wide resolution

2007-03-30  Bastien Nocera  <hadess@hadess.net>

	* configure.in: up libtool version

	* src/plparse/totem-pl-parser-pls.c:
	(totem_pl_parser_add_pls_with_contents):
	* src/plparse/totem-pl-parser-qt.c:
	(totem_pl_parser_add_quicktime_rtsptextrtsp):
	* src/plparse/totem-pl-parser-wm.c: (parse_asx_entry):
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_class_init),
	(totem_pl_parser_init), (totem_pl_parser_add_url_valist),
	(totem_pl_parser_add_one_url):
	* src/plparse/totem-pl-parser.h:
	* src/plparse/totemplparser-marshal.list:
	Change the API to pass a metadata hashtable containing the
	extra metadata some players might require, like stream start time
	or still image duration

	* src/totem-playlist.c: (totem_playlist_entry_parsed),
	(totem_playlist_init):
	* src/plparse/test-parser.c: (entry_metadata_foreach),
	(entry_parsed), (test_parsing):
	* browser-plugin/totem-plugin-viewer.c: (entry_metadata_foreach),
	(entry_parsed), (totem_embedded_push_parser):
	Changes to reflect the API change

	(Closes: #361531)

2007-03-30  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/totem-missing-plugins.c: (on_plugin_installation_done):
	  Make sure an error dialog gets shown if the installer returns a
	  not-found exit code (Closes: #424520)

2007-03-30  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_set_logo_mode): Send seekable notifies when
	changing the logo mode
	* src/totem.c: (totem_callback_connect): Make the seek back/forth
	and skipto menu items unsensitive on startup (Closes: #370021)

2007-03-30  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c: (bvw_bus_message_cb),
	(got_time_tick), (bacon_video_widget_close),
	(bacon_video_widget_is_seekable):
	* src/backend/bacon-video-widget-xine.c: (bacon_video_widget_init),
	(setup_config), (bacon_video_widget_idle_signal),
	(bacon_video_widget_unrealize), (bacon_video_widget_new),
	(bacon_video_widget_reconfigure_tick),
	(bacon_video_widget_tick_send),
	(bacon_video_widget_open_with_subtitle), (bacon_video_widget_play),
	(bacon_video_widget_stop), (bacon_video_widget_close),
	(bacon_video_widget_pause):
	* src/totem-private.h:
	* src/totem.c: (update_skip_to),
	(totem_action_set_mrl_with_warning), (update_seekable),
	(update_current_time), (property_notify_cb),
	(totem_action_skip_to):

	Don't run the ticks when paused or stopped,
	Update seekable only when the value has changed in the backend, not
	for every tick (Closes: #363164)

2007-03-30  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-misc.c:
	(totem_pl_parser_add_desktop): Add support for "FSDevice" type
	desktop file, allows to drag'n'drop from the Computer location
	in Nautilus

2007-03-29  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Allow to disable the iso-codes check, useful
	if you know what you're doing. It will try to find the languages
	packages in the same prefix as the application (Closes: #396718)

2007-03-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (set_resource_limits):
	switch to using RLIMIT_DATA instead of RLIMIT_AS

2007-03-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (set_resource_limits): Handle the
	input passed being a URI, when in conjuction with limits setting

2007-03-27  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (set_resource_limits), (main):
	As mmap'ed files count towards the maximum memory size, take the
	file size into account when setting the maximum memory consumption

2007-03-27  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-common.c:
	(bacon_video_widget_common_can_direct_seek): Make direct seeking
	work on DVDs in xine-lib

2007-03-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_callback_connect): Patch from Harm Hilvers
	<harm@tweakers.net> to switch the Play button to be at the leftmost
	(Closes: #164037)

2007-03-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (totem_setup_recent): Patch from Philip Withnall
	<bugzilla@tecnocode.co.uk> to grab the recent files manager from
	the right screen (Closes: #395195)

2007-03-26  Bastien Nocera  <hadess@hadess.net>

	* data/uri.glade: patch from Emil Soleyman-Zomalan <emil@soleyman.com>
	to make the Open Location dismiss when pressing enter (Closes: #394215)

2007-03-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_open_location): Fix leak when
	stream is already in the recent files, spotted by Christian
	Persch <chpe@svn.gnome.org> (Closes: #423079)

2007-03-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_setup_window): Patch from Christian Persch
	<chpe@svn.gnome.org> to fix a memory leak (Closes: #423067)

2007-03-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key_press): Make pause actually
	pause, and stop pause as well (Closes: #422956)

2007-03-26  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_bus_message_cb):
	  No need to flood stdout with g_message()s if we find an unknown
	  GstMessage type on the bus (Closes: #420253).

2007-03-26  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_error_from_gst_error):
	  Fix ambiguous error message (#420937).

2007-03-26  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_set_device_on_element):
	(playbin_source_notify_cb):
	(bacon_video_widget_open_with_subtitle):
	(bacon_video_widget_get_mrls):
	  Remove bacon_video_widget_set_media_device() now that device is
	  passed to _get_mrls(); also actually use the device for cdda URIs
	  (Closes: #422838). Also fixes build with GStreamer backend.

2007-03-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem-uri.c: (totem_add_default_dirs), (totem_add_files),
	(xdg_user_dir_lookup): Use xdg-user-dirs to add some default
	directories to the "Open" dialogues (Closes: #143404)

2007-03-26  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_set_property),
	(bacon_video_widget_get_property), (bacon_video_widget_get_mrls):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_class_init), (bacon_video_widget_finalize),
	(bacon_video_widget_set_property),
	(bacon_video_widget_get_property),
	(bacon_video_widget_set_media_device),
	(bacon_video_widget_get_mrls):
	* src/backend/bacon-video-widget.h:
	* src/totem-options.c: (totem_options_process_early),
	(totem_options_process_for_server):
	* src/totem-playlist.c: (drop_cb), (totem_playlist_add_one_mrl):
	* src/totem-uri.c: (totem_create_full_path):
	* src/totem.c: (totem_action_load_media),
	(totem_action_load_media_device), (totem_action_play_media),
	(totem_action_drop_files), (totem_action_open_files_list),
	(totem_action_remote):
	* src/totem.h:

	Clean up _create_full_path to avoid duplicate copies of the code,
	and really make "totem dvb:" work (with xine-lib only for now),
	Make the video widget take the media device to play as part
	of _get_mrls ()

2007-03-25  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_finalize), (xine_event_message): 
	Remove bacon_video_widget_plugin_exists, as it's pretty useless. We
	weren't setting our own proprietary codecs path anymore, and we don't
	want to support them anyway (Closes: #421724)

2007-03-25  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (bacon_video_widget_init),
	(bacon_video_widget_can_play), (bacon_video_widget_get_mrls),
	(bacon_video_widget_set_subtitle_font):
	Save some memory in the object struct, add support for DVB playback,
	including getting MRLs, fix build warning

	* src/backend/bacon-video-widget.h: add "special" MEDIA_TYPE_DVB

	* src/plparse/totem-disc.h: add MEDIA_TYPE_NUM_TYPES

	* src/totem-playlist.c: (totem_playlist_create_full_path),
	(totem_playlist_init), (totem_playlist_add_one_mrl):
	* src/totem-uri.c: (totem_is_special_mrl):
	* src/totem-uri.h:
	* src/totem.c: (totem_action_open_files_list),
	(totem_action_remote): totem_is_media cleanup, add totem_is_special_mrl
	for DVB mrls, use less RAM when adding new items to the playlist (unneeded
	duplication of strings), add basic DVB support ("totem dvb:" will do)

2007-03-24  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-qt.c:
	(totem_pl_parser_add_quicktime_metalink),
	(totem_pl_parser_is_quicktime):
	Add support for parsing SMILtext hacks (Closes: #402278)

	* src/plparse/totem-pl-parser-smil.c: (parse_smil_video_entry),
	(parse_smil_entry), (parse_smil_head), (parse_smil_entries),
	(totem_pl_parser_add_smil_with_doc), (totem_pl_parser_add_smil),
	(totem_pl_parser_add_smil_with_data):
	* src/plparse/totem-pl-parser-smil.h:
	Allow to parse SMIL files using data, use xine-lib's parser instead
	of libxml2 (Closes: #407138), Fix return values of a bunch of functions

	* src/plparse/totem-pl-parser-wm.c: (parse_asx_entries):
	Remove unneeded casts

2007-03-22  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_subtitle_font): Disable
	setting the font name, as Freetype isn't enabled by
	default in xine-lib

2007-03-21  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/totem-missing-plugins.c:
	(on_plugin_installation_done):
	  Also add the missing plugins to the local blacklist if the user
	  aborts the installer, so we either just play what we can the next
	  time or show an error message (presumably the user doesn't want
	  to see the installer, so let's honour that wish).

2007-03-21  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/Makefile.am:
	* src/list_v4l.c: Removed.
	* src/video-dev.c: Removed.
	* src/video-dev.h: Removed.
	  Remove other vanity left-overs as well. Fixes build again.

2007-03-21  Bastien Nocera  <hadess@hadess.net>

        * configure.in:
	* data/Makefile.am:
	* data/vanity.desktop.in.in:
	* data/vanity.glade:
	* src/Makefile.am:
	* src/backend/bacon-video-widget-xine.c:
	* src/backend/bacon-video-widget.h:
	* src/bacon-v4l-selection.c:
	* src/bacon-v4l-selection.h:
	* src/vanity.c: Remove vanity, nobody packages it
	(Closes: #156954)

2007-03-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (set_resource_limits), (main):
	Adapted patch from Federico Mena Quintero <federico@ximian.com>
	to avoid eating more than 256 megs of RAM, and 15 seconds of CPU
	time when thumbnailing a video (Closes: #396926)

2007-03-20  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade: Reorder the audio properties
	so that they kinda match the video properties ordering
	(Closes: #410880)

2007-03-20  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_subtitle_font): Set the font
	and font size depending on the preferences, only works
	if xine-lib is compiled with Freetype support (otherwise
	you get no subtitles at all), based on patch by Robert
	Krebbers <robbertkrebbers@xs4all.nl> (Closes: #314123)

2007-03-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (totem_action_add_recent): Avoid
	crashing on play when we can't get a display name
	for the file we're trying to play

2007-03-19  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/Makefile.am:
	* data/Makefile.am:
	* src/backend/Makefile.am: spaces cleanups by
	LoÃ¯c Minier <lool+gnome@via.ecp.fr> (Closes: #414173)

2007-03-19  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Fix build, remove the generation of
	help/uk/Makefile

2007-03-19  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (totem_resolve_symlink): remove
	home-made canonicalise function, helps Win32 support
	(Helps: #342926)

2007-03-18  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new):
	  Fix build when compiling against a GStreamer core version where the
	  debugging system has been disabled (Closes: 418589).

2007-03-16  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_error_msg), (bvw_bus_message_cb):
	(poll_for_state_change_full):
	  Make debug output on errors a bit more terse; also mention URI
	  that caused the error.

2007-03-12  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/totem-menu.c: (about_action_callback):
	  Add myself to credits in about dialog.

2007-03-12  Bastien Nocera  <hadess@hadess.net>

	* data/vanity.desktop.in.in: remove obsolete "Application"
	category (Closes: #417365)

2007-03-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (totem_volume_create):
	Patch from Christof KrÃ¼ger <gnome@pop2wap.net> to make scrolling
	on the volume button go in the right direction (Closes: #417210)

============ Version 2.18.0

2007-03-09  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.18.0

2007-03-09  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPluginGlue.cpp: Patch from
	Alexander Sack <asac@jwsdot.com> to keep the dbus-glib
	library in memory, to avoid crashes when switching themes
	(Closes: #415389)

2007-03-07  Frederic Crozat  <fcrozat@mandriva.com>

	reviewed by: Bastien and release-team.

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_with_subtitle):
	Fix audio only playback in audio/video container (ogg for instance).
	(Closes: #405883)

2007-03-06  Jan Schmidt  <thaytan@mad.scientist.com>

	* src/totem-remote.c: (totem_remote_init):
	Don't allocate a lirc_config structure - LIRC will do that on its own.
	If lirc_readconfig fails, don't pass data to LIRC that it didn't
	create in the first place. (Closes: #415326)

2007-03-05  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Patch from Damien Carbery <damien.carbery@sun.com>
	to not use the "-q" grep option (Closes: #414961)

2007-03-05  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-resize.c: (bacon_resize_init):
	Hopefully fix crashes on startup when XRandR isn't supported,
	by checking the retval of the Extension query functions
	properly

2007-03-05  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new):
	  Fix up unused/disabled code too.

2007-03-05  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	* src/totem-missing-plugins.c:
	(totem_missing_plugins_setup):
	  Fix build against GStreamer gst-plugins-base CVS.

2007-03-04  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/test-parser.c: (main):
	Call g_thread_init() very early to avoid the GSlice warning

	* src/plparse/xmllexer.c:
	* src/plparse/xmllexer.h:
	* src/plparse/xmlparser.c:
	* src/plparse/xmlparser.h: Add a copy of the xine-lib XML parser
	under the LGPL

	* src/plparse/Makefile.am:
	* src/plparse/totem-pl-parser-wm.c: (parse_asx_entry),
	(parse_asx_entries), (totem_pl_parser_add_asx):
	* src/plparse/totem-pl-parser.c:
	Use the xine-lib XML parser copy, to allow:
	- case mismatches
	- HTML comments
	- broken escaping in URLs

	(Closes: #386558)

2007-03-01  Christian Persch  <chpe@svn.gnome.org>

	* browser-plugin/totemPlugin.cpp: Fix parsing of boolean values. Bug
	#413065.

2007-03-01  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-resize.c: (bacon_resize_init), (bacon_resize),
	(bacon_restore): Don't assume the first modeline is the current one,
	fixes the resolution changing when not using the highest resolution
	(Closes: #411408)

2007-02-27  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (get_stock_label),
	(totem_setup_preferences): Use translation from GTK+ to get a
	translated "preferences" dialogue title for us, spotted by
	Funda Wang <fundawang@gmail.com> (Closes: #412560)

2007-02-26  Bastien Nocera  <hadess@hadess.net>

	* data/totem.desktop.in.in.in: Remove deprecated categories from
	the .desktop file

2007-02-26  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/plparser.symbols: really add missing symbols for
	the Python bindings to work (Closes: #404304)

2007-02-23  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_init),
	(totem_playlist_new): Move _new stuff to _init
	* src/totem-sidebar.c: (totem_sidebar_setup): Fix first-time sidebar
	resize, as pointed out by Eric Anderson <ejona86@gmail.com>
	(Closes: #379742)

============ Version 2.17.92

2007-02-20  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* browser-plugin/totemPluginGlue.cpp: print more details about the unhandled
	variables
	* configure.in: 2.17.92

2007-02-19  Christian Persch  <chpe@svn.gnome.org>

	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemGMPPlugin.h:
	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h: Also allow "-1" for boolean values,
	and semi-implement a few bits of the JS interfaces. Should get us a
	bit closer to support webtv.tv2.no; bug #355881.

2007-02-19  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	* src/Makefile.am:
	* src/totem-missing-plugins.c:
	(on_plugin_installation_done):
	(totem_on_missing_plugins_event):
	(totem_missing_plugins_setup):
	  libgimme-codec has been merged into GStreamer with a similar API.
	  Use the new API from libgstbaseutils rather than libgimme-codec for
	  easy codec installation (Closes: #401074).
	  This will require small adjustments on the vendor side (namely:
	  setting the path to the install helper script in gst-plugins-base's
	  configure script).

2007-02-18  Christian Persch  <chpe@svn.gnome.org>

	* browser-plugin/Makefile.am:
	* browser-plugin/idl/Makefile.am:
	* browser-plugin/totemComplexPlugin.cpp:
	* browser-plugin/totemDebug.h:
	* browser-plugin/totemGMPError.cpp:
	* browser-plugin/totemGMPPlaylist.cpp:
	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemGMPSettings.cpp:
	* browser-plugin/totemNarrowSpacePlugin.cpp: Revert the patch from bug
	#405850, since G_GNUC_FUNCTION is absolutely useless. Factor the debug
	macros out into totemDebug.h so there's only one place to port to
	__FUNCTION__-less compilers.

2007-02-14  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-volume.h: revert a change that cause build to fail
	* src/totem-options.c: (totem_options_process_for_server):
	Don't crash if no filenames were passed in "server mode"

2007-02-14  Christian Persch  <chpe@svn.gnome.org>

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_construct):
	* src/backend/bacon-resize.c: (bacon_resize_init), (bacon_resize),
	(bacon_restore):
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_unrealize), (bacon_video_widget_class_init),
	(bacon_video_widget_init), (bvw_handle_element_message),
	(bacon_video_widget_finalize), (poll_for_state_change_full),
	(bacon_video_widget_set_logo), (bacon_video_widget_set_logo_mode),
	(bacon_video_widget_get_logo_mode),
	(bacon_video_widget_error_quark),
	(bvw_update_interface_implementations), (bacon_video_widget_new):
	* src/backend/bacon-video-widget.h:
	* src/bacon-volume.h:
	* src/plparse/totem-pl-parser.c:
	* src/totem-interface.c: (totem_interface_get_license):
	* src/totem-playlist.c:
	* src/totem-properties-main.c:
	(totem_properties_plugin_register_type):
	* src/totem-screenshot.c: (totem_screenshot_new):
	* src/totem-uri.c:
	* src/totem-video-indexer.c:
	* src/totem-video-thumbnailer.c: (main):
	* src/totem.c: (window_unrealize_cb), (totem_callback_connect),
	(video_widget_create): Fix compiler warnings, and various cleanups.
	Bug #402920.

2007-02-14  Christian Persch  <chpe@svn.gnome.org>

	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemGMPPlugin.h: Implement zeroing operator new.
	Fixes crash from bug #407679.

2007-02-13  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_finalize), (bacon_video_widget_new),
	(bacon_video_widget_open_thread), (bacon_video_widget_open_async),
	(bacon_video_widget_play), (bacon_video_widget_close): Use pthreads
	instead of GThreads so we can cancel the xine_open, require a xine-lib
	that can cancel xine_open as well

2007-02-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (main): We're not actually "playing"
	files anymore, so don't take the length into account, and seek harder
	(Closes: #374470)

2007-02-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (main): Avoid accessing the pixbuf
	when we can't get an interesting picture at the end of the loop

2007-02-12  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (add_holes_to_pixbuf_small),
	(is_image_interesting), (main): a few cosmetic cleanups

2007-02-12  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_get_metadata_string):
	(bacon_video_widget_get_metadata_int):
	  Don't use gst_tag_list_get_*() with NULL taglists (Closes: #407117);
	  don't bail out too early on a NULL tagcache, we might be able to get
	  the requested information otherwise.

2007-02-12  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-indexer.c: (main):
	* src/totem-video-thumbnailer.c: (main): Add --g-fatal-warnings
	support for the thumbnailer and indexer

2007-02-12  Bastien Nocera  <hadess@hadess.net>

	* src/backend/debug.h: Patch from Damien Carbery
	<damien.carbery@sun.com> to not use __PRETTY_FUNCTION__, again.
	Check for G_HAVE_ISO_VARARGS or G_HAVE_GNUC_VARARGS being defined
	instead of a simple if else (Closes: #405880)

2007-02-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPError.cpp:
	* browser-plugin/totemGMPPlaylist.cpp:
	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemGMPSettings.cpp: Patch from Damien Carbery
	<damien.carbery@sun.com> to not use the non-portable __FUNCTION__
	pragma, fixes build on Solaris (Closes: #405850)

2007-02-12  Bastien Nocera  <hadess@hadess.net>

	* data/playlist.glade: Patch from Harm Hilvers to change the
	"Save" tooltip of the playlist save button to "Save Playlist..."
	(Closes: #406806)

2007-02-08  Bastien Nocera  <hadess@hadess.net>

	* data/mime-functions.sh: Patch from Sebastien Bacher
	<seb128@debian.org> to make the new mime-functions.sh
	work with dash (Closes: #405758)

============ Version 2.17.91

2007-02-08  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.17.91

2007-02-08  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: Patch from Damien Carbery
	<damien.carbery@sun.com> to add signal.h for the kill()
	definition (Closes: #405683)

2007-02-08  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_finalize), (bacon_video_widget_expose),
	(bacon_video_widget_get_current_frame): Fix compile-time warnings,
	Patch from GÃ¶tz Waschk to fix the blue-ish images captured by the
	thumbnailer (Closes: #402239)

2007-02-07  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Disable the Russian manual for now, as some files are
	missing

2007-02-07  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/mime-type-include.sh:
	* data/schemas.sh: Fix makedistcheck with newly added mime-functions.sh
	(Closes: #405342)

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_expose_event), (bacon_video_widget_play):
	Fix compilation warnings

2007-02-07  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_bus_message_cb):
	  Merge tags in REPLACE mode rather than KEEP mode, so that tags are
	  updated properly when they change mid-stream, like they do with
	  internet radio streams (Closes: #405307)

2007-02-06  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/mime-functions.sh:
	* data/mime-type-include.sh:
	* data/mime-type-list.txt:
	* data/schemas.sh:
	* src/totem-uri.c: (totem_setup_file_filters),
	(totem_destroy_file_filters), (totem_add_files):
	Move functions to split the mime-types in video/audio types to
	mime-functions.sh, add "Audio files" and "Video files" filters
	to the Open dialogues (Closes: #390991)

2007-02-06  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/plparser.symbols: Patch from Gustavo Carneiro
	<gjc@inescporto.pt> to export missing symbols (Closes: #404304)

2007-02-06  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_new_hal_ctx): Check that
	conn != NULL before trying to unref it, patch from James Livingston
	<doclivingston@gmail.com> (Closes: #394055)

2007-02-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem-properties-view.c:
	(totem_properties_view_set_location): Check that the widget exists
	before trying to close it (Closes: #378180)

2007-02-05  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: Add audio/x-wavpack to the supported
	mime-types

2007-02-04  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPPlaylist.cpp: remove unused mName, patch
	from Christian Persch <chpe@svn.gnome.org>

2007-02-02  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: Sort the mime-type list alphabetically

2007-02-02  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: Add video/x-matroska and audio/x-matroska
	as supported mime-types

2007-02-02  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt:
	* src/plparse/totem-pl-parser.c: Add support for application/ram

2007-02-01  Bastien Nocera  <hadess@hadess.net>

	* data/handlers.sh: add missing "icy" to the list
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_open_with_subtitle):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_with_subtitle): Handle "icyx" URLs as well
	(Closes: #403285)

2007-02-01  Christian Persch  <chpe@svn.gnome.org>

	* browser-plugin/idl/totemIGMPPlayer.idl: Fix "isOnline" attribute to
	be read-only.

2007-02-01  Christian Persch  <chpe@svn.gnome.org>

	* src/vanity.c: (on_about1_activate), (on_save1_activate),
	(video_widget_create), (main): Fix compilation and compiler errors.
	Bug #398525.

2007-02-01  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_error_from_gst_error): Fix dup string (again), this time
	minding about quotes, spotted by Stephane Raimbault
	(Closes: #403011)

2007-01-31  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPError.h:
	* browser-plugin/totemGMPPlaylist.h:
	* browser-plugin/totemGMPSettings.h: and more missing files,
	I need to stop the crack

2007-01-31  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/idl/totemIGMPCdromCollection.idl:
	* browser-plugin/idl/totemIGMPClosedCaption.idl:
	* browser-plugin/idl/totemIGMPDVD.idl:
	* browser-plugin/idl/totemIGMPError.idl:
	* browser-plugin/idl/totemIGMPErrorItem.idl:
	* browser-plugin/idl/totemIGMPMedia.idl:
	* browser-plugin/idl/totemIGMPMediaCollection.idl:
	* browser-plugin/idl/totemIGMPNetwork.idl:
	* browser-plugin/idl/totemIGMPPlayerApplication.idl:
	* browser-plugin/idl/totemIGMPPlaylist.idl:
	* browser-plugin/idl/totemIGMPPlaylistArray.idl:
	* browser-plugin/idl/totemIGMPPlaylistCollection.idl:
	* browser-plugin/idl/totemIGMPSettings.idl:
	* browser-plugin/totemGMPError.cpp:
	* browser-plugin/totemGMPPlaylist.cpp:
	* browser-plugin/totemGMPSettings.cpp: Add the missing files, duh

2007-01-31  Wim Taymans,,,  <wim@fluendo.com>

	* configure.in:
	Also link against base libs.

2007-01-31  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(get_visualization_size): avoid getting criticals when we're not
	in video playback mode, and we check for the vis. qualities,
	spotted by <did447@gmail.com> (Closes: #402847)

2007-01-31  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/Makefile.am:
	* browser-plugin/idl/Makefile.am:
	* browser-plugin/idl/totemIBasicPlayer.idl:
	* browser-plugin/idl/totemIGMPControls.idl:
	* browser-plugin/idl/totemIGMPPlayer.idl:
	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemGMPPlugin.h: Add Javascript stubs for the GMP
	(Windows Media Player-compatible) plugin

2007-01-30  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/totem-menu.c: (create_lang_actions):
	  Don't let hash table take ownership of and free strings that it
	  doesn't own (causes crashes in totem_sublang_update() when accessing
	  already freed memory or trying to free it again); also fix up hash
	  table usage so that it really detects equal language strings.
	  (Closes: #402512)

2007-01-30  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(parse_stream_info), (has_subp), (get_stream_info_objects_for_type),
	(get_lang_list_for_type), (bacon_video_widget_get_subtitles),
	(bacon_video_widget_get_languages):
	  Refactor stream-info parsing bits a bit; in particular, retrieve the
	  stream-info objects as GValueArray, since that way we get the stream
	  info objects already ref'ed and don't need to worry about
	  thread-safety.

2007-01-30  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemComplexPlugin.cpp:
	* browser-plugin/totemNarrowSpacePlugin.cpp: Remove use of __FUNCTION__
	as it's not portable, patch by Damien Carbery (Closes: #402163)

2007-01-30  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: Add video/x-theora+ogg to the list of supported
	mime-types

2007-01-29  Bastien Nocera  <hadess@hadess.net>

	* data/schemas.sh: remove extraneous "grep -v" in the audio listing,
	spotted by Saleem Abdulrasool (Closes: #402193)

============ Version 2.17.90

2007-01-29  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.17.90

2007-01-29  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_set_state):
	Avoid warnings when changing playstate and hidden (again!)

2007-01-29  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-qt.c:
	(totem_pl_parser_add_quicktime_rtsptextrtsp): Handle DOS QuickTime
	link files (Closes: #402040)

2007-01-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (add_lang_action), (create_lang_actions):
	Avoid leaking data from the language hash-table, escape languages
	before putting them in the subtitles or languages menu

2007-01-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (escape_label_for_menu),
	(totem_recent_manager_changed_callback), (add_device_to_menu):
	Truncate the URI before escaping it for use in the menu items,
	avoids mnemonics showing up in the menu if we have underscores in
	filenames (Closes: #401872)

2007-01-29  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: Patch from Christian Persch <chpe@svn.gnome.org>
	to fix redirection of the gconftool-2 command (Closes: #401758)

2007-01-29  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/idl/totemIComplexPlayer.idl: update IDL file to
	include all the documented and non-deprecated functions from Real Player
	and Helix Player
	* browser-plugin/totemComplexPlugin.cpp:
	* browser-plugin/totemComplexPlugin.h: Patch from Christian Persch
	<chpe@svn.gnome.org> to add stubs for those functions

2007-01-29  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/Makefile.am:
	* src/plparse/plparser.symbols:
	* src/plparse/test-parser.c: (main):
	* src/plparse/totem-pl-parser-private.h:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_add_url_valist),
	(totem_pl_parser_add_one_url), (totem_pl_resolve_url),
	(totem_pl_parser_parse_internal): Only export public symbols in the
	library to avoid the symbol-snatchers, const a few functions as
	required, return an error when there was an error parsing,
	Avoid crashes when the filename tells us it's an MP3, but we can't
	verify it (Closes: #400702)

2007-01-29  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Patch from Christian Persch <chpe@svn.gnome.org>
	to disable the browser plugin correctly (Closes: #401561)

2007-01-29  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_error_from_gst_error): Merge similar strings into one, spotted
	by Nguyen Thai Ngoc Duy (Closes: #401569)

2007-01-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): Patch from Saleem Abdulrasool to
	make the GTK+ only version of Totem compile again
	(Closes: #401580)

2007-01-26  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c: (got_time_tick),
	(bacon_video_widget_seek_time): Avoid EOSing if we don't have
	a stream length yet

2007-01-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem-options.c: (totem_option_create_line),
	(totem_options_process_for_server): Handle remote options
	properly, add the ability to pass multiple commands in one go
	(Closes: #380617)
	* src/totem.c: (playlist_changed_cb): add mention of bug #364311

2007-01-26  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_open_with_subtitle):
	(bacon_video_widget_play):
	  Handle all errors asynchronously in the playback case instead of
	  running a main loop for a quarter of a second to check for errors.
	  This prevents recursivity/reentrancy issues.

2007-01-24  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: Fix varargs #ifdef mess
	* src/totem-video-thumbnailer.c: (main): Add a "--verbose" option,
	useful to see what the thumbnailer is doing without needing a
	recompile

2007-01-24  Christian Persch  <chpe@svn.gnome.org>

	* totem-plparser-uninstalled.pc.in:
	* totem-plparser.pc.in: Sort dependencies between public and private.
	Bug #400183.

2007-01-24  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (load_video_out_driver):
	Only force xshm for output if we actually KNOW the size, not
	always.

2007-01-24  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* totem-plparser-uninstalled.pc.in: Patch from Brian Cameron
	<brian.cameron@sun.com> to add a .pc file for the uninstalled
	playlist parser (Closes: #340336)

2007-01-23  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_check_if_video_decoder_is_missing):
	(bvw_bus_message_cb):
	  If we can play a stream but are missing a video decoder,
	  pop up an error saying that a decoder is missing and which
	  one it is. (Closes: #171111)

2007-01-23  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new):
	  Only force ximagesink for output if we actually KNOW the size, not
	  always.

2007-01-23  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_seek_time): When seeking destination is
	past the end of the stream, send an EOS, just like the xine-lib
	backend does

2007-01-23  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: Add audio/x-tta to the list
	of supported mime-types

2007-01-22  Christian Persch  <chpe@svn.gnome.org>

	* browser-plugin/Makefile.am:
	* browser-plugin/totemBasicPlugin.cpp:
	A browser-plugin/totemClassInfo.h:
	* browser-plugin/totemComplexPlugin.cpp:
	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemMullYPlugin.cpp:
	* browser-plugin/totemNarrowSpacePlugin.cpp:
	* browser-plugin/totemNarrowSpacePlugin.h:
	Add macro to simplify classinfo implementation.

2007-01-21  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: Patch from Christian Persch to fix
	the generation of totem-marshal.[ch] before files require
	them (Closes: #398604)

2007-01-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (main): Patch from
	Filip Palm <bugzilla@helmut.se> to call g_thread_init ASAP,
	avoid fatal warnings with glib trunk (Closes: #398223)

2007-01-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (create_lang_actions): Number duplicate
	languages in the subtitles and audio tracks menus, patch by
	Philip Withnall <bugzilla@tecnocode.co.uk> (Closes: #394063)

2007-01-19  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/README: add link to the
	QuickTime docs

2007-01-19  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/idl/totemINarrowSpacePlayer.idl:
	Add QuickTime-compatible IDL file
	* browser-plugin/totemNarrowSpacePlugin.cpp:
	* browser-plugin/totemNarrowSpacePlugin.h:
	Patch from Christian Persch <chpe@svn.gnome.org> to
	add stubs or basic implementation for the NarrowSpace
	Javascript API (Closes: #350883)
	* browser-plugin/totemPlugin.cpp: fix build warnings (again)

2007-01-19  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: Fix build

2007-01-19  Jan Arne Petersen  <jap@gnome.org>

	* configure.in:
	* src/Makefile.am:
	* src/totem-marshal.list:
	* src/totem-remote.c: (on_media_player_key_pressed),
	(totem_remote_finalize), (totem_remote_init),
	(totem_remote_window_activated):
	* src/totem-remote.h:
	* src/totem.c: (totem_action_exit), (on_window_focus_in_event),
	(totem_callback_connect): add support for media player keys (new D-Bus
	interface in GNOME 2.18) (Closes: #394341)

2007-01-17  Dennis Cranston  <dennis_cranston@yahoo.com>

	* src/totem-menu.c:
	* src/totem-playlist.c: HIG capitalization fixes

2007-01-18  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: Patch from Damien Carbery
	to fix varargs usage for Solaris (Closes: #398080)

2007-01-17  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/Makefile.am: Fix build when "make -j2" and above
	(spotted by Matthias Clasen), fix tarball build with Mozilla < 1.7.x

2007-01-17  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/tests/3.html: add a "myself" target, so we can test for those
	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_set_state),
	(totem_embedded_set_href), (totem_embedded_set_uri): avoid leaking href_uri
	when setting it to NULL, set and reset the hand cursor for HREF uris when
	changing the playback state (Closes: #395799)
	* browser-plugin/totemPlugin.cpp: empty targets mean opening in "fullscreen"
	mode, as tested with QuickTime on MacOS X with 2.html

2007-01-17  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_button_press): Don't eat the mouse events
	for now, as there's nothing on the end of the gst navigation
	events (Closes: #397572)

2007-01-17  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_error_from_gst_error): Fix typo spotted by
	Theppitak Karoonboonyanan <thep@linux.thai.net> (Closes: #397501)

2007-01-16  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (totem_recent_manager_changed_callback):
	C89 fix by Jens Granseuer <jensgr@gmx.net> (Closes: #397350)

2007-01-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_launch_player): Avoid warning when
	no URI is passed directly when launching the stand-alone player

============ Version 2.17.5

2007-01-16  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.17.5

2007-01-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_set_state),
	(totem_embedded_set_logo_by_name), (totem_embedded_push_parser):
	Go to the STOPPED state when we set an logo/error image, only "show"
	an error when we failed to parse a playlist, and go to the logo
	state after parsing an empty playlist (Closes: #350456)

2007-01-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/tests/8.html:
	* browser-plugin/tests/playlist-with-static-png.asx:
	Add a copy of test 7 but with a PNG image

2007-01-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/README: add MOZ_PLUGIN_PATH doc
	* browser-plugin/tests/7.html: 
	* browser-plugin/tests/playlist-with-static.asx:
	Add test for http://bugzilla.gnome.org/show_bug.cgi?id=358277
	* browser-plugin/tests/launch-web-server.sh:
	add a --remote option to allow remote machines to connect to
	our test cases, and remove the "ADDRESS" hack

2007-01-15  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-wm.c:
	(totem_pl_parser_add_asf_parser), (totem_pl_parser_is_asf):
	Special-case NSC parsing

2007-01-15 Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer-options.h:
	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_construct),
	(main):
	* browser-plugin/totemPlugin.cpp: revert the browser plugin parts of the
	previous commit, and simply pass on the *real* width and height from
	the SetWindow call (Closes: #364572)

2007-01-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer-options.h:
	* browser-plugin/totem-plugin-viewer.c: (main):
	* browser-plugin/totemPlugin.cpp:
	Pass the width and height of the video display to the backend
	when showing only the video (controllers are hidden)

	* src/backend/bacon-video-widget-common.h:
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new):
	* src/backend/bacon-video-widget-xine.c: (load_video_out_driver):
	When the requested video widget is smaller than 200x120, use the
	non-Xv video output, useful so that small QuickTime "image" streams
	don't hog the Xv port

	(Closes: #364572)

2007-01-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_construct):
	Turn on visualisations by default (Closes: #395409)
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new): add a default visuals plugin (goom), as
	with the xine-lib backend

2007-01-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (entry_added),
	(totem_embedded_push_parser): Before adding a local file entry
	from a playlist, verify that the base uri for that playlist
	is local as well, or ignore the entry (Closes: #396710)

2007-01-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_set_logo_by_name), (totem_embedded_push_parser):
	Avoid gdk-pixbuf warnings when we can't find a named icon in
	the theme

2007-01-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/tests/6.html:
	* browser-plugin/tests/test-local.asx: add a test case for
	bug #396710

2007-01-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/README:
	* browser-plugin/totemPlugin.cpp: add another envvar to
	make the viewer abort on warnings, document the envvars used

2007-01-15  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_error_from_gst_error): Remove unused variable

2007-01-15  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-lines.c: (totem_pl_parser_add_m3u):
	* src/plparse/totem-pl-parser-pls.c:
	(totem_pl_parser_add_pls_with_contents), (totem_pl_parser_add_pls):
	* src/plparse/totem-pl-parser-pls.h:
	* src/plparse/totem-pl-parser-private.h:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_init),
	(totem_pl_parser_add_url_valist), (totem_pl_parser_add_url),
	(totem_pl_parser_add_one_url): Add support for "arbitrary"
	properties being passed along to the signal emitter (although
	we don't emit signals with the extra info yet)

2007-01-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: ShowDisplay=FALSE hides a
	property bar with WMP, not the main video display!

2007-01-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_set_logo_by_name): Avoid warnings when in
	audio only mode, and trying to set an error/logo image

2007-01-15  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-media.c:
	(totem_pl_parser_iso_get_title), (totem_pl_parser_add_iso):
	* src/plparse/totem-pl-parser.c: Add support for ISO files
	masquerading as .img files, when gnome-vfs tells us it's of
	type application/x-extension-img (Closes: #390824)

2007-01-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(on_copy_location1_activate): Don't copy the base URI when
	we want the location of the current movie, and playing from the
	browser stream (Closes: #395792)

2007-01-14  Bastien Nocera  <hadess@hadess.net>

	* data/totem-ui.xml:
	* src/totem-menu.c: (clear_playlist_action_callback):
	* src/totem-playlist.c: (totem_playlist_clear):
	* src/totem.c: (totem_action_set_mrl_with_warning):
	Patch from Rene Vahtel <vahtel@starman.ee> to add a "Clear Playlist"
	menu item (Closes: #393111)

2007-01-14  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h: remove the unused mViewerStream
	(Closes: #395858)

2007-01-13  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_error_from_gst_error):
	  If an element throws a 'can't handle this stream' error (which
	  usually indicates a bug already), say which element it was.
	  (Closes: #374735)

2007-01-13  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_error_from_gst_error):
	  When playback fails because a required source or decoder plugin is
	  missing, tell the user exactly what it is that they are missing in
	  the error message (Closes: #380198). This will only work with
	  current gst-plugins-base CVS (ie the future -base 0.10.12 release).

2007-01-13  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/totem-missing-plugins.c:
	(totem_on_missing_plugins_event):
	  Print and use correct string arrays here (ie. the filtered ones,
	  and not the original one including items already blacklisted).

2007-01-13  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_check_missing_plugins_error):
	(bvw_bus_message_cb):
	  When we got an error because we're missing the required source or
	  decoder plugins AND the missing-plugin signal was handled, then make
	  sure we're not processing any further (less precise/generic) error
	  messages that may also be on the bus.
	  Convert error to BVW error when an error occurs asynchroneously too.

2007-01-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/tests/5.html: add simple QuickTime test

2007-01-12  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_get_missing_plugins_foo):
	(bvw_get_missing_plugins_details):
	(bvw_get_missing_plugins_descriptions):
	(bvw_clear_missing_plugins_messages):
	(bvw_emit_missing_plugins_signal):
	(bvw_error_from_gst_error):
	(bacon_video_widget_open_with_subtitle):
	(bvw_stop_play_pipeline):
	  Only clear the list of missing plugins when we know that we won't
	  need them any longer (_stop() might be called from _open_with_uri()
	  before we assemble our proper error message, so don't clear list
	  there).

2007-01-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_open_internal), (totem_embedded_play),
	(totem_embedded_set_error_logo),
	(totem_embedded_open_playlist_item), (totem_embedded_construct),
	(totem_embedded_push_parser): Some cleanups, start playing the
	playlist when the browser set it for us

2007-01-12  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_play), (bacon_video_widget_pause):
	Refuse play/pause if we don't have an MRL loaded

2007-01-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/tests/2.html: use another video so we can see
	movement

2007-01-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/tests/3.html: it's test 3, not 1
	* browser-plugin/tests/4.html: added
	* browser-plugin/tests/playlist.asx: 

2007-01-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/tests/2.html: Modify the test so it tests for
	autoplay=false

2007-01-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_update_menu):
	Add some debug in case there's no app found to launch the stream
	* browser-plugin/totemPlugin.cpp: when using an HREF, *do*
	autostart, otherwise we won't see the static image before the stream
	(Closes: #386531)

2007-01-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_set_logo_by_name): Avoid errors when the icon is
	bigger than the destination area

2007-01-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_pad_pixbuf_for_size),
	(totem_embedded_set_logo_by_name), (totem_embedded_open_internal),
	(totem_embedded_set_error_logo), (totem_embedded_construct):
	Use the "totem" icon as the logo by default, set the error logo
	whenever we can't open a file

2007-01-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_pad_pixbuf_for_size),
	(totem_embedded_set_logo_by_name), (totem_embedded_open_internal),
	(totem_embedded_set_error_logo), (totem_embedded_construct):
	Set the error logo for any stream that we can't open, use the
	default totem logo

2007-01-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/org_gnome_totem_PluginViewer.xml:
	add the SetErrorLogo method

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_pad_pixbuf_for_size),
	(totem_embedded_set_error_logo):
	Implement the SetErrorLogo method and show a centred
	"image-missing" image when a file isn't available which should be

	* browser-plugin/totemPlugin.cpp:
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_set_logo),
	(bacon_video_widget_set_logo_pixbuf):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_logo),
	(bacon_video_widget_set_logo_pixbuf):
	* src/backend/bacon-video-widget.h:

	Implement bacon_video_widget_set_logo_pixbuf()
	(Closes: #387332)

2007-01-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemNarrowSpacePlugin.cpp: support
	application/x-quicktime-media-link in the QuickTime plugin to
	allow playback at
	http://aftonbladet.se/special/webbtv/rockbjornen/quicktime.html
	(Closes: #395564)

2007-01-11  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_check_missing_plugins_error):
	(bvw_bus_message_cb):
	(bvw_error_from_gst_error):
	(poll_for_state_change_full):
	(poll_for_state_change):
	(bacon_video_widget_open_with_subtitle):
	(bacon_video_widget_play):
	(bacon_video_widget_new):
	  Also emit the missing-plugin signal in the case where we get an
	  error because we're missing a required source plugin or one or more
	  required demuxers/decoders/depayloaders. (Needed to refactor our
	  error handling a bit for that because bvw_error_from_gst_error()
	  would munge the error code and then we wouldn't know what type of
	  error it really was at the right place.)

2007-01-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (main):
	Call g_thread_init() as soon as possible (Closes: #391263)

2007-01-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/tests/3.html: add a simple test for
	http://bugzilla.gnome.org/show_bug.cgi?id=387332

	* browser-plugin/totemPlugin.cpp: handle empty targets
	when using HREFs (Closes: #395452)

	Modify RequestStream() so it allows the caller to force
	opening the stream via the viewer (Closes: #376752)

	* browser-plugin/totemPlugin.h: update for above changes

2007-01-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c: (on_play_pause),
	(totem_embedded_construct): when there's no stream to be
	played, and play is pressed, request a stream from the
	plugin (Closes: #386319)
	Hide the video display when handling audio-only setups

	* browser-plugin/totemPlugin.cpp: make 16 the minimum size
	for the Basic plugin as well as the QuickTime one,
	make showdisplay=0 work as expected, fix warning

2007-01-11  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-pls.c:
	(totem_pl_parser_add_pls_with_contents): 
	Patch from <evan@evanbriones.com> to handle .pls playlists
	without the "NumberOfEntries" entry (Closes: #394243)

2007-01-10  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: s/Tv-out/TV-out/ (Closes: #395159)

2007-01-10  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer-options.h:
	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_construct),
	(main):
	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h: add support for "audio only"
	outputs (Closes: #395078)

	* browser-plugin/totemNarrowSpacePlugin.cpp:
	remove unused audio/x-mpegurl mime-type

	* src/totem-interface.c: (totem_interface_get_license):
	Remove mention of Sound Juicer completely (Closes: #395154)

2007-01-10  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* README:
	  Add a blob about libgimme-codec and where to get it.

	* configure.in:
	  Update GStreamer core requirement to 0.10.6 (this is not a change,
	  it was implicitly required by the gst-plugins-base version required
	  all along and just makes it explicit).

2007-01-10  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_open_with_subtitle):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_with_subtitle):
	Handle "icy://" URLs in the backends

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse_internal):
	Ignore "icy:" URLs just like we do for mms: and rtsp: ones

	(Closes: #394207)

2007-01-10  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new):
	  Use BVW_ERROR_AUDIO_PLUGIN error for audio plugins, not VIDEO.

2007-01-10  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemNarrowSpacePlugin.cpp:
	Allow the QuickTime plugin to handle audio/x-mpegurl
	as at http://www.catradio.cat/pilotcatradio/

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_expose_event):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_expose): Avoid crashes or eating
	gobbles of RAM when the size allocated to the plugin
	is smaller than the height it'd fit in
	(Closes: #376770)

2007-01-10  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/Makefile.am: fix browser plugin linking,
	we need the parser backends as well

	* src/plparse/totem-pl-parser-lines.c:
	(totem_pl_parser_get_extinfo_title): Handle both ":" and ","
	as a field separator as seen used at
	http://www.catradio.cat/pilotcatradio/

	* src/totem-menu.c: (totem_action_add_recent): only add local files
	to the recently used list if there's a mime-type, otherwise it
	means the file isn't there, or not readable

2007-01-10  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	* src/Makefile.am:
	* src/totem-missing-plugins.c: Added.
	(totem_codec_install_plugin_is_blacklisted):
	(totem_codec_install_blacklist_plugin):
	(totem_codec_install_context_free):
	(on_gimme_codec_installation_done):
	(totem_on_missing_plugins_event):
	(totem_missing_plugins_setup):
	* src/totem-missing-plugins.h: Added.
	* src/totem.c:
	(video_widget_create):
	 Add optional support for automatic/easy missing codec installation via
	 libgimme-codec. If libgimme-codec is available and the GStreamer backend
	 is used (and a recent-enough gst-plugins-base used), totem will use the
	 library to call an external installer program with information about
	 the plugins missing. If anything was installed, the GStreamer plugin
	 registry will be updated and playback tried again (without the need to
	 restart totem). (Closes: #394697)

2007-01-10  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

        * src/backend/bacon-video-widget-gst-0.10.c:
        (bvw_is_missing_plugin_message):
        (bvw_missing_plugin_message_get_description):
        (bvw_missing_plugin_message_get_installer_detail):
        (bvw_boolean_handled_accumulator):
        (bacon_video_widget_class_init):
        (bacon_video_widget_init):
        (bvw_handle_element_message):
        (bvw_emit_missing_plugins_signal):
        (bvw_check_missing_plugins_on_preroll):
        (bvw_bus_message_cb):
        (bvw_stop_play_pipeline):
        (bacon_video_widget_new):
        * src/backend/baconvideowidget-marshal.list:
	  Add 'missing-plugins' signal to the GStreamer backend; collect
	  missing-plugin messages from playbin (which will only be posted by
	  playbin from gst-plugins-base CVS) and check them when we're
	  prerolled to see if we're missing any decoders or demuxers to process
	  the stream (need to also do this in the error case, but this is not
	  implemented yet); add some utility functions for this stuff so we don't
	  have to up the GStreamer requirements to cvs for the newly-added
	  libgstbaseutils API before the upcoming totem release.

2007-01-10  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_new): fix compile warning
	* src/totem-interface.c: (totem_interface_get_license):
	* src/totem-interface.h: add totem_interface_get_license(),
	which shows and translates the license
	* src/totem-menu.c: (about_action_callback):
	* browser-plugin/totem-plugin-viewer.c: (on_about1_activate):
	Use totem_interface_get_license() (Closes: #330871)

2007-01-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_open_location_match),
	(totem_action_open_location): Patch from Philip Withnall
	<bugzilla@tecnocode.co.uk> to also complete on substrings in
	the "Open URL" dialogue (Closes: #394860)

2007-01-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_open_location_set_from_clipboard),
	(totem_action_open_location): Patch from Harm Hilvers
	<harm@tweakers.net> to copy the URL obtained from the clipboard into
	the "Open URL" dialogue, and automatically prepend "http://" when
	necessary (Closes: #320521)

2007-01-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (totem_str_middle_truncate),
	(totem_recent_manager_changed_callback), (totem_action_add_recent):
	* src/totem-menu.h:
	* src/totem.c: (totem_action_open_location): Patch from
	Philip Withnall <bugzilla@tecnocode.co.uk> to make sure remote streams
	launched on the command-line appear in the "Open URL" dialogue
	(Closes: #394096)

2007-01-09  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (canonicalize_filename),
	(totem_resolve_symlink), (cd_cache_get_dev_from_volumes),
	(cd_cache_get_dev_from_drives), (cd_cache_new):
	Don't use realpath(), to avoid crashes on NetBSD
	(Closes: #394505)

2007-01-09  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_error_msg_print_dbg):
	(bvw_handle_element_message):
	(bvw_bus_message_cb):
	(bvw_error_from_gst_error):
	(poll_for_state_change_full):
	Minor error handling refactoring: show pretty error details in debug
	log in both places where we process error messages (bus callback and
	poll_for_state_change); don't flood the terminal if we encounter
	unknown element messages; don't pass unused debug detail to
	bvw_error_from_gst_error.

2007-01-09  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

        * src/backend/bacon-video-widget-gst-0.10.c:
        (parse_stream_info):
        (bacon_video_widget_new):
	  Don't use deprecated functions.

2007-01-09  Christian Persch  <chpe@svn.gnome.org>

	* browser-plugin/Makefile.am:
	* browser-plugin/totem-plugin-viewer.c: (on_about1_activate):
	* data/Makefile.am:
	* src/Makefile.am:
	* src/backend/Makefile.am:
	* src/plparse/Makefile.am:
	* src/plparse/totem-disc.c: (cd_cache_open_mountpoint),
	(cd_cache_free):
	* src/totem-interface.c: (totem_gtk_plug_get_toplevel),
	(totem_interface_set_transient_for):
	* src/totem-screenshot.c: (totem_screenshot_finalize),
	(totem_screenshot_class_init):
	* src/totem-video-indexer.c:
	* src/totem-video-thumbnailer.c: (add_holes_to_pixbuf_small),
	(add_holes_to_pixbuf_large), (save_pixbuf), (main):
	* src/totem.c: (totem_action_take_screenshot),
	(totem_action_skip_to), (video_widget_create):
	Add $(DISABLE_DEPRECATED) to CPPFLAGS to catch deprecated API use.
	Remove all uses or deprecated APIs, and fix all compiler warnings
	except for some strict-aliasing warnings in the browser plugin.
	Bug #394471.

2007-01-09  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/plparse/totem-pl-parser-lines.c: (totem_pl_parser_add_ram),
	(totem_pl_parser_add_m3u):
	* src/plparse/totem-pl-parser-misc.c: (totem_pl_parser_add_gvp),
	(totem_pl_parser_add_desktop):
	* src/plparse/totem-pl-parser-pls.c: (totem_pl_parser_add_pls):
	* src/plparse/totem-pl-parser-private.h:
	* src/plparse/totem-pl-parser-qt.c:
	(totem_pl_parser_add_quicktime_rtsptextrtsp):
	* src/plparse/totem-pl-parser-wm.c:
	(totem_pl_parser_add_asf_reference_parser),
	(totem_pl_parser_add_asf_parser):
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse_xml_file):
	Remove totem_pl_parser_read_entire_file() and use gnome-vfs directly,
	require a newer version of gnome-vfs that will null-terminate
	strings from gnome_vfs_read_entire_file()

2007-01-08  Bastien Nocera  <hadess@hadess.net>

	* autogen.sh:
	* configure.in:
	* data/Makefile.am:
	* src/Makefile.am:
	* src/backend/Makefile.am:
	* src/plparse/Makefile.am:
	* src/plparse/totem-disc.c: (cb_mount_done):
	* src/totem-properties-main.c:
	* src/totem-uri.c:
	* src/totem-video-indexer.c: Patch from Christian Persch
	<chpe@svn.gnome.org> to update the crufty build system
	(Closes: #394409)

2007-01-08  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-lines.c:
	* src/plparse/totem-pl-parser-media.c:
	* src/plparse/totem-pl-parser-media.h:
	* src/plparse/totem-pl-parser-pls.c:
	* src/plparse/totem-pl-parser-qt.c:
	* src/plparse/totem-pl-parser-smil.c:
	* src/plparse/totem-pl-parser-xspf.c: Clean up includes

2007-01-08  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/*: Commit huge mess to split the parsers from
	the TotemPlParser object code (Closes: #350268)

2007-01-08  Bastien Nocera  <hadess@hadess.net>

	* data/uri.glade:
	* src/totem.c: (totem_compare_recent_stream_items),
	(totem_action_add_recent_stream), (totem_action_open_location):
	Patch from Philip Withnall <bugzilla@tecnocode.co.uk> to remember the
	URLs added in the "Open URL", and add them to the Recent Files
	(Closes: #338020)

2007-01-08  Christian Persch  <chpe@svn.gnome.org>

	* src/plparse/test-parser.c: (main): Test-parser expects URIs not
	filenames, so use STRING instead of FILENAME for goption argument
	parsing. Bug #394009.

2007-01-05  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: Add a bunch of missing
	mime-types (Closes: #361043)

2007-01-05  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_handle_element_message):
	Use the right structure field to extract the percentage (#392898).

2007-01-05  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_handle_element_message):
	  Handle "progress" message that qtdemux >= 0.10.4 posts instead of
	  a buffering message (Closes: #392898).

2007-01-04  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (escape_device_name_for_menu),
	(add_device_to_menu): Escape the disc name before adding it
	to the menu, so we don't have mnemonics when we don't mean
	to (Closes: #391206)

2007-01-04  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-volume.c: (bacon_volume_button_init),
	(bacon_volume_button_update_tip),
	(bacon_volume_scale_value_changed):
	* src/bacon-volume.h: Update from libbacon, adds a tooltip
	to the volume button

2007-01-03  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: Patch from Philip Withnall
	<bugzilla@tecnocode.co.uk> to allow the keyboard to work
	on the Image settings sliders (Closes: #364644)
	* src/totem-preferences.h: added G_BEGIN_DECLS

2007-01-03  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade: Patch from Denis Washington
	<dwashington@gmx.net> to italicise the labels before the
	actual metadata (Closes: #383024)

2007-01-02  Christian Persch  <chpe@svn.gnome.org>

	* browser-plugin/totemPlugin.cpp:
	Check if the handler is the external protocol handler. Bug #391519.

2006-12-19  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/tests/.htaccess:
	* browser-plugin/tests/totem-href.mov: make test 2 work

2006-12-18  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (parse_xspf_track): Don't crash
	if there's no URL found in the XSPF track entry (Closes: #386089)

2006-12-18  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/tests/index.html: print the plugin list
	* browser-plugin/tests/launch-web-server.sh: add some code to log
	the user-agent used
	* browser-plugin/totemNarrowSpacePlugin.cpp: use QuickTime's real
	plug-in name, to avoid detection problems

2006-12-18  Irene Huang  <irene.huang@sun.com>

	* src/bacon-volume.c: (cb_dock_key_release): remove grab of
	the dock button after escape key is released. Fixes bug 385391.

2006-12-16  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (size_changed_cb),
	(bacon_video_widget_motion_notify),
	(bacon_video_widget_button_press),
	(bacon_video_widget_button_release),
	(bacon_video_widget_size_allocate),
	(bacon_video_widget_class_init), (bvw_bus_message_cb),
	(parse_stream_info), (bacon_video_widget_set_property),
	(bacon_video_widget_get_property),
	(bacon_video_widget_set_deinterlacing), (bvw_error_from_gst_error),
	(poll_for_state_change_full),
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_set_subtitle_font),
	(bacon_video_widget_set_subtitle_encoding),
	(bacon_video_widget_set_volume),
	(bacon_video_widget_fullscreen_mode_available),
	(bacon_video_widget_set_fullscreen),
	(bacon_video_widget_set_show_cursor), (get_visualization_size),
	(bacon_video_widget_set_show_visuals),
	(bacon_video_widget_set_visuals_quality),
	(bacon_video_widget_set_auto_resize),
	(bacon_video_widget_set_aspect_ratio),
	(bacon_video_widget_set_zoom),
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_current_frame), (cb_gconf),
	(bacon_video_widget_new):
	  Make indentation consistent (tabs => spaces).

2006-12-16  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_is_seekable):
	  Use SEEKING query to query seekability instead of second-guessing
	  based on whether we have a duration or not (Closes: #365414).
	  Needs decoder/demuxer support.

2006-12-16  Christian Persch  <chpe@cvs.gnome.org>

	* src/totem-playlist.c: (set_playing_icon), (init_columns),
	(totem_playlist_finalize), (totem_playlist_clear),
	(totem_playlist_class_init): Just use a named icon in the cell
	renderer, and fix a missing return value. Bug #386279 and bug #386283.

2006-12-15  Christian Persch  <chpe@cvs.gnome.org>

	* browser-plugin/totemGMPPlugin.cpp:
	Add audio/mpeg to list of known mime types. Bug #386318.

2006-12-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_set_playlist), (totem_embedded_push_parser):
	* configure.in:
	* src/plparse/test-parser.c: (test_parsing_real), (main):
	* src/plparse/totem-pl-parser.c: (totem_pl_resolve_url),
	(totem_pl_parser_add_ram),
	(totem_pl_parser_add_asf_reference_parser),
	(totem_pl_parser_add_asf_parser),
	(totem_pl_parser_add_pls_with_contents), (totem_pl_parser_add_pls),
	(totem_pl_parser_add_m3u), (parse_asx_entry),
	(totem_pl_parser_add_asx), (totem_pl_parser_add_block),
	(totem_pl_parser_add_ra), (totem_pl_parser_add_smil),
	(totem_pl_parser_add_gvp), (totem_pl_parser_add_asf),
	(totem_pl_parser_add_quicktime_rtsptextrtsp),
	(totem_pl_parser_add_quicktime_metalink),
	(totem_pl_parser_add_quicktime), (totem_pl_parser_add_desktop),
	(totem_pl_parser_add_iso), (totem_pl_parser_add_cue),
	(totem_pl_parser_add_xspf), (totem_pl_parser_add_directory),
	(totem_pl_parser_parse_internal),
	(totem_pl_parser_parse_with_base), (totem_pl_parser_parse):
	* src/plparse/totem-pl-parser.h:

	Add a totem_pl_parser_parse_with_base() and modify all the parser
	functions to accept it as a parameter. Actually implement base parsing
	in the ASX parser, add test code to test-parser, make the
	plugin viewer pass the base URI when parsing playlists

	Fixes playback on the Mix Megapol site (Closes: #378581)

2006-12-15  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/.cvsignore:
	* browser-plugin/Makefile.am:
	* browser-plugin/org_gnome_totem_PluginViewer.xml:
	* browser-plugin/totem-plugin-viewer.c:
	(totem_embedded_class_init), (totem_embedded_open_internal),
	(my_gdk_spawn_make_environment_for_screen), (sn_error_trap_push),
	(sn_error_trap_pop), (make_spawn_environment_for_sn_context),
	(free_startup_timeout), (startup_timeout), (add_startup_timeout),
	(totem_embedded_launch_player), (totem_embedded_update_menu),
	(on_open1_activate), (on_video_button_press_event):
	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h:
	* browser-plugin/totempluginviewer-marshal.list:
	Pass timestamps when launching the player from the plugin,
	Add startup notification support when launching the stand-alone player,
	only stop the playback when launching from the "Open" menu item,
	otherwise we get black on-screen bits with GStreamer
	(Closes: #375674)

2006-12-14  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_init_backend), (bacon_video_widget_new):
	  Fix initialisation/debug category setup.

2006-12-14  Bastien Nocera  <hadess@hadess.net>

	* src/ev-sidebar.h: Fix typo, thanks uws

2006-12-14  Christian Persch  <chpe@cvs.gnome.org>

	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_set_href),
	(totem_embedded_launch_player):
	Fix DBUS method return values. Bug #385572.

2006-12-13  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/org_gnome_totem_PluginViewer.xml:
	* browser-plugin/totem-plugin-viewer.c: (totem_embedded_set_error),
	(totem_embedded_set_state), (totem_embedded_set_href),
	(totem_embedded_launch_player), (on_open1_activate),
	(on_copy_location1_activate), (on_video_button_press_event),
	(totem_embedded_construct), (main):
	Move launching the external player to the viewer, set the HREF
	cursor correctly
	* browser-plugin/totemPlugin.cpp: move the player launching to the
	viewer, and set the "cursor" in the viewer when pushing the HREF
	to the viewer
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_thread): Close the stream before propagating
	the error through a signal

2006-12-13  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_async_error),
	(bacon_video_widget_open_thread), (bacon_video_widget_open_async),
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_close): open fd://0 async, so that it doesn't
	block waiting for data to come in, fixes the browser plugin with
	xine-lib (Closes: #375866)
	* src/backend/bvw-test.c: (test_bvw_set_mrl), (on_redirect),
	(on_eos_event), (error_cb), (main):
	catch errors, fix up indent

2006-12-11  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (cb_gconf):
	  Fix copy'n'pasto and update the buffer-size when the buffer-size key
	  is changed, not the buffering threshold. (Closes: #382350)

2006-12-11  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new):
	  Fix nonsensical code; don't overwrite speaker setup preferences
	  saved in gconf with default values when run in metadata or
	  capture mode. (Closes: #379740)

2006-12-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_clear):
	* src/totem-playlist.h: return TRUE in totem_playlist_clear when
	we've actually cleared anything (ie. wasn't empty before)
	* src/totem.c: (totem_action_open_files_list),
	(update_media_menu_items): use the retval from totem_playlist_clear
	and only return TRUE if we actually added entries to the playlist.
	This means the first "open files" on startup gets the right retval
	and sets up the logo mode if none of the files passed added anything
	to the playlist (Closes: #384736)

2006-12-11  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_ignore),
	(totem_pl_parser_parse_internal): Remove unneeded work-around for
	Allofmp3, they've switched to using Flash, read the data off the files
	passed if they look like MP3s in name, and are at the top-level.
	Fixes parsing of the playlists from rozhlas.cz (Closes: #384656)

2006-12-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (add_device_to_menu): fix warning

	* src/totem-scrsaver.c: (totem_scrsaver_set_state):
	* src/totem-scrsaver.h:
	* src/totem.c: (totem_action_play): only disable the screensaver
	if we actually managed to play the movie

2006-12-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (save_pixbuf), (main): port to
	GOption, add the ability to disable the time monitor thread
	(Closes: #163036)

2006-12-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem-options.c: hide the 2 session related options from
	being printed in --help, they're for internal use only
	* src/totem.c: (property_notify_cb): remove debug

2006-12-06  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_set_logo_mode):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_logo_mode):

	Send an Object Notify event when the logo mode changes

	* src/totem-menu.c: (totem_ui_manager_setup):
	* src/totem.c: (totem_action_zoom), (property_notify_cb),
	(totem_callback_connect), (video_widget_create):

	Disable the zoom menu entries when the logo mode is on
	(Closes: #355506)

2006-12-06  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/backend/bacon-video-widget-xine.c: (xine_try_error),
	(bacon_video_widget_button_press),
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_current_frame):
	* src/totem.c: (on_video_button_press_event),
	(video_widget_create): Remove old < 2.9.1 glib compat code in the
	xine-lib backend, Make double-click toggle fullscreen, and a middle
	click play/pause (Closes: #162814)

2006-12-06  Bastien Nocera  <hadess@hadess.net>

	* configure.in: print out all the options enabled/disabled after the
	configure checks, re-add the "unused" D-Bus checks, they were
	used by the gnome-screensaver code, and broken since 2.17.2
	(Closes: #380675)

2006-12-06  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in:
	* src/totem-playlist.c: (totem_playlist_add_files):
	* src/totem-uri.c: (totem_uri_get_subtitle_uri), (totem_add_files):
	* src/totem-uri.h:
	* src/totem.c: (totem_action_open_dialog),
	(totem_action_load_media_device), (totem_action_open),
	(totem_action_open_files_list):
	* src/totem.h: Remember the paths used in the Open dialogue and store
	them in GConf (Closes: #381432), Make _get_subtitle_uri faster
	by checking earlier if we support the scheme

2006-12-05  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_can_set_volume), (bacon_video_widget_new):
	Have _can_set_volume behave properly, don't fail creating the
	video widget if we can't create an audio sink and we're not in audio
	mode (Closes: #170719)

2006-12-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem-uri.c: (totem_setup_file_filters): Show CUE and ISO files
	in the Open dialogue as well (Closes: #381261)

2006-12-01  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt:
	* src/plparse/totem-pl-parser.c: (read_ini_line_string_with_sep),
	(read_ini_line_string), (totem_pl_parser_add_gvp):
	Add support for Google Video Pointers in the playlist parser, and
	add them as supported to the mime-type list (Closes: #381108)

2006-12-01  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: Add "video/flv" as supported, as used
	on YouTube

2006-11-30  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_option_group): Fix xine-lib build
	* src/totem-video-indexer.c: (main): error out if we don't have
	exactly one filename
	* src/totem.c: (main): kill gtk_init() by adding the gtk GOptionGroup
	to the help context

	Thanks again to Christian Persch

2006-11-29  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_get_option_group): Remove useless cast
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_option_group),
	(bacon_video_widget_init_backend): Fix xine-lib build
	* src/totem-options.c: (totem_options_process_for_server):
	Return early if we don't have any filenames to pass
	* src/totem-options.h: Put the "seek to" option in a gint64
	* src/totem-session.c: (totem_save_yourself_cb): Fix thinko, and
	properly set the playlist name to be a URI
	* src/totem-video-indexer.c: (main): Finish porting to GOption
	* src/totem.c: (main): Fix option parsing when using the GTK+ only
	version

	GOption-related fixes, with help from Christian Persch
	<chpe@cvs.gnome.org>

2006-11-29  Bastien Nocera  <hadess@hadess.net>

	* configure.in: upd the glib and libgnome requirements
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_get_option_group),
	(bacon_video_widget_init_backend):
	* src/backend/bacon-video-widget.h:
	* src/totem-options.c: (totem_options_process_late),
	(totem_options_process_early), (totem_options_process_for_server):
	* src/totem-options.h:
	* src/totem-private.h:
	* src/totem-session.c: (totem_save_yourself_cb),
	(totem_session_setup), (totem_session_restore):
	* src/totem-session.h:
	* src/totem-video-indexer.c: (main):
	* src/totem-video-thumbnailer.c:
	* src/totem.c: (main): Adapted patch from Luis Menina
	<liberforce@fr.st> to port the main movie player, and the indexer
	to GOption (Closes: #338954)

2006-11-29  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (load_video_out_driver),
	(bacon_video_widget_realize), (bacon_video_widget_new):
	* src/backend/bacon-video-widget.h:
	* src/totem-video-thumbnailer.c: (main):
	Remove the useless "still image" metadata check,
	Make the xine-lib backend use xine_get_current_frame, so that we don't
	finish the playback before we could capture a frame (Closes: #325768)

2006-11-27  Bastien Nocera  <hadess@hadess.net>

	* configure.in: up the soname
	* src/plparse/totem-disc.c: (cd_cache_has_medium),
	(totem_cd_detect_type), (totem_cd_has_medium):
	* src/plparse/totem-disc.h: add a public totem_cd_has_medium to
	check whether a drive has a medium inserted using HAL, don't print
	warnings if a child of a drive doesn't have a is_disc property
	* src/totem-menu.c: (add_device_to_menu): if there's no medium inside
	the drive, disabled the menu entry (Closes: #320269)

2006-11-27  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_class_init), (bacon_video_widget_get_property),
	(bacon_video_widget_set_tv_out),
	(bacon_video_widget_can_set_volume),
	(bacon_video_widget_set_volume),
	(bacon_video_widget_set_show_visuals):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_class_init), (bacon_video_widget_init),
	(bacon_video_widget_get_property), (bacon_video_widget_set_volume),
	(bacon_video_widget_set_tv_out):
	* src/backend/bacon-video-widget.h:
	* src/totem-preferences.c: (on_tvout_toggled):
	* src/totem.c: (volume_notify_cb), (totem_callback_connect),
	(video_widget_create): Remove the TV-Out restart dialogue bits, both
	GStreamer and xine-lib can do without (Helps: 322226),
	Remove the need for update_gui_cb polling so that we don't wake Totem
	up when not playing anything (Helps: #363164)

2006-11-27  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (show_vfx_update):
	Fall-back to goom if we failed to setup another visual plugin

2006-11-27  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-common.c:
	(bacon_video_widget_common_get_vis_quality):
	* src/backend/bacon-video-widget-xine.c: (size_changed_cb):
	Really fix the xine-lib build, have
	bacon_video_widget_common_get_vis_quality's sanity tests the right
	way around

2006-11-27  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_realize), (size_changed_cb),
	(get_visualization_size):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_finalize), (size_changed_cb),
	(bacon_video_widget_set_visuals_quality): Hopefully fix xine-lib build,
	Make the GStreamer backend respect widescreen output for visualisations

2006-11-27  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-common.c:
	(bacon_video_widget_common_can_direct_seek),
	(bacon_video_widget_common_get_vis_quality):
	* src/backend/bacon-video-widget-common.h:
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_init), (bacon_video_widget_finalize),
	(has_subp), (get_stream_info_objects_for_type), (get_list_of_type),
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_can_direct_seek), (bacon_video_widget_close):
	* src/backend/bacon-video-widget-private.h:
	* src/backend/bacon-video-widget-xine.c: (bacon_video_widget_init),
	(xine_event_message), (bacon_video_widget_tick_send),
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_can_direct_seek),
	(bacon_video_widget_seek_time), (bacon_video_widget_close),
	(bacon_video_widget_get_position),
	(bacon_video_widget_get_stream_length),
	(bacon_video_widget_is_seekable):
	* src/backend/bacon-video-widget.h: Move
	bacon_video_widget_can_direct_seek to a common file, move vis_qualities
	there as well

2006-11-20  Christian Persch  <chpe@cvs.gnome.org>

	* src/plparser/test-parser.c:
	Port to GOption. Bug #378577.

2006-11-26  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new): Set the profile property on the audio sink
	so it respects the GNOME settings for audio output

2006-11-23  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade:
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_new):
	* src/totem-properties-main.c: (totem_properties_get_pages): Patch
	from Eskil Bylund to fix spacing in the properties pages
	(Closes: #373171)

2006-11-23  Bastien Nocera  <hadess@hadess.net>

	* src/totem-session.c: (totem_session_restore): Patch from
	Marek Schmidt <xschmi01@stud.fit.vutbr.cz> to fix restoring the
	session. The playlist expects URI, we fed it a local filename
	(Closes: Debian #399983)

2006-11-22  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_set_fullscreen): Fix compilation with NVTV support
	and the GStreamer backend (Closes: #378096)

2006-11-22  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemStringGlue.h: patch from Christian Persch to
	fix the Mozilla string compat code

2006-11-20  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h:
	* browser-plugin/totemStringGlue.h:
	* configure.in: detect Mozilla 1.7 and use the proper string functions,
	most of the code from Christian Persch (Closes: #375624)

2006-11-20  Christian Persch  <chpe@cvs.gnome.org>

	* brower-plugin/totemPlugin.cpp:
	Really fix test for supported schemes. Bug #375677.

2006-11-20  Christian Persch  <chpe@cvs.gnome.org>

	* brower-plugin/totemPlugin.cpp:
	Fix test for supported schemes. Bug #375677.

2006-11-19  Christian Persch  <chpe@cvs.gnome.org>

	* brower-plugin/totemPlugin.cpp:
	If 'hidden' attribute is set without value, assume we're
	hidden. Bug #376757.

2006-11-19  Christian Persch  <chpe@cvs.gnome.org>

	* brower-plugin/totemPlugin.cpp:
	Use GetURLNotify, bug #376736.
	Fix uninstalled plugin viewer binary name.

2006-11-19  Bastien Nocera  <hadess@hadess.net>

	* src/ev-sidebar.c: (ev_sidebar_close_clicked_cb): send the "closed"
	signal before hiding the sidebar, so that the sidebar button's state
	is correct after using the "Close" button (Closes: #376805)

2006-11-17  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/.cvsignore:
	* src/.cvsignore: upd

2006-11-17  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-volume.c: (bacon_volume_button_load_icons): updated
	from libbacon

2006-11-16  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Patch from Thomas Vander Stichele
	<thomas at apestaart dot org> to make GStreamer the default backend
	(Closes: #309714)

2006-11-16  Christian Persch  <chpe@cvs.gnome.org>

	* configure.in:
	Use AC_COMPILE_IFELSE instead of deprecated variant.

2006-11-16  Christian Persch  <chpe@cvs.gnome.org>

	* configure.in:
	* brower-plugin/Makefile.am:
	Compile with -fno-rtti. Cleanup unused CFLAGS. Bug #375881.

2006-11-16  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/test-parser.c: (test_data):
	* src/plparse/totem-pl-parser.c:
	(totem_pl_parser_can_parse_from_filename): Use GMappedFile instead
	of loading the whole possible playlists in memory (Closes: #375680)

2006-11-16  Christian Persch  <chpe@cvs.gnome.org>

	* browser-plugin/totemPlugin.cpp:
	Use the IO service to determine whether a given scheme is supported.
	Bug #375677.

2006-11-16  Christian Persch  <chpe@cvs.gnome.org>

	* browser-plugin/totemPlugin.cpp:
	Support image/gif and image/jpeg in the narrowspace plugin.
	Bug #375611.

2006-11-16  Christian Persch  <chpe@cvs.gnome.org>

	* browser-plugin/totemGMPPlugin.cpp:
	Add audio/x-mpegurl to mime types list. Bug #375205.

2006-11-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/tests/.htaccess: upd
	* browser-plugin/tests/1.html:
	* browser-plugin/tests/2.html:
	Add test 1: previewimage param for the MullY plugin
	Add test 2: basic href support
	* browser-plugin/tests/launch-web-server.sh: add the rewrite module
	* browser-plugin/tests/mjpeg-totem-logo.avi: created a simple video
	to show playback (MJPEG video, AVI container, no sound)
	* browser-plugin/tests/totem-href.jpg: add simple "HREF" image

2006-11-15  Christian Persch  <chpe@cvs.gnome.org>

	* Makefile.am:
	* browser-plugin/Makefile.am:
	* browser-plugin/README:
	* browser-plugin/TODO:
	A browser-plugin/org_gnome_totem_PluginViewer.xml:
	A browser-plugin/totem-plugin-viewer-commands.h:
	A browser-plugin/totem-plugin-viewer-options.h:
	A browser-plugin/totem-plugin-viewer.c:
	* browser-plugin/totemBasicPlugin.cpp:
	* browser-plugin/totemBasicPlugin.h:
	* browser-plugin/totemComplexPlugin.cpp:
	* browser-plugin/totemComplexPlugin.h:
	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemGMPPlugin.h:
	* browser-plugin/totemMullYPlugin.cpp:
	* browser-plugin/totemMullYPlugin.h:
	* browser-plugin/totemNarrowSpacePlugin.cpp:
	* browser-plugin/totemNarrowSpacePlugin.h:
	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h:
	* browser-plugin/totemPluginGlue.cpp:
	* configure.in:
	* data/mozilla-viewer.glade:
	* po/POTFILES.in:
	* src/Makefile.am:
	* src/backend/bvw-test.c: (on_redirect), (main):
	* src/plparse/totem-pl-parser.c:
	(totem_pl_parser_can_parse_from_data):
	R src/totem-mozilla-interface.xml:
	R src/totem-mozilla-options.h:
	R src/totem-mozilla-viewer.c:

	Make plugin / viewer interaction completely async. Bug #350297.
	Move plugin viewer from src/ to browser-plugin/.

============ Version 2.17.3

2006-11-15  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.17.3

2006-11-15  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (button_press_cb), (button_release_cb),
	(drag_end_cb), (treeview_row_changed): Patch from
	Jan Arne Petersen <jpetersen@jpetersen.org> to avoid the playlist
	not accepting new drops after a drop caused an error dialogue
	to appear (Closes: #370736)

2006-11-15  Bastien Nocera  <hadess@hadess.net>

	* src/totem-sidebar.c: (totem_sidebar_setup):
	* src/totem.c: (totem_action_save_state),
	(main_pane_size_allocated), (totem_setup_window),
	(video_widget_create): Patch from Jan Arne Petersen
	<jpetersen@jpetersen.org> to make Totem remember the width
	of the sidebar even when Totem was maximised when we exited
	(Closes: #365211, #361800, #316286)

2006-11-14  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/tests/.cvsignore:
	* browser-plugin/tests/.htaccess:
	* browser-plugin/tests/index.html:
	* browser-plugin/tests/launch-web-server.sh: add a script to startup
	Apache for plugin testing purposes

2006-11-09  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: add a name and a label for/labelled by relationship
	for the seek slider (Closes: #364721)

2006-11-06  Bastien Nocera  <hadess@hadess.net>

	* data/totem-ui.xml:
	* src/totem-menu.c: (properties_action_callback):
	* src/totem-private.h:
	* src/totem-sidebar.c: (totem_sidebar_toggle),
	(totem_sidebar_set_current_page):
	* src/totem-sidebar.h:
	* src/totem.c: (totem_action_show_properties),
	(totem_action_handle_key_press):
	Re-add a "Properties" menu item in the Movie menu, by popular
	demand (Closes: #369958)

2006-11-03  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-volume.c: (bacon_volume_button_class_init),
	(bacon_volume_button_new), (bacon_volume_button_style_set),
	(bacon_volume_scale_class_init), (bacon_volume_button_update_icon),
	(bacon_volume_scale_value_changed),
	(bacon_volume_button_load_icons):
	* src/bacon-volume.h: Patch from Christian Persch
	<chpe@cvs.gnome.org> to simplify the icon theme use, and remove the
	old useless HAVE_GTK_ONLY bits, they looked naf anyway
	(Closes: #370028)

2006-11-03  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (drag_begin_cb),
	(totem_playlist_style_set), (update_repeat_cb), (update_lockdown),
	(init_config), (totem_playlist_init), (totem_playlist_finalize),
	(totem_playlist_new), (totem_playlist_add_one_mrl),
	(totem_playlist_clear), (totem_playlist_get_current_mrl),
	(totem_playlist_get_current_title),
	(totem_playlist_get_current_metadata),
	(totem_playlist_has_previous_mrl), (totem_playlist_has_next_mrl),
	(totem_playlist_set_title), (totem_playlist_set_playing),
	(totem_playlist_set_previous), (totem_playlist_set_next),
	(totem_playlist_get_repeat), (totem_playlist_set_repeat),
	(totem_playlist_get_shuffle), (totem_playlist_set_shuffle),
	(totem_playlist_set_at_start), (totem_playlist_set_at_end),
	(totem_playlist_get_current), (totem_playlist_get_last),
	(totem_playlist_set_current), (totem_playlist_class_init):
	* src/totem-playlist.h: Patch from Christian Persch
	<chpe@cvs.gnome.org> to simplify the icon theme use, and fix a few nits
	(and catch left-overs from when TotemPlaylist was GtkPlaylist, circa
	2003) (Closes: #370028)

2006-11-03  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-resize.c: (bacon_resize), (bacon_restore):
	Trap errors calling XRandR and co. to avoid annoying crashes

============ Version 2.17.2

2006-11-03  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.17.2, detect a non-deadlock-y version of XRandR
	* src/backend/Makefile.am:
	* src/backend/bacon-resize.c: (bacon_resize_init):
	Re-enable XRandR/XF86VideoMode resizing (Closes: #129986)
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_realize),
	(bacon_video_widget_fullscreen_mode_available),
	(bacon_video_widget_set_fullscreen):
	Implement XRandR/XF86VideoMode resizing when setting fullscreen
	in the GStreamer backend

2006-11-03  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: Patch from Lubomir Marinov to make the "Zoom
	1:2", etc. menu items work again by not setting the width and height
	request on the video widget (Closes: #351798)

2006-11-03  Bastien Nocera  <hadess@hadess.net>

	* data/totem-ui.xml:
	* src/totem.c: (window_state_event_cb): add a fullscreen menu item
	in the contextual menu (Closes: #331956)

2006-11-03  Bastien Nocera  <hadess@hadess.net>

	* data/playlist.glade:
	* data/skip_to.glade:
	* data/totem.glade: remove unneeded requires on the gnome libglade

2006-11-03  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/Makefile.am: fix CFLAGS
	* src/totem-menu.c: (totem_ui_manager_connect_proxy_callback),
	(totem_ui_manager_setup): Invert Left/Right in the menu entries when
	using an RTL language
	* src/totem.c: (totem_action_handle_seek),
	(totem_action_handle_key_press): swap GDK_Right and GDK_Left actions
	when using an RTL language, so that it matches the directions used
	in the icons (Closes: #369440)

2006-11-02  Bastien Nocera  <hadess@hadess.net>

	* configure.in: remove unused d-bus checks

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_realize):
	* src/backend/video-utils.c: (totem_ratio_fits_screen):
	* src/bacon-volume.c: (bacon_volume_button_get_type),
	(bacon_volume_button_new), (bacon_volume_button_realize),
	(bacon_volume_button_press), (bacon_volume_key_release),
	(bacon_volume_release_grab), (cb_dock_key_release),
	(bacon_volume_scale_get_type), (bacon_volume_scale_value_changed),
	(bacon_volume_theme_changed), (bacon_volume_load_icons):
	* src/totem-playlist.c: (load_icon), (init_treeview),
	(totem_playlist_realize), (totem_playlist_unrealize),
	(totem_playlist_init):
	* src/totem.c: (window_realize_cb), (totem_callback_connect):

	Patches from Christian Persch <chpe@cvs.gnome.org> to fix the
	volume button not popping up on the 2nd screen (Closes: #369136)

	Fix multi-screen awareness (ie. don't use gtk_icon_theme_get_default
	or gdk_screen_get_default) (Closes: #369337)

2006-11-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (totem_lang_table_parse_start_tag): avoid warnings when
	parsing the qaa-qtz iso-codes entry

2006-11-01  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: Call play, pause and stop
	asynchronously

2006-11-01  Bastien Nocera  <hadess@hadess.net>

	* configure.in: require gnome-icon-theme 2.15.90 to get
	the view-restore icon

2006-11-01  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/playlist-playing.png:
	* data/stock_media_next.png:
	* data/stock_media_pause.png:
	* data/stock_media_play.png:
	* data/stock_media_previous.png:
	* data/totem.glade:
	* src/Makefile.am:
	* src/bacon-volume.c: (bacon_volume_button_init),
	(bacon_volume_button_dispose), (bacon_volume_button_new),
	(bacon_volume_scale_value_changed), (bacon_volume_theme_changed),
	(bacon_volume_load_icons):
	* src/bacon-volume.h:
	* src/totem-menu.c: (on_recent_file_item_activated),
	(totem_recent_manager_changed_callback),
	(totem_ui_manager_connect_proxy_callback):
	* src/totem-playlist.c: (totem_playlist_set_reorderable),
	(load_icon), (icon_theme_changed), (totem_playlist_save_playlist),
	(set_playing_icon), (init_columns), (init_treeview),
	(totem_playlist_realize), (totem_playlist_init),
	(totem_playlist_finalize), (totem_playlist_new),
	(totem_playlist_add_one_mrl), (totem_playlist_set_playing):
	* src/totem-stock-icons.c:
	* src/totem-stock-icons.h:
	* src/totem.c: (totem_action_exit), (totem_callback_connect),
	(main):

	Big patch from Jan Arne Petersen <jpetersen@jpetersen.org> to make
	use of named icons instead of stock icons (Closes: #357143)

2006-10-31  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/.cvsignore:
	* src/Makefile.am:
	* src/backend/gstscreenshot.c:
	* src/backend/gstscreenshot.h:
	* src/metadata-test.c:
	* src/totem-video-indexer.c: (main):
	Remove dead-code:
	- GStreamer 0.8 code in gstscreenshot.[ch]
	- metadata-test which doesn't add anything to totem-video-indexer

	Add GNOME authentication manager support to totem-video-indexer

2006-10-30  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_class_init):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_class_init), (bacon_video_widget_idle_signal),
	(xine_event), (bacon_video_widget_can_direct_seek):
	* src/backend/bacon-video-widget.h:
	* src/totem-playlist.c: (totem_playlist_save_add_format_combo_box):
	* src/totem.c: (video_widget_create):

	Remove the speed-warning signal, we weren't using it, and it's more
	annoying than anything else

	Implement direct seeking for local URIs and DVDs when using xine-lib
	(Closes: #151909)

	Remove unused variables in totem-playlist.c

2006-10-30  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h:
	* src/totem-mozilla-options.h:
	* src/totem-mozilla-viewer.c: (totem_embedded_set_state),
	(on_tick), (totem_embedded_add_children), (totem_statusbar_create):
	Another try, this time make sure the statusbar can be shown (duh!),
	and update it when playing

2006-10-30  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h:
	* data/mozilla-viewer.glade:
	* src/totem-mozilla-options.h:
	* src/totem-mozilla-viewer.c: (on_open1_activate),
	(totem_volume_create), (totem_statusbar_create): Finish the statusbar
	work, and disable the statusbar by default. Adds support for the "full"
	WMP interface, and the showstatusbar parameter (Closes: #367900)

2006-10-30  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (on_open1_activate): Launch the original
	URL, or the HREF pointed to when launching from a browser provided
	stream (Closes: #365278)

2006-10-30  Bastien Nocera  <hadess@hadess.net>

	* data/mozilla-viewer.glade:
	* src/Makefile.am:
	* src/totem-mozilla-viewer.c: Try to unbreak the build (especially
	wrt. totem-interface.c), and add a statusbar to the browser plugin

2006-10-30  Bastien Nocera  <hadess@hadess.net>

	* src/totem-statusbar.c: (totem_statusbar_init),
	(totem_statusbar_new_from_glade), (totem_statusbar_update_time),
	(totem_statusbar_set_text), (totem_statusbar_timeout_pop),
	(totem_statusbar_push), (totem_statusbar_pop),
	(totem_statusbar_set_seeking), (totem_statusbar_sync_description):
	* src/totem-statusbar.h:
	Set the Atk description on the statusbar whenever the status changes,
	or we're buffering

	* src/totem-subtitle-encoding.c: (subtitle_encoding_create_store):
	identation changes

2006-10-30  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_save_add_format_combo_box):
	Simplify the relationship code, thanks Maciej

2006-10-30  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_save_add_format_combo_box):
	Add relationships between the "select playlist format" label and
	combobox (Closes: #367606)

2006-10-30  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-volume.c: (bacon_volume_button_new): update from libbacon
	to add perceived names to the volume button itself, as well as +/-
	(Closes: #365557)

2006-10-30  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade: add relationships between property name labels
	and the property value labels (label-for and labelled-by)
	(Closes: #365203)

2006-10-30  Bastien Nocera  <hadess@hadess.net>

	* COPYING: fix typo spotted by Alexander Bostrom (Closes: #366278)

2006-10-29  Christian Persch  <chpe@cvs.gnome.org>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new): Sink the floating reference. Bug #366452.

2006-10-29  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c:
	(my_gnome_vfs_get_mime_type_with_data): initialise bytes_read
	to avoid problems with gnome-vfs not initialising it
	(See bug #366331)

2006-10-27  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/totem-mozilla-viewer.c: (on_error_event),
	(totem_embedded_add_children):
	  Catch errors that occur after we initiated playback (#361787).

2006-10-27  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (bvw_bus_message_cb),
	(bacon_video_widget_open_with_subtitle), (bacon_video_widget_play):
	  Don't go through lots of trouble to catch errors and fake non-async
	  behaviour to the frontend when the frontend doesn't even check for
	  errors. In other words: skip poll_for_state_change() and handle
	  errors asynchroneously if the frontend supplies a NULL error,
	  otherwise errors may be lost in some corner cases (#361787).

2006-10-27  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_remote),
	(totem_action_handle_key_press): fix remotely setting whether to
	show the controls, and trying to use the deinterlace on/off key
	shortcut

2006-10-27  Bastien Nocera  <hadess@hadess.net>

	* src/ev-sidebar.c: (ev_sidebar_init): remove some extraneous padding
	around the sidebar pages, there's already padding outside

2006-10-27  Bastien Nocera  <hadess@hadess.net>

	* configure.in: fix dbus detection (it's dbus-1, not dbus since 2003)
	(Closes: #365387)
	* src/plparse/totem-disc.c: (cd_cache_free): close the dbus connection
	before unref'ing it, as it is a private connection (Closes: #365265)

2006-10-26  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_stop_play_pipeline):
	  Don't use poll_for_state_change() when stopping, it can lead to
	  deadlocks when called from the bus handler (e.g. after redirect
	  message) and isn't really necessary anyway. (Closes: #361787)

2006-10-26  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/totem-private.h:
	* src/totem.c: (seek_slider_pressed_cb), (seek_slider_released_cb),
	(totem_action_handle_key_release), (totem_action_handle_key_press):
	  When seeking while playing, go straight back into playing mode after
	  the seek (ie. do full audio scrubbing as well). (Closes: #363699)

2006-10-26  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/.cvsignore:
	  Add totem-video-indexer.

2006-10-26  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: Patch from Jerry Tan <jerry.tan@sun.com>
	to add support for Wave and Au files (Closes: #365216)

2006-10-25  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp:
	
	If we still don't have a supported mime-type when we get a new stream,
	try getting the mime-type from the URL minus the possible script arguments,
	helps getting the mime-type from broken IIS web servers.

	Don't request a new stream if the SRC is given, and is the same URL as
	our filename/url/qtsrc parameter

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_is_asx),
	(totem_pl_parser_is_asf), (totem_pl_parser_can_parse_from_data):
	Add more debug to totem_pl_parser_can_parse_from_data's dual-types
	detection, and fix ASX playlist detection from data

	(Closes: #365025)

2006-10-25  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_get_metadata_string):
	  Make extra sure we only return valid UTF-8 strings as metadata,
	  since g_markup_escape_text() tends to just crash if the input is
	  not valid UTF-8 (see #360552).

2006-10-25  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (totem_embedded_set_state):
	use the ltr or rtl variants of the play button, the original
	doesn't actually exist (Closes: #364832)

2006-10-24  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPPlugin.cpp: Patch from Filip Palm
	<bugzilla@helmut.se> to add "video/mpeg" as a support mime-type
	for the GMP plugin (Closes: #364828)

2006-10-24  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: add documentation for showdisplay
	and showstatusbar
	* src/totem-mozilla-viewer.c: (totem_embedded_set_state),
	(totem_embedded_add_children), (totem_volume_create), (main):
	Try to make some icons a bit smaller, avoid warnings when
	the mime-type isn't given on the command-line

2006-10-24  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: fix parsing of "showcontrols"
	(Closes: #364722)

2006-10-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (play_pause_set_label), (totem_callback_connect):
	Set the accessible names for Play/Pause, Previous and Next
	(Closes: #364705)

2006-10-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key_release),
	(totem_action_handle_key_press): don't handle the cursor keys ourselves
	if the playlist has the focus, to avoid keyboard navigation problems
	(Closes: #364654)

2006-10-24  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-volume.c: (bacon_volume_button_class_init),
	(bacon_volume_button_new), (bacon_volume_key_release),
	(cb_dock_button_press), (cb_dock_key_release), (cb_dock_key_press),
	(bacon_volume_scale_value_changed): update from libbacon, to get
	better accessibility support (Closes: #364637)

2006-10-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (totem_embedded_open),
	(totem_embedded_set_menu), (on_copy_location1_activate):
	If we're streaming from the browser, use the original location to
	get the default player for the stream
	If we use an href, make the "Copy location" menu item copy the target
	link, not the current one (Closes: #357375)
	Only disable the "Copy location" if we are using a browser stream and
	have multiple items (which isn't possible...) (Closes: #351342)

2006-10-23  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: fix the same thinko as below for
	mNoAutostart, but with mControllerHidden
	* data/mime-type-list.txt: add image/x-pict as a support mime-type, it's
	used to masquerade some movies, as per Apple's instructions
	(Closes: #363182)

2006-10-23  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/test-parser.c: (entry_added): fix printing an empty genre
	* src/plparse/totem-pl-parser.c:
	(my_gnome_vfs_get_mime_type_with_data), (totem_pl_parser_add_asx),
	(totem_pl_parser_add_ra), (totem_pl_parser_is_uri_list): add a better
	text/uri-list detector for "plain text" playlists, and try to check
	whether we have a text/uri-list before parsing would-be-ASX playlists
	(Closes: #362622)

2006-10-23  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: Fix parsing of all in caps parameters,
	fix thinko that completely broke boolean parsing, fix other thinko that
	made made mNoAutostart have the opposite value to what it should

2006-10-22  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: gif and jpeg images are supported,
	rework the parameters parsing so that we are sure which order the
	parameters are parsed in (Closes: #364022), add the starts of
	imagepreview support for the DivX plugin

============ Version 2.17.1

2006-10-22  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 2.17.1
	* NEWS: upd

2006-10-21  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemMullYPlugin.cpp: add "video/x-msvideo" as
	a supported mime-type, allows playback of
	http://www.pancrace.tv/
	(Closes: #363214)

2006-10-21  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: Add basic support for Quicktime
	URL extensions (Closes: #363825)

2006-10-18  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: add support for the URL parameter
	(Closes: #362702), exit _fork if we don't have a URL
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_add_asf_parser),
	(totem_pl_parser_add_pls_with_contents), (totem_pl_parser_add_pls),
	(totem_pl_parser_add_asx), (totem_pl_parser_add_xspf):
	Fix return values, they're not gbooleans
	* src/totem-mozilla-viewer.c: (main): exit if we don't have any
	URLs passed, even when embedded

2006-10-18  James Livingston  <doclivingston@gmail.com>

	Initial Win32 porting stuff.

	* configure.in:
	* src/backend/bvw-test.c: (main):
	* src/backend/video-utils.c:
	* src/totem-screenshot.c: (totem_screenshot_temp_file):
	* src/totem-video-thumbnailer.c: (main):
	* src/totem.c: (main):

	* src/totem-scrsaver.c: (screensaver_enable_x11),
	(screensaver_disable_x11), (screensaver_init_x11),
	(totem_scrsaver_init), (totem_scrsaver_disable),
	(totem_scrsaver_enable), (totem_scrsaver_finalize): leave the
	implementation of this blank on non-X11 systems, and emit a warning.
	From #342926

2006-10-17  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemComplexPlugin.cpp: add "application/smil"
	as a supported mime-type, allows playback of
	http://www.koeln1.tv/stadtgeschichte/popup/schoolofcologne/popup.htm
	(Closes: #362917)

2006-10-17  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/plparse/totem-disc.c: (cd_cache_has_medium), (cd_cache_free),
	(cd_cache_disc_is_cdda), (cd_cache_disc_is_vcd),
	(cd_cache_disc_is_dvd): remove support for HAL < 0.5, we shouldn't
	need that anymore now that we need so recent everything else
	(Closes: #362888)

2006-10-17  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_free): Don't close the
	(possibly shared) connection, and unref it instead. See
	http://www.j5live.com/?p=264 for details

2006-10-17  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/idl/Makefile.am:
	* src/totem.c: (totem_callback_connect): Fix typos spotted by James
	Livingston <jrl@ids.org.au>

2006-10-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemComplexPlugin.cpp: add
	"application/vnd.rn-realmedia" as a supported mime-type, allows
	playback of streams at
	http://www.web62.com/videos/mp/travel/sri_unawatuna_surf_256.html
	(Closes: #362680)

2006-10-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: Prefer the filename parameter
	to the src one, allows playback of streams at
	http://www.ucvtv.cl/popup_online.htm (Closes: #362655), remove
	some unneeded code as pointed out by Christian Persch
	<chpe@cvs.gnome.org>

2006-10-16  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPPlugin.cpp: add "audio/x-ms-wax" as a 
	supported mime-type, allows playback of streams at
	http://www.tvcaraibes.com/2.html (Closes: #362676)

2006-10-16  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Remove help/fr/Makefile generation as it now uses
	gnome-docs-utils to generate the French help files (Closes: #362497)

2006-10-16  Bastien Nocera  <hadess@hadess.net>

	* src/totem-scrsaver.c: (screensaver_is_running_dbus),
	(totem_scrsaver_disable), (totem_scrsaver_enable):
	Modified patch from Niklas MellegÃ¥rd <nmellegard@hotmail.com> to
	really disable the screensaver (weird stuff) (Closes: #360537)

2006-10-14  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c:
	(my_gnome_vfs_get_mime_type_with_data),
	(totem_pl_parser_parse_internal): return success for empty
	files, and don't add them to the playlist, fixes playback of
	http://dvplayer.anp.tv (Closes: #362095)

2006-10-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: Cleanup and documentation
	links for the different controller/ui modes

2006-10-11  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse_xml_file):
	Remove HTML comments from the XML before parsing it (Closes: #360713),
	allows playback from http://streaming.liwest.at

2006-10-11  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse_xml_file),
	(totem_pl_parser_add_asx), (totem_pl_parser_add_smil),
	(totem_pl_parser_add_quicktime_metalink),
	(totem_pl_parser_add_xspf): Use a convenience function to grab a file
	and parse the XML file, so we can insert some XML unbreaking-fu
	in there

2006-10-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPPlugin.cpp: add "video/x-ms-wm"
	as a supported and advertised, to avoid error messages
	on the mixmegapol website website as in (Closes: #350930)

2006-10-11  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add application/x-quicktimeplayer
	as a supported mime-type
	* src/plparse/test-parser.c: (main): update the help output for
	"disable-unsafe"
	* src/plparse/totem-pl-parser.c:
	(totem_pl_parser_add_quicktime_rtsptextrtsp),
	(totem_pl_parser_add_quicktime_metalink),
	(totem_pl_parser_is_quicktime):
	Add a basic parser for RTSPtextRTSP quicktime reference files
	(Closes: #302482)

2006-10-11  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/test-parser.c: (test_parsing), (main):
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_class_init),
	(totem_pl_parser_set_property), (totem_pl_parser_get_property),
	(totem_pl_parser_parse_internal):
	* src/totem-mozilla-viewer.c: (totem_embedded_push_parser):
	Add a "disable-unsafe" property on the playlist parser, and mark
	some mime-types as unsafe (incidentally, the same ones that are
	disabled for the mini-version). Disable those mime-types when
	"disable-unsafe" is used, as used in the -viewer (Closes: #361426)

2006-10-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: start the viewer immediately
	when the src points to an unsupported scheme, in ::SetWindow,
	allows playback at channeluk.com (Closes: #361212)

2006-10-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPPlugin.cpp: add "video/x-ms-wma"
	as a supported mime-type (Closes: #361504)

2006-10-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPPlugin.cpp: move video/x-ms-wvx to the
	advertised-as-supported mime-types, as used on the adultswim.com
	website (Closes: #361183)

2006-10-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemComplexPlugin.cpp: add "audio/x-pn-realaudio"
	as a supported mime-type (Closes: #360973)

2006-10-11  Christian Persch  <chpe@cvs.gnome.org>

	* browser-plugin/totemPlugin.cpp:
	  - Don't destroy stream when we don't have one. Bug #360959.

2006-10-10  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c:
	(my_gnome_vfs_get_mime_type_with_data): always return duped strings
	otherwise we'll crash trying to free it later on, fixes parsing of
	directories and block devices (Closes: #360646)

2006-10-10  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/totem-video-indexer.c: Add the new video indexer for use
	with Beagle (or Tracker, or anything else for that matter)

2006-10-09  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: accept application/octet-stream
	mime-typed stream, whatever we're using. They're usually just broken
	web server setups (Closes: #360830)

2006-10-09  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPPlugin.cpp: add "audio/x-ms-asx" as
	a supported mime-type (Closes: #360831)

2006-10-08  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (show_controls): Patch from Eric Anderson to
	resize the window properly after hiding/showing the controls
	(Closes: #337232)

2006-10-08  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPPlugin.cpp: add "video/x-ms-asx" as a
	supported mime-type (Helps: #360713)

2006-10-08  Bastien Nocera  <hadess@hadess.net>

	* src/totem-session.c: (totem_save_yourself_cb): Don't save the state
	if the save style is Global, thanks to Dan Winship <danw@novell.com>
	for pointing that out

2006-10-08  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemBasicPlugin.cpp: add audio/x-mpeg to the list
	of supported mime-types (allows playback at
	http://www.joscho-stephan.de/html/sounds.html) (Closes: #360470)

2006-10-08  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/Makefile.am:
	* browser-plugin/totemPlugin.cpp:
	* configure.in: Patch from Christian Persch <chpe@cvs.gnome.org>,
	to add more warnings to the C++ build, and fix a few warnings as well
	(Closes: #360416)

2006-10-08  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: return immediately in ::Write if
	we already have a playlist, as we need to wait for it to be on-disk
	(Closes: #360592)

2006-10-08  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemBasicPlugin.cpp:
	* browser-plugin/totemComplexPlugin.cpp:
	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemMullYPlugin.cpp:
	* browser-plugin/totemNarrowSpacePlugin.cpp:
	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h:
	* browser-plugin/totemPluginGlue.cpp:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse_internal):
	Add a member to the totemPluginMimeEntry structure, on whether to show
	the mime-type as supported in the about: page, allows to add mime-types
	without having them show us as supported to work-around broken servers
	(allows playback on gunsnroses.com) (Closes: #360295),
	Hide audio/x-wav as well
	Check whether the mime-type is supported using the suffix if we can't find
	it in our list (Closes: #360569)

2006-10-07  Christian Persch  <chpe@cvs.gnome.org>

	* browser-plugin/totemPluginGlue.cpp:

	Don't crash when printing a page with a plugin. Bug #360253.

2006-10-06  Christian Persch  <chpe@cvs.gnome.org>

	* browser-plugin/Makefile.am:
	* browser-plugin/totemBasicPlugin.cpp:
	* browser-plugin/totemComplexPlugin.cpp:
	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemMullYPlugin.cpp:
	* browser-plugin/totemNarrowSpacePlugin.cpp:
	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h:
	A browser-plugin/totemPluginGlue.cpp:
	A browser-plugin/totemPluginGlue.h:
	R browser-plugin/totemScriptableBase.cpp:
	R browser-plugin/totemScriptableBase.h:

	Some plugin code refactoring. Bug #358139.

2006-10-04  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c:
	(my_gnome_vfs_get_mime_type_with_data),
	(totem_pl_parser_line_is_empty), (totem_pl_parser_add_ram),
	(totem_pl_parser_add_pls_with_contents), (totem_pl_parser_is_ra),
	(totem_pl_parser_parse_internal):
	Add a convenience function for checking from empty lines in playlists,
	Skip empty lines in _add_ram and _is_ra,
	Force use of the server provided mime-type on http servers, when we
	think a file is text/plain (such as most Real playlists)
	(Closes: #356439)

2006-10-04  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemBasicPlugin.cpp:
	add audio/x-wav as a supported mime-type (Closes: #359466)
	* browser-plugin/totemPlugin.cpp:
	Add debug if we're ignoring a stream

2006-10-02  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_with_subtitle):
	* src/backend/bacon-video-widget.h:
	* src/totem-mozilla-viewer.c: (totem_embedded_open):
	* src/totem-video-thumbnailer.c: (video_is_still_image), (main):
	remove the BVW_ERROR_STILL_IMAGE error on open, and instead
	use the BVW_INFO_STILL_IMAGE. This should allow us to playback
	the adverts (sigh) at http://atvs.vg.no (Helps: #358277)

2006-10-02  Francisco Javier F. Serrador  <serrador@openshine.com>

	* help/es/es.po: Updated Spanish doc translation 
	(Closes: #358944)

2006-10-02  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (about_action_callback):
	* src/totem-private.h: Use gtk_show_about_dialog, remove
	unused code

============ Version 2.17.0

2006-10-01  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.17.0

2006-10-01  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/test-parser.c: (test_parsing), (main):
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_class_init),
	(totem_pl_parser_set_property), (totem_pl_parser_get_property),
	(totem_pl_parser_parse_internal):
	* src/totem-mozilla-viewer.c: (totem_embedded_push_parser), (main):
	Add a "force parse" mode (the "force" property on the parser),
	which gets the mime-type from data, and make the Browser viewer
	always use it as the playlist should be on the local filesystem,
	fixes playback of streams at http://gametrailers.com/
	(Closes: #350912)

2006-10-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (on_about1_activate): correct the
	description in the About box (Closes: #350439)

2006-10-01  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* .cvsignore:
	* Makefile.am:
	* configure.in:
	* help/.cvsignore:
	* help/ChangeLog:
	* help/Makefile.am:
	* help/totem.omf.in:
	* help/C/totem.xml:
	* help/de/.cvsignore:
	* help/de/de.po:
	* help/es/.cvsignore:
	* help/es/es.po: migrate help documentation to gnome-doc-utils. Based
	on a patch from Don Scorgie <dscorgie@cvs.gnome.org>. (Closes: 346905)

	* help/C/Makefile.am:
	* help/C/totem-C.omf:
	* help/de/Makefile.am:
	* help/de/legal.xml:
	* help/de/totem-de.omf:
	* help/de/totem.xml:
	* help/es/Makefile.am:
	* help/es/legal.xml:
	* help/es/totem-es.omf:
	* help/es/totem.xml:
	* help/omf.make:
	* help/xmldocs.make: remove unneccessary files.

2006-10-01  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: add support for QTSRC,
	for which we need to close the current stream, and open a new
	one with the QTSRC (Closes: #351077)

2006-10-01  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemNarrowSpacePlugin.cpp: add image/x-macpaint
	and image/x-quicktime to the supported mime-types, as per
	http://developer.apple.com/documentation/QuickTime/QT6WhatsNew/Chap1/chapter_1_section_13.html
	(Helps: #351077)

2006-10-01  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemNarrowSpacePlugin.cpp: add video/mp4 support
	to the NarrowSpace plugin (Closes: #358706)

2006-09-29  Frederic Crozat  <fcrozat@mandriva.com>

	* browser-plugin/totemPlugin.cpp:
	* configure.in:
	* src/totem-interface.c: (totem_interface_get_full_path):
	* src/vanity.c: (main):
	Add --disable-run-in-source-tree option to configure, allowing
	to disable searching for glade file in directory relative
	to current directory (Closes: #358340)

2006-09-28  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* data/Makefile.am:
	* data/playlist-ui.xml:
	* data/playlist.glade:
	* src/totem-playlist.c: (playlist_copy_location_action_activated),
	(playlist_show_popup_menu), (treeview_button_pressed),
	(playlist_treeview_popup_menu), (playlist_remove_files),
	(playlist_remove_button_clicked),
	(playlist_remove_action_activated), (totem_playlist_key_press),
	(init_treeview), (totem_playlist_finalize), (totem_playlist_new):
	cleanup the playlist popup menu. Use GtkUIManager, add support for
	multiple selections, add 'Remove' item. (Closes: #309902)

2006-09-28  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/totem-statusbar.c: (totem_statusbar_set_text):
	  Restore playing/stopped text in statusbar properly
	  if has changed while we were buffering (#341233).

2006-09-27  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* src/totem.c: (window_state_event_cb): fix unref bug (Closes: #357885)

2006-09-26  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (get_media_size),
	(bacon_video_widget_play), (bacon_video_widget_is_playing):
	  Assume a pixel-aspect-ratio of 1:1 if the videosink doesn't
	  have a pixel-aspect-ratio property (such as sdlvideosink or
	  glimagesink). Don't assume the GType of the property is
	  always a G_TYPE_STRING, it might be a fraction as well.

2006-09-25  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(connection_speed_enum_to_kbps),
	(bacon_video_widget_set_scale_ratio),
	(bvw_get_caps_of_current_stream):
	  Get negotiated caps properly (for channel/codec/samplerate); fix
	  silly compiler warning; make _set_scale_ratio() output more debug
	  info.

2006-09-25  Christian Persch  <chpe@cvs.gnome.org>

	* data/playlist.glade:
	* data/properties.glade:
	* data/screenshot.glade:
	* data/skip_to.glade:
	* data/totem.glade:
	* data/uri.glade: Minor HIG tweaks. Bug #355516.

2006-09-25  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* po/POTFILES.in: remove earlier removed files
	* src/totem-menu.c: (totem_ui_manager_setup): add missing i18n macros
	(Closes: #357515)

2006-09-23  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (bvw_bus_message_cb),
	(bacon_video_widget_open_with_subtitle), (bacon_video_widget_play),
	(bvw_stop_play_pipeline), (bacon_video_widget_pause),
	(bacon_video_widget_is_playing):
	  Pause playback while we are re-buffering (#356860). Might only
	  work correctly with -base CVS.

2006-09-22  Christian Persch  <chpe@cvs.gnome.org>

	* browser-plugin/totemPlugin.cpp:
	* src/totem-mozilla-options.h:
	* src/totem-mozilla-viewer.c: (parse_xid), (main):
	Use GOption for argument parsing in the plugin viewer. Bug #338954.

2006-09-21  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* src/totem.c: (on_channels_change_event): update stream properties
	when channels-changed event is fired (Closes: #354974)

2006-09-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem-sidebar.c: (cb_resize): don't try to set a size
	if the width or height is negative (Closes: #355594)
	

2006-09-21  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* data/totem.glade:
	* src/bacon-volume.c: (bacon_volume_scale_value_changed):
	* src/totem-stock-icons.c: (totem_set_default_icons),
	(totem_named_icons_init): use stock (or themed) volume icons in
	full-screen volume slider; fix names of stock volume icons. (Closes:
	#356444)

	* data/Makefile.am:
	* data/rhythmbox-volume-max.png:
	* data/rhythmbox-volume-zero.png: remove no longer needed icons

2006-09-20  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* src/totem-playlist.c: (totem_playlist_save_files): use the builtin
	overwrite-confirmation of GtkFileChooser instead of extra code
	(Closes: #310457)

2006-09-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (save_pixbuf), (main):
	Remove duplicate code in the image saving functions, save
	original video/image's in the PNG's tEXt::Thumb::Image::Width
	and tEXt::Thumb::Image::Height attributes (Closes: #356930)

2006-09-20  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/test-parser.c: (main): Fix help string

2006-09-20  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* src/totem.c: (totem_callback_connect): use a GtkToggleButton with
	an arrow on it as the sidebar button. (Closes: #355508)

2006-09-20  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* src/totem-private.h:
	* src/totem.c: (totem_action_set_mrl_with_warning),
	(update_volume_sliders): desensitive volume-up and volume-down actions
	when boundary (100 or 0) is reached. (Closes: #167915)

2006-09-19  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* src/totem-stock-icons.c: (set_icon_for_action),
	(totem_set_default_icons), (totem_named_icons_init): add icons for
	volume-up and volume-down actions. (#355505)

2006-09-19  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: don't accept streams from
	the browser if they're not from a supported mime-type
	(http://webtv.tv2.no passes us text/html streams)
	(Helps: #355881)

2006-09-12  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_get_stream_info_of_current_stream),
	(bvw_get_caps_of_current_stream),
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata_int):
	  Try to get the audio/video codec from the current stream-info
	  first, so that they relate to the currently playing stream
	  (playbin needs some fixing first for the info to update
	  correctly after switching streams though).

2006-09-12  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(get_stream_info_objects_for_type),
	(bvw_get_caps_of_current_audio_stream), (audio_caps_have_LFE),
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata_int):
	  Get channel/sample rate information for current stream (#355511).
	  (Note that playbin needs fixing before this will update correctly
	  when switching streams).

	* src/metadata-test.c: (on_got_metadata_event):
	  Show channel/sample rate here too.

2006-09-12  Bastien Nocera  <hadess@hadess.net>

	* data/totem-ui.xml: add missing file, thanks Tim

2006-09-11  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade:
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata):
	* src/backend/bacon-video-widget-xine.c:
	* src/backend/bacon-video-widget.h:
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_reset),
	(bacon_video_widget_properties_update):
	Add support for the audio sample rate, and audio
	channels to the properties widget (Closes: #332831)

2006-09-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key_press),
	(on_window_key_press_event): handle the Apple remote's
	"Menu" button, when playing a DVD (Helps: #355474)

2006-09-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* data/Makefile.am:
	* data/popup.glade:
	* data/totem.glade:
	* src/Makefile.am:
	* src/egg-recent-item.c:
	* src/egg-recent-item.h:
	* src/egg-recent-model.c:
	* src/egg-recent-model.h:
	* src/egg-recent-util.c:
	* src/egg-recent-util.h:
	* src/egg-recent-view-gtk.c:
	* src/egg-recent-view-gtk.h:
	* src/egg-recent-view.c:
	* src/egg-recent-view.h:
	* src/totem-menu.c: (subtitles_changed_callback),
	(languages_changed_callback), (add_lang_action),
	(create_lang_actions), (totem_languages_update),
	(totem_subtitles_update), (on_recent_file_item_activated),
	(totem_compare_recent_items),
	(totem_recent_manager_changed_callback), (totem_setup_recent),
	(totem_action_add_recent), (on_play_disc_activate),
	(add_device_to_menu), (on_movie_menu_select),
	(totem_setup_play_disc), (open_action_callback),
	(open_location_action_callback), (eject_action_callback),
	(play_action_callback), (quit_action_callback),
	(take_screenshot_action_callback), (preferences_action_callback),
	(fullscreen_action_callback), (zoom_1_2_action_callback),
	(zoom_1_1_action_callback), (zoom_2_1_action_callback),
	(zoom_in_action_callback), (zoom_reset_action_callback),
	(zoom_out_action_callback), (next_angle_action_callback),
	(dvd_root_menu_action_callback), (dvd_title_menu_action_callback),
	(dvd_audio_menu_action_callback), (dvd_angle_menu_action_callback),
	(dvd_chapter_menu_action_callback), (next_chapter_action_callback),
	(previous_chapter_action_callback), (skip_to_action_callback),
	(skip_forward_action_callback), (skip_backwards_action_callback),
	(volume_up_action_callback), (volume_down_action_callback),
	(contents_action_callback), (about_action_callback),
	(repeat_mode_action_callback), (shuffle_mode_action_callback),
	(deinterlace_action_callback), (always_on_top_action_callback),
	(show_controls_action_callback), (show_sidebar_action_callback),
	(aspect_ratio_changed_callback),
	(totem_ui_manager_connect_proxy_callback),
	(totem_ui_manager_setup):
	* src/totem-menu.h:
	* src/totem-preferences.c: (deinterlace_changed_cb),
	(totem_setup_preferences):
	* src/totem-private.h:
	* src/totem-sidebar.c: (totem_sidebar_toggle),
	(toggle_sidebar_from_sidebar), (totem_sidebar_setup):
	* src/totem-sidebar.h:
	* src/totem-stock-icons.c: (totem_set_default_icons):
	* src/totem.c: (totem_action_menu_popup), (play_pause_set_label),
	(window_state_event_cb), (totem_action_open),
	(totem_action_open_location), (totem_action_take_screenshot),
	(totem_action_set_mrl_with_warning), (totem_action_zoom),
	(totem_action_toggle_aspect_ratio), (totem_action_show_help),
	(update_seekable), (commit_hide_skip_to), (totem_action_skip_to),
	(show_controls), (totem_action_toggle_controls),
	(playlist_repeat_toggle_cb), (playlist_shuffle_toggle_cb),
	(totem_action_handle_key_press), (update_media_menu_items),
	(update_buttons), (totem_callback_connect), (main):

	Huge patch from Jan Arne Petersen <jpetersen@jpetersen.org> to move
	Totem to GtkUIManager, instead of the old menus (Closes: #353560)

2006-09-11  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_has_next_track),
	(bacon_video_widget_has_previous_track):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_has_next_track),
	(bacon_video_widget_has_previous_track):
	* src/backend/bacon-video-widget.h:
	* src/totem-playlist.c: (totem_playlist_set_title):
	* src/totem-playlist.h:
	* src/totem.c: (totem_action_save_size), (on_title_change_event),
	(on_got_metadata_event), (update_buttons), (totem_setup_window):
	- remove useless debug
	- force setting the playlist title when we're playing a DVD
	- set Next/Previous properly when playing back DVDs

2006-09-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (is_image_interesting), (main):
	Patch from Paul Betts <paul.betts@gmail.com> to try and get a
	useful thumbnail picture, avoiding solid-colour backgrounds
	(Closes: #352802)

2006-09-10  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_iso_get_title),
	(totem_pl_parser_add_iso): Add totem_pl_parser_iso_get_title
	so that ISO images use their labels as a default title, code
	stolen from nautilus-cd-burner

2006-09-10  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_add_directory):
	Detect DVDs even if they're deeper in the folder hierarchy, and
	set a default title for them

2006-09-10  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_add_m3u):
	Handle playlists linked inside playlists, as used on
	http://www.kinkfm.com (Closes: #354954)

2006-09-10  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (parse_asx_entries): patch from
	Jonathan Matthew <jonathan@kaolin.wh9.net> to handle "BASE HREF"
	in ASX files (Closes: #355222)

============ Version 2.16.1

2006-09-07  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.16.1

2006-09-07  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/Makefile.am:
	* browser-plugin/idl/Makefile.am:
	* browser-plugin/idl/totemIMullYPlayer.idl:
	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemMullYPlugin.cpp:
	* browser-plugin/totemMullYPlugin.h:
	* browser-plugin/totemPlugin.cpp:
	* configure.in: Add a new "MullY" plugin, to handle videos on the
	DivX website, masquerading as the "DivX Web Player"
	(Closes: #345554)

2006-09-07  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp:
	- Don't fork a viewer in set_window if we don't have a stream yet,
	it'll come later
	- Note whether we tested for a playlist in _write
	- Test whether we have a playlist in _stream_as_file, if we haven't
	already done so
	- Don't set the "local filename" if we have a playlist
	* browser-plugin/totemPlugin.h: add a tried_write member
	* src/plparse/totem-pl-parser-mini.h:
	* src/plparse/totem-pl-parser.c: (parse_asx_entry),
	(totem_pl_parser_can_parse_from_filename):
	- Add totem_pl_parser_can_parse_from_filename, to test whether we
	have a playlist, from a local file
	- Don't prefer mms: streams to http: ones when parsing ASX entries
	with alternate locations

	All this fixes playback of videos on the news.sky.com website
	(Closes: #352559)

2006-09-07  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h: mark rtsp: as an unsupported
	scheme, cache whether a scheme is supported, rather than check
	it all the time, support the "filename" parameter fully, by
	requesting a new stream if there's no "src" parameter
	(Closes: #352559)

2006-09-07  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt:
	* src/plparse/totem-pl-parser.c: add support for audio/x-realaudio,
	as is used by some websites

2006-09-07  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: speed-up the parameter parsing
	a tad bit, implement support for "showcontrols=false"
	(Closes: #354725)

2006-09-07  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: fix logic in using fd://0 (we
	never have a local file when we haven't got a playlist), only
	open a file descriptor if the viewer will be using fd://0

2006-09-07  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: fix compilation with anal
	c++ compilers (GSpawnFlags/int cast), remove useless memsets from 
	previous commit as pointed out by Christian Persch
	<chpe@cvs.gnome.org> (Closes: #354696), Really don't waitpid on the
	player anymore, make sure all the tests and re-init for send_fd
	and player_pid are consistent (send_fd defaults to -1,
	player_pid to 0)

2006-09-06  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: don't set the
	G_SPAWN_DO_NOT_REAP_CHILD flag, so we don't have to waitpid

2006-09-06  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: memset to zero the portions of
	memory allocated by the browser, as we can't be sure they were

2006-09-05  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: when we won't get a NewStream call
	(for an unsupported protocol for example), instanciate the viewer
	ASAP (fixes playback of video on the http://www.viftv.no website)

2006-09-05  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (parse_smil_entry),
	(parse_smil_head), (parse_smil_entries): Use the top-level
	title from the SMIL playlist if there isn't an entry-specific
	one (Closes: #329451)

2006-09-05  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_is_asf):
	Fix possible buffer overflow that would cause a crash in the
	ASF recognition code (Closes: #354284)

2006-09-04  Bastien Nocera  <hadess@hadess.net>

	* configure.in: the nautilus extension requires gtk-2.0, not
	gtk-x11-2.0

2006-09-04  Bastien Nocera  <hadess@hadess.net>

	* src/totem-skipto.c: (totem_skipto_set_current):
	* src/totem-skipto.h: add totem_skipto_set_current()
	* src/totem.c: (on_skip_to1_activate): set the range as soon as
	we create the "Skip to..." dialogue, as well as setting the
	current time as the default (Closes: #335649)

2006-09-04  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (totem_embedded_add_children):
	Hide the preferences menu item as it doesn't do anything yet
	(Closes: #353405)

2006-09-04  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: Use the aliased mime-type if there
	is one, rather than the "embed" mime-type, fixes most Windows Media, 
	and Real embedded movies not having an "Open with..." menu item
	(Closes: #354182)

============ Version 2.16.0

2006-09-03  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: update to 2.16.0 (Closes: #341864)

2006-08-31  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: avoid --repeat being passed wrongly,
	a simple one-liner (Closes: #352303)

2006-08-27  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: add start of a support for
	the "filename" parameter to be used in place of "src" (Closes: #352559)

2006-08-25  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add Musepack as a supported file type

2006-08-25  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/totem-properties-view.c: (totem_properties_view_finalize),
	(totem_properties_view_set_location):
	* src/totem-video-thumbnailer.c: (main):
	  Remove hacks needed to deal with certain GStreamer-0.8 backend
	  issues (#352831).

2006-08-24  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add audio/AMR and audio/AMR-WB mime-types

2006-08-22  Frederic Crozat  <fcrozat@mandriva.com>

	* README:
	* src/totem.c: (totem_action_handle_key_press):
	Handle DVD Action keys (Up/Down/Left/Right) using keypad.

============ Version 1.5.92

2006-08-22  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 1.5.92

2006-08-20  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-volume.c: (bacon_volume_scale_value_changed):
	Fix missing unref'ing of the volume pixbuf, patch from
	Paolo Borelli <pborelli@katamail.com> (Closes: #352136)

2006-08-16  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_disc_is_cdda):
	Fix compilation without HAL (Closes: #351650)

2006-08-15  Bastien Nocera  <hadess@hadess.net>

	* configure.in: fix use of PKG_CHECK_EXISTS (pointed out by
	Christian Persch <chpe@cvs.gnome.org>, remove useless configure
	checks (Mikke still has bad tastes)

2006-08-15  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_disc_is_cdda):
	Fix compilation with older HAL

2006-08-15  Bastien Nocera  <hadess@hadess.net>

	* autogen.sh:
	* configure.in: require a newer pkg-config, error out when
	shared-mime-info < 0.17, remove unused or duplicate checks

2006-08-15  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(connection_speed_enum_to_kbps),
	(bacon_video_widget_set_connection_speed),
	(bacon_video_widget_new):
	  Set connection-speed property on playbin if it exists (#351349).

2006-08-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key_press): Don't try
	to switch angles if we're not playing a DVD (Closes: #351355)

2006-08-14  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Fix quoting on the GETTEXT_PACKAGE macro, fixing
	translations not working (Closes: #351357)

2006-08-14  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_new_hal_ctx):
	Patch from Jonathan Matthew <jonathan@kaolin.wh9.net> to avoid
	crashing when using HAL to detect a disc type (Closes: #348993)

2006-08-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem-private.h:
	* src/totem-sidebar.c: (cb_resize):
	* src/totem.c: (totem_action_save_size), (totem_action_save_state),
	(totem_setup_window), (video_widget_create):
	Resize the sidebar after the video widget has been shown, still not
	perfect, but better than nothing (Helps: #316286)

2006-08-13  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: Patch from LoÃ¯c Minier <lool+gnome@via.ecp.fr> to
	not delete totem.schemas.in on make clean (Closes: #351148)

2006-08-13  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Patch from LoÃ¯c Minier <lool+gnome@via.ecp.fr> to
	fix the build with the Browser plugin disabled (Closes: #351144)

2006-08-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem-private.h:
	* src/totem.c: (totem_action_save_size), (totem_action_save_state),
	(totem_setup_window):
	Save and restore the sidebar width (Closes: #316286)

============ Version 1.5.91

2006-08-12  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 1.5.91

2006-08-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemGMPPlugin.cpp:
	Add video/x-msvideo as a supported mime-type for the GMP plugin,
	and break people's setups some more (Closes: #332550)

2006-08-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemBasicPlugin.cpp:
	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h:
	* src/totem-mozilla-options.h:
	* src/totem-mozilla-viewer.c: (on_eos_event), (main):
	- Add audio/mpeg to the list of supported mime-types, will hopefully
	speed up the Mozilla unbreakage (Closes: #301913)
	- Fix debugging information in the main plugin
	- Add support for the "autostart" parameter
	- Destroy the stream if the child viewer died
	- Make repeat=true work even if we only have one video file

2006-08-12  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (on_volume_scroll_event),
	(totem_embedded_add_children): handle scroll-wheel events on
	the volume button as they should be handled (Closes: #341867)

2006-08-12  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_mrl_to_title):
	Fix up brain-damage in the previous commit

2006-08-12  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_mrl_to_title):
	Try even harder to have a display filename, even if the filename's
	encoding isn't UTF-8, or in the locale encoding (Closes: #350074)

2006-08-12 Joachim Noreiko <jnoreiko@yahoo.com>

	* help/C/totem.xml: remove description of obsolete preference.
	Fixes #349950, remove revision number from the manual title.

2006-08-12  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp:
	* browser-plugin/totemPlugin.h:
	* src/plparse/totem-pl-parser.c: (totem_pl_resolve_url):
	* src/totem-mozilla-viewer.c: (totem_embedded_set_state):
	Try harder to pass the original filename to the viewer
	rather than the new local filename, hopefully helping the
	backend figure out the relatives paths properly

2006-08-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (main):
	Fix crash on EOS when there's only one URL and no playlist
	(Closes: #350903)

2006-08-11  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_is_asf),
	(totem_pl_parser_is_quicktime),
	(totem_pl_parser_can_parse_from_data):
	Be much more careful about dup'ing large amounts of data,
	and about retvals if we fail to allocate the data

2006-08-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemComplexPlugin.cpp:
	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemNarrowSpacePlugin.cpp:
	Give the plugins names compatible with what they're
	supposed to emulate

2006-08-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp: slight style change
	* configure.in: enable the GMP plugin by default

2006-08-11  Bastien Nocera  <hadess@hadess.net>

	* src/backend/debug.h:
	* src/totem-mozilla-viewer.c: (on_about1_activate):
	* src/totem.c: (on_about1_activate), (main):
	* src/vanity.c: (on_about1_activate), (main):
	Patch from Christian Persch <chpe@cvs.gnome.org>
	to use VERSION again instead of PACKAGE_VERSION

2006-08-11  Bastien Nocera  <hadess@hadess.net>

	* browser-plugin/totemPlugin.cpp:
	Fix double-include

2006-08-11  Christian Persch  <chpe@cvs.gnome.org>

	* browser-plugin/totemBasicPlugin.cpp:
	* browser-plugin/totemComplexPlugin.cpp:
	* browser-plugin/totemGMPPlugin.cpp:
	* browser-plugin/totemNarrowSpacePlugin.cpp:

	Use nsMemory::Alloc, for gecko 1.7 compatibility.

2006-08-11  Christian Persch  <chpe@cvs.gnome.org>

	* autogen.sh:
	* configure.in:
	* Makefile.am:
	* src/Makefile.am:
	R src/totem-mozilla-plugin.cpp:
	R totem-mozilla-scriptable.cpp:
	R totem-mozilla-scriptable.h:
	A browser-plugin/.cvsignore:
	A browser-plugin/Makefile.am:
	A browser-plugin/TODO:
	A browser-plugin/idl/.cvsignore:
	A browser-plugin/idl/Makefile.am:
	A browser-plugin/idl/totemIBasicPlayer.idl:
	A browser-plugin/idl/totemIComplexPlayer.idl:
	A browser-plugin/idl/totemIGMPControls.idl:
	A browser-plugin/idl/totemIGMPPlayer.idl:
	A browser-plugin/idl/totemINarrowSpacePlayer.idl:
	A browser-plugin/plugin.symbols:
	A browser-plugin/totemBasicPlugin.cpp:
	A browser-plugin/totemBasicPlugin.h:
	A browser-plugin/totemComplexPlugin.cpp:
	A browser-plugin/totemComplexPlugin.h:
	A browser-plugin/totemGMPPlugin.cpp:
	A browser-plugin/totemGMPPlugin.h:
	A browser-plugin/totemNarrowSpacePlugin.cpp:
	A browser-plugin/totemNarrowSpacePlugin.h:
	A browser-plugin/totemPlugin.cpp:
	A browser-plugin/totemPlugin.h:
	A browser-plugin/totemScriptableBase.cpp:
	A browser-plugin/totemScriptableBase.h:

	Move plugin to browser-plugin/ and build 4 variants of it
	with different JS interface and plugin name. Bug #343007.

2006-08-11  Bastien Nocera  <hadess@hadess.net>

	* src/ev-sidebar.c: (ev_sidebar_init): Use a
	GTK_ICON_SIZE_MENU close button (Closes: #350176)

2006-08-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: add a temporary hack
	to get the CNN website working

2006-08-11  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser-mini.h: add file missing from
	previous commit 

2006-08-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am:
	* src/plparse/Makefile.am:
	* src/plparse/test-parser.c: (test_data), (main):
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_class_init),
	(totem_pl_parser_finalize), (totem_pl_parser_is_ra),
	(totem_pl_parser_is_asf), (totem_pl_parser_is_quicktime),
	(totem_pl_parser_add_ignored_scheme),
	(totem_pl_parser_add_ignored_mimetype),
	(totem_pl_parser_can_parse_from_data):
	* src/plparse/totem-pl-parser.h:
	* src/totem-mozilla-plugin.cpp:
	Patch from Christian Persch <chpe@cvs.gnome.org> to create a
	non-installable version of the totem-pl-parser library
	and link the Browser plugin against it, instead of the full-fledged
	installed version (Closes: #350461)

2006-08-11  Bastien Nocera  <hadess@hadess.net>

	* src/ev-sidebar.c: (ev_sidebar_destroy),
	(ev_sidebar_menu_item_activate_cb), (ev_sidebar_get_current_page),
	(ev_sidebar_set_current_page), (ev_sidebar_add_page):
	* src/ev-sidebar.h:
	Add ev_sidebar_set_current_page and ev_sidebar_get_current_page
	which use page_id's
	* src/totem-sidebar.c: (totem_sidebar_setup),
	(totem_sidebar_get_current_page):
	* src/totem-sidebar.h:
	* src/totem.c: (totem_action_save_state), (window_state_event_cb),
	(totem_setup_window):
	Save and restore which sidebar page was selected (Closes: #347294)

2006-08-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in: up the requirements to glib 2.8, sorry
	* data/totem.schemas.in: remove the window width, height and
	sidebar shown entries, and moved them to a local file
	* src/totem-private.h:
	* src/totem-sidebar.c: (totem_sidebar_setup):
	* src/totem-sidebar.h:
	* src/totem.c: (totem_action_save_size), (totem_action_save_state),
	(totem_action_exit), (window_state_event_cb), (totem_setup_window),
	(main):
	Save the video widget's width, height, maximised state and whether
	the sidebar is shown in a local file, rather than saving those
	(wrongly) in GConf (Closes: #340014)

2006-08-10  Bastien Nocera  <hadess@hadess.net>

	* configure.in: check for a newer version of shated-mime-info >= 0.17
	to avoid misdetection of ASX playlists

2006-08-10  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: Fix compilation with $(srcdir) = $(builddir),
	patch from Christian Persch <chpe@cvs.gnome.org>

2006-08-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_window_key_press_event):
	Fix Ctrl+Q not exiting when in fullscreen (Closes: #345841)

2006-08-10  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_visuals_quality):
	Fix visuals effects' ratio when using Xinerama
	(Closes: #345649)

2006-08-10  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/Makefile.am:
	* src/plparse/test-parser.c: (main):
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_init_i18n),
	(totem_pl_parser_new), (totem_pl_parser_can_parse_from_data):
	* src/plparse/totem-pl-parser.h:
	Fix library i18n setup (Closes: #350483)

2006-08-09  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c:
	(totem_pl_parser_add_asf_reference_parser):
	Mention why we don't want to get Ref2 even if it's available
	(Closes: #350599)

2006-08-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (totem_embedded_push_parser):
	Recurse in the playlist, so that MS stuff actually plays
	(Helps: #350599)

2006-08-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: Don't hide the video if
	the width and height aren't given (Helps: #350599)

2006-08-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-interface.xml:
	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.h:
	* src/totem-mozilla-viewer.c: (totem_embedded_class_init),
	(totem_embedded_emit_stop_sending_data), (totem_embedded_open),
	(on_eos_event): add a StopSendingData signal to the viewer,
	and call it when the front-end should stop sending us data,
	the plugin then stops sending data, and destroys the stream
	(Closes: #334664)

2006-08-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-scriptable.h:
	* src/totem-mozilla-viewer.c:
	Patch from Christian Persch <chpe@cvs.gnome.org> and myself to
	reduce the amount of memory used by all of our gbooleans
	(Closes: #350577)

2006-08-09  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_set_property),
	(totem_pl_parser_parse): patch from Christian Persch
	<chpe@cvs.gnome.org> to reduce the amount of memory used by all
	of our gbooleans (Closes: #350481)

2006-08-09  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (parse_asx_entry),
	(parse_asx_entries), (parse_smil_entry),
	(totem_pl_parser_add_quicktime_metalink), (parse_xspf_track):
	Fix more uses of guchar * when we mean xmlChar *, make sure
	xmlFree is called on non-NULL variables (Closes: #350467)

2006-08-08  Christian Persch  <chpe@cvs.gnome.org>

	* src/plparse/totem-pl-parser.c:
	Fix mismatched allocators. Bug #350467.

2006-08-08  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: link the browser plugin against the playlist
	parser
	* src/plparse/test-parser.c: (playlist_started), (playlist_ended),
	(test_parsing): show the playlist start and end signals
	* src/totem-mozilla-options.h:
	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.h:
	* src/totem-mozilla-viewer.c: (on_eos_event), (entry_added),
	(totem_embedded_push_parser), (main):
	Add support for reading playlists from the disk, instead of
	passing them to the backend, keep a list of files to be played,
	and pass from one to the other allowing a repeat mode
	(Closes: #329138, #171884)

2006-08-08  Christian Persch  <chpe@cvs.gnome.org>

	* data/Makefile.am:
	Fix a builddir problem, and make some simplifications. Bug #350179.

2006-08-08  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_is_ra),
	(totem_pl_parser_is_asf), (totem_pl_parser_is_quicktime),
	(totem_pl_parser_add_quicktime):
	Fix stupidly placed bracket breaking Quicktime, make sure
	we don't get called with '0' len (Closes: #350343)

2006-08-07  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_is_ra),
	(totem_pl_parser_add_ra), (totem_pl_parser_is_quicktime):
	Add checks to detect Real Audio/Video playlists
	* src/totem-mozilla-plugin.cpp:
	Add audio/x-pn-realaudio-plugin to the supported list,
	hide the video window is height && width == 0

2006-08-07  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: link to the playlist parser
	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.h:
	Check whether we have a playlist when getting the first bit of
	data, and only launch the viewer with the playlist on the local
	filesystem when it's all downloaded, rather than passing it
	directly to the player

2006-08-07  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add application/x-quicktime-media-link
	* src/plparse/test-parser.c: (test_data_get_data), (test_data),
	(main):
	Add test code for the below
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_is_asf),
	(totem_pl_parser_add_asf), (totem_pl_parser_is_quicktime),
	(totem_pl_parser_add_quicktime), (totem_pl_parser_ignore),
	(totem_pl_parser_ignore_from_mimetype),
	(totem_pl_parser_parse_internal), (totem_pl_parser_parse),
	(totem_pl_parser_can_parse_from_data):
	* src/plparse/totem-pl-parser.h:
	Add totem_pl_parser_can_parse_from_data which takes data in
	and tells us whether the data is a playlist or not, this is useful
	for the browser plugin so it knows whether to wait until the file
	is finished downloading before passing it on to the -viewer

2006-08-05  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_get_dev_from_volumes),
	(cd_cache_get_dev_from_drives), (cd_cache_has_medium),
	(cd_cache_open_device), (cd_cache_free), (cd_cache_disc_is_cdda),
	(cd_cache_disc_is_vcd), (cd_cache_disc_is_dvd):
	Use HAL to determine the disc type as well, don't check multiple
	times per Cache life-time whether we have a disc, once is enough
	(Closes: #348554)

2006-08-05  Bastien Nocera  <hadess@hadess.net>

	* data/icons/.cvsignore:
	* data/icons/16x16/.cvsignore:
	* data/icons/22x22/.cvsignore:
	* data/icons/24x24/.cvsignore:
	* data/icons/32x32/.cvsignore:
	* data/icons/scalable/.cvsignore:
	upd

2006-08-05  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: make distcheck fixes
	* src/Makefile.am: move the plugins to $(libdir)/mozilla/plugins
	to pass make distcheck and make the plugin available to all
	mozilla-based browsers (Closes: #350077)

2006-08-04  Bastien Nocera  <hadess@hadess.net>

	* data/totem.desktop.in.in.in:
	* src/totem-mozilla-viewer.c: (on_about1_activate):
	* src/totem.c: (on_about1_activate), (main): and change the users
	of the icons appropriately

2006-08-04  Bastien Nocera  <hadess@hadess.net>

	* data/icons/16x16/Makefile.am:
	* data/icons/16x16/movie-player.png:
	* data/icons/16x16/totem.png:
	* data/icons/22x22/Makefile.am:
	* data/icons/22x22/movie-player.png:
	* data/icons/22x22/totem.png:
	* data/icons/24x24/Makefile.am:
	* data/icons/24x24/movie-player.png:
	* data/icons/24x24/totem.png:
	* data/icons/32x32/Makefile.am:
	* data/icons/32x32/movie-player.png:
	* data/icons/32x32/totem.png:
	* data/icons/scalable/Makefile.am:
	* data/icons/scalable/movie-player.svg:
	* data/icons/scalable/totem.svg:
	Rename the icons "totem" as originally intended

2006-08-04  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* data/Makefile.am:
	* data/icons/.cvsignore:
	* data/icons/16x16/.cvsignore:
	* data/icons/16x16/Makefile.am:
	* data/icons/16x16/movie-player.png:
	* data/icons/22x22/.cvsignore:
	* data/icons/22x22/Makefile.am:
	* data/icons/22x22/movie-player.png:
	* data/icons/24x24/.cvsignore:
	* data/icons/24x24/Makefile.am:
	* data/icons/24x24/movie-player.png:
	* data/icons/32x32/.cvsignore:
	* data/icons/32x32/Makefile.am:
	* data/icons/32x32/movie-player.png:
	* data/icons/Makefile.am:
	* data/icons/scalable/.cvsignore:
	* data/icons/scalable/Makefile.am:
	* data/icons/scalable/movie-player.svg:
	* data/media-player-48.png:
	* data/totem.desktop.in.in.in:
	* src/totem-mozilla-viewer.c: (on_about1_activate):
	* src/totem.c: (on_about1_activate), (main):
	Use the new "movie-player" icons from Jakub Steiner
	<jimmac@ximian.com>, all themed as well

2006-08-03  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (frame_output_cb):
	Pass saved coordinates to the xine-engine so it doesn't try to 
	redraw us when we're in logo mode, have already played a film, and
	we're moving the window (phew!)

2006-08-03  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_logo_mode),
	(bacon_video_widget_set_scale_ratio): Make sure we can't call
	_set_scale_ratio when the logo mode is on, but still make sure
	->video_width and ->video_height are set (Closes: #348184)

2006-08-03  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_num_entries),
	(totem_pl_parser_write_pls), (totem_pl_parser_write_m3u),
	(totem_pl_parser_write_xspf): Use gtk_tree_model_iter_nth_child instead
	of gtk_tree_model_get_iter_from_string, as pointed out by
	Tim-Philipp MÃ¼ller (<tim at centricular dot net> (Closes: #349678)

2006-08-02  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade: Default for the vcodec is N/A, not Unknown

2006-08-02  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_num_entries),
	(totem_pl_parser_write_pls), (totem_pl_parser_write_m3u),
	(totem_pl_parser_write_xspf): add more checks to the retval of
	gtk_tree_model_get_iter_from_string(), reported by
	Kjartan Maraas <kmaraas@gnome.org> (Closes: #349678)

2006-08-02  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: make sure totem-interface.c is included
	first, so config.h is included at the earliest

2006-08-02  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am: Add some known subdirs to the include paths to
	work-around some .pc files not having the subdirs in the cflags
	(Closes: #349651)

============ Version 1.5.90

2006-07-26  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 1.5.90
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_scale_ratio): avoid resizing if we're already
	the right size

2006-07-24  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_update_stream_info), (bvw_handle_application_message),
	(bvw_bus_message_cb), (playbin_stream_info_notify_cb):
	  notify::stream-info is fired from the streaming thread,
	  don't do anything there, just post a message on the bus so
	  we handle it later from the application thread.
	  Also, since the notify is not a deep-notify, we might not
	  be called when stream-info properties (like languages etc.)
	  update, so make sure we parse the stream-properties again
	  when we reach PAUSED state. This makes totem extract the
	  audio/subtitle languages properly for some files where it
	  didn't work before (e.g. #343763).

2006-07-24  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(playbin_source_notify_cb), (playbin_stream_info_notify_cb),
	(get_list_of_type), (bacon_video_widget_set_media_device),
	(bacon_video_widget_new):
	  Rename notify::foo callbacks to make it clearer what they are
	  and that they are probably called from the streaming thread;
	  add some more debug info to playbin_source_notify_cb.

2006-07-20  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_finalize): finalize the logo pixbuf before we exit,
	if it exists

2006-07-17  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/totem-skipto.c: (totem_skipto_response_cb),
	(totem_skipto_init), (totem_skipto_finalize), (totem_skipto_new),
	(totem_skipto_class_init):
	  Force update of spin button value on activate and dialog
	  response; makes the 'Seek To' dialog easier to use when using
	  keys only (#313739).
	  Also remove superfluous parent_class variable, G_DEFINE_TYPE
	  already does this for us.
	  
2006-07-17  Bastien Nocera  <hadess@hadess.net>

	* configure.in: patch from LoÃ¯c Minier <lool+gnome@via.ecp.fr> to
	avoid linking the plugin directly against the Mozilla libs, and let
	the dependencies be resolved when the plugin is loaded. Should allow
	build-time and run-time engines to be different (Closes: #347390)

2006-07-12  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_expose), (bacon_video_widget_set_logo_mode),
	(bacon_video_widget_get_metadata_bool):
	Use ->using_vfx to check whether we're using the visuals, and not
	->show_vfx (whether the "use visuals" pref is on)
	Only queue a redraw for the change of logo mode if it really changed
	Get the HAS_VIDEO and HAS_AUDIO the right way around when in logo mode
	* src/plparse/totem-disc.c: (cd_cache_free):
	Use the non-deprecated dbus_connection_close()
	* src/totem.c: (totem_action_set_mrl_with_warning):
	Set the properties' sensitivity properly when failing to open a file,
	draw the logo if we couldn't open a file, and not otherwise

2006-07-12  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade:
	* data/totem.glade:
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_metadata_bool):
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_new):
	* src/totem-sidebar.c: (totem_sidebar_setup):
	* src/totem.c: (totem_action_set_mrl_with_warning),
	(totem_callback_connect), (main):
	Move the properties dialogue to the sidebar (Closes: #310409)

2006-07-10  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_dvd_event):
	* src/backend/bacon-video-widget.h:
	* src/totem-remote.c: (totem_lirc_to_command):
	* src/totem-remote.h:
	* src/totem.c: (totem_action_remote): patch from Gabriel Ortiz Lour
	<elbriga@ufpr.br> to add more DVD-related remote buttons
	(Closes: #346792)

2006-07-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_save_files):
	Add a default filename for the save playlist dialogue

============ Version 1.5.4

2006-07-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 1.5.4, upgrade the xine-lib requirements, so I don't
	get loads of bug reports about crashes on startup

============ Version 1.5.3

2006-07-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 1.5.3

2006-07-10  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_reconfigure_tick_timeout), (bvw_bus_message_cb):
	  Do keep emitting tick timeouts with the current position
	  and duration of the file even in PAUSED state, needed 
	  for things like the 'Skip To' dialog (#313739).

2006-07-09  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add audio/ac3

2006-07-09  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add audio/x-ape

2006-07-06  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_realize): Fix warning on exit with GtkStyle,
	with GTK+ 2.10, patch from Rene Vahtel <vahtel@starman.ee>
	(Closes: #346762)

2006-07-03  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (main): add i18n support
	(Closes: #346492)

2006-07-03  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_set_logo):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_expose), (show_vfx_update),
	(bacon_video_widget_set_logo_mode):
	* src/totem.c: (totem_action_set_mrl_with_warning), (main):
	* src/vanity.c: (video_widget_create):
	Change the semantics for the logo-related functions, set the logo
	only once, and only change the logo mode for the expose mode.
	Fixes the GStreamer backend leaking one huge pixbuf per set_logo call,
	Shows the logo when no viz is selected and playing audio with the
	xine-lib backend

2006-06-29  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_expose), (bacon_video_widget_set_logo_mode),
	(bacon_video_widget_set_logo):
	Draw the logo from the video widget itself, instead of relying on
	xine-lib to show it. Crashes on startup when the logo doesn't fit
	the video memory available to Xv

2006-06-21  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/plparse/Makefile.am: export DBUS_*_VERSION via the DBUS_CFLAGS,
	spotted by William Jon McCann

2006-06-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: only spawn the viewer in _write
	instead of _write_ready so that we can do something with the data
	before passing it on to the viewer, fixup the warnings vs. error
	messages on the console

2006-06-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: change plugin's name to
	"Totem Web Browser Plugin"
	* src/vanity.c: fix compilation

2006-06-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (totem_embedded_set_menu): don't crash
	if there's no stand-alone app to handle the stream

2006-06-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem-interface.c: (totem_interface_error_dialog),
	(totem_interface_get_full_path), (totem_gtk_plug_get_toplevel),
	(totem_interface_set_transient_for):
	* src/totem-interface.h:
	Move the GtkPlug specific transient dialogue handling to
	totem-interface, so that error messages in the Mozilla viewer
	get correctly parented as well
	* src/totem-mozilla-options.h:
	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.h:
	* src/totem-mozilla-viewer.c: (totem_embedded_open),
	(totem_embedded_set_menu), (on_open1_activate),
	(on_about1_activate), (on_video_button_press_event), (main):
	Don't actually use the hints from Quicktime about caching, we cache
	everything, why would we not?
	Add a "Open in Movie Player" item to the right-click popup menu
	(Closes: #300059)

2006-06-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: add support for the uimode parameter
	(Closes: #343008)

2006-06-20  Bastien Nocera  <hadess@hadess.net>

	* data/mozilla-viewer.glade:
	* src/totem-mozilla-viewer.c: (on_copy_location1_activate),
	(on_video_button_press_event), (totem_embedded_add_children):
	Add a way to copy the URL from the popup menu (Closes: #336624)

2006-06-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: remove the crappy command-line
	construction code, so that nobody dies if they don't update the
	MAX_ARGV_LEN

2006-06-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: fix handling of the hidden parameter
	when not given a value

2006-06-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-options.h:
	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.h:
	* src/totem-mozilla-viewer.c: (totem_embedded_set_state),
	(totem_embedded_add_children), (main):
	add support for the hidden parameter, use the BVW_USE_TYPE_AUDIO
	hint to the video widget to avoid having to realize or do other hacks
	(Closes: #326564)

2006-06-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: always cache even if cache=true
	isn't present, but only if we're not a video/quicktime

2006-06-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: patch from Christian Persch to fix
	the relative path resolver broken by the patch from #321254
	(Closes: #300510)

2006-06-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.h: add basic support for
	cache=true (Closes: #343068)

2006-06-19  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (cb_gconf):
	  Fix same wrong cast here as well.

2006-06-19  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new):
	  Fix crash on 64-bit systems when gconf values for buffering are
	  set to non-default values. Misplaced cast made compiler pass a
	  float instead of a guint64 to g_object_set vararg function
	  (Fixes: #342699)

2006-06-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-interface.xml:
	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.h:
	* src/totem-mozilla-viewer.c: (totem_embedded_open),
	(totem_embedded_set_local_file), (on_eos_event):
	Use NP_ASFILEONLY for remote files, and NP_ASFILE for local files,
	to cache the files on the local filesystems. Push the filename to the
	viewer when it's available, and allow to replay the files from the
	local cache (Closes: #331821)

2006-06-18  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: remove unused ioctl.h include

2006-06-18  Bastien Nocera  <hadess@hadess.net>

	* src/totem-private.h:
	* src/totem-sidebar.c: (cb_resize), (on_sidebar_button_toggled),
	(totem_sidebar_setup):
	Patch from Eric Anderson <ejona86@gmail.com> to make showing
	and hiding the sidebar not resize the video window
	(Closes: #324346)

2006-06-18  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_new_hal_ctx),
	(cd_cache_free): avoid crashes in Rhythmbox when using
	the new playlist parser, see
	http://bugzilla.gnome.org/show_bug.cgi?id=345203 for
	details

2006-06-17  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_subtitle_encoding):
	lower-case the encoding string, as it's the way xine-lib
	expects it
	* src/totem-preferences.c: (on_encoding_set),
	(encoding_changed_cb), (totem_setup_preferences):
	* src/totem-subtitle-encoding.c: (find_encoding_by_charset),
	(subtitle_encoding_init), (subtitle_encoding_get_index),
	(subtitle_encoding_get_charset), (compare),
	(is_encoding_sensitive), (subtitle_encoding_create_store),
	(subtitle_encoding_combo_render),
	(totem_subtitle_encoding_get_selected),
	(totem_subtitle_encoding_set), (totem_subtitle_encoding_init):
	* src/totem-subtitle-encoding.h:
	* src/totem.c:
	Patch from Young-Ho Cha <ganadist at chollian net> to add
	subtitle selection to the Totem preferences (Closes: #342235)

2006-06-17  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in: patch from Young-Ho Cha
	<ganadist at chollian net> to add text subtitles
	encoding selection to GConf

2006-06-17  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: patch from Young-Ho Cha <ganadist at chollian net>
	to add a widget to select the text subtitles encoding
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_subtitle_encoding):
	really fix build

2006-06-17  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_set_subtitle_encoding):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_subtitle_encoding):
	* src/backend/bacon-video-widget.h:
	Patch from Young-Ho Cha <ganadist at chollian net>, to allow
	changing the default encoding for text subtitles

2006-06-13  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/totem-menu.c: (totem_languages_update),
	(totem_subtitles_update):
	  Pop down language/subtitle menus before replacing them
	  with a different one, otherwise the session might lock
	  up hard if a menu is replaced while being open (#342411).

============ Version 1.5.2

2006-06-12  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 1.5.2
	* NEWS: upd

2006-06-12  Bastien Nocera  <hadess@hadess.net>

	* data/playlist.glade:
	* data/properties.glade:
	* data/screenshot.glade:
	* data/skip_to.glade:
	* data/totem.glade:
	Remove mentions of media-player-48.png, so that we use
	the themed icon
	* src/totem-mozilla-viewer.c: (on_about1_activate):
	* src/totem.c: (on_about1_activate), (main):
	* src/vanity.c: (on_about1_activate), (main):
	use PACKAGE_VERSION instead of VERSION, as PACKAGE_VERSION is meant
	to be a string, unlike VERSION, spotted by Frederic Peters
	(Closes: #344599)

2006-06-07  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_new_hal_ctx),
	(totem_cd_detect_type_with_url): free the device cache when getting
	an error checking for a CDDA (spotted by William Jon McCann
	<mccann@jhu.edu>, unref the D-Bus connection when we get an error
	initialising HAL

2006-06-07  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: Add audio/vnd.rn-realaudio as a
	possible mime-type for Real Audio playlists (Closes: #344020)

2006-06-06  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/plparse/totem-pl-parser.c:
	(totem_pl_parser_read_entire_file), (totem_pl_parser_add_ram),
	(totem_pl_parser_add_asf_reference_parser),
	(totem_pl_parser_add_asf_parser), (totem_pl_parser_add_pls),
	(totem_pl_parser_add_m3u), (totem_pl_parser_add_asx),
	(totem_pl_parser_add_smil),
	(totem_pl_parser_add_quicktime_metalink),
	(totem_pl_parser_add_desktop), (totem_pl_parser_add_xspf):
	use totem_pl_parser_read_entire_file to make sure that
	gnome_vfs_read_entire_file null-terminates the strings

2006-06-05  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add Impulse Tracker and MOD files
	to the supported types (Closes: #343605)

2006-06-05  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: Patch from Sjoerd Simons
	<sjoerd@luon.net> to use NPBool instead of PRBool, fixes running
	the plugin on PPC (Closes: #343851)

2006-05-27  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): make the video widget have the focus after
	having set it up to get Space do Play/Pause by default
	(Closes: #343050)

2006-05-27  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/totem.desktop.in.in.in:
	* data/totem.glade:
	* src/totem-mozilla-viewer.c: (on_about1_activate):
	* src/totem.c: (on_about1_activate), (totem_volume_create), (main):
	Patch from Brian Pepple <bdpepple@gmail.com> to use theme friendly
	icon names (Closes: #336852), disable the volume button by default

2006-05-27  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_new_hal_ctx),
	(cd_cache_has_medium): Fix detection of whether a drive
	has a medium when using HAL >= 0.5

2006-05-26  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (get_media_size):
	  Avoid integer overflows when doing aspect ratio calculations.

	* configure.in:
	  Require gst-plugins-base >= 0.10.7 for the GStreamer backend
	  for the recently added gst_video_calculate_display_ratio()
	  function used above.

2006-05-26  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: Use Prefere_nces as accesskey for the menu entry,
	not _Prefere_ces, spotted by clytie@riverland.net.au (Closes: #343014)

2006-05-26  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: Fix duplicate 's' accesskey (Closes: #323858)

2006-05-25  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_new): add missing HAVE_HAL ifdef,
	spotted by James Livingston <jrl@ids.org.au>

2006-05-25  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_open_device): remove dead code

2006-05-25  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_free): Disconnect from HAL
	when we're done with the work

2006-05-25  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_new_hal_ctx),
	(cd_cache_has_medium): Fix build and run-time with HAL >= 0.5

2006-05-25  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/plparse/Makefile.am:
	* src/plparse/totem-disc.c: (cd_cache_new_hal_ctx), (cd_cache_new),
	(cd_cache_has_medium), (cd_cache_open_device), (cd_cache_free),
	(cd_cache_disc_is_cdda), (cd_cache_disc_is_dvd):
	Use HAL to detect whether a disc is present in the device, rather
	than using Linux specific calls. No HAL means that the disc detection
	will return FALSE (Closes: #316902)

2006-05-23  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	  Add the 'goom' plugin from gst-plugins-good to the list of
	  required plugins for the GStreamer backend.

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_stop_play_pipeline), (setup_vis_find_factory), (setup_vis):
	  Fix visualisation factory lookup: check for short name if we
	  don't find a match with the long name (necessary because the
	  schema contains a short name). Use 'goom' as fallback if we
	  can't find the visualisation originally configured. Fixes #340506.

2006-05-22  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_new),
	(cd_cache_open_mountpoint):
	* src/plparse/totem-pl-parser.c:
	(my_gnome_vfs_get_mime_type_with_data),
	(totem_pl_parser_add_block):
	Re-add support for "parsing" block devices, look for mountpoints
	when we don't have any, change the message when not being able to find
	a mountpoint, we don't use fstab anymore (Closes: #337506)

2006-05-22  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bvw-test.c: (main): exit when the window is closed

2006-05-22  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: fix build, spotted by gpp666_999@yahoo.de
	(Closes: #342507)

2006-05-17  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: patch from Josh Nichols <nichoj@gentoo.org> to
	allow building with LDFLAGS="-Wl,--as-needed" (Closes: #341486)

2006-05-17  Bastien Nocera  <hadess@hadess.net>

	* src/backend/video-utils.c: (totem_time_to_string): make the
	time labels localisable, patch from Roozbeh Pournader
	<roozbeh@farsiweb.info> (Closes: #341930)

2006-05-17  Bastien Nocera  <hadess@hadess.net>

	* src/totem-properties-view.c:
	(totem_properties_view_set_location):
	Stop lingering timeouts before resetting the view (Closes: #341626)

============ Version 1.5.1

2006-05-17  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 1.5.1

2006-05-16  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_write_m3u),
	(totem_pl_parser_write_xspf), (totem_pl_parser_write_with_title),
	(totem_pl_resolve_url), (totem_pl_parser_add_pls_with_contents),
	(parse_asx_entry), (parse_smil_video_entry), (parse_xspf_track),
	(parse_xspf_trackList), (parse_xspf_entries),
	(totem_pl_parser_add_xspf):
	* src/plparse/totem-pl-parser.h:
	* src/totem-playlist.c: (totem_playlist_save_current_playlist),
	(totem_playlist_save_current_playlist_ext),
	(totem_playlist_save_playlist),
	(totem_playlist_save_add_format_combo_box),
	(totem_playlist_save_files):
	* src/totem-playlist.h:
	Patch from PrzemysÅaw Grzegorczyk <pgrzegorczyk@gmail.com> to add XSPF
	save and load support to TotemPlaylistParser, and add a way to choose
	the playlist type when saving them (Closes: #339067)
	Also fixes using the wrong buffer when writing an m3u playlist,
	and adding the wrong URI when using relative URIs in PLS playlists.

2006-05-15  Bastien Nocera  <hadess@hadess.net>

	* configure.in: require intltool 0.35.0

============ Version 1.5.0

2006-05-14  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 1.5.0

2006-05-14  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_handle_element_message):
	* src/backend/video-utils.c: (totem_resolve_relative_link):
	* src/totem-mozilla-viewer.c: (on_got_redirect):
	* src/totem.c: (on_got_redirect):
	Patch from Tim-Philipp MÃ¼ller <tim at centricular dot net> to handle
	relative links in the front-end, as it knows the canonical mrl for the
	stream, and the backend doesn't, fixes Apple trailers playback in the
	Mozilla plugin (Closes: #339000)

2006-05-10  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem.c: (on_about1_activate):
	Use GTK+-only menu items, not stock GNOME ones (Closes: #327892),
	display the type of front-end (GTK+ or GNOME) in use in the about box

2006-05-10  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	Use gtk+ only to create the Open menu item, loads more like that to go
	* src/totem.c: (totem_action_exit):
	Avoid crash removing the popups if the glade interface can't be
	loaded

2006-05-10  Bastien Nocera  <hadess@hadess.net>

	* README:
	* configure.in:
	* src/backend/Makefile.am:
	* src/backend/bacon-video-widget-gst.c:
	Remove the GStreamer 0.8 backend

2006-05-10  Bastien Nocera  <hadess@hadess.net>

        * src/vanity.c: (main): add calls for the backend options
	(Closes: #341092)

2006-05-02  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (read_ini_line_int),
	(read_ini_line_string), (totem_pl_parser_add_pls_with_contents):
	Added more debug for pls parsing, ignore tabs and spaces at the
	beginning of lines to work-around Virgin's broken playlists
	(Closes: #340383)

2006-04-30  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_handle_element_message),
	(bacon_video_widget_fullscreen_mode_available):
	Fix a compile-time warning, and a missing brace from the DXR3 removal
	commit (Closes: #340138)

2006-04-29  Dennis Cranston  <dennis_cranston@yahoo.com>

	* src/totem-preferences.c: (totem_setup_preferences):  Fix dialog
	spacing and separator setting regressions.

2006-04-28  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* help/C/totem.xml:
	* src/backend/bacon-video-widget-gst-0.10.c:
	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_fullscreen_mode_available):
	* src/backend/bacon-video-widget-xine.c: (load_video_out_driver),
	(bacon_video_widget_fullscreen_mode_available),
	(bacon_video_widget_set_tv_out):
	* src/backend/bacon-video-widget.h:
	* src/backend/video-utils.c:
	* src/backend/video-utils.h:
	* src/totem-menu.c: (add_device_to_menu):
	* src/totem-preferences.c: (totem_setup_preferences),
	(totem_preferences_tvout_setup):
	Remove the DXR3 support, nobody uses that anymore, remove the
	"proprietary plugins path" support, it was unused in GStreamer,
	and everybody just uses /usr/lib/win32 (Closes: #335445)
	Remove trailing spaces from disc names in the Movie menu

2006-04-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key_press): fix a compile warning

2006-04-28  Wouter Bolsterlee  <uws+gnome@xs4all.nl>

	* configure.in: Fix po/LINGUAS stuff (hopefully). See
	http://live.gnome.org/GnomeGoals/PoLinguas for details.
	Based on a patch from Brian Pepple (see bug #339200).
	This should fix bug #337844. Thanks to PrzemysÅaw
	Grzegorczyk.

	* po/LINGUAS: one language per line

2006-04-24  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c: (get_media_size):
	Apply updated patch from #339408. closing bug.

2006-04-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key_press): also pause/play with
	Space if the video widget has the focus

2006-04-24  Julien MOUTTE  <julien@moutte.net>

	Patch by: Jan Gerber <j@bootlab.org>

	* src/backend/bacon-video-widget-gst-0.10.c: (get_media_size):
	The aspect ratio setting defines the Image Aspect Ratio and
	not directly the Pixel Aspect Ratio. The PAR is then calculated
	from the IAR. (http://www.doom9.org/index.html?/capture/par.html)

2006-04-24  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_handle_element_message):
	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_signal_idler):
	* src/backend/video-utils.c: (totem_resolve_relative_link):
	* src/backend/video-utils.h:
	* src/totem-mozilla-viewer.c: (on_got_redirect):
	* src/totem.c: (on_got_redirect):
	Make the GStreamer backends resolve relative redirects, as the
	xine-lib backend does (Closes: #339000)
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_write_m3u):
	Save the full path when we can't get a relative path when saving m3u
	playlists (Closes: #338974)

2006-04-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem-scrsaver.c: (screensaver_inhibit_dbus),
	(screensaver_init_dbus): Patch from William Jon McCann <mccann@jhu.edu>
	to update the screensaver code to the new API in HEAD, and remove
	compatibility code for pre-2.14 gnome-screensaver code (Closes: #339208)

2006-04-23  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: Patch from Gary Coady
	<gary@lyranthe.org> to allow direct playback of stream from protocol
	schemes not supported by Mozilla (Closes: #339142)

2006-04-18  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_realize), (bacon_video_widget_new),
	(bacon_video_widget_set_audio_out_type):
	Set the audio output type when creating the widget, set the current
	audio output properly, don't reset the audio output type on startup
	(Closes: #330054)

2006-04-18  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: merge module_flags and modules_flags,
	spotted by Frederic Crozat

2006-04-18  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (totem_setup_preferences):
	Work-around a problem with libglade not putting the prefs window
	on top of the main window when the main window is "On Top"
	(Closes: #336939)

2006-04-18  Bastien Nocera  <hadess@hadess.net>

	* data/skip_to.glade: make centered on parent
	* src/totem-skipto.c: (totem_skipto_update_range),
	(totem_skipto_get_range), (totem_skipto_set_seekable),
	(totem_skipto_new): add more asserts, set the sensitivity of the OK
	button properly
	* src/totem-skipto.h: fix some macros
	* src/totem.c: (totem_action_exit), (on_skip_to1_activate): don't
	destroy the playlist by hand, it's already destroyed along with the
	rest of the main window, hide the prefs window as well before exiting
	Use the convenience functions to locate the skipto glade file

2006-04-18  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/test-parser.c: (test_parsing), (main):
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_class_init),
	(totem_pl_parser_set_property), (totem_pl_parser_get_property),
	(my_gnome_vfs_get_mime_type_with_data),
	(totem_pl_parser_add_quicktime_metalink),
	(totem_pl_parser_parse_internal): Add a debugging property to
	the playlist parser to make it easier to debug

2006-04-12  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_finalize): patch from Christoph
	Burghardt <hawkes@web.de> to fix a small memory leak

2006-04-11  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: now we update bacon-volume from libbacon itself

2006-04-10  Bastien Nocera  <hadess@hadess.net>

	* configure.in: use po/LINGUAS file instead of changing ALL_LINGUAS
	in configure.in

2006-03-31  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_take_screenshot1_activate),
	(totem_action_handle_key_press): Fix Ctrl+S showing the "Skip to..."
	dialogue instead of the screenshot one (Closes: #336587)

2006-03-30  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c:
	(totem_pl_parser_add_quicktime_metalink),
	(totem_pl_parser_parse_internal): don't look for ignore if we already
	parsed it

2006-03-28  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_error_from_gst_error):
	  Fix printf format in debug message (string != integer).

2006-03-27  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (show_controls): make the menubar unsensitive to avoid
	the menu shortcuts being available in fullscreen (Closes: #301693)

2006-03-27  Bastien Nocera  <hadess@hadess.net>

	* data/popup.glade: Make the icons for next/previous the same in the
	popup as in the main interface (Closes: #335648)

2006-03-27  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_set_connection_speed): Only open with the
	subtitled mrl if there is one, patch by Andreas Henriksson
	<andreas@fjortis.info> (Closes: #336127), avoid error when setting
	the connection speed to the maximum

2006-03-22  Bastien Nocera  <hadess@hadess.net>

	* MAINTAINERS: added (Closes: #335021)

2006-03-21  Dennis Cranston  <dennis_cranston@yahoo.com>

	* src/bacon-volume.c: (bacon_volume_scale_value_changed): Volume
	should not display stock_volume-0 for volume > 0.

2006-03-21  Bastien Nocera  <hadess@hadess.net>

	* data/handlers.sh: use "needs_terminal" GConf key, and not
	"need-terminal" as previously, spotted by John Thacker
	<thacker@math.cornell.edu> (Closes: #335138)

2006-03-18  Vladimer Sichinava  <vlsichinava@gmail.com>

        * configure.in: Added "ka" (Georgian) to ALL_LINGUAS

2006-03-17  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (parse_asx_entry): don't forcibly
	change mms:// urls to mmsh://, the server might not handle it
	(Closes: #333375)

2006-03-16  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/backend/Makefile.am: reorder the link libraries to be able to
	build on some systems, patch by Mikhail Zabaluev <mhz@altlinux.org>
	(Closes: #334731)

2006-03-15  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c:
	(totem_pl_parser_add_quicktime_metalink),
	(totem_pl_parser_add_quicktime): Add basic support for the Quicktime
	Metalink playlists (Closes: #333539)

2006-03-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem-skipto.c: (totem_skipto_new): update the "Skip to" time
	label when entering the time manually, spotted by Eskil Bylund
	<eskil@letterboxes.org> (Closes: #331912)

============ Version 1.4.0

2006-03-13  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 1.4.0

2006-03-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-properties-main.c: (totem_properties_get_pages),
	(nautilus_module_initialize): only initialise the backend when we
	create the first page, making nautilus startup slightly faster with
	the GStreamer backend (Closes: #334041)

2006-03-10  James Livingston  <jrl@ids.org.au>

	* src/plparse/totem-pl-parser.c:
	(totem_pl_parser_add_pls_with_contents): don't reset the "fallback"
	option when not recursing.
	(totem_pl_parser_parse_internal): don't look up the mime-type of
	"inner" entries if we are not recursively processing playlists. From
	bug 331508.

2006-03-05  Bastien Nocera  <hadess@hadess.net>

	* src/totem-time-label.c: (totem_time_label_init),
	(totem_time_label_set_time), (totem_time_label_set_seeking):
	* src/totem-time-label.h:
	* src/totem.c: (seek_slider_pressed_cb), (seek_slider_changed_cb),
	(seek_slider_released_cb): Patch from Julien MOUTTE <julien@moutte.net>
	to show the "Seek to" label when seeking in fullscreen
	(Closes: #333541)

2006-03-05  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c: (setup_vis): Add some
	more debugging to visualisation setup.

2006-03-03  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_get_metadata_bool):
	  Don't operate on NULL structures, causes assertion
	  warnings (#333238).

2006-03-03  JÃ©rÃ©my Ar Floc'h <jeremy.lefloch@gmail.com>

	* po/br.po: Added breton translation by JÃ©rÃ©my Ar Floc'h.
	* configure.in: Added Breton translation.

2006-03-03  James Livingston  <jrl@ids.org.au>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_class_init),
	(totem_pl_parser_set_property), (totem_pl_parser_get_property): add a
	new gobject property "recurse", which indicates whether playlists
	should be processed recursively. Defaults to TRUE which is needed for
	playlist, can be set to FALSE for loading the contents of playlists
	into memory.

	(totem_pl_parser_add_pls_with_contents): save and restore the fallback
	flag when processing PLS recursively. Don't reset the recursion level
	to 0.

	* src/plparse/test-parser.c: (test_parsing), (main): Add a flag
	--no-recurse/-n to the test parser, which turns of recursive
	processing.

2006-03-02  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt:
	* src/totem-mozilla-plugin.cpp: add support for the trailers on the
	divx.com website (Closes: #333074)

2006-03-02  Bastien Nocera  <hadess@hadess.net>

	* help/bg/.cvsignore: added

2006-03-02  Bastien Nocera  <hadess@hadess.net>

	* configure.in: add help/bg/Makefile to the configure output
	(spotted by Stefan Kost <ensonic@sonicpulse.de> (Closes: #333097)

2006-03-02  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key_press): Fix build and tiredness
	(Closes: #333076)

2006-03-02  Bastien Nocera  <hadess@hadess.net>

	* src/metadata-test.c: (main):
	Init the locale properly, to avoid printing in the C locale
	* src/totem.c: (totem_action_handle_key_press),
	(on_window_key_press_event): handle the HIG recommended zooming
	keyboard shortcuts: Ctrl++, Ctrl+- and Ctrl+0 (Closes: #302746)

2006-02-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (my_gnome_vfs_volume_get_mount_path),
	(add_device_to_menu): pass the mount point onto Totem when the
	disc is mounted, rather than the device path

2006-02-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (save_pixbuf), (usage), (main):
	Allow saving of thumbnails in JPEG format (Closes: #332424)

============ Version 1.3.92

2006-02-28  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 1.3.92

2006-02-27  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	  Require GLib-2.8 or newer for the GStreamer-0.10 backend (earlier
	  GLib versions do not do object refcounting atomically, which is
	  a sine qua non in heavily multi-threaded environments) (e.g. #327093).

2006-02-23  Christian Schaller <uraeus at gnome dot org>

	* COPYING: update exception text with spelling and language 
	  fixes. I guess the text in all the source files should ideally 
	  be updated too.

2006-02-21  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_signal_eos_delayed), (bvw_bus_message_cb),
	(bacon_video_widget_finalize), (bacon_video_widget_play),
	(bvw_stop_play_pipeline):
	  Don't emit EOS signal from within the bus callback,
	  otherwise we'll wait forever in poll_for_state_change()
	  whilst trying to stop playbin when totem calls _close();
	  some more debug messages.

2006-02-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_is_media),
	(totem_playlist_init): also handle the legacy cd:, fixes a critical
	warning (Closes: #331429)

2006-02-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_got_metadata_event): always update the window title
	when we get new metadata, fixes a problem with the window title not
	changing

2006-02-19  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c: (get_list_of_type):
	Fix languages and subtitles listing.

2006-02-17  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (get_media_size),
	(bacon_video_widget_set_aspect_ratio):
	  Fix some compiler warnings (#331517).

2006-02-16  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (xine_try_error):
	Fix compilation with glib < 2.9.1 and > 2.8.0, patch by
	Kazuki Shimura <kazuki@ma.ccnw.ne.jp> (Closes: #331426)

2006-02-16  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_open_with_subtitle):
	  Prevent warning on open.

2006-02-15  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-message-connection.h: remove dupe declaration
	* src/egg-recent-view-gtk.c: (egg_recent_view_gtk_add_to_menu):
	Fix critical warning when starting up (Closes: #330997)

============ Version 1.3.91

2006-02-13  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 1.3.91

2006-02-12  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c: (get_media_size),
	(bacon_video_widget_set_video_property),
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata_bool),
	(bacon_video_widget_get_metadata): Fix some indentations and
	fix DVB aspect ratio fraction according to the spec 20/9 == 2.22:1

2006-02-12  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c: (get_media_size),
	(bacon_video_widget_realize), (caps_set),
	(bacon_video_widget_set_aspect_ratio): Refactored aspect ratio
	handling. Indeed _set_aspect_ratio is here to force the movie
	aspect ratio when the encoder/muxer did not set it correctly.
	The display aspect ratio is obtained from the overlay object
	and is then used to calculate how we should scale the video
	so that it appears correctly on the screen.

2006-02-12  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_open_with_subtitle), (bacon_video_widget_play),
	(bacon_video_widget_is_playing),
	(bacon_video_widget_can_get_frames),
	(bacon_video_widget_get_current_frame):
	  When used for thumbnailing, don't ever go into PLAYING state,
	  especially not with sinks that don't sync against the clock. All
	  the information we need is available already when prerolled. No
	  need to wait for state change any longer in _get_frames(), as that
	  has already been done in _open_with_subtitle().

	* src/backend/gstscreenshot.c: (create_element),
	(bvw_frame_conv_convert):
	  Create screenshot conversion pipeline 'manually' to avoid
	  gst_parse_launch() overhead and add additional capsfilter
	  to shave a few microseconds off linking time.

2006-02-12  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c: (get_media_size),
	(bacon_video_widget_size_request),
	(bacon_video_widget_open_with_subtitle): Fix subtitle playback from
	recent items menu, make visualisation take the whole widget.
	Indeed we should manipulate ratios only when we have video track.

2006-02-11  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_size_allocate): If we have an invalid media
	size, then use the whole widget allocation for the video window.

2006-02-11  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (setup_vis):
	  Honour the requested visualisation size again (must get
	  allowed caps from the right pad; also, fixate all
	  structures in the allowed caps, not just the first one).

2006-02-11  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_expose_event), (setup_vis),
	(bacon_video_widget_set_visuals):
	  Draw logo if there's only audio and visualisation
	  is disabled. Add some more debug messages.

2006-02-06  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (bvw_bus_message_cb):
	  Merge tags in KEEP mode (we only pay attention to the first
	  item for each tag anyway).

2006-02-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/Makefile.am:
	* src/backend/Makefile.am: build fixes by Sylvain Bertrand
	<sylvain.bertrand@gmail.com> to look for libraries and headers in
	the specified paths before looking in the system paths
	(Closes: #330699)

2006-02-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): waiting cursor action on startup

2006-02-08  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_move_files):
	Don't reverse items when moving them down (Closes: #330399)

2006-02-07  Erdal Ronahi  <erdal.ronahi@gmail.com>

	* configure.in: Added ku (Kurdish) to ALL_LINGUAS

2006-02-06  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_add_asf):
	Fix retval not being ignored (Closes: #330159)

2006-02-06  Jan Schmidt  <thaytan@mad.scientist.com>

	* src/backend/bacon-video-widget-gst-0.10.c: (fixate_to_num),
	(set_audio_filter):
	Fix problems with setting the speaker arrangment as pointed out 
	by Tim - that it will fail when selecting '5.1' output against 
	a sound card that only supports stereo.

2006-02-06  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_can_play), (bacon_video_widget_get_mrls):
	  Don't claim to be able to play back DVDs when we aren't
	  (for now, at least) (#330086, patch by: Fernando Herrera).

2006-02-06  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_add_asf),
	(totem_pl_parser_parse_internal): Fix logic in the ASF parser,
	we were doing work on the data even though we didn't have any,
	don't look for super mime-types to ignore when we don't have one
	(Closes: #330120)
	* src/plparse/test-parser.c: add a test for the above bug

2006-02-06  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/test-parser.c: (entry_added), (test_parsing):
	Also print the genre of the URI, if available, and make parsing faster
	using an idle, instead of a timeout
	* src/plparse/totem-pl-parser.c:
	(totem_pl_parser_add_pls_with_contents): try to parse further inside
	.pls playlists to work around broken setups (Closes: #318749)

2006-02-05  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_show), (bacon_video_widget_hide),
	(bvw_handle_application_message), (bvw_bus_message_cb),
	(parse_stream_info), (bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_set_logo_mode), (bacon_video_widget_new):
	  When running in metadata mode, don't announce any metadata
	  to totem until we are sure we got all of it, otherwise the
	  nautilus properties page will only show whatever tags happen
	  to come up first.
	  Also, make sure we don't try to show or hide GdkWindows when
	  they don't exist, like in metadata mode (#329527).

2006-02-05  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2006-02-03  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new):
	  Add missing perdiod to error message string, which also
	  makes it match the string used in the 0.8 backend.

2006-02-03  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_error_from_gst_error):
	  Show a more meaningful error message when playback fails
	  because the decoder/demuxer can only operate pull-based,
	  but the source does not support that (e.g. playing AVI
	  videos or FLAC files over the network) (#328830).

2006-02-03  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(get_metadata_type_name), (bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata_bool),
	(bacon_video_widget_get_metadata):
	  Some more debug info. Also, when in metadata mode, answer yes to
	  have_audio and have_video queries if we have the respective
	  codec name available. That way some metadata is shown in the
	  properties dialog even if the decoders to play it are actually
	  not available.

2006-02-03  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (treeview_button_pressed),
	(totem_playlist_popup_menu), (totem_playlist_key_press):
	* src/totem.c: (totem_action_menu_popup),
	(totem_action_handle_key_press):
	Don't let the main window's key handler steal key shortcuts from
	the playlist widget, implement popup menus in the playlist, select the
	first menu item when popping up a menu (Closes: #323748)

2006-02-03  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_size_request), (poll_for_state_change_full),
	(poll_for_state_change), (bacon_video_widget_open_with_subtitle),
	(bvw_stop_play_pipeline), (bacon_video_widget_stop),
	(bacon_video_widget_close), (bvw_process_pending_tag_messages),
	(bacon_video_widget_get_metadata),
	(bacon_video_widget_can_get_frames),
	(bacon_video_widget_get_current_frame):
	  Don't wait in _get_metadata() for any state change to complete. It
	  might be called from the message handler via poll_for_state_change()
	  and then deadlock. Instead, wait in _open_with_subtitle() without
	  a timeout in case we are used as thumbnailer or for metadata
	  extraction (#329264). Also add bvw_stop_play_pipeline() to make sure
	  our message handler gets to see the state change messages when we
	  stop playback, so stuff gets cleaned up properly (otherwise the bus
	  will flush all messages when going to NULL and it'll never see them).

2006-02-03  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_with_subtitle): revert the previous changes
	to the backend
	* src/totem-playlist.c: (totem_playlist_add_mrl):
	* src/totem-private.h:
	* src/totem.c: (totem_action_set_cursor), (window_state_event_cb),
	(totem_action_set_mrl_with_warning), (on_got_redirect),
	(popup_hide), (on_video_motion_notify_event), (main):
	make the front-end itself show the spinning cursor for the whole
	window when parsing playlists, and opening files

2006-02-03  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (xine_try_error),
	(bacon_video_widget_open_with_subtitle):
	* src/backend/video-utils.c: (totem_gdk_window_set_waiting_cursor):
	* src/backend/video-utils.h:
	add totem_gdk_window_set_waiting_cursor(), set the cursor waiting
	on open()

2006-02-03  Jan Schmidt  <thaytan@mad.scientist.com>

	* src/backend/bacon-video-widget-gst-0.10.c: (fixate_to_num),
	(set_audio_filter), (bacon_video_widget_get_metadata):
	Remove broken caps selection code in favour of filtering down
	the allowed caps passing into the audio sink. The old method
	broke when any element wanted to output anything other than 16 bit
	audio.

	When getting metadata, don't block in get_state unless the state is
	< PAUSED.

2006-02-02  Bastien Nocera  <hadess@hadess.net>

	* data/totem_logo.png: thanks to MichaÃ«l Arnauts for rendering
	Jimmac's logo at a higher resolution, looks niiice (Closes: #313218)

2006-02-01  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/test-parser.c: (test_parsing_real), (push_parser),
	(main): parse the url passed as argument when given one, makes
	testing a little easier
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse_internal):
	Return as soon as we have had success parsing a playlist, not after
	we tested whether to ignore it

2006-01-31  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_remove_files):
	Fix warning
	* src/totem-uri.c: (totem_uri_get_subtitle_uri):
	Don't look for subtitles on HTTP (Closes: #329268)

2006-01-30  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_remove_files):
	Force a column resize after having removed files from the playlist,
	making the scrollbar disappear after having removed all the files
	(Closes: #310665)

2006-01-30  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_queue_sort), (xine_try_error): queue sorting
	function if we have glib < 2.8.0

2006-01-30  Bastien Nocera  <hadess@hadess.net>

	* src/backend/Makefile.am:
	* src/backend/bacon-video-widget-private.h:
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_finalize), (size_changed_cb),
	(bacon_video_widget_set_visuals_quality_size),
	(bacon_video_widget_set_visuals_quality),
	(bacon_video_widget_can_get_frames):
	* src/backend/bacon-video-widget.h: take into account the aspect
	ratio of the screen when selecting the goom aspect ratio
	(Closes: #327811), slight changes to the _can_get_frames function

2006-01-29  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/Makefile.am:
	  Add BINDIR so we can find the main totem binary if we want to
	  open as separate video player window (part of #326476).
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new):
	  Set logo mode correctly, similar as in xine backend. Theoretically
	  allows seeking in totem-mozilla plugin (untested).
	* src/backend/bacon-video-widget-gst.c: (get_media_size),
	(bacon_video_widget_expose_event),
	(bacon_video_widget_signal_idler),
	(bacon_video_widget_open_with_subtitle), (bacon_video_widget_play),
	(bacon_video_widget_close), (bacon_video_widget_can_get_frames),
	(bacon_video_widget_get_current_frame), (bacon_video_widget_new):
	  Correct logo-mode default (see above). Add support for single-image
	  tagged files (plus compiler magic so we don't need to up version
	  requirements; #328380). Set videosink back to NULL after testing
	  to allow multiple non-video instances to run, important for
	  websites with multiple single-image movies embedded.
	* src/totem-mozilla-options.h:
	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.h:
	* src/totem-mozilla-viewer.c: (on_got_redirect),
	(on_video_button_press_event), (on_tick), (on_seek_start),
	(cb_on_seek), (totem_embedded_add_children), (main):
	  Add support for target property, which allows to open a movie
	  given in the href property in either a separate window or in
	  the Totem window, based on the target=X value (#326476). Don't
	  use select(), since that may not work depending on the value of
	  fd (see man 2 select). Instead, use poll(). Add declaration for
	  totem_embedded_get_type() (would give compiler warning). Allow
	  the helper app to not show() the window, which allows the plugin
	  to be used for background music in websites without being visible
	  on the website (#326564). Allow seeking (#326301).

2006-01-29  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_close), (bacon_video_widget_get_subtitles):
	Add ability to disable text subtitles when Totem automatically loads
	them (Closes: #314603)

2006-01-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key_release),
	(totem_action_handle_key_press), (on_window_key_press_event),
	(totem_callback_connect), (video_widget_create):
	Patch from Julien Moutte <julien@moutte.net> to pause the backend,
	update the seekbar and write "Seek to" in the status bar if it
	can do direct seek (only GStreamer 0.10 right now) (Closes: #328619)

============ Version 1.3.90

2006-01-29  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 1.3.90

2006-01-29  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_sort_queue): more double-error fixes, by sorting
	the queue in the right order, with errors first

2006-01-28  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (parse_asx_entry): prefer mms entries
	in ASX playlists that have more than one REF per ENTRY (Closes: #328734)

2006-01-27  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse_internal):
	Fix a crash when gnome-vfs doesn't support the URI scheme, and we
	can't get a mime-type from data afterwards (Closes: #328828)

2006-01-27  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (xine_try_error):
	compile with glib 2.6.x which doesn't have g_async_queue_sort

2006-01-27  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_expose_event), (parse_stream_info),
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_set_show_visuals),
	(bacon_video_widget_set_visuals),
	(bacon_video_widget_set_visuals_quality): Better handling of 
	video window's visibility. Change vis on the fly reenabled for
	the lucky ones with a recent GStreamer 0.10 checkout.

2006-01-26  Jan Schmidt  <thaytan@mad.scientist.com>

	* src/totem-mozilla-viewer.c: (totem_embedded_open):
	Don't dereference a NULL GError.

2006-01-26  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add the application/smil and
	application/x-smil mime-types
	* src/plparse/totem-pl-parser.c: (parse_smil_entry),
	(totem_pl_parser_parse_internal): support the application/smil,
	also look for the "audio" element in SMIL files, ignore files
	of certain mime-types only after we've checked whether we supported
	that type (Closes: #328720)

2006-01-25  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c: (got_time_tick),
	(bvw_query_timeout), (bacon_video_widget_seek_time),
	(bacon_video_widget_stop): Improve time reporting.

2006-01-25  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_finalize):
	* src/totem.c: (totem_action_exit): unref the GConfClients when
	we're done with them
	* src/totem-mozilla-viewer.c: (totem_embedded_add_children):
	load the volume from GConf before setting it (Closes: #326088)

2006-01-25  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_expose_event),
	(bacon_video_widget_size_request),
	(bacon_video_widget_size_allocate), (bacon_video_widget_set_logo),
	(bacon_video_widget_set_logo_mode): Handle the logo drawing nicely.

2006-01-25  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: don't link the totem plugin against the bacon
	message connection, as it's not used anymore
	* src/totem-mozilla-plugin.cpp: Avoid losing data when the buffer
	to the plugin viewer is full, patch by Ronald Bultje
	<rbultje@ronald.bitfreak.net> (Closes: #328379)

2006-01-25  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c: (bacon_video_widget_new):
	  Add missing periods (#318817).

2006-01-24  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c: (bacon_video_widget_new):
	  s/g_free/g_object_unref/ in error case (#326353). Patch contributed
	  by Marco Barisione <marco.bari@vene.ws>.

2006-01-23  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (totem_gtk_plug_get_toplevel),
	(on_about1_activate), (main): Add a totem_gtk_plug_get_toplevel ()
	function, and correctly set the about dialogue as a transient for the
	Mozilla toplevel window (Closes: #323759)

2006-01-22  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (bvw_bus_message_cb),
	(bacon_video_widget_process_pending_tag_messages),
	(bacon_video_widget_get_metadata),
	(bacon_video_widget_can_get_frames),
	(bacon_video_widget_get_current_frame), (bacon_video_widget_new):
	* src/backend/gstscreenshot.c:
	  Fix video thumbnailing for movies with a non-1/1 aspect ratio;
	  make sure we wait until we have all the required information
	  available and parsed when we are in thumbnailing mode. Refresh
	  saved duration when we get a DURATION query on the bus (#327102).

2006-01-22  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_set_logo): Don't shrink the toplevel window
	when setting logo. This is not very user friendly. Fixes #317734.

2006-01-22  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_get_video_property),
	(bacon_video_widget_set_video_property), (bacon_video_widget_new):
	If for whatever reason GConf sinks aren't available or can't
	switch to READY we fallback on sensible defaults. Fixes #314857.

2006-01-22  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c: (bvw_bus_message_cb):
	position does not change in PAUSED. We don't need that timeout.

2006-01-22  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_sort_queue), (xine_try_error),
	(bacon_video_widget_get_subtitles): sort the queue before parsing it
	to avoid non-messages, and non-errors to be dropped from the queue
	(Closes: #316836), MAX_SPU at 1 means that we have one subtitle
	* src/totem-video-thumbnailer.c: (main): fix GTK+-only compilation

2006-01-22  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_realize), (bacon_video_widget_hide),
	(bacon_video_widget_configure_event): We need to react on toplevel
	configure events to redraw our frames on XV port when totem moves.
	Fixes #170829.

2006-01-22  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_set_show_cursor): Apply set_show_cursor on
	the widget's window, not only the video window.

2006-01-21  Bastien Nocera  <hadess@hadess.net>

	* data/vanity.desktop.in.in:
	* data/totem.desktop.in.in.in: Make sure GNOME;GTK; are in the
	categories (Closes: #328023)
	* data/totem.glade:
	* src/totem.c: (on_window_key_press_event):
	Add Ctrl+S as a shortcut for "Take Screenshot" (Closes: #327526),
	add ellipsis to the "Take Screenshot" menu item

2006-01-21  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_set_show_cursor): Check that the video window
	is still there before trying to show/hide cursor. Fixes #328016.

2006-01-21  Julien MOUTTE  <julien@moutte.net>

	* src/totem-private.h:
	* src/totem.c: (seek_slider_pressed_cb), (seek_slider_released_cb):
	We need to remember reliably if we are seeking with a memory
	of previous pipeline state. Introducing a boolean for seek in
	progress. Fixes #327074.

2006-01-21  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_close): We might open without being closed.
	* src/totem.c: (totem_action_set_mrl_with_warning): More
	safety check on GError existence. Fixes #327579.

2006-01-21  Julien MOUTTE  <julien@moutte.net>

	* src/backend/bacon-video-widget-gst-0.10.c: (parse_stream_info),
	(bacon_video_widget_finalize),
	(bacon_video_widget_open_with_subtitle), (setup_vis),
	(bacon_video_widget_set_show_visuals),
	(bacon_video_widget_set_visuals),
	(bacon_video_widget_set_visuals_quality), (bacon_video_widget_new):
	Refactoring how visualization is handled in 0.10 GStreamer backend.
	Fixes #327532.

2006-01-20  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-message-connection.c: (setup_connection),
	(accept_new_connection), (server_cb), (try_server), (try_client),
	(bacon_message_connection_free): update from CVS to fix a problem
	with concurrent clients

2006-01-19  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_close):
	  Set to NULL state in close as well. Move up debug statement
	  in open. Fix typos in license addendum.

	* src/backend/gstscreenshot.c: (bvw_frame_conv_convert):
	  Don't crash in debug statement when an error with a debug
	  message occurs. Also guard against NULL errors.
	  
============ Version 1.3.1

2006-01-19  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 1.3.1

2006-01-19  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_finalize), (bacon_video_widget_unrealize),
	(bacon_video_widget_open_with_subtitle):
	Do some plugin garbage collection after opening files
	* src/test-properties-page.c: (create_props), (destroy_props),
	(main): create and destroy the pages, instead of just setting a
	different URI

2006-01-19  Bastien Nocera  <hadess@hadess.net>

	* data/totem.desktop.in.in.in: remove dupe _Name entry
	(Closes: #327606)

2006-01-17  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_open_with_subtitle), (bacon_video_widget_stop):
	  Ignore additional error messages if there's more than one (#327090).
	  _stop() now sets the pipeline to NULL instead of READY.

2006-01-17  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_seek_time):
	  Use GST_SEEK_FLAG_KEY_UNIT for seeking; makes seeking
	  considerably snappier for AVIs (#327079) and is probably
	  generally a good idea.

2006-01-17  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (bvw_bus_message_cb),
	(got_time_tick), (bvw_query_timeout), (poll_for_state_change),
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_get_stream_length),
	(bacon_video_widget_is_seekable),
	(bacon_video_widget_get_metadata):
	  Wait for any pending state change (like to PAUSED) to finish when
	  metadata is requested, so that it can be returned right there if
	  it is available. Should fix many issues with the properties dialog.
	  Ensure that state-changed messages from playbin are seen by the main
	  bus message handler even if we are using poll_for_state_change().
	  Make _is_seekable() and duration querying a bit smarter (should fix
	  issues with the seek slider being insensitive at startup and some
	  properties dialog issues. #327074, #327150)

2006-01-15  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (parse_stream_info),
	(bacon_video_widget_dvd_event),
	(bacon_video_widget_get_metadata_int):
	  Implement _dvd_event() function (even if it's not used yet). Should
	  make things compile with Forte on Solaris (#326761). Try
	  GST_TAG_NOMINAL_BITRATE if GST_TAG_BITRATE did not yield any
	  results.

2006-01-15  Bastien Nocera  <hadess@hadess.net>

	* data/schemas.sh: allow for mime-types with a '+' in their names
	to be thumbnailed (Closes: #326639)

2006-01-14  William Jon McCann  <mccann@jhu.edu>

	* src/plparse/totem-pl-parser-features.h: 
	* src/plparse/totem-pl-parser.h: 
	* src/plparse/Makefile.am:
	* src/plparse/.cvsignore: 
	* configure.in:
	Add mechanism to publish version and capabilities.
	(Closes: #326963)

2006-01-14  William Jon McCann  <mccann@jhu.edu>

	* src/totem-scrsaver.c: Use DBUS glib bindings.
	Use new g-s interface name and fallback to trying the old
	name.  (Closes: #326495)

2006-01-13  Bastien Nocera  <hadess@hadess.net>

	* data/schemas.sh: don't create a schema entry for ogm files
	(work-around #326870)

2006-01-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (totem_setup_preferences): set the prefs
	window as transient for the main window (Closes: #324155)

2006-01-11  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add support for the video/x-ogm+ogg mime-type

2006-01-11  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (set_audio_filter),
	(bacon_video_widget_new):
	  Don't print assertions all over the place when 'thumbnailing'
	  using the GStreamer-0.10 backend.

2006-01-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: use the *right* fix for the Mozilla
	double init problem

2006-01-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/egg-recent-model.c: (parse_info_init), (parse_info_free),
	(end_element_handler), (egg_recent_model_filter),
	(egg_recent_model_read), (egg_recent_model_lock_file),
	(egg_recent_model_unlock_file), (egg_recent_model_get_list):
	* src/egg-recent-view-gtk.c: (egg_recent_view_gtk_clear):
	update from libegg CVS

2006-01-09  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: up soname after breaking bin compat earlier

2006-01-09  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (xine_try_error):
	Yield so that we can receive the async errors before trying to get
	the crummy default xine_open error, don't know why anyone removed
	that call from xine-lib...
	Fixed double error dialogue

2006-01-09  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_write_m3u),
	(totem_pl_parser_get_extinfo_title), (totem_pl_parser_add_m3u):
	Parser fixes for the m3u reader and writer
	- fix parsing if there's no "," in the EXTINF line
	- write EXTINF if there is a custom title
	- bazillion of memleak fixes in the m3u writer
	- write what we set out to write in the m3u writer
	(the buf, not the url...) (Closes: #326310)

2006-01-09  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	  Fix GStreamer-0.10 plugin checks for the uninstalled
	  case, patch by Michael Smith <msmith@fluendo.com>
	 (Closes: #326339).

2006-01-09  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_num_entries),
	(totem_pl_parser_write_pls), (totem_pl_parser_write_m3u):
	* src/plparse/totem-pl-parser.h:
	* src/totem-playlist.c: (totem_playlist_save_get_iter_func),
	(totem_playlist_set_title): Only save the title for custom filenames,
	Don't override the title when there's already a custom title
	(Closes: #324975)

2006-01-09  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_new):
	  Remove full stop at end of string to make it match
	  the one in the 0.8 backend (#325285).

2006-01-09  Bastien Nocera  <hadess@hadess.net>

	* src/backend/video-utils.c:
	(totem_gdk_window_set_invisible_cursor): Fix warning on exit
	when hiding the cursor

2006-01-09  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add Flash Video support

2006-01-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: make the Totem plugin resident in
	memory to avoid re-registering its type via dbus-glib, fixes
	crashes when viewing some videos a second time, with help from
	Christian Persch <chpe@cvs.gnome.org> (Closes: #324352)

2006-01-08  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	  Check for required elements, most notably gconfaudiosink and
	  gconfvideosink from gst-plugins-good, when GStreamer-0.10
	  backend is selected (#324411).

2006-01-08  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	  Bump requirements for GStreamer-0.10 backend from the
	  slightly confusing then-CVS version to 0.10.1 now that
	  those have been released (#324411). Also, print result
	  after check for NVTV.

	* src/backend/bacon-video-widget-gst-0.10.c: (bvw_bus_message_cb),
	(bacon_video_widget_can_direct_seek),
	(bacon_video_widget_get_mrls),
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata):
	  Fix CD audio code for 0.10 backend (even if it seems
	  unlikely that it will ever be used); add some more debug
	  statements here and there, and fix up a comment; handle
	  DURATION message on bus.

2006-01-07  Chao-Hsiung Liao  <j_h_liau@yahoo.com.tw>

	* configure.in: Add "zh_HK" to ALL_LINGUAS.

2006-01-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: remove unused musicbrainz include

2006-01-04  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: fix typo that made the properties page test
	program uncompilable

2006-01-02  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/test-parser.c: (push_parser):
	* src/plparse/totem-pl-parser.c: fix parsing of directories

2005-12-23  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (main): call the GNOME authentication
	manager, so that auth'ed remote places get thumbnailed as well
	(Helps: #169280)

2005-12-22  Bastien Nocera  <hadess@hadess.net>

	* src/.cvsignore:
	* src/Makefile.am:
	* src/test-properties-page.c: (main_loop_exit), (main):
	Add a test program for the properties page

2005-12-22  Bastien Nocera  <hadess@hadess.net>

	* configure.in: exit if xine-lib isn't available, and GStreamer
	is disabled (Closes: #324785)

2005-12-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem-properties-main.c: (nautilus_module_initialize):
	* src/totem-properties-view.c: (totem_properties_view_init),
	(totem_properties_view_finalize),
	(totem_properties_view_set_location): don't assert if we can't init
	the backend, and fix resulting warnings

2005-12-18  Bastien Nocera  <hadess@hadess.net>

	* src/totem-uri.c: (totem_setup_file_filters),
	(totem_destroy_file_filters), (totem_add_files):
	* src/totem-uri.h:
	* src/totem.c: (totem_action_exit): Fix crash when calling the "add
	to playlist dialogue twice" (Closes: #324240)

============ Version 1.3.0

2005-12-18  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 1.3.0

2005-12-18  Bastien Nocera  <hadess@hadess.net>

	* src/totem-private.h:
	* src/totem-sidebar.c: (cb_resize), (cb_got_size),
	(on_sidebar_button_toggled): patch from Ronald Bultje
	<rbultje@ronald.bitfreak.net> to fix resizing of the sidebar
	(Closes: #324346)

2005-12-18  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/test-parser.c: (push_parser):
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_set_method),
	(totem_pl_parser_add_m3u), (parse_asx_entry), (parse_asx_entries),
	(parse_smil_entry), (parse_smil_entries),
	(totem_pl_parser_add_smil), (totem_pl_parser_add_asf),
	(totem_pl_parser_parse_internal):
	Fix for remote ASX files with broken mime-type, lower-case asx header,
	return values from the sub-parsers, s/mms/mmsh/ (Closes: #323683)

2005-12-18  Christian Persch  <chpe@cvs.gnome.org>

	* data/Makefile.am:
	* src/Makefile.am:
	* src/plparse/Makefile.am: Fixes for builddir != srcdir.

2005-12-17  Bastien Nocera  <hadess@hadess.net>

	* data/popup.glade: add an image to the play/pause popup menu item,
	remove duplicate "u" accesskey

2005-12-17  Bastien Nocera  <hadess@hadess.net>

	* data/popup.glade: Remove keyboard shortcuts from the popup menu
	(Closes: #323855)

2005-12-17  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_got_metadata_event): Fix the fullscreen name
	label not getting set (Closes: #324235)

2005-12-15  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	* src/backend/gstscreenshot.c:
	  Make screenshot code use 'totem' debug category as well.

2005-12-15  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	  Bump requirements for GStreamer 0.10 backend to current CVS.

	* src/backend/bacon-video-widget-gst-0.10.c: (got_time_tick),
	(bvw_error_from_gst_error),
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_get_video_property),
	(bacon_video_widget_set_video_property),
	(bacon_video_widget_can_play),
	(bacon_video_widget_get_current_frame):
	* src/backend/gstscreenshot.c: (feed_fakesrc), (save_result),
	(bvw_frame_conv_convert):
	* src/backend/gstscreenshot.h:
	  Fix screenshot taking with 0.10 backend and add debug
	  messages here and there.

2005-12-11  Jeroen Zwartepoorte  <jeroen.zwartepoorte@gmail.com>

	* src/totem-video-thumbnailer.c: (add_holes_to_pixbuf_small),
	(add_holes_to_pixbuf_large): Don't save the thumbnail with an alpha
	component.

2005-12-10  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/bacon-message-connection.c: (is_owned_by_user_and_socket),
	(find_file_with_pattern), (socket_filename):
	  Don't assume the const string returned by g_dir_read_name() stays
	  valid even after g_dir_close() (fixes crash on amd64 if there is
	  already a /tmp/totem.user.123 socket at startup). Ignore an existing
	  /tmp/totem.user.123 not only if it is not owned by the current user,
	  but also if it is something else than a socket.

2005-12-02  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_finalize), (bacon_video_widget_new):
	  Clean up properly in finalize function and error out properly
	  when either the audiosink or the videosink is not available
	  at startup.

2005-12-01  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	* src/backend/gstscreenshot.c:
	  GStreamer-0.9 is dead, long live GStreamer-0.10! Grab the prerelease
	  now if you don't have it yet. Purge all mention of 0.9 and require
	  --enable-gstreamer=0.10.

2005-12-01  Andy Wingo  <wingo@pobox.com>

	* src/backend/bacon-video-widget-gst-0.10.c: gstvideosink.h, not
	videosink.h.

2005-11-28  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/Makefile.am: totem-disc.h is actually used in other
	applications, re-distribute (Closes: #322664)

2005-11-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: fix compilation with newer versions of
	D-Bus (Closes: #322436)

2005-11-28  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_handle_element_message), (got_time_tick), (bvw_element_msg_sync), 
	(bacon_video_widget_new):
	  Synchroneously handle prepare-xwindow-id element messages that are
	  emitted by xoverlay elements before they create their own window.
	  Should fix any remaining issues of the video window jumping out of
	  its frame.

2005-11-28  Wim Taymans  <wim@fluendo.com>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_seek_time):
	Use a keyframe seek.

2005-11-27  Jan Schmidt  <thaytan@mad.scientist.com>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_realize), (bacon_video_widget_expose_event):
	Set the bacon video widget background colour to black to 
	help with the nasty grey flashing effect on rapid window
	resizes.
	In the expose handler, bvw_update_interface_implementations 
	might leave us without an xoverlay, in which case we should
	just draw black.
	Hold a reference to the xoverlay while we're exposing.

2005-11-26  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2005-11-26  Jan Schmidt  <thaytan@mad.scientist.com>

	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_update):
	When the current media has a video stream, make sure to show
	the Video section of the property box. (Closes: #322469)

2005-11-25  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: Patch from Frank Arnold <frank@scirocco-5v-turbo.de>
	to fix the access keys for saturation and hue being mixed up
	Avoid the duplicate use of the 'r' accesskey (Closes: #322228)

2005-11-25  Jan Schmidt  <thaytan@mad.scientist.com>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bvw_update_interface_implementations):
	Hold an extra reference to the xoverlay if we're
	also using it for color balance.

2005-11-25  Jan Schmidt  <thaytan@mad.scientist.com>

	* src/backend/bacon-video-widget-gst-0.10.c: (bvw_bus_message_cb),
	(caps_set), (parse_stream_info),
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_current_frame):
	More updates for fractional framerates. 
	Fix up enum recognition for streaminfo type, which was leading
	to strange issues such as invalid aspect ratio.

2005-11-24  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_get_dev_from_drives),
	(cb_mount_done), (cd_cache_open_mountpoint), (cb_umount_done),
	(cd_cache_free), (cd_cache_disc_is_vcd), (cd_cache_disc_is_dvd):
	patch from Ronald Bultje <rbultje@ronald.bitfreak.net> to allow
	playback of DVDs and VCDs on a pmount setup (Closes: #318401)

2005-11-24  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: remove unused mntent.h include

2005-11-24  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/Makefile.am: totem-disc.h should not have been installed
	or distributed, keep it for ourselves

2005-11-24  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata):
	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata):
	* src/backend/bacon-video-widget.h:
	* src/metadata-test.c: (on_got_metadata_event):
	* src/totem-menu.c: (add_device_to_menu):
	* src/totem-playlist.c: (totem_playlist_clear),
	(totem_playlist_set_title):
	* src/totem-playlist.h:
	* src/totem.c: (on_got_metadata_event):
	remove CD playback from the UI (as to avoid double-use with sound-
	juicer and Rhythmbox), as well as musicbrainz dependency

2005-11-24  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/bacon-message-connection.c: (is_owned_by_user),
	(find_file_with_pattern), (socket_filename): update from libbacon CVS
	(Closes: #322248)

2005-11-24  Bastien Nocera  <hadess@hadess.net>

	* data/totem.desktop.in.in.in: Remove the empty DocPath line to
	pass desktop-file-validate (Closes: #322337)

2005-11-23  Bastien Nocera  <hadess@hadess.net>

	* data/totem.desktop.in.in.in: Totem is the default GNOME media player
	so no need to say its name, patch by Matthias Clasen
	<mclasen@redhat.com> (Closes: #322162)

2005-11-23  Jan Schmidt  <thaytan@mad.scientist.com>

	* src/backend/bacon-video-widget-gst-0.10.c: (parse_stream_info),
	(get_visualization_size), (change_visualization_quality):
	  Framerates are now represented as fractional values.

2005-11-22  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	  Bump requirements for GStreamer 0.9 backend to current GStreamer
	  CVS or later.

	* src/backend/bacon-video-widget-gst-0.10.c: (fixate_to_num),
	(bacon_video_widget_set_audio_out_type),
	(change_visualization_quality):
	  Update for API changes; remove stream locks.

2005-11-19  Christian Persch  <chpe@cvs.gnome.org>

	* src/totem-mozilla-plugin.cpp: Fix double-free in NP_Shutdown.
	(Closes: #321862.)

2005-11-16  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c: (bvw_bus_message_cb),
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_is_playing),
	(bvw_update_interface_implementations), (bacon_video_widget_new):
	  Make sure position querying continues to work properly after a seek
	  as well; fix bacon_video_widget_is_playing() and use _get_state()
	  here; give the video sink five seconds to change into READY state
	  and error out if that does not happen within that time frame.

	* src/totem.c: (seek_slider_changed_cb), (seek_slider_released_cb),
	(totem_callback_connect):
	  Make instant seeking work in full screen mode as well.

2005-11-14  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_unrealize): remove earlier work-around, fixed
	in xine-lib/src/xine-engine video_out.c,1.220,1.221

2005-11-14  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_finalize), (bacon_video_widget_unrealize),
	(bacon_video_widget_new): work-around a crash-on-exit with the
	1.1.x version of xine-lib, and using visualisations

2005-11-11  Christian Persch  <chpe@cvs.gnome.org>

	* src/totem-mozilla-plugin.cpp: Don't use nsCOMPtr in the plugin.
	Fixes crash when running a normal plugin in a browser debug build,
	bug #321254.

2005-11-11  Andy Wingo  <wingo@pobox.com>

	* src/backend/bacon-video-widget-gst-0.10.c
	(BaconVideoWidgetPrivate): Remove last_error and cache_errors
	variables, they are no longer needed. Remove everywhere they were
	referenced.
	(bacon_video_widget_finalize): Free the lock before its containing
	structure.

2005-11-11  Andy Wingo  <wingo@pobox.com>

	* src/backend/bacon-video-widget-gst-0.10.c
	(bacon_video_widget_process_pending_bus_messages): Remove, no
	longer necessary.
	(bvw_bus_message_cb): Don't handle messages that are in the
	ignore_messages_mask.
	(struct BaconVideoWidgetPrivate): New field, ignore_messages_mask.
	(bvw_error_from_gst_error): Add some args so we get nicer errors.
	Add nice errors for audio/video sinks.
	(poll_for_state_change): New arg, the element whose state change
	we're looking for. Also, set ignore_message_mask while we poll.
	Lower timeout to a quarter of a second, and make timeouts return
	TRUE instead of FALSE, so the user sees that it goes to playing
	and later can stop with the pause button.
	(bacon_video_widget_open_with_subtitle): Adapt for
	poll_for_state_change change.
	(bacon_video_widget_play): Use poll_for_state_change.
	(bacon_video_widget_new): Refactor to use poll_for_state_change
	when checking the sinks.

	* configure.in: Link to the audio and video libraries for the 0.9
	backend.

2005-11-10  Wim Taymans  <wim@fluendo.com>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_expose_event), (bacon_video_widget_seek_time):
	Handle the case where the xoverlay is NULL.
	Make seeking feel faster by waiting for preroll to complete.

2005-11-10  Andy Wingo  <wingo@pobox.com>

	* src/backend/bacon-video-widget-gst-0.10.c
	(bacon_video_widget_open_with_subtitle): Refactor to use
	poll_for_state_change to detect success or failure.
	(poll_for_state_change): New function, similar in intent
	bacon_video_widget_process_pending_bus_messages, but more sane.
	(bvw_error_from_gst_error): New function, factored out of
	open_with_subtitles. Still needs some help to detect errors in
	certain mrl's though.

	* src/backend/bacon-video-widget-gst-0.10.c
	(bacon_video_widget_class_init): Remove obsolete comment.
	(bacon_video_widget_init): Threads have already been enabled via
	gstreamer.
	(bvw_bus_message_cb): A "message" signal handler should not return
	a value.

	* src/backend/bacon-video-widget-gst-0.10.c (get_media_size)
	(bacon_video_widget_expose_event)
	(bacon_video_widget_button_press)
	(bacon_video_widget_button_release): Don't call GST_STATE on
	elements, (!logo_mode) can only be true in >= PAUSED. Fix some
	refcounting issues.

2005-11-10  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/totem-menu.c: (add_device_to_menu):
	  Don't call g_str_has_prefix with NULL string.

2005-11-07  Christian Persch  <chpe@cvs.gnome.org>

	* configure.in:	Allow compilation against xulrunner.
	Patch by Robert O'Callahan <rocallahan@novell.com>. (Closes: #320921)

2005-11-07  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_load_media_device): Change the horrible
	error message when we can't determine the CD type (Closes: #320298)

2005-11-04  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/totem-private.h:
	* src/totem.c: (seek_slider_pressed_cb), (seek_slider_released_cb):
	  Pause playback while slider is pressed in direct seek mode in 
	  order to prevent audio output while the slider position is being 
	  changed; also fix an instance of dubious g_object_get_data usage.

2005-11-04  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* src/backend/bacon-video-widget-gst-0.10.c:
	(bacon_video_widget_expose_event), (bacon_video_widget_init),
	(bacon_video_widget_finalize), (bacon_video_widget_get_property),
	(bacon_video_widget_get_video_property),
	(find_colorbalance_element),
	(bvw_update_interface_implementations),
	(bvw_changed_state_msg_sync), (got_new_video_sink_bin_element),
	(bacon_video_widget_new):
	  Fix 'video jumping out of its frame' at EOS; add fallback for
	  not properly working colorbalance detection; use _set_string()
	  instead of _take_string() for a string that we want to continue
	  owning.

2005-11-03  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (seek_slider_changed_cb), (seek_slider_released_cb):
	Fix the coding style for the new seeking changes

2005-11-03  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_property):
	  Use _set_string() instead of _take_string() for a string that we
	  want to continue owning (causes random crashers elsewhere).

2005-11-03  Tim-Philipp MÃ¼ller  <tim at centricular dot net>

	* configure.in:
	* src/backend/Makefile.am:
	  Add configure magic GStreamer 0.9/0.10 backend: --enable-gstreamer
	  now optionally accepts a GStreamer major/minor version as well
	  (if none is specified it defaults to GStreamer 0.8).

	* src/backend/bacon-video-widget-gst-0.10.c:
	  Add GStreamer 0.9/0.10 backend (based on Ronald's original
	  patch, #313086).

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_signal_idler), (got_found_tag),
	(parse_stream_info), (cb_audio_fixate), (get_num_audio_channels),
	(fixate_to_num), (bacon_video_widget_set_audio_out_type),
	(bacon_video_widget_open_with_subtitle), (bacon_video_widget_play),
	(bacon_video_widget_can_direct_seek),
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata_int), (bacon_video_widget_new):
	  Some fixes for the 0.8 backend: gcc4 signedness fixes; move some
	  code from cb_audio_fixate() into helper functions; fix minor memory
	  leak; improve error messages when sink could not be created.

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_can_direct_seek):
	* src/backend/bacon-video-widget.h:
	  Add new _can_direct_seek() method.

	* src/backend/gstscreenshot.c: (have_data), (get_any),
	(bvw_frame_conv_convert):
	  Add code paths for GStreamer 0.9/0.10.

	* src/totem.c: (seek_slider_changed_cb), (seek_slider_released_cb):
	  Slider magic for direct seeking.

2005-11-02  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/totem-menu.c: (add_device_to_menu): Disable menu items for
	CD drives with blank CDs in them (Helps: #320269)

2005-10-31  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/totem-playlist.c: (treeview_row_changed),
	(totem_playlist_class_init):
	* src/totem-playlist.h:
	* src/totem.c: (totem_action_seek), (totem_action_seek_relative),
	(item_activated_cb), (totem_callback_connect),
	(playlist_widget_setup):
	Play the file from the beginning when the playlist item is
	double-clicked (Closes: #320272)

2005-10-31  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: Added application/x-trash as an
	ignored mime-type, so that backup files are not added to the playlist
	(Closes: #320056)

2005-10-30  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c:
	(totem_pl_parser_add_pls_with_contents), (totem_pl_parser_add_pls),
	(totem_pl_parser_get_extinfo_title), (totem_pl_parser_add_m3u):
	Parse as .pls files .m3u playlists with [playlist] at the beginning
	(Closes: #318558)

2005-10-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_load_media),
	(totem_action_load_media_device), (totem_action_play_media_device),
	(totem_action_remote): stop the currently playing song when
	loading a media, and playing it fails (Closes: #317119)

2005-10-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_load_media_device): avoid warnings
	when trying to play a data CD using the "Play Disc" menu

2005-10-28  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: Make the preference dialog centred on the parent
	instead of showing it at the top-left

2005-10-23  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_set_reorderable),
	(totem_playlist_set_playing): only jump to the current cell if we
	are setting it as playing, only emit the "changed" signal if the
	currently playing item changed
	This fix the scroll jumping when simply selecting an item in the
	playlist

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (xine_try_error):
	Slightly better error message when trying to play a file for which
	there isn't an input plugin
	* src/totem-uri.c:
	* src/totem-uri.h:
	* src/totem.c: (totem_action_exit):
	Don't destroy the filters on exit, they seem to go away on their own,
	somehow...

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* src/.cvsignore: upd

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* help/uk/.cvsignore: upd

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add video/x-m4v
	* src/totem-uri.c: (totem_setup_file_filters),
	(totem_destroy_file_filters), (totem_add_files):
	* src/totem-uri.h:
	* src/totem.c: (totem_action_exit), (main):
	Use filters in the "Open" file dialogs (Closes: #318350)

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem-private.h:
	* src/totem.c: (play_pause_set_label), (main): set the tooltip
	depending on the image on the play/pause button (Closes: #300467)

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_add_files):
	* src/totem-uri.c: (totem_uri_escape_for_display),
	(totem_add_files):
	* src/totem-uri.h:
	* src/totem.c: (totem_action_open_dialog):
	Move the file chooser to totem-uri.[ch] to allow for more code sharing

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_reset),
	(bacon_video_widget_properties_update): use N/A when the bitrate or
	number of frames per second isn't available (Closes: #315007)

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem-remote.c: (totem_remote_read_code),
	(totem_remote_finalize), (totem_remote_init): patch from George
	Talusan <george@elitedudz.com> to make LIRC work again

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* src/egg-recent-*.c: update from libegg CVS to allow compilation
	without libgnomeui (Closes: #315315)

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* data/desktop.sh: patch from Brian Cameron <brian.cameron@sun.com>
	to allow build on systems with "echo -n"

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* configure.in: add gmodule-2.0 as a dependency for glade to be able
	to find creation functions for the custom widgets (Closes: #316596)
	* NEWS: updated

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_backend_name): get the xine-lib version
	at run-time rather than at compile-time (Closes: #319131)
	* NEWS: updated

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (drop_cb): fix DND on the playlist, which was
	asking for the parser to insert local filenames (Closes: #319066)

2005-10-20  Maxim Dziumanenko <mvd@mylinux.ua>

	* configure.in:
	* help/Makefile.am:
	* help/uk/*: Add Ukrainian manual.

2005-10-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: fix mime-type list leak,
	patch from Christian Persch <chpe@gnome.org> (Closes: #318117)

2005-10-03  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: Remove spurious argument, patch
	by Sylvain Bertrand <sylvain.bertrand@gmail.com> (Closes: #317852)

2005-10-03  Bastien Nocera  <hadess@hadess.net>

	* src/totem-interface.c: (totem_interface_load_with_root): 
	load the interface forcing the Totem gettext package at all times

2005-09-25  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2005-09-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_exit): remove the timeout for the popup
	when exiting to avoid the timeout being triggered during shutdown

2005-09-24  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_with_subtitle):
	* src/plparse/totem-disc.c: (cd_cache_new):
	* src/plparse/totem-disc.h:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_add_iso),
	(totem_pl_parser_add_cue): Add some hacks to be able to play back
	DVDs and VCDs from images (.cue and .iso files)

2005-09-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-scrsaver.c: (screensaver_inhibit_dbus): fix wording in
	the reason for disabling the screensaver

2005-09-15  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_seek_time): only send an EOS when reaching past
	the end of the current stream *and* not playing a DVD or VCD
	This fixes playback stopping when trying to skip the FBI warning, or
	such on DVDs

2005-09-15  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem.c: (totem_action_handle_key),
	(update_media_menu_items): Add menu item to switch angles

2005-09-14  Johan Dahlin  <johan@gnome.org>

	reviewed by: Ronald S. Bultje  <rbultje@ronald.bitfreak.net>
	
	* src/totem-playlist.c: (totem_playlist_set_playing): Scroll
	to the current song when playing it.

2005-09-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: Remove plenty of debug spew
	(Closes: #314113)

2005-09-13  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_signal_idler), (got_found_tag):
	Ref the source in the got_found_tag, and unref it in the idle
	signal handler (Closes: #314803), thanks to Jan Schmidt
	<thaytan@mad.scientist.com> for the hint

2005-09-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (popup_timeout_add), (on_mouse_click_fullscreen),
	(on_video_motion_notify_event): patch from Wouter Bolsterlee 
	<uws+gnome@xs4all.nl> to simplify the popup timeout code
	(Closes: #316122)

2005-09-10  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am: Don't change a variable in the configure.in after
	it's been AC_SUBST'ed, hardcode the D-Bus warning instead, fixes
	the build when the Mozilla plugin is enabled (Closes: #315864)

2005-09-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: avoid passing undefined data to
	gnome_vfs_mime_get_description (Closes: #315911)

2005-09-07  William Jon McCann  <mccann@jhu.edu>


	* src/totem-scrsaver.c (screensaver_is_running_dbus) 
	(screensaver_inhibit_dbus, screensaver_enable_dbus) 
	(screensaver_disable_dbus, screensaver_init_dbus) 
	(screensaver_enable_x11, screensaver_disable_x11) 
	(screensaver_init_x11, totem_scrsaver_init) 
	(totem_scrsaver_disable, totem_scrsaver_enable) 
	(totem_scrsaver_finalize): Split X11 actions
	into separate functions.  Try to inhibit
	gnome-screensaver via DBus and fall back to
	X11 if it isn't available.

	* configure.in: Check for DBus.

2005-09-05  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_show_cursor):
	* src/totem.c: (window_state_event_cb),
	(totem_action_fullscreen_toggle), (totem_callback_connect):
	Avoid weird states when using the "Toggle fullscreen mode" window
	manager shortcut (Closes: #302592)

============ Version 1.2.0

2005-09-05  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 1.2.0
	* NEWS: upd

2005-09-03  Bastien Nocera  <hadess@hadess.net>

	* src/totem-interface.c: (totem_interface_load_with_root):
	load the glade files with the totem gettext package to force
	totem translations to be used when loading as part of other applications
	(fixes the property window not being translated in Nautilus)
	(Closes: #307617)

2005-09-02  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_realize), (show_vfx_update),
	(bacon_video_widget_set_visuals): don't disable visuals when we are
	already in the right state (fixes running with an audio-only file with
	visuals enabled), correctly set the visual plugin even if we are not
	currently using it

2005-08-30  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst.c: (bacon_video_widget_new):
	and the same one with video outputs

2005-08-30  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst.c: (bacon_video_widget_new):
	Fix warning when we exit without finishing the object

2005-08-27  Vincent Untz  <vuntz@gnome.org>

	* configure.in:
	* help/Makefile.am:
	* help/fr/*: add french translation of the help, by Christophe Bliard
	<cbliard@gmail.com>.

2005-08-25  Claudio Saavedra  <csaavedra@alumnos.utalca.cl>

	* src/totem.c: (totem_action_load_media_device): Marking strings
	for translation.

============ Version 1.1.5

2005-08-24  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 1.1.5

2005-08-23  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2005-08-23  Bastien Nocera  <hadess@hadess.net>

	* src/disc-test.c: (main): list the volumes as well as the drives
	* src/plparse/totem-disc.c: (cd_cache_get_dev_from_volumes),
	(cd_cache_get_dev_from_drives), (cd_cache_new),
	(cd_cache_open_mountpoint), (cd_cache_free):
	Also look in the mounted volumes for our device (Closes: #302615)

2005-08-23  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_finalize),
	(bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_set_subtitle_font):
	simplify the _finalize code, don't set the subtitle font if the
	property isn't available, handle "dvd://<dir>" urls (Closes: #172941)
	* src/totem-mozilla-plugin.cpp: simplify the while loop waiting for the
	service to be up, add the version in the plugin description,
	don't create the mime-list more than once to avoid leaking every time
	about:plugins is reloaded (Closes: #313864)

2005-08-20  Roozbeh Pournader  <roozbeh@farsiweb.info>

	* confignure.in: Added "fa" (Persian) to ALL_LINGUAS.

2005-08-16  Bastien Nocera  <hadess@hadess.net>

	* src/egg-*.[ch]: Update from libegg

2005-08-16  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_class_init):
	Fix generation of the "playlist-end" signal, patch from
	James Livingston <jrl@ids.org.au> (Closes: #313649)

2005-08-14  Bastien Nocera  <hadess@hadess.net>

	* autogen.sh:
	* configure.in: build changes to dist .tar.bz2 files

2005-08-12  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-volume.c: (bacon_volume_scale_new):
	* src/totem.c: (totem_volume_create):
	  Ah, now I finally understand why the range direction was wrong;
	  the stepping was negative!

============ Version 1.1.4

2005-08-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 1.1.4

2005-08-10  Bastien Nocera  <hadess@hadess.net>

	* data/playlist.glade:
	* src/ev-sidebar.c: (ev_sidebar_init): patch from MichaÃ«l Arnauts
	<michael.arnauts@gmail.com> to remove the frame around the drop-down
	menu and the close button (Closes: #310604)

2005-08-10  MichaÃ«l Arnauts  <michael.arnauts@gmail.com>

	Reviewed by:  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-uri.c: (totem_uri_get_subtitle_uri):
	  Allow remote subtitles (#312808).

2005-08-10  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-mozilla-plugin.cpp:
	  So, Apple's javascript API is confusing. Stop is Rewind, Pause is
	  Stop and thus Stop is not Stop. So let's Rewind and not Stop on
	  exit.

2005-08-10  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-volume.c: (bacon_volume_button_new),
	(bacon_volume_scale_value_changed):
	* src/bacon-volume.h:
	* src/totem-mozilla-viewer.c: (totem_volume_create):
	* src/totem.c: (totem_volume_create):
	  So those were volume control enhancements that are needed for
	  Rhythmbox (different icon size). I apparently committed this.
	  Oops. Ohwell.

2005-08-10  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-mozilla-plugin.cpp:
	  More refcount fixes, with help from Christian Persch
	  <chpe@gnome.org>; now, if you kill the totem-mozilla-viewer (to
	  simulate a crash at random points... It'll happen at some point),
	  firefox happily lives on.
	* src/totem-mozilla-scriptable.cpp:
	  Remove support for old mozilla versions (NS_INIT_ISUPPORTS()),
	  since they don't work anyway.

2005-08-09  Bastien Nocera  <hadess@hadess.net>

	* src/ev-sidebar.c: (ev_sidebar_destroy): revert a leak fix that was
	causing a crash on exit (Closes: #313010)

2005-08-09  MichaÃ«l Arnauts  <michael.arnauts@gmail.com>

	Reviewed by:  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* README:
	  Fix link, fix typo (#313019).

2005-08-09  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-sidebar.c: (cb_resize), (on_sidebar_button_toggled):
	  Resize window if sidebar is shown/hidden (#310257).

2005-08-08  Dennis Cranston <dennis_cranston@yahoo.com>

	* src/totem-playlist.c: (totem_playlist_save_files): Use header 
	capitalization for window title.

2005-08-08  Bastien Nocera  <hadess@hadess.net>

	* src/ev-sidebar.c: (ev_sidebar_destroy),
	(ev_sidebar_menu_item_activate_cb), (ev_sidebar_add_page):
	Port some leak fixes from Evince
	http://cvs.gnome.org/viewcvs/evince/shell/ev-sidebar.c?r1=1.15&r2=1.16

2005-08-08  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_realize), (bacon_video_widget_new):
	Only set the default vis plugin name if we don't already have one

2005-08-08  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (bacon_video_widget_init),
	(bacon_video_widget_realize), (bacon_video_widget_unrealize),
	(show_vfx_update), (bacon_video_widget_set_visuals):
	Create the visual effects plugins when needed, instead of on startup,
	this should make startup slightly faster

2005-08-08  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Fix compilation
	* src/totem-playlist.c: (totem_playlist_update_save_button),
	(totem_playlist_remove_files), (update_lockdown), (init_config),
	(totem_playlist_add_one_mrl): patch from MichaÃ«l Arnauts to disable
	the "Save" button in the playlist when it's empty (Closes: #309407)

2005-08-08  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (totem_action_info),
	(audio_out_menu_changed): Parent the information dialogues on the
	preferences window, not the main Totem window (Closes: #312773)

2005-08-07  MichaÃ«l Arnauts  <michael.arnauts@gmail.com>

	Reviewed by:  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-time-label.c: (totem_time_label_set_time):
	  Do not display length if it is unknown (0:00) in fullscreen-mode,
	  fixing #312680.

2005-08-07  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* totem.spec.in:
	  Don't include mozilla/nautilus bits when not built (#311843).

2005-08-07  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* configure.in:
	  Explicitely call PKG_PROG_PKG_CONFIG since our first
	  PKG_CHECK_MODULES is wrapped inside an if; fixes #311911.

2005-08-07  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-volume.c: (bacon_volume_button_press):
	  Backport fix from sound-juicer for flickering of widget when
	  first popping it up (#312165).

2005-08-05  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/Makefile.am:
	* src/totem-mozilla-viewer.c: (cb_vol),
	(totem_embedded_add_children), (totem_volume_create):
	  Oops, thanks Luis for reminding me to not break the build.

2005-08-03  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-volume.h:
	  Missing include.

2005-08-03  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/Makefile.am:
	* src/bacon-volume.c: (bacon_volume_button_get_type),
	(bacon_volume_button_class_init), (bacon_volume_button_init),
	(bacon_volume_button_dispose), (bacon_volume_button_new),
	(bacon_volume_button_get_value), (bacon_volume_button_set_value),
	(bacon_volume_button_scroll), (bacon_volume_button_press),
	(cb_button_timeout), (cb_button_press), (cb_button_release),
	(bacon_volume_release_grab), (cb_dock_press),
	(bacon_volume_scale_get_type), (bacon_volume_scale_class_init),
	(bacon_volume_scale_new), (bacon_volume_scale_press),
	(bacon_volume_scale_release), (bacon_volume_scale_value_changed):
	* src/bacon-volume.h:
	* src/totem-volume.c:
	* src/totem-volume.h:
	* src/totem.c: (update_volume_sliders), (vol_cb),
	(totem_volume_create):
	  TotemVolumeButton -> BaconVolumeButton.

2005-08-03  Sunil Mohan Adapa  <sunil@atc.tcs.co.in>

	* configure.in: Added "te" to ALL_LINGUAS

2005-08-02  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem-sidebar.c: (on_sidebar_button_toggled),
	(totem_sidebar_setup):
	* src/totem.c: (totem_action_set_mrl_with_warning),
	(totem_action_zoom), (update_seekable), (totem_action_handle_key),
	(on_window_key_press_event), (update_media_menu_items),
	(update_buttons): Make the "Show/Hide Sidebar" menu item into
	a check menu item labelled "Sidebar", fix some build warnings
	The new shortcut is F9 like in other GNOME apps (Closes: #310689)

2005-08-01  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2005-08-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem-sidebar.c: (totem_sidebar_setup): make it impossible
	to have the sidebar smaller than the addition of the requisition
	from its children (Closes: #310603)

2005-07-31  Bastien Nocera  <hadess@hadess.net>

	* data/totem.1: Fix typo (spotted by A Costa <agcosta@gis.net>)
	(Closes: #312047)

2005-07-24  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_set_logo):
	* src/backend/bacon-video-widget-xine.c: (xine_event_message):
	* src/totem-private.h:
	* src/totem.c: (totem_action_set_mrl_with_warning),
	(totem_action_zoom), (on_error_event), (update_seekable),
	(update_media_menu_items), (update_buttons):
	Fix "occured" typo (Closes: #311393), shave a bunch of lines
	off totem.c by using a macro to set the sensitivity of a widget
	in the GladeXML

2005-07-22  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c:
	(totem_pl_parser_add_asf_reference_parser),
	(totem_pl_parser_add_asf_parser), (totem_pl_parser_add_asf):
	Add support for ASF redirect (not reference) files (Closes: #311172)

2005-07-22  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-volume.c: (totem_volume_button_scroll),
	(totem_volume_scale_value_changed):
	  Work with any step/page_increment and with adj->lower != 0, which
	  should make it more generally usable, and fixes #310810.

2005-07-22  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-volume.c: (totem_volume_button_new):
	  Manually call callback once so icon is always drawn (#310806).

2005-07-22  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-volume.c: (totem_volume_button_press):
	  Fix placement of the popup and coordinates of the generated event
	  for the click on the slider afterwards (#310260).

2005-07-22  Luca Cavalli  <loopback@slackit.org>

	Reviewed by:  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* data/totem.glade:
	  Remove vertical separator (#310607).

2005-07-22  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.h:
	  Be sure to still exist after each mainloop iteration. If not, get
	  out ASAP so we don't crash. Fixes #310480.

2005-07-22  Bastien Nocera  <hadess@hadess.net>

	* src/ev-sidebar.c: (ev_sidebar_select_button_press_cb): make the
	combobox take the whole width of the label in the sidebar
	(Closes: #310602)

2005-07-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_fullscreen_toggle), (show_controls):
	Hide the sidebar when hiding the controls as well (Closes: #310276)

2005-07-19  Bastien Nocera  <hadess@hadess.net>

	* src/scrsaver.c:
	* src/scrsaver.h: Remove unused files (Closes: #310890)

2005-07-18  William Jon McCann  <mccann@jhu.edu>

	* src/plparse/totem-disc.c (cd_cache_new): Don't
	strcmp NULL strings.

2005-07-18  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_int):
	  Track-number is UINT in GStreamer.

2005-07-15  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* configure.in:
	* src/Makefile.am:
	* src/totem-mozilla-interface.xml:
	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.cpp:
	* src/totem-mozilla-scriptable.h:
	* src/totem-mozilla-viewer.c: (totem_embedded_class_init),
	(totem_embedded_init), (totem_embedded_play),
	(totem_embedded_pause), (totem_embedded_stop), (on_play_pause),
	(on_got_redirect), (on_video_button_press_event), (main):
	  Use DBus for plugin<->helper communication, with nice function
	  interfaces so it's all easy (no more totemMozillaObject::wait()),
	  add some better error handling if the backend is not available
	  or suddenly dies for no good reason. Fixes #172591 and #310016.

2005-07-15  Bastien Nocera  <hadess@hadess.net>

	* src/totem-scrsaver.c: (totem_scrsaver_init): man, does X suck, we
	need you gnome-screensaver (fix the damn screensaver poking still)

2005-07-14  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_with_subtitle): avoid a crash when trying
	to pull an error and no errors were passed
	* src/totem-scrsaver.c: (totem_scrsaver_init): avoid crash by not
	using meta as a poking key, but alternating between the 2 Alts
	(Closes: #310255)

2005-07-14  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (xine_event_message),
	(xine_try_error), (xine_error),
	(bacon_video_widget_open_with_subtitle): copy the mrl straight away for
	us to be able to use when errors come in on open(), try harder
	to look for errors on startup (corrects double-dialogue with
	encrypted files)

2005-07-13  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_init): removed unused struct members
	* src/totem-mozilla-viewer.c:
	* src/totem-private.h: fix compilation warnings

2005-07-13  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-volume.c: (totem_volume_scale_new):
	  For some reason, it wants negative stepping if I use _set_inverted()
	  so I will do that.

2005-07-13  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem.c: (totem_action_set_mrl_with_warning):
	Fix sensitivity of the volume menu items

============ Version 1.1.3

2005-07-13  Bastien Nocera  <hadess@hadess.net>

	* NEWS: add the ASX/ASF changes
	* configure.in: 1.1.3

2005-07-13  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2005-07-13  Christian Persch  <chpe@cvs.gnome.org>

	* configure.in: Update mozilla configure checks for changed
	pkg-config name of mozilla trunk, and distribution-specific
	name variations of firefox. Fixes bug #310177.

2005-07-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_drop_files): sort the files before
	pushing them to the playlist when dropping files (Closes: #310203)

2005-07-13  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* configure.in:
	* data/mozilla-viewer.glade:
	* data/totem.glade:
	* src/Makefile.am:
	* src/totem-mozilla-viewer.c: (on_about1_activate),
	(on_video_button_press_event), (cb_vol),
	(totem_embedded_add_children), (cb_data), (totem_volume_create):
	* src/totem-private.h:
	* src/totem-volume.c: (totem_volume_button_get_type),
	(totem_volume_button_class_init), (totem_volume_button_init),
	(totem_volume_button_dispose), (totem_volume_button_new),
	(totem_volume_button_get_value), (totem_volume_button_set_value),
	(totem_volume_button_scroll), (totem_volume_button_press),
	(cb_button_timeout), (cb_button_press), (cb_button_release),
	(totem_volume_release_grab), (cb_dock_press),
	(totem_volume_scale_get_type), (totem_volume_scale_class_init),
	(totem_volume_scale_new), (totem_volume_scale_press),
	(totem_volume_scale_release), (totem_volume_scale_value_changed):
	* src/totem-volume.h:
	* src/totem.c: (update_mrl_label),
	(totem_action_set_mrl_with_warning), (update_volume_sliders),
	(vol_cb), (on_video_motion_notify_event), (totem_callback_connect),
	(totem_volume_create), (main):
	  Add volume button instead of slider to totem, add volume button
	  to mozilla plugin and add a right-click menu with preferences and
	  about box. There's supposed to be a fullscreen option too, but
	  that breaks right now because of some weird X stuff. Remove title
	  label from totem control area, since the window manager already
	  has that information.

2005-07-13  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_new), (cd_cache_disc_is_vcd),
	(cd_cache_disc_is_dvd): don't make a lack of mountpoint an error in
	case the medium is an audio CD (Closes: #310189)

2005-07-13  Bastien Nocera  <hadess@hadess.net>

	* src/disc-test.c: (main): abort when we have a warning
	* src/plparse/totem-disc.c: (totem_cd_detect_type_with_url):
	Fix setting a GError on top of a GError when there's no medium in the
	drive we're checking

2005-07-12  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c:
	(my_gnome_vfs_get_mime_type_with_data),
	(totem_pl_parser_add_asf_parser), (totem_pl_parser_add_pls),
	(parse_asx_entry): parse subplaylist unconditionally for asx files,
	avoid triggering potential segfaults when reading past the end of the
	data to determine the mime-type by null-terminating it, handle dos mode
	asf reference files (Closes: #310147)

2005-07-12  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_new): patch from James Livingston
	<jrl@ids.org.au> to avoid a double-free (Closes: #310114)

2005-07-12  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_current_frame): remove unneeded line
	* src/totem-menu.c: (on_play_disc_activate):
	don't free object data from the menu item (Closes: #310108)

2005-07-12  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_current_frame): work around
	XINE_STREAM_INFO_VIDEO_RATIO breakage for MPEG streams
	(Closes: #301020)

2005-07-11  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (totem_cd_detect_type_with_url),
	(totem_cd_detect_type):
	* src/plparse/totem-pl-parser.c:
	* src/totem-menu.c: (on_play_disc_activate):
	* src/totem-uri.c: (totem_is_media), (totem_is_block_device):
	* src/totem-uri.h:
	* src/totem.c: (totem_action_load_media_device),
	(totem_action_play_media_device), (totem_action_play_media),
	(totem_action_open_files_list), (totem_action_open_dialog),
	(on_open1_activate), (main):
	* src/totem.h:

	Only support opening discs through either their mountpoint (data
	discs, VCD, DVD), or block device path (all discs)
	cd:, vcd: and dvd: are gone

2005-07-11  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-mozilla-viewer.c: (totem_embedded_add_children):
	  Realize the widget before showing it, since the realize will create
	  the GdkWindow that we use to embed properly later on when we are
	  being shown. This is essentially a widget bug, too... Should fix
	  the fact that the widget would not embed properly in firefox.

2005-07-11  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_int):
	  Implement for real.

2005-07-11  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata): fix assert following the addition
	of BVW_INFO_TRACK_NUMBER (Closes: #309988)

2005-07-10  Christian Persch  <chpe@cvs.gnome.org>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_unrealize): Don't leak the window.
	Closes #309940.

2005-07-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-scrsaver.c: (totem_scrsaver_init): use XK_Hyper_R instead
	of XK_Control_L to avoid triggering the pointer highlighting feature
	(Closes: #306434)

2005-07-10  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_int):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata):
	* src/backend/bacon-video-widget.h:
	* src/metadata-test.c: (on_got_metadata_event):
	* src/totem.c: (totem_get_nice_name_for_stream):
	Add support for BVW_INFO_TRACK_NUMBER metadata, and use it in
	the playlist's nice name if available

2005-07-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (on_play_disc_activate), (add_device_to_menu):
	* src/totem.c: (totem_action_open_dialog), (on_open1_activate):
	* src/totem.h: add a totem_action_open_dialog() function to be
	called when a data disc is inserted

2005-07-09  Christian Neumair  <chris@gnome-de.org>

	* data/totem.schemas.in: Remove long descriptions where they don't
	provide any additional information. Closes #309896.

2005-07-09  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse): ignored
	schemes are unhandled by the playlist parser, not ignored

2005-07-09  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_seek_time): when seeking and playing, a seek that
	goes further than the end of the file generates an EOS
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse_internal),
	(totem_pl_parser_parse): rework the ignores slightly to avoid adding
	text/plain descendant, and don't mark as to ignore files that aren't
	playlists
	* src/totem-playlist.c: (totem_playlist_add_mrl): handle ignored entries
	and don't add them to the list

2005-07-09  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_add_directory),
	(totem_pl_parser_ignore), (totem_pl_parser_parse_internal),
	(totem_pl_parser_parse):
	* src/plparse/totem-pl-parser.h: add a TOTEM_PL_PARSER_RESULT_IGNORED
	retval, and use it to avoid ignored files getting in the playlist
	as unhandled files would

2005-07-09  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_ignore):
	ignore text/* and image/* files

2005-07-08  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_class_init),
	(totem_pl_parser_write_pls), (totem_pl_parser_write_with_title),
	(totem_pl_parser_write), (totem_pl_parser_finalize),
	(totem_pl_parser_add_pls), (totem_pl_parser_mimetype_is_ignored),
	(totem_pl_parser_parse_internal),
	(totem_pl_parser_add_ignored_scheme),
	(totem_pl_parser_add_ignored_mimetype):
	* src/plparse/totem-pl-parser.h: add totem_pl_parser_write_with_title ()
	and totem_pl_parser_add_ignored_mimetype() for the benefit of Rhythmbox
	(Closes: #148347)

2005-07-06  Bastien Nocera  <hadess@hadess.net>

	* configure.in: clean up the xine-lib version checking, thanks
	to Thomas for spotting it

2005-07-04  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* README: remove GStreamer DVD menus TODO item

2005-07-04  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade: make the Album name selectable, not the
	label that goes with the album name (spotted by Jan Arne Petersen)
	(Closes: #308671)

2005-07-04  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/playlist-16.png:
	* data/playlist-24.png:
	* data/playlist.glade:
	* data/totem.glade:
	* data/totem.schemas.in:
	* src/Makefile.am:
	* src/ev-sidebar.[ch]:
	* src/totem-menu.h:
	* src/totem-playlist.c: (totem_playlist_get_toplevel),
	(totem_playlist_error), (totem_playlist_add_files),
	(totem_playlist_save_files), (update_repeat_cb),
	(update_shuffle_cb), (init_config), (totem_playlist_init),
	(totem_playlist_new), (totem_playlist_set_repeat),
	(totem_playlist_set_shuffle), (totem_playlist_class_init):
	* src/totem-playlist.h:
	* src/totem-private.h:
	* src/totem-sidebar.c: (totem_sidebar_toggle),
	(on_sidebar_button_toggled), (on_show_sidebar1_activate),
	(toggle_sidebar_from_sidebar), (totem_sidebar_is_visible),
	(totem_sidebar_setup):
	* src/totem-sidebar.h:
	* src/totem-statusbar.c: (totem_statusbar_new_from_glade):
	* src/totem-statusbar.h:
	* src/totem-stock-icons.c: (totem_set_default_icons),
	(totem_named_icons_init):
	* src/totem-time-label.c: (totem_time_label_new_from_glade):
	* src/totem-time-label.h:
	* src/totem.c: (totem_action_fullscreen_toggle),
	(update_mrl_label), (totem_action_set_mrl_with_warning),
	(totem_action_handle_key), (totem_callback_connect),
	(playlist_widget_setup), (video_widget_create), (main):
	* src/totem.h:

	Move the playlist dialog to a sidebar, remove the labels for the
	playlist buttons

2005-07-01  jonathan@kaolin.hn.org

	Reviewed by:  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_signal_idler):
	  Prepend tags, so later tags are shown first (for iradio).
	* src/totem.c: (totem_get_nice_name_for_stream):
	  Print title alone if no artist is known (for iradio tags).

2005-07-01  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c: (has_subp),
	(bacon_video_widget_get_subtitle),
	(bacon_video_widget_set_subtitle),
	(bacon_video_widget_get_subtitles):
	  Support DVD subpictures as subtitles, too.

2005-06-30  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_seek_time): remove duplicate call to
	_get_stream_length()
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_reset),
	(bacon_video_widget_properties_from_time),
	(bacon_video_widget_properties_update):
	* src/bacon-video-widget-properties.h: add a _set_from_time function
	to be able to update the time independently
	* src/totem.c: (update_current_time): call _set_from_time as the
	stream length is updated, xine_get_pos_length is a POS indeed
	(Closes: #305027)

2005-06-30  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_size_allocate), (bacon_video_widget_new):
	Fix GCC4 warnings, use new TOTEM_OBJECT_HAS_SIGNAL() convenience to
	avoid triggering warning on startup
	* src/backend/video-utils.h: add TOTEM_OBJECT_HAS_SIGNAL
	* src/metadata-test.c: fix warning
	* src/totem.c: (totem_action_exit): fix warning

2005-06-22  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade: Patch from Michael Terry <mike@mterry.name>
	to make the Album name selectable (Closes: #308671)

2005-06-22  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_add_ram),
	(totem_pl_parser_add_m3u), (totem_pl_parser_add_asf_parser),
	(totem_pl_parser_add_pls), (totem_pl_parser_add_asx),
	(totem_pl_parser_add_smil), (totem_pl_parser_add_desktop):
	Up the gnome-vfs requirement and remove unneeded null-terminations
	(Closes: #300481)

2005-06-18  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2005-06-18  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_idle_signal): missing break statement that could
	cause a crash with some files

2005-06-17  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (show_controls): Don't allow for show_controls to be
	called if there's no video widget, fixes a crash when 'h' is pressed
	before the video widget is initialised (Closes: #308069)

2005-06-17  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: Make sure that the window isn't shown on startup,
	otherwise it might resize before being used (patch from Trent Lloyd
	<lathiat@bur.st>) (Closes: #308070)

2005-06-13  Paolo Borelli  <pborelli@katamail.com>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_finalize), (bacon_video_widget_new): chain
	up the finalize methoud and do not leak GConfValues.

2005-06-13  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (xine_event),
	(bacon_video_widget_set_show_cursor), (bacon_video_widget_finalize):
	Don't reset the cursor to the default pointer when showing it, but
	to whatever the current pointer should have been (Closes: #163808)
	* src/totem.c: (totem_action_exit): try to hide the Totem window
	as soon as possible

2005-06-10  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_signal_idler), (got_error),
	(bacon_video_widget_open_with_subtitle), (bacon_video_widget_play),
	(bacon_video_widget_seek), (bacon_video_widget_seek_time),
	(bacon_video_widget_can_get_frames), (bacon_video_widget_new):
	  Rework error messages. In case of startup errors, give the user
	  a clue of how to fix it. In case of file error messages, be
	  accurate in the problem reporting. Use BVW error domains.

2005-06-08  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-message-connection.c: (server_cb):
	  Fix memory over-read (#306722).

2005-06-07  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add video/3gpp and audio/3gpp mime-types
	as supported

2005-06-06  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_open_with_subtitle): Fix detection of still images
	with newer versions of xine-lib

2005-06-05  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.h:
	* src/totem-mozilla-viewer.c: (main): Fix compilation on 64 bits
	machines with gcc4 (patch from Christian Persch  <chpe@cvs.gnome.org>)
	(Closes: #306283)

2006-06-04  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "gl" to ALL_LINGUAS.

2005-05-30  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add application/x-shorten now that
	xine-lib can play Shorten lossless audio files

2005-05-29  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (xine_event_message),
	(bacon_video_widget_unrealize):
	* src/backend/bacon-video-widget.h: add the new BVW_ERROR_EMPTY_FILE
	error message, and use it for when we tried to play an empty file
	(Closes: #164738)

2005-05-29  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_zoom), (bacon_video_widget_get_zoom):
	Don't crash when trying to get or set the zoom level and the stream
	isn't setup yet
	* src/totem.c: (totem_action_drop_files),
	(on_always_on_top1_activate), (video_widget_create):
	Reset the zoom in the Totem UI to 100 to disable the "Zoom Reset"
	button in the View menu

2005-05-29  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: Move the repeat and shuffle menu items to the
	Edit menu instead (Closes: #300472)

2005-05-27  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_set_show_cursor):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_show_cursor):
	* src/backend/video-utils.c:
	(totem_gdk_window_set_invisible_cursor), (totem_create_symlinks),
	(totem_display_is_local):
	* src/backend/video-utils.h:
	* src/totem.c: (on_always_on_top1_activate): remove
	totem_gdk_window_set_always_on_top and use the GTK+ provided
	gtk_window_set_keep_above instead, namespace the invisible cursor
	function properly

============ Version 1.1.2

2005-05-23  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 1.1.2

2005-05-23  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2005-05-22  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_zoom):
	* src/totem.c: (totem_action_zoom), (totem_action_zoom_relative),
	(totem_action_zoom_reset): avoid crashes when zoom rate gets negative
	(Closes: #305137), desensitise menu items when boundaries are reached

2005-05-22  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem-menu.c: (totem_languages_update),
	(totem_subtitles_update): gray out the menu item rather than
	just the submenus items when no subtitles or languages are
	available (Closes: #170794)

2005-05-21  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-disc.c: (cd_cache_new),
	(totem_cd_mrl_from_type), (totem_cd_detect_type_from_dir),
	(totem_cd_detect_type), (totem_cd_detect_type_with_url):
	* src/plparse/totem-disc.h:
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_add_block):
	Parse block devices that are passed to the parser, rather than
	just spitting it out to the backend

2005-05-17  Bastien Nocera  <hadess@hadess.net>

	* src/egg-*.[ch]: update from libegg CVS HEAD (Closes: #304574)
	* src/totem-video-thumbnailer.c: fix build warning

2005-05-17  Li Peng  <lipeng@buaa.edu.cn>

	Reviewed by:  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c: (got_stream_length):
	* src/totem.c: (update_current_time):
	  Prevent window-flickering on VBR MPEG (#300785).

2005-05-13  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (xine_event_message),
	(xine_error), (bacon_video_widget_new): send error messages as such
	(duh!), also setup an event queue (Closes: #304035)
	* src/metadata-test.c: (main):
	* src/totem-video-thumbnailer.c: (main): call gnome_vfs_init()
	following some xine-lib changes to make sure we have access to
	the gnome-vfs methods

2005-05-13  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bvw-test.c: (main):
	  Init backend.

2005-05-12  Bastien Nocera  <hadess@hadess.net>

	* README: update to UTF-8
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_class_init), (bacon_video_widget_button_press),
	(bacon_video_widget_show), (bacon_video_widget_hide):
	allow hiding the widget in the backend as well
	* src/totem.c: (totem_action_remote): fix compile warning

2005-05-11  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* README:
	  That is done...

2005-05-11  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_realize), (bacon_video_widget_show),
	(bacon_video_widget_hide), (bacon_video_widget_class_init),
	(got_source):
	  Allow hiding of the video widget in the backend. No frontend
	  use for this yet, but who knows... Also unref return values
	  of g_object_get().

2005-05-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_remote): don't show the fullscreen popup
	on remote events if the fullscreen window isn't focused

2005-05-07  Bastien Nocera  <hadess@hadess.net>

	* src/metadata-test.c: (totem_create_full_path): update to allow
	testing cdda: urls
	* src/plparse/totem-pl-parser.c: (totem_pl_parser_parse_internal),
	(totem_pl_parser_parse): ignore cdda: before checking cdda:
	* src/totem-playlist.c: (totem_playlist_map): remove debug
	* src/totem.c: (totem_get_nice_name_for_stream),
	(totem_action_set_mrl_with_warning), (on_got_metadata_event):
	update the MRL label even if we don't have a CD Index

2005-05-07  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_add_pls):
	Read further in the .pls playlists to find the header
	(Patch by jonathan@kaolin.hn.org) (Closes: #303347)

2005-05-06  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated

2005-05-06  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_reset),
	(bacon_video_widget_properties_update),
	(bacon_video_widget_properties_from_metadata),
	(bacon_video_widget_properties_new):
	* src/bacon-video-widget-properties.h:
	* src/totem-properties-view.c: (on_got_metadata_event),
	(totem_properties_view_set_location):
	  Separate _update into _update and _reset, make _update act
	  step-wise, also add _from_metadata (for audio-CDs).
	* configure.in:
	* src/totem-playlist.c: (init_treeview), (totem_playlist_clear),
	(totem_playlist_get_current_metadata), (totem_playlist_set_title),
	(totem_playlist_set_cd_metadata), (idle_set_metadata),
	(cd_metadata_thread), (totem_playlist_set_cdindex),
	(totem_playlist_class_init):
	* src/totem-playlist.h:
	* src/totem.c: (totem_action_set_mrl_with_warning),
	(on_playlist_change_name), (on_got_metadata_event),
	(totem_action_open_files_list), (totem_action_remote), (main):
	  Add musicbrainz detection and CD-index-based metadata lookup
	  code, and use this for audio-CD metadata. Expose this metadata
	  in the API for use in the properties window and mainwindow,
	  which fixes #302219.

2005-05-05  Bastien Nocera  <hadess@hadess.net>

	* src/totem-statusbar.c: (totem_statusbar_create_window),
	(totem_statusbar_destroy_window):
	* src/totem-statusbar.h: Make the grip's default cursor be a resize
	cursor (Closes: #303064)

2005-05-02  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c: (load_video_out_driver):
	Don't try to load the xxmc driver, it seems to cause more problems
	than anything... (Closes: #302734)

2005-05-02  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_int):
	  Add missing break.

2005-05-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (update_fullscreen_size), (move_popups),
	(size_changed_cb): fix the exit fullscreen button not appearing on the
	right screen (Closes: #302418)

2005-05-01  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: fix build with --disable-mozilla, patch by
	William Jon McCann <mccann@jhu.edu> (Closes: #302217)

2005-04-30  Bastien Nocera  <hadess@hadess.net>

	* src/totem-properties-main.c: (totem_properties_get_pages):
	* src/totem-properties-view.c: (on_got_metadata_event),
	(totem_properties_view_init), (totem_properties_view_finalize),
	(totem_properties_view_new):
	* src/totem-properties-view.h: Give the nautilus tab a label that
	matches the file type (Closes: #172436)

2005-04-30  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (totem_lang_table_parse_start_tag),
	(totem_lang_get_full): also support iso-639-2 language names
	for the main benefit of Matroska (Closes: #301102)

2005-04-30  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_realize),
	(totem_playlist_map), (totem_playlist_unmap), (totem_playlist_new),
	(totem_playlist_class_init): add an map method and move the dialog
	where it was when we closed it (Closes: #300464)

2005-04-30  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (init_columns), (init_treeview):
	Remove the treeview header as it's not useful (Closes: #300463)

2005-04-28  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_string):
	  s/CDDB discid/Musicbrainz discid/.

2005-04-28  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-message-connection.c: (server_cb),
	(bacon_message_connection_send):
	* src/totem-options.c: (totem_print_playing_cb),
	(totem_options_process_for_server):
	* src/totem-remote.h:
	* src/totem.c: (totem_action_remote): Send back the title of the
	currently playing track with "--print-playing"

2005-04-27  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_mrls),
	(bacon_video_widget_get_current_frame): use g_malloc when g_free is
	used, fix compilation after API changed below

2005-04-27  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_mrls):
	  Implement per-track CDDA playback (#171600).
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_mrls):
	* src/backend/bacon-video-widget.h:
	* src/totem.c: (totem_action_load_media):
	  Change API slightly for above;

2005-04-27  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (totem_remove_deleted_recent),
	(totem_setup_recent): remove unexisting local files from the recent
	files list (Closes: #173125)

2005-04-25  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (main): let's avoid CPU burn
	on stop()

2005-04-25  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am: avoid includes problems when we're not
	compiling the Mozilla plugin (Closes: #301372)

2005-04-25  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: add video/x-ms-wmv as a supported
	mime-type (Closes: #301837)

2004-04-21  Abduxukur Abdurixit <abduxukur.abdurixit@t-systems.ch>

	* configure.in: added ug.po 

2005-04-19  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_subtitles): don't hardcode the maximum
	number of subtitle tracks (Closes: #172520)
	* src/totem-video-thumbnailer.c: we don't actually need GNOME for the
	thumbnailer

2005-04-18  Christian Persch  <chpe@cvs.gnome.org>

	* configure.in:
	* src/Makefile.am: Fix plugin installation directory and IDL
	include	directory detection. Fixes bug #300879.

2005-04-18  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.cpp: change the project URL
	(Closes: #301042)

2005-04-18  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* configure.in:
	* src/Makefile.am:
	  Install mozilla-plugin in mozilla prefix, and in the correct
	  mozilla or firefox subdirectory (#300879).

2005-04-17  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c: (parse_stream_info),
	(get_list_of_type), (bacon_video_widget_set_show_visuals):
	* README:
	  Add language labels for subtitles and language labels or
	  codecs for audio streams.

2005-04-17  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* README:
	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_size_allocate), (got_video_size), (cb_iterate),
	(caps_set), (bacon_video_widget_set_aspect_ratio),
	(bacon_video_widget_get_aspect_ratio), (bacon_video_widget_new):
	  Implement manually setting display aspect ratio.

2005-04-17  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: added video/mp4 as a supported mime-type

2005-04-15  Christian Persch  <chpe@cvs.gnome.org>

	* configure.in:
	* src/Makefile.am: Fix compilation with stock mozilla 1.7
	where idldir isn't in the .pc file, and CFLAGS doesn't include
	the root include directory.

2005-04-15  Kjartan Maraas  <kmaraas@gnome.org>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_int):
	* src/bacon-message-connection.c: (server_cb):
	* src/plparse/totem-pl-parser.c: (parse_asx_entry),
	(parse_asx_entries), (parse_smil_entry), (parse_smil_entries),
	(totem_pl_parser_add_smil):
	* src/totem-playlist.c: (drop_cb):
	* src/totem-screenshot.c: (drag_data_get): Fix gcc4 warnings.

2005-04-14  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am:
	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-viewer.c:
	Require Mozilla >= 1.7, build with Firefox, resolve relative
	URIs against the document's URI, patch by Christian Persch
	<chpe@gnome.org> (Closes: #300510)

2005-04-14  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-properties-view.c: (on_got_metadata_event),
	(on_timeout_event), (totem_properties_view_finalize),
	(totem_properties_view_set_location):
	  Hack to improve metadata loading (#170355).

2005-04-13  Bastien Nocera  <hadess@hadess.net>

	* src/metadata-test.c:
	* src/totem-session.c: (totem_session_restore):
	* src/totem-video-thumbnailer.c:
	* src/totem.c: (on_open_location1_activate):
	Fix GTK+-only build (Closes: #300488), some warning fixes

2005-04-13  Sebastien Bacher  <seb128@debian.org>

	* data/Makefile.am: don't distclean totem.schemas.in.

============ Version 1.1.1

2005-04-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS:
	* configure.in: update for 1.1.1 release

2005-04-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key): add F11 as a shortcut
	to fullscreen (Closes: #173154)

2005-04-08  Dennis Cranston <dennis_cranston@yahoo.com>
 
 	* data/uri.glade: Use header capitalization for window titles.
 	* data/totem.glade: Add a missing mnemonic to label. 
 	* src/totem-interface.c:  (totem_interface_error_dialog) Alerts 
 	should not have titles per HIG.
 	* src/totem.c: (update_mrl_label):  Use header capitalization.
 	* src/totem.c: (on_open1_activate): Use header capitalization. 
 	* src/totem-preferences.c: (totem_setup_preferences): Use header
 	capitalization. (Closes: #173129)

2005-04-10  Bastien Nocera  <hadess@hadess.net>

	* src/plparse/totem-pl-parser.c: (totem_pl_parser_add_directory),
	(totem_pl_parser_parse):
	* src/totem-uri.c: (totem_uri_escape_for_display):
	* src/totem-uri.h:
	* src/totem.c: (totem_action_play), (totem_action_seek),
	(totem_action_set_mrl_with_warning), (totem_action_seek_relative),
	(commit_hide_skip_to):
	Add a totem_uri_escape_for_display function that tries harder
	than gnome-vfs's unescape for display to create valid UTF-8,
	don't use g_build_filename to construct a URI,
	always escape the info->name of a file (Closes: #172838)

2005-04-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_set_previous):
	Fix crasher bug when reaching the first element in a shuffled/repeat
	playlist (Closes: #172943)

2005-04-07  Bastien Nocera  <hadess@hadess.net>

	* data/uri.glade: don't mention URI in the interface, close when
	'Esc' is pressed (Closes: #172811)

2005-04-07  Bastien Nocera  <hadess@hadess.net>

	* src/totem-statusbar.c: (totem_statusbar_init):
	Avoid the progress bar changing the height of the status bar
	(Closes: #172812)

2005-04-05  Bastien Nocera  <hadess@hadess.net>

	* data/totem.1: update the man page

2005-04-05  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* data/totem.schemas.in:
	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_set_subtitle_font), (cb_gconf),
	(bacon_video_widget_new):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_set_subtitle_font):
	* src/backend/bacon-video-widget.h:
	* src/totem-preferences.c: (on_font_set), (font_changed_cb),
	(totem_setup_preferences):

	Add the ability to choose subtitle fonts (patch by Ronald S. Bultje
	<rbultje@ronald.bitfreak.net>) (Closes: #166993)

2005-04-04  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-message-connection.c: (setup_connection), (server_cb),
	(try_server), (bacon_message_connection_free):
	  Close left-over connections better.
	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.cpp:
	* src/totem-mozilla-scriptable.h:
	  Better shutdown handling. Makes it virtually possible to open
	  the plugin, go to another webpage with more media etc. without
	  murdering your children. Should fix (and does, for me) #172476,
	  and includes the fix in #172473 from Christian Persch
	  <chpe@gnome.org> for releasing references to scriptable
	  instances at the right time.
	* src/totem-mozilla-viewer.c: (on_got_redirect), (main):
	  Don't call gdk_threads_init() because for some reason it
	  hangs my mozilla at some point.

2005-04-03  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_current_frame):
	  Fix stride.

2005-04-02  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* README:
	  Remove some completed stuff.

2005-04-02  Jan Schmidt,,,  <thaytan@mad.scientist.com>

	* src/totem-menu.c: (totem_sublang_equal_lists),
	(totem_languages_update), (totem_subtitles_update),
	(totem_sublang_update):
	  Fix list equality checking and double-freeing

2005-04-01  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* data/totem.schemas.in:
	* src/backend/bacon-video-widget-gst.c: (cb_gconf),
	(bacon_video_widget_new):
	  Subtitle font selection GConf key (#166993).

2005-04-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): don't call g_set_application_name before
	gtk_init (spotted by Frederic Crozat)

2005-04-01  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem-preferences.c: (totem_setup_preferences):

	Remove the proprietary plugins button, nobody uses it, and GStreamer
	doesn't support it (Closes: #170892)

2005-04-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (totem_sublang_equal_lists),
	(totem_languages_update), (totem_subtitles_update),
	(totem_sublang_update), (totem_sublang_exit):
	* src/totem-menu.h:
	* src/totem-private.h:
	* src/totem.c: (totem_action_exit):

	Only add/remove the menu items when the languages or audio tracks
	change, should avoid GtkMenu crappiness when the menu is opened
	and we switch to a different DVD chapter

2005-04-01  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: fix linking for the video properties nautilus
	extension

2005-04-01  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* totem.spec.in:
	  Fix RPM build.

2005-04-01  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* Makefile.am:
	* data/Makefile.am:
	* help/C/Makefile.am:
	* help/omf.make:
	* omf.make:
	* src/Makefile.am:
	  Fix distcheck.

2005-04-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (totem_lang_table_init): and set the correct
	encoding to get the translations

2005-04-01  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_new): load the glade file using
	our convenience functions
	* src/totem-menu.c: (totem_lang_get_full): load the translations
	from the correct domain

2005-04-01  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* data/totem.schemas.in:
	* src/backend/bacon-video-widget-gst.c: (cb_gconf),
	(bacon_video_widget_new):
	  Add some GConf settings for network cache size.

2005-04-01  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_languages),
	(bacon_video_widget_get_subtitles): and remove the spaces properly,
	duh!

2005-04-01  Bastien Nocera  <hadess@hadess.net>

	* configure.in: add dependency on iso-codes
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_languages),
	(bacon_video_widget_get_subtitles):
	* src/totem-menu.c: (totem_lang_table_free),
	(totem_lang_table_parse_start_tag), (totem_lang_table_init),
	(totem_lang_get_full), (add_item_to_menu):

	Add a dependency on iso-codes, to get the translation for DVD audio
	track and subtitle languages, iso-codes XML parsing code by Tim MÃ¼ller
	<t.i.m@zen.co.uk> (Closes: #172293)

2005-03-31  Steve Murphy  <murf@e-tools.com>

        * configure.in: Added "rw" to ALL_LINGUAS.

2005-03-31  Christian Persch  <chpe@cvs.gnome.org>

	* src/totem-mozilla-plugin.cpp: (totem_plugin_get_value):
	  Don't return early if the instance is NULL, since that prevents the
	  name and description from being displayed in about:plugins.
	  Since the check is only required in the NPPVpluginScriptableInstance
	  case, move it there (#172271).
	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.cpp:
	  Include mozilla-config.h.

2005-03-30  Adi Attar  <aattar@cvs.gnome.org>

	* configure.in: Added "xh" to ALL_LINGUAS.

2005-03-30  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_string):
	  Ehw, compile fix...
	* src/totem.c: (on_take_screenshot1_activate), (main):
	* src/vanity.c: (on_save1_activate), (main):
	  Grammar fixes (#172006).

2005-03-30  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_open_with_subtitle):
	  Re-allow relative URIs (#172030).

2005-03-30  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_motion_notify),
	(bacon_video_widget_button_press),
	(bacon_video_widget_button_release):
	  Always forward navigation events to parent (fixes #170695 where
	  the cursor isn't hidden correctly in fullscreen mode).

2005-03-30  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_string):
	  Use julian-date representation to fix year metadata (#170306).

2005-03-30  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/backend/bacon-video-widget-gst.c: (bacon_video_widget_init),
	(bacon_video_widget_signal_idler), (group_switch), (got_source),
	(state_change), (bacon_video_widget_finalize),
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata):
	  Don't duplicate title/artist tags for some files, and implement
	  video bitrate.

2005-03-28  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-message-connection.c: (server_cb): upd
	* src/totem-mozilla-plugin.cpp: add support for the
	video/x-ms-asf-plugin mime-type
	* src/totem-mozilla-scriptable.h: add some debug

2005-03-28  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-message-connection.c: (server_cb): update from libbacon
	to fix 2 crashers happening when opening the second stream
	* src/totem-mozilla-plugin.cpp:  only set non-blocking mode on
	an existing file descriptor
	* src/totem-mozilla-scriptable.cpp: use non-deprecated function
	(Closes: #171866)

2005-03-27  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-message-connection.c: (socket_filename), (try_server),
	(bacon_message_connection_new): update from libbacon to allow
	the directory in which the socket is created to be overridden

2005-03-27  Bastien Nocera  <hadess@hadess.net>

	* src/totem-options.c: (totem_options_process_for_server):
	* src/totem-remote.h:
	* src/totem.c: (totem_action_play), (totem_action_pause),
	(totem_action_remote):
	* src/totem.h: add --play and --pause command-line options
	(Closes: #165160)

2005-03-27  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (on_recent_file_activate):
	* src/totem-private.h:
	* src/totem-session.c: move the totem_signal_(un)block_by_data helpers
	to totem-private.h, prevent double-open when activating files from
	the recent-files menu

2005-03-27  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade:
	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata):
	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata):
	* src/backend/bacon-video-widget.h:
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_reset),
	(bacon_video_widget_properties_set_from_current):
	* src/metadata-test.c: (on_got_metadata_event), (main):

	Add the Video bitrate property (Closes: #166780)

2005-03-27  Pawan Chitrakar  <pawan@nplinux.org>

	* configure.in: Added ne in ALL_LINGUAS

2005-03-25  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-xine.c:
	(bacon_video_widget_finalize), (bacon_video_widget_get_property),
	(bacon_video_widget_set_media_device): don't read the media device
	configuration from the xine configuration file

2005-03-25  Bastien Nocera  <hadess@hadess.net>

	* src/backend/bacon-video-widget-gst.c:
	(bacon_video_widget_set_property),
	(bacon_video_widget_get_property): add get/set property implementation
	to allow eject to work with the GStreamer backend
	* src/backend/bacon-video-widget-xine.c: (xine_error),
	(bacon_video_widget_set_property),
	(bacon_video_widget_get_property): remove unneeded debug, and fix
	setting the mediadev property because of a missing break;

2005-03-24  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem-stock-icons.c: (totem_set_default_icons),
	(totem_named_icons_init): use the new "Leave fullscreen" stock icon
	and label
	* src/totem.c: (on_mouse_click_fullscreen),
	(on_video_motion_notify_event): make the popups disappear after
	5 seconds as per HIG (Closes: #171354)

2005-03-24  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/Makefile.am:
	  Fix more non-mozilla builds.

2005-03-24  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/Makefile.am:
	  Fix non-mozilla build.

2005-03-23  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (totem_embedded_pause),
	(on_play_pause), (cb_data): set the states properly after having
	received a remote message

2005-03-23  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-mozilla-viewer.c: (cb_data):
	  Implement play, pause, stop.

2005-03-23  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/Makefile.am:
	  link totem-mozilla-* against baconconnection.
	* src/bacon-message-connection.c: (setup_connection), (server_cb),
	(try_server), (try_client), (bacon_message_connection_new),
	(bacon_message_connection_free),
	(bacon_message_connection_set_callback),
	(bacon_message_connection_send),
	(bacon_message_connection_get_is_server):
	  Update for two-way communication.
	* src/bacon-message-connection.h:
	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.cpp:
	* src/totem-mozilla-scriptable.h:
	* src/totem-mozilla-viewer.c: (cb_data), (main):
	  Set up basic push-response model. Idea: plugin gets a function
	  call from mozilla, pushes as message to child, does action, waits,
	  responds, puts message back, mozilla-plugin reads and returns
	  error/ok to mozilla. Works nicely.

2005-03-23  Bastien Nocera  <hadess@hadess.net>

	* src/backend/.cvsignore:
	* src/plparse/.cvsignore: added

2005-03-23  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* configure.in:
	* src/Makefile.am:
	* src/backend/Makefile.am:
	* src/plparse/Makefile.am:
	  Move baconvideowidget and plparser to their own subdirectory.
	* src/bacon-resize.c:
	* src/bacon-resize.h:
	* src/bacon-video-widget-gst.c:
	* src/bacon-video-widget-xine.c:
	* src/bacon-video-widget.h:
	* src/bvw-test.c:
	* src/debug.h:
	* src/gstscreenshot.c:
	* src/gstscreenshot.h:
	* src/test-parser.c:
	* src/totem-disc.c:
	* src/totem-disc.h:
	* src/totem-pl-parser.c:
	* src/totem-pl-parser.h:
	* src/totemplparser-marshal.list:
	* src/video-utils.c:
	* src/video-utils.h:
	  Remove old files.

2005-03-23  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (on_movie_menu_select): use the program-wide
	monitor, instead of a local one
	* src/totem.c: (main): simple style change

2005-03-22  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init):
	make the property read-write, just need to implement the get/setter
	for the props now

2005-03-22  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_media_device): add the helper
	bacon_video_widget_get_media_device
	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(bacon_video_widget_get_property),
	(bacon_video_widget_get_show_cursor),
	(bacon_video_widget_get_media_device): make the mediadev property
	read-write, and handle it in the ->get_property calls
	* src/totem.c: (totem_action_eject): use the device name from
	the backend instead of the one from GConf (Helps: #167742)

2005-03-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem-menu.c: (on_movie_menu_select),
	(on_gnome_vfs_monitor_event), (totem_setup_play_disc):
	* src/totem-private.h:
	* src/totem.c: (main): Only update the Play Disc menu items if required
	which should speed up the menu appearing for trigger-happy users

2005-03-22  Bastien Nocera  <hadess@hadess.net>

	* src/.cvsignore:
	* src/Makefile.am: upd

2005-03-22  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: remove unneeded totem-mozilla-protocol.h

2005-03-21  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: put 1.1.0, so people know they're using the unstable
	version

2005-03-21  Bastien Nocera  <hadess@hadess.net>

	Fixes from the stable branch
	* configure.in: actually require glib 2.6.3
	* data/Makefile.am: fix distcheck

2005-03-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_set_show_visuals),
	(bacon_video_widget_set_visuals),
	(bacon_video_widget_set_visuals_quality), (bacon_video_widget_new):
	Make the GStreamer backend use the same GConf entry names as the
	xine-lib backend (Closes: #171141)

2005-03-21  Bastien Nocera  <hadess@hadess.net>

	* configure.in: remove need for libnautilus-burn
	* data/totem.glade: removed the CD selection widget
	* data/totem.schemas.in: remove the mediadev key
	* src/Makefile.am:
	* src/totem-menu.c: (totem_g_list_deep_free), (on_sub_activate),
	(on_lang_activate), (add_item_to_menu), (create_submenu),
	(totem_sublang_update), (on_recent_file_activate),
	(totem_setup_recent), (totem_action_add_recent),
	(on_play_disc_activate), (fake_gnome_vfs_device_get_something),
	(add_device_to_menu), (on_movie_menu_select),
	(totem_setup_play_disc):
	* src/totem-menu.h:
	* src/totem-preferences.c: (totem_setup_preferences):
	* src/totem-sublang.c:
	* src/totem-sublang.h:
	* src/totem.c: (totem_action_set_mrl_and_play),
	(totem_callback_connect), (main):
	* src/totem.h: 

	Rename totem-sublang.[ch] to totem-menu.[ch] and move the recent
	files setup there
	Adapted patch from Sam Morris <sam@robots.org.uk> to have a list
	of CD drives in the main movie menu, rather than a "Play Disc..."
	item (Helps: #167742)

2005-03-21  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* configure.in:
	* src/Makefile.am:
	* src/test.html:
	* src/totem-mozilla-plugin.c:
	* src/totem-mozilla-plugin.cpp:
	* src/totem-mozilla-scriptable.cpp:
	* src/totem-mozilla-scriptable.h:
	* src/totem_mozilla_scripting.idl:
	  Implement basic javascriptability support through XPCOM. The
	  sample .html file has some images which, when clicked, will
	  cause the plugin to printf() something to stdout.

2005-03-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-message-connection.c: (server_cb): fix memset arguments
	being the wrong way around

2005-03-21  Bastien Nocera  <hadess@hadess.net>

	* data/mime-type-list.txt: add application/x-extension-m4a as a
	supported mime-type, for older shared-mime-info versions

2005-03-20  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-mozilla-plugin.c: (totem_plugin_get_value):
	  Cosmetic fix (missing break).

2005-03-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.c: (totem_plugin_destroy_instance),
	(totem_plugin_get_value): don't crash when we haven't forked the
	viewer, tell the browser we don't have a scriptable interface yet,
	starts of RealAudio support

2005-03-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (on_video_button_press_event): Haha!
	QuickTime actually shows the controls after the initial no controls

2005-03-20  Bastien Nocera  <hadess@hadess.net>

	* .cvsignore: upd
	* data/mozilla-viewer.glade: set the proper defaults on the
	seekbar
	* src/bacon-video-widget-xine.c: (xine_event),
	(bacon_video_widget_open_with_subtitle): don't push the EOS event
	when we get a redirect
	* src/totem-mozilla-viewer.c: (totem_embedded_set_pp_state),
	(totem_embedded_open), (totem_embedded_play), (on_play_pause),
	(on_got_redirect), (on_video_button_press_event), (on_eos_event),
	(on_tick), (totem_embedded_add_children), (main):
	more work on getting the proper states, make the play button stop
	working when we reach the end of a stream that Mozilla is feeding us,
	make the seekbar show the current progress

2005-03-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-viewer.c: (totem_embedded_set_state),
	(totem_embedded_open), (on_got_redirect),
	(on_video_button_press_event), (on_eos_event),
	(totem_embedded_create_cursor), (embedded), (main): on EOS, we're
	not paused, but stopped. When we have an HREF attribute, set the
	cursor to be a play icon, so people know they need to click to play

2005-03-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-interface.c: (totem_interface_error_blocking):
	* src/totem-mozilla-viewer.c: (totem_embedded_open):
	Fix weird behaviour when a file can't be played (Mala Educacion trailer
	on apple.com)

2005-03-20  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: upd
	* src/totem-mozilla-options.h: added
	* src/totem-mozilla-plugin.c: (totem_plugin_fork),
	(totem_plugin_new_instance):
	* src/totem-mozilla-viewer.c: (on_video_button_press_event),
	(totem_embedded_add_children), (main):
	add support for the href attribute, allows to play the Hotel Rwanda
	trailer on apple.com

2005-03-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_add_directory):
	* src/totem-playlist.c: (drop_cb): Fix drag'n'dropping of filenames
	and directories with broken UTF-8

2005-03-18  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (got_eos):
	  Don't forward EOS on redirects...
	* src/totem-mozilla-viewer.c: (on_eos_event),
	(totem_embedded_add_children):
	  Implement EOS handler so we can re-view trailers.

2005-03-18  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/video-dev.c: (linux_add_video_dev), (linux_scan):
	  Fix for devices that don't export a 'model' file in /sys/. Base
	  devices only export a 'name' file.

2005-03-17  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated

2005-03-17  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.c: (totem_plugin_new_instance),
	(totem_plugin_write): added the autoplay attribute

2005-03-17  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am: only build the mozilla plugin if mozilla was enabled
	and the necessary bits were detected
	* src/totem-mozilla-plugin.c: (totem_plugin_new_instance),
	(totem_plugin_set_window), (NP_GetMIMEDescription):
	remove some unused code, add TODO items for the attributes, implement
	NP_GetMIMEDescription properly
	* src/totem-mozilla-viewer.c: (on_got_redirect): don't try our
	crappy redirect if we get another mrl

2005-03-17  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.c: (totem_plugin_fork),
	(totem_plugin_new_instance):
	* src/totem-mozilla-viewer.c: (totem_embedded_add_children),
	(main): Add support for the "controller" embed property

2005-03-17  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* data/mozilla-viewer.glade:
	* src/totem-mozilla-viewer.c: (totem_embedded_set_state),
	(totem_embedded_open), (on_play_pause),
	(totem_embedded_add_children), (main):
	  Make the play/pause button do something. Not yet javascript-
	  controlleable, but it's a start...

2005-03-22  Bastien Nocera  <hadess@hadess.net>

	* configure.in: the glib warning also applies to xine-lib, when using
	gnome-vfs backends that fork (sftp: for example)

2005-03-15  Bastien Nocera  <hadess@hadess.net>

	* data/mozilla-viewer.glade: make the buttons smaller, more room
	for the video itself
	* src/Makefile.am:
	* src/totem-mozilla-plugin.c: (totem_plugin_fork):
	Make sure that the viewer is called from where it's actually installed

2005-03-15  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_add_ram),
	(totem_pl_parser_add_m3u), (totem_pl_parser_add_asf_parser),
	(totem_pl_parser_add_pls), (totem_pl_parser_add_asx),
	(totem_pl_parser_add_smil), (totem_pl_parser_add_desktop):
	Remove our home-made read-entire file function, and use
	gnome_vfs_read_entire_file instead

2005-03-15  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_signal_idler),
	(got_redirect), (bacon_video_widget_open_with_subtitle),
	(bacon_video_widget_new):
	  Implement redirect signal.

2005-03-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_add_asf): fix parsing of
	ASX files when the root wasn't at the start of the file
	(Closes: #170342)

2005-03-14  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-mozilla-viewer.c: (main):
	  Init backend.

2005-03-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (button_release_cb), (drag_end_cb),
	(init_treeview):
	* src/totem.c: (totem_callback_connect), (video_widget_create):
	also handle MOVE actions on a drop, as Konqueror doesn't handle
	COPIES (Closes: #170109)

2005-03-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_add_one_mrl): use
	gtk_list_store_insert_with_values instead of separate
	gtk_list_store_insert() and gtk_list_store_set

2005-03-14  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init):
	  Fix compile.

2005-03-14  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/totem-video-thumbnailer.1:
	* data/totem-video-thumbnailer.pod: add a man page for
	totem-video-thumbnailer, from Zack Cerza <zcerza@coe.neu.edu>
	The man page is generated off-line, and the copy stored in CVS, to
	avoid needing pod2man at compile-time

2005-03-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.c: (totem_plugin_write_ready): we don't
	need any more data when we've closed the stdin

2005-03-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.c: (totem_plugin_new_instance),
	(totem_plugin_destroy_instance), (totem_plugin_destroy_stream),
	(totem_plugin_write), (NP_GetMIMEDescription):
	Add support for MPEG, close the file descriptor when we're asked to
	* src/totem-mozilla-viewer.c: (main): wait until we're fully shown
	before we start consuming the data off the standard input

2005-03-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.c: (totem_plugin_fork),
	(totem_plugin_new_instance): pass the src as the url to the
	viewer, data still doesn't seem to get through when embedded into
	Mozilla

2005-03-13  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init):
	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(bacon_video_widget_idle_signal), (xine_event), (xine_error):
	* src/bacon-video-widget.h:
	Add a redirect signal, for MRL references, rather than handling it
	inside the backend
	* src/totem-interface.c: (totem_interface_load_with_root),
	(totem_interface_load):
	* src/totem-interface.h: add a totem_interface_load_with_root for the
	benefit of the Mozilla plugin
	* src/totem-mozilla-plugin.c: (totem_plugin_destroy_instance):
	* src/totem-mozilla-viewer.c: (totem_embedded_exit),
	(totem_embedded_error_and_exit), (totem_embedded_open),
	(on_got_redirect), (totem_embedded_add_children), (main):
	* src/totem.c: (on_got_redirect), (video_widget_create):
	Handle the newly added redirect signal, so that we can handle
	redirection to relative paths (although we haven't done it yet)

2005-03-13  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* src/totem-mozilla-plugin.c: (totem_plugin_fork),
	(totem_plugin_destroy_instance), (totem_plugin_set_window):
	* src/totem-mozilla-viewer.c: (totem_embedded_open), (main):
	some updates for the Mozilla plugin, it kinda works...

2005-03-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem-disc.c: Allow compilation with glibc 2.2, patch
	from Jens Granseuer <jensgr@gmx.net> (Closes: #170165)

2005-03-11  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* configure.in:
	* src/totem-preferences.c: (on_combo_entry1_changed),
	(mediadev_changed_cb), (bacon_cd_selection_create),
	(totem_setup_preferences):
	  Allow compilation without libnautilus-burn 2.9 (for those of
	  us on a less top-notch distro).

2005-03-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (parse_asx_entries): fix parsing of ASX
	entries where there's no <ENTRY> tag at the top-level
	(Closes: #169839)

2005-03-10  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/bacon-video-widget-gst.c:
	* src/bacon-video-widget-xine.c:
	* src/totem-private.h:
	* src/totem-scrsaver.c: renamed scrsaver.[ch] to totem-scrsaver.[ch]

2005-03-09  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/totem-preferences.c: (visual_menu_changed): simple warning fix

2005-03-08  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_check_utf8): g_utf8_validate
	can't take a NULL string... (Closes: #169558)

2005-03-08  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_check_utf8): remove useless
	debug

2005-03-07  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_check_utf8),
	(totem_pl_parser_add_one_url), (totem_pl_parser_add_one_url_ext):
	Don't pass on the titles if they're not in UTF-8 (Closes: #168968)

2005-03-07  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (update_seekable): set the seekable member properly,
	makes the "Skip to..." dialog work again (Closes: #169255)

2005-03-07  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (mediadev_changed_cb),
	(visual_menu_changed), (totem_setup_preferences),
	(totem_preferences_visuals_setup): Fix memory leak, patch by Aivars
	Kalvans <aivars.kalvans@inbox.lv> (Closes: #169425)

2005-03-07  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_add_smil): Fix memory
	leak, patch by Aivars Kalvans <aivars.kalvans@inbox.lv>
	(Closes: #169431)

2005-03-07  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (setup_config),
	(bacon_video_widget_set_media_device),
	(bacon_video_widget_set_proprietary_plugins_path),
	(bacon_video_widget_set_tv_out),
	(bacon_video_widget_set_video_device): fix memory leaks,
	adapted from patch by Aivars Kalvans <aivars.kalvans@inbox.lv>
	(Closes: #169437)

2005-03-07  Bastien Nocera  <hadess@hadess.net>

	* src/totem-uri.c: (totem_uri_get_subtitle_uri): fix memory leak,
	patch by Aivars Kalvans <aivars.kalvans@inbox.lv> (Closes: #169440)

2005-03-07  Bastien Nocera  <hadess@hadess.net>

	* data/totem.desktop.in.in.in: allow multiple URIs to be passed
	by using %U instead of of %u

============ Version 1.0

2005-03-07  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* README: upd
	* configure.in: 1.0
	* help/C/Makefile.am:
	* help/de/Makefile.am:
	* help/es/Makefile.am:
	* help/ru/Makefile.am:
	* omf.make: some distchecking fixes

2005-03-03  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: add support for "audio/playlist" (they're
	on crack again) as an m3u playlist (Closes: #169075)

2005-03-02  Abel Cheung  <maddog@linuxhall.org>

	* configure.in: Added "pa" to ALL_LINGUAS.

2005-03-01  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-video-thumbnailer.c: (main):
	  Allow some time before knowing the length of a file. Also,
	  allow a short time to resync after the seek. Fixes #167879.

2005-03-01  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_new):
	  Don't set multichannel for fakesrc (leads to warnings).

2005-03-01  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (got_source):
	  Workaround race in metadata display (#168540).

2005-02-28  Bastien Nocera  <hadess@hadess.net>

	* configure.in: require glib 2.6.3 to fix the GStreamer thumbnailer
	quitting too early

2005-02-23  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_int):
	  Just read bitrate, not different kinds (leads to conflicts
	  with several elements).

2005-02-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_remove_files):
	Fix leak when removing files (Closes: #168190)

2005-02-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_get_subtitles),
	(bacon_video_widget_get_languages):
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_languages),
	(bacon_video_widget_get_subtitles),
	(bacon_video_widget_get_subtitle),
	(bacon_video_widget_set_subtitle):
	* src/totem.c: (on_title_change_event): more type-checking when
	entering public functions

2005-02-20  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/totem.c: (totem_action_set_mrl_with_warning):
	enable the volume items in the popup menu properly (Closes: #167915)

2005-02-19  Bastien Nocera  <hadess@hadess.net>

	* src/scrsaver.c: (totem_scrsaver_disable),
	(totem_scrsaver_enable):
	* src/totem.c: (totem_action_play), (totem_action_stop),
	(totem_action_play_pause), (totem_action_fullscreen_toggle):
	Only disable the screensaver in fullscreen, and when something
	is playing (Closes: #152814)

2005-02-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (init_config):
	* src/totem-preferences.c: (totem_setup_preferences): fix
	warning from gconf_client_add_dir caused by the lockdown work
	below

2005-02-19  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am: make sure that GLIB_MKENUMS gets defined

2005-02-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (update_lockdown), (init_config):
	* src/totem-preferences.c: (disable_save_to_disk_changed_cb),
	(totem_setup_preferences): disable "Take Screenshot" and the Save
	playlist button when in disable_save_to_disk lockdown mode
	(Closes: #165611)

2005-02-19  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (shrink_toplevel): don't try to
	shrink the toplevel window if there's not one

2005-02-19  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (get_list_of_type): fix crash when
	asking for subtitles or audio languages and no media is loaded

2005-02-17  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* data/Makefile.am:
	* data/popup.glade: 
	* data/totem.glade:
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_languages),
	(bacon_video_widget_get_subtitles):
	* src/totem-playlist.c: (totem_playlist_new):
	* src/totem-private.h:
	* src/totem.c: (totem_action_menu_popup),
	(totem_action_set_mrl_with_warning), (update_seekable),
	(on_open_location1_activate), (show_controls), (update_buttons),
	(totem_callback_connect), (main):
	Split off popup menu into its own glade file to work around the
	accelerators not appearing in it (based on patch from William
	Jon McCann <mccann@jhu.edu>) (Closes: #153594), mark the strings
	used for the interface loading for translation, don't call
	xine_get_spu_lang() when there's no file loaded to avoid a crash,
	use the right stock icons in the popup menu, have the default
	sensitivity in some popup menu items

2005-02-17  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): remove gdk_threads_init() as we don't have
	any gdk_threads_enter anywhere anyway, fixes hangs when file selector
	bookmarks require authentication (Closes: #154796)

2005-02-17  Bastien Nocera  <hadess@hadess.net>

	* autogen.sh: require something somewhat newer than automake 1.4
	* src/totem-disc.c: (totem_disc_resolve_link): canonicalise
	the path names when resolving links (Adapted from a patch from
	Sam Morris <sam@robots.org.uk>)

2005-02-16  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_set_volume):
	You can't set a volume below 0 or above 100 (Closes: #165426)

2005-02-15  William Jon McCann  <mccann@jhu.edu>

	* src/totem.c (move_popups): Position exit fullscreen button
	on right side per HIG.  (Closes #149135)

	* data/totem.glade: Use gtk-quit icon for exit fullscreen button.

2005-02-15  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (cb_iterate),
	(bacon_video_widget_set_audio_out_type):
	  Fix wrong return value types, fix missing ampersand.

2005-02-11  William Jon McCann  <mccann@jhu.edu>

	* src/totem.c (popup_timeout_remove) 
	(on_video_motion_notify_event, on_mouse_click_fullscreen) 
	(totem_callback_connect): Use glib timeout funcs.

	* data/totem.glade: Remove unneeded frame around Exit Fullscreen
	button.  Make fullscreen control buttons go to the edge of the
	screen. (Closes #166509)

2005-02-08  Christian Fredrik Kalager Schaller  <uraeus@gnome.org>

	* COPYING: adding with clause
	* COPYING.LIB: update with some comments about playlist-lib
	* license_change: add document outlining the license change
	* src/bacon-message-connection.c: adding clause to all files
	* src/bacon-message-connection.h:
	* src/bacon-v4l-selection.c:
	* src/bacon-v4l-selection.h:
	* src/bacon-video-widget-gst.c:
	* src/bacon-video-widget.h: fix copyright header
	* src/egg-recent-item.c:
	* src/egg-recent-model.c:
	* src/egg-recent-view-gtk.c:
	* src/egg-recent-view.c:
	* src/scrsaver.c: fix copyright header as original code is gone
	* src/totem-disc.c:
	* src/totem-gromit.c:
	* src/totem-interface.c:
	* src/totem-preferences.c:
	* src/totem-preferences.h:
	* src/totem-private.h:
	* src/totem-properties-main.c:
	* src/totem-properties-view.c:
	* src/totem-properties-view.h:
	* src/totem-remote.c:
	* src/totem-remote.h:
	* src/totem-stock-icons.c:
	* src/totem-stock-icons.h:
	* src/totem-video-thumbnailer.c:
	* src/totem.c:
	* src/totem.h:
	* src/vanity.c:
	* src/video-dev.c:
	* src/video-dev.h:

2005-02-08  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (main): use g_type_init so that
	the thumbnailer can work without a DISPLAY

2005-02-07  Bastien Nocera  <hadess@hadess.net>

	* src/disc-test.c: (main): print out the list of connected drives
	if we get an error trying to figure out the type of a disc

2005-02-07  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_media_device):
	* src/totem-preferences.c: (on_combo_entry1_changed):
	Guard against NULL being passed to the xine-lib backend for
	the media device (Closes: #166536)

2005-02-04  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_video_property),
	(bacon_video_widget_set_video_property):
	  Fix colorbalance getting/setting between runs (#163490).

2005-02-03  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: fix regenerate-built-sources
	* src/egg-*: update from libegg CVS

2005-01-30  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_set_audio_out_type):
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_can_set_volume),
	(bacon_video_widget_set_audio_out_type):
	* src/bacon-video-widget.h:
	* src/totem-preferences.c: (totem_prefs_set_show_visuals),
	(audio_out_menu_changed):

	Make bacon_video_widget_set_audio_out_type return whether the
	application needs to restart for this to take effect, the xine-lib
	backend also now knows that the AC3 passthrough output can't set
	the volume (Closes: #122580)

2005-01-30  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: fix typo that made the nautilus-extension test
	useless (Closes: #165630)

2005-01-30  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_languages): Patch from Nickolay V. Shmyrev
	<nshmyrev@yandex.ru> to handle unnamed sound channels, for multi-audio
	AVI files (Closes: #164741)

2005-01-30  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* data/uri.glade: change the name of the history ID to totem
	* src/totem.c: (on_open_location1_activate): save the used URI in
	the entry's history, prompting a save to GConf. Fixes the
	"Open Location..." being always empty (Closes: #153675)

2005-01-29  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: fix the maximum value of the GtkAdjustments not
	being respected after reading the note in the docs for
	gtk_adjustment_set_value()

2005-01-29  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (load_video_out_driver),
	(load_audio_out_driver), (bacon_video_widget_realize),
	(bacon_video_widget_new), (bacon_video_widget_can_set_volume):
	use the none audio and video drivers so that the decoders are used
	and can set metadata (Closes: #165483)

2005-01-28  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (caps_set), (parse_stream_info),
	(get_list_of_type), (bacon_video_widget_get_current_frame):
	  Fix some logic errors.

2005-01-28  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (parse_stream_info),
	(fixate_visualization):
	  Refix visualization...

2005-01-28  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (parse_stream_info),
	(get_list_of_type), (bacon_video_widget_get_current_frame):
	  Add some more safety guards.

2005-01-27  Theppitak Karoonboonyanan  <thep@linux.thai.net>

	* configure.in: Added "th" (Thai) to ALL_LINGUAS.

2005-01-25  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_set_tv_out):
	set the right TV system (PAL/SECAM) (patch from Mattias Eriksson
	<snaggen@acc.umu.se>)

2005-01-25  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (parse_stream_info),
	(get_list_of_type), (bacon_video_widget_get_current_frame):
	  Copy lists to decreases the theoretical change on crashing while
	  we're switching groups.

2005-01-25  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_signal_idler),
	(group_switch), (parse_stream_info), (stream_info_set),
	(state_change), (bacon_video_widget_new):
	  Notify delayed stream-information availability.

2005-01-25  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_set_tv_out):
	For all the supported TV-Out types, we don't need a restart
	* src/totem-preferences.c: (on_tvout_toggled): don't hard-code
	dxr3 needing a restart

2005-01-25  Mattias Eriksson <snaggen@acc.umu.se>

	Reviewed by:  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-preferences.c: (on_tvout_toggled):
	  Only show warning if switching to DXR3, since it's not true for
	  NVTV.

2005-01-25  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_signal_idler),
	(bacon_video_widget_set_fullscreen):
	  Small fullscreen fix.

2005-01-25  Mattias Eriksson <snaggen@acc.umu.se>

	Reviewed by:  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_realize),
	(bacon_video_widget_unrealize), (bacon_video_widget_class_init),
	(bacon_video_widget_fullscreen_mode_available),
	(bacon_video_widget_set_fullscreen):
	  Add NVTV support.
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_fullscreen):
	  Add a g_return_if_fail().

============ Version 0.101

2005-01-24  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 0.101
	* src/Makefile.am: fix compilation with out-of-tree build dir

2005-01-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_clear_with_compare): Don't
	generate a current-removed event if we didn't remove any items
	(Closes: #153209)

2005-01-24  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* data/.cvsignore: upd
	* src/metadata-test.c: (main): set the right program name

2005-01-24  Shaun McCance  <shaunm@gnome.org>

	* src/totem-pl-parser.c: (totem_pl_parser_add_directory):
	  escape filenames when constucting URIs (#165049)

2005-01-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem-interface.c: (totem_interface_error_dialog):
	try to avoid problems with unescaped error messages passed to the
	error dialog (Closes: #164627)

2005-01-18  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (setup_vis),
	(bacon_video_widget_get_popt_table),
	(bacon_video_widget_init_backend):
	* src/bacon-video-widget-xine.c: (bacon_video_widget_init_backend):
	* src/bacon-video-widget.h:
	* src/totem-properties-main.c: (nautilus_module_initialize):
	  Add bacon_video_widget_init_backend() for popt-less apps,
	  plus a cast fix.

2005-01-17  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (setup_vis):
	  Refcounting fixes for visualization element since we keep our
	  own pointer as well.

2005-01-16  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* COPYING.LIB: Add LGPL license file, to indicate that
	libtotem-plparser is now LGPL.  Fixes #164193.

	* Makefile.am (EXTRA_DIST): Add COPYING.LIB.

2005-01-15  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_audio_out_type): update the audio output
	strings with xine-lib, should fix AC3 Passthrough playback

2005-01-13  Bastien Nocera  <hadess@hadess.net>

	* src/metadata-test.c: (totem_create_full_path), (main):
	transform the path into a URI if necessary to make the GStreamer
	backend happy

2005-01-13  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_signal_idler):
	  Hack to fix some problems with nvidia graphics cards.

2005-01-13  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-properties-main.c: (nautilus_module_initialize):
	  Try to make popt parsing work so that this works with GStreamer
	  backend as well.

2005-01-13  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (setup_config),
	(dvd_skip_behaviour), (bacon_video_widget_new),
	(bacon_video_widget_set_media_device),
	(bacon_video_widget_set_proprietary_plugins_path),
	(bacon_video_widget_set_connection_speed),
	(bacon_video_widget_get_connection_speed),
	(bacon_video_widget_set_visuals_quality),
	(bacon_video_widget_set_video_device),
	(bacon_video_widget_set_audio_out_type):
	modify the config entries to follow the xine-lib 1.0 rename

2005-01-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem-session.c: (totem_session_restore):
	* src/totem.c: (on_eos_event): when restoring a playlist, or
	when rewinding to the start of a playlist (without repeat), set the
	video widget to pause to release the sound device (Closes: #163875)

2005-01-12  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/bacon-video-widget-gst.c:
	* src/totem-interface.c: (totem_interface_error_dialog),
	(totem_interface_error), (totem_interface_error_blocking),
	(totem_interface_load), (totem_interface_load_pixbuf),
	(totem_interface_get_full_path):
	* src/totem-interface.h:
	* src/totem-playlist.c: (totem_playlist_new):
	* src/totem-playlist.h:
	* src/totem-uri.h:
	* src/totem.c: (totem_action_error), (totem_action_error_and_exit),
	(on_open_location1_activate), (main):
	* src/totem.h: add interface helpers for glade files, and images,
	Add vim bits to the gst widget

2005-01-12  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_open_with_subtitle):
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_subtitled),
	(bacon_video_widget_open_with_subtitle):
	* src/bacon-video-widget.h:
	* src/totem-uri.c: (totem_uri_get_subtitle_uri):
	* src/totem-uri.h:
	* src/totem.c: (totem_action_set_mrl_with_warning):
	do the automatic subtitle opening in the front-end, rather than
	in the backends

2005-01-11  Bastien Nocera  <hadess@hadess.net>

	* src/scrsaver.c: (fake_event), (totem_scrsaver_init):
	use alternatively the left control and the left shift fake keys
	to avoid the screensaver triggering, to avoid the accessibility
	features to be triggered in X

2005-01-11  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (setup_config_stream):
	don't setup the video bits if we don't have a video output
	* src/totem-properties-main.c:
	* src/totem-properties-view.c:
	(totem_properties_view_register_type),
	(totem_properties_view_class_init), (on_got_metadata_event),
	(totem_properties_view_init), (totem_properties_view_finalize),
	(totem_properties_view_set_location):
	Fix the properties page, this one will actually work (if you don't
	use GStreamer)

2005-01-11  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* Makefile.am:
	* data/Makefile.am:
	* src/Makefile.am:
	  Fix make distcheck.

2005-01-11  Bastien Nocera  <hadess@hadess.net>

	* src/metadata-test.c: (main): we don't use translations in there
	it's a test tool

2005-01-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* data/Makefile.am:
	* src/Makefile.am:
	* src/totem-properties-main.c:
	(totem_properties_plugin_register_type),
	(property_page_provider_iface_init), (totem_properties_get_pages),
	(nautilus_module_initialize), (nautilus_module_shutdown),
	(nautilus_module_list_types):
	* src/totem-properties-page.c:
	* src/totem-properties-view.c: (totem_properties_view_get_type),
	(totem_properties_view_register_type),
	(totem_properties_view_class_init), (on_got_metadata_event),
	(totem_properties_view_init), (totem_properties_view_destroy),
	(totem_properties_view_new), (totem_properties_view_set_location):
	* src/totem-properties-view.h:
	Port the properties page to the non-bonobo nautilus interface
	(Closes: #162850)

2005-01-11  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: remove unused keys_DATA

2005-01-11  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_signal_idler),
	(group_switch), (bacon_video_widget_open),
	(bacon_video_widget_new):
	  Use suburi property for subtitles. Use group-switch to clean
	  metadata cache.

2005-01-11  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/Totem_properties.server.in.in._1:
	* data/Totem_properties.server.in.in._3:
	* data/mime-type-include.sh:
	* data/servers.sh: remove the Bonobo server file, as we won't need it soon,
	generate totem-mime-types.h for use in the nautilus property tab

2005-01-11  Bastien Nocera  <hadess@hadess.net>

	* README:
	* data/Makefile.am:
	* data/desktop.sh:
	* data/mime-type-list.txt:
	* data/schemas.sh:
	* data/servers.sh:
	* data/totem.keys: remove totem.keys, as this is for old GNOME versions

2005-01-11  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/handlers.sh:
	* data/totem.applications: remove totem.applications, as it's not
	used anymore, and add some handled schemes

2005-01-10  William Jon McCann  <mccann@jhu.edu>

	* src/vanity.c (vanity_action_error): 
	* src/totem.c (totem_action_error, totem_action_error_and_exit): 
	* src/totem-screenshot.c (totem_screenshot_action_error): 
	* src/totem-preferences.c (ask_show_visuals): 
	* src/totem-playlist.c (totem_playlist_error) 
	(totem_playlist_save_files):
	Use GTK 2.5 HIG message dialog API.

2005-01-11  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/Makefile.am:
	  Fix build.
	* src/bacon-video-widget-gst.c: (bacon_video_widget_open),
	(bacon_video_widget_play):
	  Fix error displays if filenames contains % signs (#!63600).

2005-01-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_clear_with_compare),
	(totem_playlist_compare_with_prefix),
	(totem_playlist_clear_with_prefix),
	(totem_playlist_compare_with_volume),
	(totem_playlist_clear_with_gnome_vfs_volume):
	Create a generic playlist clearing function that takes a GCompareFunc
	to match playlist items
	* src/totem-playlist.h:
	* src/totem-private.h:
	* src/totem-uri.c: (totem_create_full_path),
	(totem_action_on_unmount), (totem_setup_file_monitoring):
	* src/totem-uri.h:
	* src/totem.c: (totem_action_exit), (main):
	Remove from the playlist all the items that are on a volume that's
	getting unmounted (Closes: #153209)

2005-01-10  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_get_metadata):
	  Don't crash on CDINDEX (was already added...).
	* src/metadata-test.c: (main):
	  Call _init.

2005-01-10  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_motion_notify),
	(bacon_video_widget_button_press),
	(bacon_video_widget_button_release):
	  Hm, this requires state checks, else you'll get warnings on
	  console...

2005-01-10  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_motion_notify),
	(bacon_video_widget_button_press),
	(bacon_video_widget_button_release):
	  Only if media has video, to prevent warnings.
	(cb_iterate), (state_change):
	  Change to use g_timeout instead of g_idle, don't sleep inside
	  handler. Seems to speed up playback good enough to feel good.

2005-01-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (video_widget_create): set the volume later so that
	we're sure it can be set (fixes volume not in sync with slider with
	the xine-lib backend)

2005-01-09  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (cb_iterate):
	  Support change in duration (CDs, VBR MP3, ...).

2005-01-09  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_can_get_frames):
	  Give good error messages if thumbnailing fails.

2005-01-09  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_motion_notify),
	(bacon_video_widget_button_press),
	(bacon_video_widget_button_release),
	(bacon_video_widget_class_init), (bacon_video_widget_new):
	  Re-add mouse event support through navigation interface.

2005-01-08  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-properties.h:
	* src/bacon-video-widget-xine.c:
	* src/totem.c: (main):
	* src/vanity.c: (on_about1_activate): update copyrights on some files,
	use translator-credits in vanity, instead of translator_credits
	(Closes: #163221)

2005-01-08  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_get_subtitle),
	(bacon_video_widget_set_subtitle), (get_list_of_type),
	(bacon_video_widget_get_subtitles),
	(bacon_video_widget_get_languages),
	(bacon_video_widget_get_language),
	(bacon_video_widget_set_language), (bacon_video_widget_open),
	(bacon_video_widget_close):
	  Add stream selection. The names need some more work, but hey,
	  it's a start.

2005-01-06  Dennis Cranston <dennis_cranston@yahoo.com>

	* data/totem.glade:  Use header capitalization for command button
	labels.
	
2005-01-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (totem_setup_preferences): remove
	hide_prefs, use gtk_widget_hide directly instead, replace hard-coded
	/apps/totem by GCONF_PREFIX, 
	* src/totem.c: (show_controls), (totem_setup_window):
	when setting up the window, take into account the vbox border for the
	width and height, replace hard-coded border width of 1 by a #define

2005-01-06  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/Makefile.am:
	  Autofoo fixes.

2005-01-06  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/totem.c: (update_seekable): only change the states of the
	"seekable" widgets if the previous state was different

2005-01-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem-statusbar.c: (totem_statusbar_set_time): only update
	the time label if the time actually changed

2005-01-06  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_connection_speed),
	(bacon_video_widget_set_connection_speed),
	(bacon_video_widget_set_tv_out), (bacon_video_widget_get_tv_out),
	(bacon_video_widget_set_audio_out_type),
	(bacon_video_widget_set_show_visuals),
	(bacon_video_widget_set_visuals),
	(bacon_video_widget_set_visuals_quality),
	(bacon_video_widget_set_video_property), (bacon_video_widget_new):
	  Save backend-responsible gconf properties.

2005-01-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem-time-label.c: (totem_time_label_init),
	(totem_time_label_set_time):
	* src/totem-time-label.h: only update the time label if the time has
	actually changed

2005-01-05  Dennis Cranston <dennis_cranston@yahoo.com>

	* data/totem.glade:
	Fix mnemonics for the Combo Boxes
	
2005-01-05  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem-preferences.c: (totem_prefs_set_show_visuals),
	(connection_combobox_changed), (visual_menu_changed),
	(visual_quality_menu_changed), (audio_out_menu_changed),
	(totem_setup_preferences): Migrate the Option Menus in the preferences
	dialog to Combo Boxes (Helps: #160807)

2005-01-05  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem-stock-icons.c: (totem_set_default_icons),
	(totem_named_icons_init):
	* src/totem-stock-icons.h:
	* src/totem-video-thumbnailer.c: (add_holes_to_pixbuf_small),
	(main):
	* src/totem.c: (play_pause_set_label):
	* src/video-utils.c:
	* src/video-utils.h:

	Use the media icons from GTK+, including the forward/rewind buttons,
	use gdk_pixbuf_flip instead of our home-grown, use the thread-safe
	g_usleep instead of usleep in the thumbnailer

2005-01-05  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: include totem-pl-parser-builtins.h from the .c
	to avoid compile-time warnings

2005-01-04  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: remove custom labels to use new GTK+ labels
	* src/totem.c: (update_mrl_label), (totem_setup_recent):
	* src/totem.h: remove unused totem_get_gconf_client() and custom
	label creation

2005-01-04  Bastien Nocera  <hadess@hadess.net>

	* configure.in: and remove floating point warnings, it seems only
	some versions of gcc handle it (bugger) (Closes: #162943)

2005-01-04  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_current_frame):
	  Fix in case of >1 video streams.

2005-01-04  Bastien Nocera  <hadess@hadess.net>

	* data/totem.desktop.in.in.in: add to the Player category
	(Closes: #162933)

2005-01-04  Bastien Nocera  <hadess@hadess.net>

	* configure.in: warn on floating point comparisons

2005-01-04  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* src/totem-pl-parser.h: include totem-pl-parser-builtins.h.
	
	* src/totem-pl-parser.h, src/totem-pl-parser.c: Add a gpointer
	user_data to TotemPlParserIterFunc and to totem_pl_parser_write.

	* src/totem-playlist.c (totem_playlist_save_get_iter_func)
	(totem_playlist_save_current_playlist): Update to new
	totem_pl_parser_write API.

	* totem-plparser.pc.in: Add .pc file for totem-plparser library.
	
	* Makefile.am: Install totem-plparser.pc.

	* configure.in: Define PLPARSER_LT_VERSION, to specify libtool
	version for libtotem-plparser.la.  Look for packages required for
	plparser, define TOTEM_PLPARSER_(CFLAGS|LIBS).  Write
	totem-plparser.pc.

	* src/Makefile.am: Generate totem-pl-parser-builtins.[ch], for
	registering enums.  Build and install a library,
	libtotem-plparser.la, which includes the totem playlist parser.
	Also install the corresponding header files to
	$(includedir)/totem/1/plparser.  Make the main binary, totem, link
	to this library and remove the duplicate sources.
	PS: Changes based on the work of Tiago Cogumbreiro.

	Fixes #162741.  Reviewed by Bastien Nocera.

2005-01-03  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/totem.c:
	* src/bacon-v4l-selection.h:
	* src/totem-preferences.c: (on_combo_entry1_changed),
	(mediadev_changed_cb), (bacon_cd_selection_create),
	(totem_setup_preferences): update to nautilus-cd-burner 2.9,
	partial patch by William Jon McCann <mccann@jhu.edu> (Closes: #161231)

2005-01-03  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am:
	* src/rb-ellipsizing-label.c:
	* src/rb-ellipsizing-label.h:
	* src/totem.c: (update_mrl_label), (on_about1_activate),
	(totem_callback_connect), (label_create):
	Require GTK+ 2.6, convert the about box, and the ellipsising labels
	(Helps: #160807)

2005-01-03  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_skip_to1_activate), (totem_action_remote):
	Rise the controls when in fullscreen and using LIRC, or the Totem
	remote commands (Closes: #162843)

2005-01-03  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: create the .desktop file properly for Totem
	and install the totem.desktop, not something else (Closes: #162838)

2005-01-03  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (cb_audio_fixate),
	(bacon_video_widget_get_audio_out_type),
	(bacon_video_widget_set_audio_out_type), (bacon_video_widget_open),
	(bacon_video_widget_set_visuals_quality), (bacon_video_widget_new):
	  Add fixation for multi-channel audio so that speaker setup is taken
	  into account. Also don't crash if the file failed to open.

============ Version 0.100

2005-01-03  Bastien Nocera  <hadess@hadess.net>

	* NEWS:
	* configure.in: 0.100
	* data/Makefile.am: fix build of the desktop file
	* src/totem-playlist.h:
	* src/totem.c: (totem_action_direction), (totem_action_previous),
	(totem_action_next): merge totem_action_previous and
	totem_action_next into totem_action_direction

2005-01-03  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (setup_config_stream):
	* src/totem.c: (totem_action_exit), (video_widget_create): save
	the volume from the front-end, not the backend

2005-01-02  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2005-01-01  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/Makefile.am:
	* src/bacon-video-widget-xine.c: (setup_config_stream),
	(bacon_video_widget_new), (bacon_video_widget_seek_time),
	(bacon_video_widget_get_volume),
	(bacon_video_widget_get_current_time):
	* src/totem-options.c: (totem_options_process_late):
	* src/totem-options.h:
	* src/totem-pl-parser.c: (totem_pl_parser_add_pls):
	* src/totem-playlist.c: (totem_playlist_key_press),
	(totem_playlist_set_at_end), (totem_playlist_get_current),
	(totem_playlist_get_last), (totem_playlist_set_current):
	* src/totem-playlist.h:
	* src/totem-private.h:
	* src/totem-session.c: (totem_session_create_key),
	(totem_save_yourself_cb), (totem_session_restore),
	(totem_session_setup), (totem_action_restore_pl):
	* src/totem-session.h:
	* src/totem.c: (totem_action_save_size), (totem_action_exit),
	(totem_action_menu_popup), (play_pause_set_label),
	(totem_action_play), (totem_action_seek),
	(totem_action_fullscreen_toggle), (totem_action_seek_relative),
	(on_recent_file_activate), (on_channels_change_event),
	(totem_action_open_files), (show_controls),
	(totem_action_toggle_controls), (on_about1_activate),
	(commit_hide_skip_to), (totem_action_remote),
	(popup_timeout_remove), (popup_hide), (on_mouse_click_fullscreen),
	(on_video_motion_notify_event), (on_video_button_press_event),
	(totem_action_handle_key), (totem_setup_window),
	(totem_callback_connect), (main):
	* src/totem.h:
	* src/totem-sublang.[ch]:

	Remove possible "burps" on startup when the sound is supposed to
	be mute (xine-lib)
	Fix parsing of .pls files with relative paths (they're relative to
	the .pls file, not to the working directory) (Closes: #162440)
	Fix problems with activating a multi-item playlist from the
	recent files, we should play the first item added, not the last one
	Move languages and subtitles menu code to totem-sublang.[ch]
	Add session saving support (Closes: #131811)
	Fix seeking into streams that haven't been played yet, only opened
	Some code cleanups

2004-12-30  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: upd
	* src/bacon-message-connection.h: update from libbacon
	* src/bacon-video-widget-xine.c:
	* src/bacon-video-widget.h: remove
	bacon_video_widget_properties_get_title which nothing used
	* src/disc-test.c: (main): upd
	* src/totem-disc.c: (totem_cd_detect_type_from_dir),
	(totem_cd_detect_type), (totem_cd_get_human_readable_name):
	* src/totem-disc.h: change namespace from cd_ to totem_cd_
	* src/totem-options.[ch]: moved from totem.c
	* src/totem-pl-parser.c: (totem_pl_parser_add_directory): upd
	* src/totem-preferences.c: upd
	* src/totem-private.h: upd
	* src/totem-session.[ch]: start of some session support
	* src/totem-skipto.c: (totem_skipto_finalize),
	(totem_skipto_set_seekable), (totem_skipto_new):
	* src/totem-skipto.h: Set the OK button disabled when the stream
	isn't seekable (as before moving the TotemSkipto to a separate
	widget)
	* src/totem-uri.[ch]: move from totem.c
	* src/totem-video-thumbnailer.c: fix compilation warning
	* src/totem.c: (totem_action_exit), (totem_action_load_media),
	(totem_action_previous), (totem_action_next),
	(totem_action_toggle_aspect_ratio), (update_seekable),
	(on_play_disc1_activate), (on_show_controls2_activate),
	(totem_action_toggle_controls), (update_media_menu_items),
	(update_buttons), (main):
	* src/totem.h: Fix compilation of the GTK+-only front-end

2004-12-29  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: upd
	* data/properties.glade: upd
	* data/skip_to.glade: added
	* data/totem.glade: removed the "Skip to" dialog
	* src/Makefile.am: updated
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_reset),
	(bacon_video_widget_properties_set_from_current): hide the
	video properties if the file is an audio-only one (Closes: #153174)
	* src/bacon-video-widget-xine.c: (bacon_video_widget_open),
	(bacon_video_widget_get_metadata_string): fix setting the album,
	I wonder for how long it was broken. Don't refuse to play audio-only
	files when we're getting their metadata
	* src/metadata-test.c: (main): error checking
	* src/totem-playlist.c: (totem_playlist_key_press): escape closes the
	playlist window
	* src/totem-private.h:
	* src/totem-properties-page.c: (totem_properties_page_init),
	(set_property): show verbose errors on the command-line for debugging
	purposes
	* src/totem-skipto.[ch]: split out the skipto dialog
	* src/totem.c: (update_skip_to),
	(totem_action_set_mrl_with_warning), (on_recent_file_activate),
	(on_about1_activate), (on_take_screenshot1_activate),
	(on_properties1_activate), (commit_hide_skip_to),
	(on_skip_to1_activate), (totem_callback_connect):
	Use the new TotemSkipto dialog, and only instance one if we need to,
	fix a leak of a GError when playing back a file for which we don't
	want errors

2004-12-28  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/totem-screenshot.h: update copyrights
	* src/totem.c: (commit_hide_skip_to), (on_skip_to1_activate),
	(move_popups), (totem_action_handle_key),
	(on_window_key_press_event): fix controls popup width with RTL locales,
	Make Ctrl+Arrows seek further in streams (Closes: #154831)

2004-12-27  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in: added a volume config
	* src/bacon-video-widget-xine.c: (bacon_video_widget_init),
	(setup_config), (bacon_video_widget_realize),
	(bacon_video_widget_unrealize), (bacon_video_widget_get_volume),
	(bacon_video_widget_set_audio_out_type),
	(bacon_video_widget_get_subtitles): save the volume in GConf, not
	in the xine config file, remove unneeded code, fix the "default"
	value of the audio output
	* src/totem-pl-parser.c: remove unneeded includes, patch by Tiago
	Cogumbreiro <cogumbreiro@linus.uac.pt>

2004-12-27  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_open): don't
	emit the metadata signal if we fail to open the stream
	* src/metadata-test.c: (on_got_metadata_event), (main): fix
	compilation warnings, and exit if we fail to _play()
	* src/totem-properties-page.c: (set_property): _close() if we
	don't manage to _play()

2004-12-26  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updates
	* data/totem.glade: first try at updated controls popup
	* src/totem-playlist.c: (treeview_row_changed): emit the
	"changed" signal when double-clicking on an entry
	* src/totem-time-label.c: (totem_time_label_init),
	(totem_time_label_new): move most of new() code to init()
	* src/totem.c: (totem_action_restore_pl),
	(totem_action_set_mrl_with_warning), (totem_action_set_mrl),
	(on_recent_file_activate), (playlist_changed_cb), (move_popups),
	(on_video_motion_notify_event), (on_eos_event), (label_create):
	don't show a warning when opening the file when rewinding, or
	restoring a playlist, show an error message when trying to play
	a file that can't be opened

2004-12-26  Bastien Nocera  <hadess@hadess.net>

	* help/ru/.cvsignore:
	* src/.cvsignore: updated

2004-12-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem-stock-icons.c: (totem_named_icons_init): modified to
	look for the applets-screenshooter stock icon (Closes: #161705)

2004-12-24  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/Makefile.am:
	* src/bacon-video-widget-gst.c: (bacon_video_widget_new): fix
	compilation of the GStreamer backend (Closes: #159452)
	* src/bacon-video-widget-xine.c: (bacon_video_widget_get_metadata):
	fix assert when getting the Musicbrainz disc ID
	* src/metadata-test.c: add a metadata test program
	* src/totem-private.h: remove keypress_time member
	* src/totem-properties-page.c: (set_property): don't try to play if
	we didn't manage to open the file
	* src/totem.c: (totem_action_set_mrl), (on_eos_event),
	(totem_action_handle_key): remove fullscreen hysteris work-around,
	don't have a MRL in the Totem object if we're in logo mode
	(Closes: #161371)

2004-12-23  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_init),
	(load_audio_out_driver), (bacon_video_widget_realize),
	(bacon_video_widget_new), (bacon_video_widget_open),
	(bacon_video_widget_set_visuals):
	* src/bacon-video-widget.h:
	* src/bvw-test.c: (main):
	* src/totem-properties-page.c: (totem_properties_page_init):
	* src/totem-video-thumbnailer.c: (main):
	* src/totem.c: (video_widget_create): use a BVW_USE_TYPE_ enum to
	tell the widget its purpose before initialising, speeds up the
	xine-lib backend by avoiding initialising xine-lib twice
	(Closes: #159452)

2004-12-19  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* configure.in:
	  Fix GStreamer detection when not using --enable-gstreamer.

2004-12-18  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* help/Makefile.am:
	* help/ru/*: Add Russian manual from Pavel <pavdru@pochta.ru>

2004-12-16  Bastien Nocera  <hadess@hadess.net>

	* configure.in: require libnautilus-burn < 2.9.0

2004-12-14  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_metadata_string): spit out a warning if
	some metadata isn't in UTF-8, following recent xine-lib changes

2004-12-13  Bastien Nocera  <hadess@hadess.net>

	* README: update Gromit requirements
	* src/totem-gromit.c: (totem_gromit_toggle): remove Gromit startup
	hack, requiring a newer Gromit

2004-12-12  Bastien Nocera  <hadess@hadess.net>

	* src/totem-gromit.c: (totem_gromit_ensure_config_file),
	(totem_gromit_available): create a default, and decent gromit
	config file if none exist, for the purpose of the telestrator mode

2004-12-12  Bastien Nocera  <hadess@hadess.net>

	* data/totem.keys: add video/mp4 as a supported mime-type

2004-12-12  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: Really fix chpe's bug, by setting the popups to
	be non-resizeable, so that they go to the tightest fit
	(Closes: #148942)

2004-12-12  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (theme_changed_cb), (totem_callback_connect): Catch
	theme changes so that we can place the popup windows properly
	(Closes: #148942)

2004-12-12  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_subtitle_mrl): don't try to load a subtitle
	file when one was already supplied in the URI

2004-12-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2004-12-09  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (got_source),
	(bacon_video_widget_new):
	  Actually set media device location.

2004-12-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_parse_internal):
	patch from Richard <bloodpup@slackcrew.com> to fix the parsing in
	the subsequent subdirectories (Closes: #160829)

2004-12-06  Bastien Nocera  <hadess@hadess.net>

	* configure.in: fix typo checking for the X includes, spotted by
	Mariano Suarez-Alvarez

2004-12-04  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_current_frame):
	  Don't use ghostpads for screenshots either.

2004-12-04  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/bacon-video-widget-xine.c: (bacon_video_widget_get_zoom):
	fix return values for the _if_fail

2004-12-04  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_can_set_zoom),
	(bacon_video_widget_set_zoom), (bacon_video_widget_get_zoom):
	  Fix Gst build.

2004-12-04  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* data/totem.glade: upd
	* src/bacon-video-widget-xine.c: (bacon_video_widget_can_set_zoom),
	(bacon_video_widget_set_zoom), (bacon_video_widget_get_zoom):
	* src/bacon-video-widget.h:
	* src/totem.c: (totem_action_zoom_relative),
	(totem_action_zoom_reset), (on_resize_1_2_activate),
	(on_resize_1_1_activate), (on_resize_2_1_activate),
	(on_zoom_in_activate), (on_zoom_reset_activate),
	(on_zoom_out_activate), (totem_action_handle_key),
	(totem_callback_connect): added zooming in the video with 'R' and 'T',
	and break GStreamer-backend compilation (Closes: #144929)

2004-12-03  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_unrealize):
	Send the XINE_GUI_SEND_WILL_DESTROY_DRAWABLE event when the video
	window is going to be destroyed

2004-12-03  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2004-12-03  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (xine_event): change the cursor to
	a hand when hovering a DVD menu (Closes: #160085)

2004-12-03  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (state_change):
	  GST_PAD_CAPS() will not work on ghostpads, which we're working on
	  here. So explicitely realize pad.

2004-12-03  Bastien Nocera  <hadess@hadess.net>

	* data/handlers.sh: add support for Winamp's uvox:// URLs

2004-12-01  Christophe Fergeau  <teuf@gnome.org>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_string): the year tag returns a
	guint, not a string.

2004-12-01  Bastien Nocera  <hadess@hadess.net>

	* configure.in: detect XVidModeExtension as well
	* src/Makefile.am: upd
	* src/bacon-resize.c: (bacon_resize_init), (bacon_resize),
	(bacon_restore):
	* src/bacon-resize.h:
	* src/bacon-video-widget-xine.c: (frame_output_cb),
	(bacon_video_widget_realize), (bacon_video_widget_set_fullscreen):
	Use XRandR and XVidModeExtension to get rid of the viewport when
	there is one (Closes: #129986)

2004-11-29  Bastien Nocera  <hadess@hadess.net>

	* data/totem.keys: added audio/mpegurl as a supported mime-type
	for the benefit of the Zina PHP engine

2004-11-29  Bastien Nocera  <hadess@hadess.net>

	* configure.in: if xine-lib isn't available, automatically check
	for the GStreamer libraries instead of having to enable it
	(Closes: #159081)

2004-11-29  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* data/.cvsignore:
	* data/Makefile.am:
	* data/totem.desktop.in.in:
	* data/totem.desktop.in.in.in:
	* data/vanity.desktop.in:
	* data/vanity.desktop.in.in: add X-GNOME-Bugzilla-Version=@VERSION@
	to the desktop files (Closes: #159395)

2004-11-27  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* README:
	  Update TODO list somewhat.
	* src/bacon-video-widget-gst.c: (bacon_video_widget_dvd_event),
	(bacon_video_widget_can_play):
	  Add DVD. Add DVD events (even though they don't work yet, but
	  that's a GStreamer internal issue).

2004-11-26  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_audio_out_type):
	* src/bacon-video-widget.h: Add 4.1-channel support

2004-11-26  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_signal_idler),
	(got_buffering), (bacon_video_widget_new):
	* src/totem-statusbar.c: (totem_statusbar_init),
	(totem_statusbar_update_time), (totem_statusbar_timeout_pop),
	(totem_statusbar_push):
	* src/totem-statusbar.h:
	* src/totem.c: (label_create), (main):
	  Implement buffering for GStreamer backend as well. Show buffering
	  in a progress bar rather than a label. Keep updated even when
	  playing. Disappears automatically if not updated. Progressbar needs
	  to be made smaller but I don't know how.

2004-11-26  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (get_media_size),
	(bacon_video_widget_expose_event),
	(bacon_video_widget_size_allocate), (state_change),
	(bacon_video_widget_set_media_device), (fixate_visualization),
	(setup_vis), (bacon_video_widget_set_show_visuals),
	(bacon_video_widget_set_visuals),
	(bacon_video_widget_set_visuals_quality):
	  Re-enable visualizations in GStreamer backend. Size window to
	  visualization size if set up like that (is that right?).

2004-11-25  Bastien Nocera  <hadess@hadess.net>

	* src/totem-disc.c: (cd_cache_new): fix DVD from disk detection when
	we're given a URI
	* src/totem-preferences.c: (totem_setup_preferences): fix possible
	leak or crash
	* src/totem.c: (totem_action_open_files_list): remove kludge dating
	from the GtkFileSelection days, fixes starting Totem with a DVD from
	disk

2004-11-25  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem-properties-page.c: (totem_properties_page_init),
	(set_property), (main):
	  Fix up properties page for GStreamer backend. Mostly a matter of
	  calling _init() through getting and using the popt tables, and
	  explicitely re-setting the metadata after playing, because the
	  GStreamer backend will call got-metadata in an idle loop which
	  requires a GMainLoop in order to be executed and - yeah! - that's
	  not the case here.

2004-11-25  Bastien Nocera  <hadess@hadess.net>

	* data/totem.keys: add application/x-extension-mp4 as a supported
	mime-type

2004-11-25  Mohammad DAMT  <mdamt@bisnisweb.com>
	
	* configure.in: Added "id" (Indonesian) in ALL_LINGUAS
	* po/id.po: Added Indonesian translation done by Dicky Wahyu Purnomo <dicky.wahyu@massaint.or.id>

2004-11-22  Bastien Nocera  <hadess@hadess.net>

	* configure.in: patch from ed@catmur.co.uk to work-around 
	AC_PATH_X returning an empty $x_libraries (Closes: #159126)

2004-11-22  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (state_change),
	(bacon_video_widget_get_current_frame):
	  Fix for renamed property (fixes #159049).

2004-11-22  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata): add getting album metadata so that
	we don't assert trying to get the metadata (Closes: #158910)

2004-11-20  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade:
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_reset),
	(bacon_video_widget_properties_set_from_current): added album metadata
	to the properties window (Closes: #153173)

2004-11-20  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (setup_config_stream): remove
	debug, fix setting of the default value if there was an error getting
	it

2004-11-19  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (setup_config_stream): work-around
	GConf not returning a default value when there is actually one,
	and making the video all black (Closes: #133011)

2004-11-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-gromit.c: (gromit_exit), (gromit_timeout_cb),
	(totem_gromit_toggle), (totem_gromit_clear): remove debug from
	the gromit interface, it seems to be working fine

2004-11-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (process_options): make --toggle-controls work on
	startup (Closes: #153059)

============ Version 0.99.22

2004-11-19  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 0.99.22

2004-11-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_set_reorderable),
	(button_press_cb), (button_release_cb), (drag_end_cb): work-around
	the GtkTreeRowReference not surviving a drag'n'drop (bug #72043)
	and keep track of the ->currently playing file (Closes: #157066)

2004-11-19  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* data/totem.keys:
	Remove duplicated matroska entry I added earlier.

2004-11-19  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_realize):
	  Set mouse/key event masks so we get notified of mouse motion
	  in fullscreen mode and we see controls, just like the xine
	  backend.

2004-11-19  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_can_play):
	  Enable VCD/SVCD again.
	* src/totem-disc.c: (cd_cache_disc_is_vcd):
	  Add SVCD detection.

============ Version 0.99.21

2004-11-19  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* README: upd
	* configure.in: 0.99.21

2004-11-19  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated

2004-11-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-screenshot.c: (totem_screenshot_temp_file),
	(totem_screenshot_finalize), (drag_data_get), (drag_begin),
	(totem_screenshot_new): Implement drag in the screenshot dialog,
	it's a bit simplistic, and slow machines won't cope very well...
	Send patches (Closes: #119903)

2004-11-18  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (drop_cb), (init_treeview):
	* src/totem.c: (totem_action_drop_files), (drop_video_cb),
	(drop_playlist_cb), (video_widget_create): implement drag'n'drop from
	Mozilla (_NETSCAPE_URL sucks!) (Closes: #158559)

2004-11-18  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated

2004-11-18  Bastien Nocera  <hadess@hadess.net>

	* data/totem_logo.png: for some reason, I get a nice staircase effect
	when the width of the image is odd with xine-lib
	* src/totem.c: (on_about1_activate): update Copyright notice

2004-11-18  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_base_url),
	(totem_pl_parser_relative): Don't crash if we can't get a GnomeVFSURI
	when saving the playlist (Closes: #158228)

2004-11-16  Christian Schaller <uraeus@gnome.org>

	* src/Makefile.am: Remove reference to removed header file

2004-11-15  Bastien Nocera  <hadess@hadess.net>

	* src/test-parser.c: (test_parsing_real), (push_parser): add another
	parsing test
	* src/totem-pl-parser.c: (totem_pl_parser_add_directory): fix crash
	adding a directory and there's an error getting the disc type

2004-11-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (my_gnome_vfs_get_mime_type_with_data),
	(totem_pl_parser_parse_internal): fix some compilation warnings

2004-11-11  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (state_change):
	  Init to NULL so we don't crash if there's no pad.

2004-11-11  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_new):
	  Interestingly, ALSA hangs if I do that, so add another check...

2004-11-10  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (out_error),
	(bacon_video_widget_new):
	  Open device for instant error reporting on busy audio device.
	  Also makes some more exotic video sinks work.

2004-11-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (main): fix crash when no arguments
	are supplied

2004-11-08  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_subtitle_mrl), (bacon_video_widget_open):
	Try to auto-load subtitle files for local files. The suffix must
	be three letters, and the filename of the subtitle only differ by
	the suffix (which must be a known subtitle suffix) (Closes: #123060)

2004-11-07  Bastien Nocera  <hadess@hadess.net>

	* README: update dependencies (Closes: #157530)

2004-11-07  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_get_media_string),
	(totem_action_load_media), (totem_action_fullscreen_toggle),
	(show_controls), (on_show_controls1_activate): fix display of the
	media type (never was updated) when we can't play it (Closes: #157585)
	Slightly rework the fullscreen/shows controls/hidden controls modes,
	don't restore to a huge size after a fullscreen (Closes: #157447)

2004-11-05  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (main): remove extraneous
	g_error_free

2004-11-05  Bastien Nocera  <hadess@hadess.net>

	* data/totem_logo.png: a new, much nicer, rest logo by Jakub Steiner
	<jimmac@ximian.com>

2004-11-04  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (setup_config_video): remove the
	colour key setting, which seems to break more things than it fixes
	(Closes: #157320)

2004-11-03  Christophe Fergeau  <teuf@gnome.org>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_finalize),
	(bacon_video_widget_get_metadata_string):
	* src/totem-pl-parser.c: (totem_pl_parser_finalize):
	* src/totem-preferences.c: (totem_setup_preferences),
	(totem_preferences_visuals_setup): more leak fixes

2004-11-03  Christophe Fergeau  <teuf@gnome.org>

	* src/totem-pl-parser.c: (my_gnome_vfs_get_mime_type_with_data),
	(totem_pl_parser_parse_internal):
	* src/totem-preferences.c: (totem_setup_preferences): leak fixes

2004-11-03  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/Makefile.am:
	* src/bacon-video-widget-gst.c: (state_change),
	(bacon_video_widget_get_current_frame), (bacon_video_widget_new):
	* src/gststreaminfo.h:
	  Remove gststreaminfo.h, use GObject properties instead.

2004-11-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem-private.h:
	* src/totem.c: (update_seekable), (on_skip_to1_activate):
	when Skip to... is grayed out, "S" shouldn't bring up the skip
	to dialog (Closes: #157031)

2004-10-31  Bastien Nocera  <hadess@hadess.net>

	* src/scrsaver.c: (totem_scrsaver_class_init),
	(totem_scrsaver_new), (fake_event), (totem_scrsaver_init),
	(totem_scrsaver_disable), (totem_scrsaver_enable),
	(totem_scrsaver_finalize):
	* src/scrsaver.h:
	* src/totem-pl-parser.h:
	* src/totem-private.h:
	* src/totem.c: (totem_action_fullscreen_toggle),
	(video_widget_create): turn the ScreenSaver struct into the
	TotemScrsaver GObject

2004-10-31  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (treeview_row_changed): when double-clicking
	we need to to reactivate the drop target after the row activation so
	that drag'n'drop works again (Closes: #155702)

2004-10-30  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_init),
	(setup_config): move the debug before xine_init() so that we can
	debug the plugins loading for example

2004-10-28  Bastien Nocera  <hadess@hadess.net>

	* data/totem.desktop.in.in: tell the mime DB we support URLs

2004-10-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem-disc.c: (cd_cache_disc_is_cdda): sometimes, CD drives
	don't implement getting the CD type (should fix #156679)

2004-10-28  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_int):
	  No warnings on console #2.

2004-10-27  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: upd
	* src/test-parser.c: (header), (test_relative_real),
	(test_relative), (entry_added), (test_parsing_real), (push_parser),
	(test_parsing), (main): add parsing tests to the relative paths ones
	* src/totem-disc.c: (cd_cache_open_mountpoint),
	(cd_cache_file_exists), (cd_cache_disc_is_vcd),
	(cd_cache_disc_is_dvd): speed up DVD and VCD checking by stat()'ing
	for filenames, instead of parsing the subdirectories
	* src/totem-pl-parser.c: (totem_pl_parser_add_directory),
	(totem_pl_parser_parse_internal): check if a directory is a VCD or
	DVD, so that we can launch "totem /path/to/disk/dvd" (Closes: #153750)

2004-10-27  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (xine_event_message): fix a warning
	when a plugin couldn't be loaded because it doesn't exist

============ Version 0.99.20

2004-10-27  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 0.99.20

2004-10-25  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_int):
	  Oops, that's kbps, not bps.

2004-10-25  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_int):
	  Show bitrate.

2004-10-22  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (got_error):
	  Since we are blocking the mainloop in _play or _open, errors
	  will never be reported until after we unblock the mainloop if we
	  use idle handlers. Also, we don't need signals at that stage. So	
	  we can abuse the coincidence of those two and just report errors
	  as we should.

2004-10-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_add_files),
	(totem_playlist_save_files):
	* src/totem.c: (on_open1_activate), (show_controls):
	for all the file selectors, use gtk_file_chooser_set_current_folder_uri
	instead of gtk_file_chooser_set_uri (Closes: #156030)
	When hiding and showing the controls again, don't shrink the window

2004-10-19  Bastien Nocera  <hadess@hadess.net>

	* src/disc-test.c: (main):
	* src/totem-disc.c: (totem_disc_resolve_link), (cd_cache_new),
	(cd_detect_type_from_dir):
	* src/totem-disc.h: updated to give back a URL/MRL (dvd:///path/) if
	we have a VCD or a DVD

2004-10-18  Bastien Nocera  <hadess@hadess.net>

	* src/totem-disc.c: (cd_detect_type_from_dir): directories can't be
	CDDA yet, check if they're local paths before continuing

2004-10-16  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_properties1_activate): the property window
	should never have been modal

2004-10-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-disc.c: (totem_disc_resolve_link), (get_device),
	(cd_cache_new), (cd_cache_open_device), (cd_cache_open_mountpoint),
	(cd_cache_disc_is_cdda), (cd_detect_type_from_dir):
	* src/totem-disc.h: add a cd_detect_type_from_dir() to be able to
	tell whether a particular directory is a DVD, or VCD, use
	g_file_read_link instead of readlink

2004-10-14  Bastien Nocera  <hadess@hadess.net>

	* src/video-utils.c: (totem_ratio_fits_screen): no warnings when
	height or width == 0 (Closes: #155376)

2004-10-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-disc.c: (totem_disc_resolve_link), (get_device):
	* src/totem-disc.h: remove uses of gint and gchar, follow relative
	symlinks when checking for the real device name

2004-10-13  Bastien Nocera  <hadess@hadess.net>

	* README: Add basic telestrator instructions
	* src/Makefile.am:
	* src/totem-gromit.c: (totem_gromit_available), (launch),
	(gromit_exit), (gromit_timeout_cb), (totem_gromit_toggle),
	(totem_gromit_clear):
	* src/totem-gromit.h:
	* src/totem.c: (totem_action_exit), (totem_action_handle_key):
	Add a beta Telestrator mode, you need Gromit installed to use it

2004-10-13  Julien MOUTTE  <julien@moutte.net>

	* src/totem-pl-parser.c: (totem_pl_parser_base_url): Fix a crash when
	saving playlist of uri like http://

2004-10-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem-disc.c: (cd_cache_disc_is_vcd), (cd_cache_disc_is_dvd):
	Fix detection of DVDs without an AUDIO_TS directory (Closes: #155281),
	speed up the sub-dir checking in the DVD and VCD cases

============ Version 0.99.19

2004-10-13  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 0.99.19

2004-10-12  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2004-10-12  Bastien Nocera  <hadess@hadess.net>

	* src/.cvsignore: upd
	* src/totem-disc.c: (cd_cache_new): fix a crash trying to play the disc
	as gnome_vfs_volume_monitor_unref() because the volume monitor isn't
	refcounted (Closes: #155195)

2004-10-12  Bastien Nocera  <hadess@hadess.net>

	* src/egg-recent-model.c: (egg_recent_model_add_full):
	* src/egg-recent-util.c: (load_icon_file),
	(egg_recent_util_get_icon): updated egg-recent from libegg

============ Version 0.99.18

2004-10-11  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* configure.in: 0.99.18
	* src/totem-disc.c: (cd_cache_open_device): use err as we set it

2004-10-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-disc.c: (cd_cache_open_device), (cd_cache_disc_is_vcd),
	(cd_cache_disc_is_dvd): better error when no medium is found,
	fix a leak when the subdir can't be opened in the DVD detection,
	add VCD detection (Closes: #131814)

2004-10-11  Bastien Nocera  <hadess@hadess.net>

	* src/.cvsignore: updated

2004-10-11  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* data/totem.glade:
	  Remove open vcd/cdda/dvd entries, add open disc.
	* po/POTFILES.in:
	* src/Makefile.am:
	  Add totem-disc.[ch].
	* src/bacon-video-widget-gst.c: (bacon_video_widget_open),
	(bacon_video_widget_can_play), (bacon_video_widget_get_mrls),
	(bacon_video_widget_get_metadata_string):
	  Add discid for audio-CDs. Don't open the same media twice. This
	  is sort of a hack for something that I don't quite understand
	  in Totem just yet.
	* src/bacon-video-widget-xine.c: (bacon_video_widget_can_play),
	(bacon_video_widget_get_mrls):
	* src/bacon-video-widget.h:
	* src/disc-test.c: (main):
	* src/totem-disc.c: (get_device), (cd_cache_new),
	(cd_cache_open_device), (cd_cache_open_mountpoint),
	(cd_cache_free), (cd_cache_disc_is_cdda), (cd_cache_disc_is_vcd),
	(cd_cache_disc_is_dvd), (cd_detect_type):
	* src/totem-disc.h:
	* src/totem.c: (totem_action_open_files_list),
	(on_play_disc1_activate), (totem_action_remote),
	(totem_callback_connect):
	  Move MEDIA_* to MEDIA_TYPE_*, add DATA/ERROR, add disc content
	  autodetection for the 'Open Disc' menu entry (VCD still TODO).

2004-10-09  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_signal_idler),
	(bacon_video_widget_get_metadata_string):
	  No tags = no metadata. No warnings on console please.

2004-10-09  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/bacon-video-widget-xine.c: (bacon_video_widget_finalize),
	(bacon_video_widget_plugin_exists), (xine_event_message),
	(bacon_video_widget_open),
	(bacon_video_widget_set_proprietary_plugins_path):
	remove useless debug, only warn about missing proprietary plugins
	if the files are there and can't be loaded, not when they're absent.

2004-10-09  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* configure.in:
	  Apparently, a missing space causes issues on Gentoo...
	* src/bacon-video-widget-gst.c: (bacon_video_widget_signal_idler):
	  Expose widget on new video if we're not set to auto-resize. This
	  will re-expose the videosink internally.

2004-10-08  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_expose_event):
	Drawing a black background on each expose event is doing flickering
	video. Moreover it can hide the video away in some cases.

2004-10-08  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/Makefile.am:
	* src/bacon-video-widget-gst.c: (bacon_video_widget_signal_idler),
	(got_video_size), (caps_set), (state_change),
	(bacon_video_widget_can_get_frames), (destroy_pixbuf),
	(bacon_video_widget_get_current_frame), (bacon_video_widget_new):
	* src/gstscreenshot.c: (bvw_frame_conv_base_init),
	(bvw_frame_conv_class_init), (bvw_frame_conv_init),
	(bvw_frame_conv_get), (bvw_frame_conv_put),
	(bvw_frame_conv_convert):
	* src/gstscreenshot.h:
	* src/totem-video-thumbnailer.c: (main):
	  Screenshots and thumbnailing for GStreamer backend.

2004-10-08  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_expose_event): 
	That's plainly wrong. The video window has nothing to do with pipeline
	states.

2004-10-07  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_set_scale_ratio):
	  And being the cool ass backend that we are, we use fits_screen()
	  as well.

2004-10-07  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_scale_ratio):
	* src/video-utils.c: (totem_ratio_fits_screen):
	* src/video-utils.h: move bacon_video_widget_ratio_fits_screen to
	totem_ratio_fits_screen, from the xine-lib backend to the video-utils.[ch]

2004-10-07  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_new),
	(bacon_video_widget_size_request),
	(bacon_video_widget_set_scale_ratio): use
	totem_widget_set_preferred_size and only set the minimum size, so that
	we can still shrink the toplevel window after zooming to a big size
	(Closes: #125903)

2004-10-07  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_set_scale_ratio):
	  Actually do that, rather than just shrinking to a small size.

2004-10-07  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/bacon-video-widget-gst.c: (get_media_size),
	(bacon_video_widget_realize), (bacon_video_widget_size_request),
	(shrink_toplevel), (bacon_video_widget_signal_idler),
	(bacon_video_widget_set_logo), (bacon_video_widget_set_visuals),
	(bacon_video_widget_set_scale_ratio), (bacon_video_widget_new):
	* src/video-utils.c: (cb_unset_size), (cb_set_preferred_size),
	(totem_widget_set_preferred_size):
	* src/video-utils.h:
	  Set a preferred window size. Allows resizing to smaller than
	  this size.

2004-10-07  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (parse_asx_entry), (parse_asx_entries),
	(totem_pl_parser_add_asf): fix parsing of ASX playlists (again),
	allow the title of ASX playlists to be set by the whole playlist, not
	just by the entry (Closes: #153644)

2004-10-06  Bastien Nocera  <hadess@hadess.net>

	* configure.in: remove libgnome-desktop dependency
	* src/totem-pl-parser.c: (totem_pl_parser_add_desktop):
	add application/x-desktop as a supported "playlist" type, and
	reimplement the desktop parsing with our own .ini file parsing
	(Closes: #152800)

============ Version 0.99.17

2004-10-06  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* configure.in: 0.99.17

2004-10-06  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/totem.c: (on_about1_activate):
	  Because I'm a P I M P.

2004-10-06  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* configure.in:
	  Update GStreamer requirements.

2004-10-06  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* src/Makefile.am:
	* src/gstvideowidget.c:
	* src/gstvideowidget.h:
	* src/bacon-video-widget-gst.c: (bacon_video_widget_realize),
	(bacon_video_widget_expose_event),
	(bacon_video_widget_size_request),
	(bacon_video_widget_size_allocate),
	(bacon_video_widget_class_init), (shrink_toplevel),
	(bacon_video_widget_signal_idler), (bacon_video_widget_open),
	(bacon_video_widget_set_logo), (bacon_video_widget_set_logo_mode),
	(bacon_video_widget_get_logo_mode),
	(bacon_video_widget_set_fullscreen),
	(bacon_video_widget_set_show_cursor),
	(bacon_video_widget_get_show_cursor),
	(bacon_video_widget_get_auto_resize),
	(bacon_video_widget_set_auto_resize),
	(bacon_video_widget_set_aspect_ratio),
	(bacon_video_widget_get_aspect_ratio),
	(bacon_video_widget_set_scale_ratio),
	(bacon_video_widget_is_seekable), (bacon_video_widget_new):
	  Remove gstvideowidget, integrate widget in bvw just like the
	  xine version does. Fix some obscure race or so that made this
	  not work on some systems and work fien on others.
	* src/totem-statusbar.c: (totem_statusbar_set_time_and_length):
	  Only redraw the label if it actually changed. Huge performance
	  benefit (drawing labels is expensive...).

2004-09-29  Ronald S. Bultje  <rbultje@ronald.bitfreak.net>

	* configure.in:
	* src/Makefile.am:
	* src/bacon-video-widget-gst.c: (bacon_video_widget_vw_exposed),
	(bacon_video_widget_class_init), (bacon_video_widget_init),
	(bacon_video_widget_signal_idler), (got_found_tag),
	(got_video_size), (got_eos), (got_stream_length), (got_time_tick),
	(cb_iterate), (state_change), (got_error),
	(bacon_video_widget_finalize), (bacon_video_widget_open),
	(bacon_video_widget_play), (bacon_video_widget_seek),
	(bacon_video_widget_seek_time), (bacon_video_widget_stop),
	(bacon_video_widget_close), (bacon_video_widget_dvd_event),
	(bacon_video_widget_pause), (bacon_video_widget_can_set_volume),
	(bacon_video_widget_set_volume), (bacon_video_widget_get_volume),
	(bacon_video_widget_set_media_device),
	(bacon_video_widget_set_show_visuals),
	(bacon_video_widget_get_visuals_list),
	(bacon_video_widget_set_visuals),
	(bacon_video_widget_set_visuals_quality),
	(bacon_video_widget_get_auto_resize),
	(bacon_video_widget_set_auto_resize),
	(bacon_video_widget_set_aspect_ratio),
	(bacon_video_widget_get_aspect_ratio),
	(bacon_video_widget_set_scale_ratio),
	(bacon_video_widget_is_playing), (bacon_video_widget_is_seekable),
	(bacon_video_widget_can_play), (bacon_video_widget_get_mrls),
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata_bool),
	(bacon_video_widget_get_metadata),
	(bacon_video_widget_can_get_frames),
	(bacon_video_widget_get_current_frame), (bacon_video_widget_new):
	* src/gststreaminfo.h:
	  Make GStreamer backend use playbin. Also lots of small changes
	  to make it integrate a bit with playbin. Implements some missing
	  properties (such as has_video) and modifies tag handling to use
	  the GStreamer tag objects for that (instead of a hashtable).
	  Disable visualizations, DVD, VCD and CDDA until we've actually
	  implemented that.

2004-09-28  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (load_video_out_driver):
	the new xxmc video plugin has fallback for Xv for non-MPEG streams
	so try and use it in place of the xv driver

2004-09-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_write_pls):
	when writing .pls files, check whether there actually is a relative
	path

2004-09-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_relative),
	(totem_pl_parser_write_pls): Make the .pls playlist writer also use
	relative paths

2004-09-26  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/test-parser.c: test for the absolute to relative path converter
	and the Unix to DOS path converter
	* src/totem-pl-parser.c: (totem_pl_parser_base_url),
	(totem_pl_parser_write_pls), (totem_pl_parser_relative),
	(totem_pl_parser_url_to_dos), (totem_pl_parser_write_m3u),
	(totem_pl_parser_write), (my_eel_read_entire_file):
	* src/totem-pl-parser.h:
	* src/totem-playlist.c: (totem_playlist_save_current_playlist):
	Add support for writing m3u files in DOS or Unix format
	(Closes: #153344)

2004-09-25  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): load the .glade file from the sources, if we
	can, remove unneeded glade_init()

2004-09-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (xine_event_message),
	(bacon_video_widget_get_nice_codec_name),
	(bacon_video_widget_open): Show an error about the audio codec not
	being handled if we have an audio only file for which we don't have
	a codec

2004-09-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata):
	* src/bacon-video-widget.h: add BVW_INFO_ALBUM metadata
	* src/totem-pl-parser.c: (totem_pl_parser_parse_internal):
	Fix parsing of Real audio playlists (Closes: #153263)

2004-09-20  Bastien Nocera  <hadess@hadess.net>

	* data/vanity.glade: remove Bonobo requirement
	* src/.cvsignore: upd
	* src/vanity.c: (main): upd for glade file changes, allow to load
	the .glade file from the local filesystem

2004-09-17  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am:
	* src/bacon-cd-selection.c:
	* src/bacon-cd-selection.h:
	* src/cd-drive.c:
	* src/cd-drive.h:
	* src/dvd_plus_rw_utils.cpp:
	* src/totem-preferences.c:
	* src/transport.hxx: Remove copy and pasted CD selection widget code
	and use the code from the libnautilus-burn library

2004-09-16  Bastien Nocera  <hadess@hadess.net>

	* src/egg-recent-model.c: (egg_recent_model_monitor): updated from
	libegg

============ Version 0.99.16

2004-09-16  Bastien Nocera  <hadess@hadess.net>

	* configure.in:

2004-09-15  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* README: update the Copyright notices
	* src/totem-playlist.c: (totem_playlist_current_has_prefix),
	(totem_playlist_clear_with_prefix):
	* src/totem-playlist.h: add totem_playlist_clear_with_prefix
	to remove playlist items with a particular prefix
	* src/totem.c: (totem_action_eject): call
	totem_playlist_clear_with_prefix when ejecting an optical media
	instead of simply stopping the play, so that the stream doesn't
	appear in the UI after an eject (Closes: #148480)

2004-09-15  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/totem-pl-parser.c: (totem_pl_parser_parse_internal),
	(totem_pl_parser_parse): We now can recurse into 3 levels of
	subdirectories (enough for drag'n'dropping, say, an "iTunes Music"
	directory) (Closes: #149173)

2004-09-15  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_remote): fix addition of optical media
	URLs via the remote interface (Patch by Frederic Crozat
	<fcrozat@mandrakesoft.com>)

2004-09-15  Bastien Nocera  <hadess@hadess.net>

	* data/totem.keys: Add matroska to the .keys file for totem
	(Patch by Frederic Crozat <fcrozat@mandrakesoft.com>)

2004-09-15  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (on_button1_clicked): fix KDE detection
	for newer KDE versions (Patch by Frederic Crozat
	<fcrozat@mandrakesoft.com>)

2004-09-15  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (xine_event_message),
	(bacon_video_widget_set_logo): work-around a bug in xine-lib where
	it wouldn't send the right error message if trying to play a DVD
	without libdvdcss installed (Patch by Frederic Crozat
	<fcrozat@mandrakesoft.com>)

2004-09-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-remote.h:
	* src/totem.c: (totem_action_remote), (process_options),
	(process_command_line_early), (process_command_line), (main):
	make --debug actually work for the instance that's being started,
	add a "--toggle-controls" command-line option (Closes: #152355)

2004-09-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (process_command_line_quit), (main):
	make "totem --quit" just exit if there's no running Totem instance
	(Closes: #152360)

2004-09-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_key_press):
	make Ctrl+A select all the files in the playlist window
	(Closes: #152197)

2004-09-09  Ankit Patel <ankit@redhat.com>

	* configure.in: Added 'gu' (Gujarati) to ALL_LINGUAS.

2004-09-01  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (xine_event_message):
	* src/totem-pl-parser.c: (totem_pl_parser_add_asf_parser),
	(totem_pl_parser_add_ra), (totem_pl_parser_add_asf),
	(totem_pl_parser_scheme_is_ignored):
	* src/totem-playlist.c: (totem_playlist_is_media):
	* src/totem.c: (totem_playing_dvd), (totem_is_media),
	(totem_action_open_files_list), (process_options),
	(process_command_line):
	* src/video-dev.c: use g_str_has_prefix instead of strncmp

2004-09-01  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_open):
	Fix error message when the codec doesn't have a nice name

2004-08-23  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_set_from_current):
	Only try to get more audio/video metadata if audio/video is present

2004-08-21  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Add Â«nbÂ» to ALL_LINGUAS.

2004-08-17  Mark McLoughlin  <mark@skynet.ie>

	* src/egg-recent-item.[ch],
	  src/egg-recent-model.c,
	  src/egg-recent-view-gtk.c: sync to latest libegg.

2004-08-03  Bastien Nocera  <hadess@hadess.net>

	* data/.cvsignore: upd

2004-08-03  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/handlers.sh:
	* src/bacon-video-widget-xine.c: (setup_config):
	install the url-handlers (pnm, rtsp, mms and mmsh) at install-time,
	not at run-time

2004-07-30  Bastien Nocera  <hadess@hadess.net>

	* data/totem.keys: add audio/x-pn-realaudio-plugin for the benefit
	of the BBC Radio website

2004-07-28  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_open):
	remove unused debug
	* src/totem-pl-parser.c: (totem_pl_parser_add_asf_parser),
	(totem_pl_parser_add_asf): fix parsing of ASX playlists

============ Version 0.99.15.1

2004-07-24  Bastien Nocera  <hadess@hadess.net>

	* NEWS:
	* configure.in: yay, I suck at doing releases

============ Version 0.99.15

2004-07-24  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 0.99.15

2004-07-23  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.h: removed the second occurence of
	BVW_ERROR_FILE_PERMISSION (Closes: #148219)
	

2004-07-23  Bastien Nocera  <hadess@hadess.net>

	* data/desktop.sh: oops, forgot that

============ Version 0.99.14

2004-07-22  Bastien Nocera  <hadess@hadess.net>

	* NEWS: 0.99.14
	* configure.in: upd

2004-07-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_window_key_press_event): "Open location..." and
	"Open..." now work in fullscreen (Closes: #147513)

2004-07-22  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_aspect_ratio),
	(bacon_video_widget_get_popt_table),
	(bacon_video_widget_error_quark):
	* src/bacon-video-widget-xine.c: (load_audio_out_driver),
	(xine_event_message), (xine_error),
	(bacon_video_widget_error_quark), (bacon_video_widget_new),
	(bacon_video_widget_open), (bacon_video_widget_can_get_frames):
	* src/bacon-video-widget.h:
	* src/totem-video-thumbnailer.c: (save_still_pixbuf), (main):
	Add Quarks to the GError the video widget generates, thumbnail
	the file by hand if it's an image, and not a movie

2004-07-22  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/totem.desktop.in:
	* data/totem.desktop.in.in: I'm the first kid on my block to add
	MimeType= to my .desktop files, I rock

2004-07-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem-stock-icons.c: (totem_named_icons_init): Use g_str_hash
	not g_str_equal (fixes stock items not appearing on some platforms)
	(patch from Brian Cameron <rian.cameron@sun.com>) (Closes: #147920)

2004-07-19  Bastien Nocera  <hadess@hadess.net>

	* src/debug.h: fix compilation on Solaris (patch from Brian Cameron
	<Brian.cameron@sun.com>) (Closes: #147739)

2004-07-19  Bastien Nocera  <hadess@hadess.net>

	* NEWS:
	* README: upd
	* src/totem.c: make Shift+Left arrow go back 5 seconds, not 15
	(just the left arrow already does 15 seconds)

2004-07-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_window_key_press_event): Make Eject keyboard
	shortcuts work when Controls are hidden (Closes: #147267)

2004-07-08  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/dvd_plus_rw_utils.cpp: update from n-c-b, fixes compilation
	on Solaris (Closes: #145550)

2004-07-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_add_files):
	s/Select Files/Select Movies or Playlists/ (Closes: #145415)

2004-07-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_write): better error message
	when the playlist can't be written
	* src/totem-playlist.c: (totem_playlist_save_files): don't use
	g_file_test() on a URI, it doesn't work (Closes: #145419)

2004-07-06  Bastien Nocera  <hadess@hadess.net>

	* data/schemas.sh: actually use the size option of the thumbnailer

2004-07-04  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key): Space in full-screen mode
	now acts as play/pause

2004-07-04  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (add_holes_to_pixbuf_large),
	(save_pixbuf): better look and size for the large thumbnails, less
	wasted space

2004-07-04  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/filmholes-big-left.png:
	* data/filmholes-big-right.png:
	* src/totem-video-thumbnailer.c: (print_usage),
	(add_holes_to_pixbuf_small), (add_holes_to_pixbuf_large),
	(save_pixbuf), (main): added better holes for bigger thumbnail sizes,
	add an option to the thumnailer for bigger sizes

2004-07-04  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_set_from_current):
	* src/totem-private.h:
	* src/totem-statusbar.c: (totem_statusbar_update_time):
	* src/totem-time-label.c: (totem_time_label_new),
	(totem_time_label_class_init), (totem_time_label_set_time):
	* src/totem-time-label.h:
	* src/totem.c: (update_current_time),
	(spin_button_value_changed_cb), (totem_action_handle_key), (main):
	* src/video-utils.c: (totem_time_to_string),
	(totem_time_to_string_text):
	* src/video-utils.h:

	Move the time to string functions to the video-utils.[ch], update
	the code taking that into account, finish the TotemTimeLabel code and
	hook it up in totem.c, make Shift+Right/Left arrow do shorter seeks

2004-07-04  Bastien Nocera  <hadess@hadess.net>

	* data/Totem_properties.server.in.in._1:
	* data/Totem_properties.server.in.in._3: remove unused translations

2004-07-04  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: added a time label for the fullscreen controls
	* src/Makefile.am: upd
	* src/bacon-video-widget-xine.c: (bacon_video_widget_open),
	(bacon_video_widget_play), (bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata):
	* src/bacon-video-widget.h: removed the unused FOURCC metadata, removed
	unused struct members
	* src/rb-ellipsizing-label.c: more G_DEFINE_TYPE
	* src/totem-pl-parser.c: fix a warning
	* src/totem-statusbar.c: (totem_statusbar_update_time): fix an LTR/RTL
	issue with the time display, as well as a possible i18n problem
	* src/totem-time-label.[ch]: new widget to display the current position,
	not quite finished
	* src/totem.c: (on_got_metadata_event), (totem_statusbar_create),
	(totem_time_display_create): cleanups
	* src/totem.h: TotemTimeLabel creation

2004-07-03  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_add_ram),
	(totem_pl_parser_add_m3u), (totem_pl_parser_add_asf_parser),
	(totem_pl_parser_add_pls), (totem_pl_parser_add_asx),
	(totem_pl_parser_add_ra), (totem_pl_parser_add_smil),
	(totem_pl_parser_add_asf), (totem_pl_parser_add_desktop),
	(totem_pl_parser_add_directory): More work on better error message
	from the playlist, also fix a memleak in the SMIL parser

2004-07-02  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_add_mrl): show an error
	message when a file couldn't be added to the playlist
	(Closes: #109954)

============ Version 0.99.13

2004-07-02  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 0.99.13
	* NEWS: upd

2004-07-02  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (read_ini_line_string),
	(totem_pl_parser_add_one_url), (totem_pl_parser_add_pls),
	(totem_pl_parser_ignore), (totem_pl_parser_parse_internal):
	only use fallback if we can't actually parse the playlist,
	don't try to open all audio/x-mp3 as m3u playlists (dah!),
	small special case to enable playback from allofmp3s.com
	(Closes: #145278)

2004-07-01  Bastien Nocera  <hadess@hadess.net>

	* help/es/.cvsignore: are we in spring?

2004-07-01  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* help/es/totem-es.omf: re-encode the file in UTF-8 (Closes: #145071)

2004-06-30  Colin Walters  <walters@verbum.org>

	* src/totem-pl-parser.h (enum TotemPlParserResult): New.

	* src/totem-pl-parser.c (totem_pl_parser_parse_internal): New
	function, busted out from totem_pl_parser_parse.  Also return
	TotemPlParserResult instead of a boolean, and check the
	recurse level to be sure we're not going too recursive.
	(totem_pl_parser_parse): Add new fallabck option, that says
	whether or not to try just adding the url.
	(totem_pl_parser_add_url_from_data): Delete; unified with
	totem_pl_parser_parse_internal.

	* src/totem-pl-parser.c: Change a bunch of internal functions
	to call totem_pl_parser_parse_internal.

2004-06-30  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: upd
	* src/list_v4l.c: (list_v4l), (main): moved from libbacon

2004-06-30  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: upd
	* src/cd-drive.[ch]:
	* src/bacon-cd-selection.[ch]: update from nautilus-cd-burner
	* src/bacon-v4l-selection.[ch]: use the GtkComboBox in place of 
	GtkOptionMenu

2004-06-28  Bastien Nocera  <hadess@hadess.net>

	* .cvsignore: upd

2004-06-28  Bastien Nocera  <hadess@hadess.net>

	* README: upd TODO
	* src/totem.c: (totem_time_within_seconds),
	(totem_action_previous): implement Iain's CD player like idea
	(only go to the previous track if we're at the beginning of the track,
	 otherwise seek back to the start)

2004-06-27  Julien MOUTTE  <julien@moutte.net>

	* configure.in: Fix build.

2004-06-22  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2004-06-22  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init),
	(bacon_video_widget_signal_idler):
	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(frame_output_cb), (bacon_video_widget_realize),
	(bacon_video_widget_idle_signal):
	* src/bacon-video-widget.h:
	* src/baconvideowidget-marshal.list:
	* src/totem.c: (on_error_event), (video_widget_create):

	Add a "fatal" argument to the error signal, generate an async error
	signal when a video output driver isn't available on _realize,
	now we have a nice error message when a video driver isn't there
	(Closes: #143879)

2004-06-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_init):
	* src/bacon-video-widget-xine.c: (bacon_video_widget_init):
	* src/totem-remote.c: (totem_remote_class_init),
	(totem_remote_init):
	* src/totem-statusbar.c: use G_DEFINE_TYPE (more)

2004-06-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_set_playing): remove some
	duplicate code

2004-06-14  Bastien Nocera  <hadess@hadess.net>

	* src/video-utils.c: (totem_display_is_local): only consider display
	to be non-local if there is a hostname part of the display name
	(Closes: #143810)

2004-06-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: make it possible to stream samples from
	allofmp3.com (Closes: #144149)

2004-06-10  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-v4l-selection.c: (bacon_v4l_selection_init):
	* src/bacon-video-widget-properties.c:
	* src/totem-pl-parser.c:
	* src/totem-playlist.c:
	* src/totem-screenshot.c: more G_DEFINE_TYPE changes (yay for
	Matthias)

2004-06-09  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-v4l-selection.c:
	* src/bacon-video-widget-properties.c:
	* src/egg-recent-util.c:
	* src/totem-mozilla-plugin.c:
	* src/totem-mozilla-viewer.c:
	* src/totem-pl-parser.c:
	* src/totem-playlist.c:
	* src/totem-private.h:
	* src/totem-screenshot.c:
	* src/totem-statusbar.c:
	* src/vanity.c:
	* src/video-dev.c: all hail to our new gi18n.h overlords, take 3
	(I just love when glib allows me to remove code)

2004-06-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem-mozilla-plugin.c: (totem_plugin_fork): Look for the plugin
	in the right location (Patch by James Ogley
	<james.ogley@pinnacle.co.uk>) (Closes: #144002)

2004-06-08  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/bacon-video-widget-xine.c: (xine_event_message),
	(xine_error): fix a problem where filenames containing escape codes
	(for example file:///foo%20bar) could cause the reason of an error
	not to appear in the dialog
	* src/totem.c: (totem_action_error), (action_toggle_playlist),
	(totem_action_set_mrl), (on_show_playlist1_activate),
	(totem_action_handle_key), (on_window_key_press_event):
	Handle Ctrl+P for the playlist even in hidden controls mode

============ Version 0.99.12

2004-06-04  Bastien Nocera  <hadess@hadess.net>

	* NEWS:
	* configure.in: 0.99.12

2004-05-30  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_add_files): Adding files to the
	playlist shouldn't say "Open" but "Add" (Closes: #143403)

2004-05-30  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_open),
	(bacon_video_widget_get_mrls): the GStreamer backend should use
	cdda: not cda: for audio CD playback
	* src/bacon-video-widget-xine.c: (bacon_video_widget_realize):
	don't crash when a file's opened on _realize, simply warn
	* src/totem.c: (totem_playing_dvd): all mrls starting with dvd: are
	DVDs playing, not just "dvd:/" (Closes: #143002)

2004-05-29  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications:
	* data/totem.keys: Plenty more Real Player-like mime-types

2004-05-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_new):
	* src/totem.c: (on_properties1_activate): Remove the separators
	(hmmm) (Closes: #142452)

2004-05-10  SamÃºel JÃ³n Gunnarsson  <sammi@techattack.nu>

	* configure.in: Added "is" to ALL_LINGUAS

2004-05-10  Bastien Nocera  <hadess@hadess.net>

	* src/.cvsignore: upd
	* src/bacon-video-widget-xine.c: (bacon_video_widget_realize),
	(bacon_video_widget_open), (bacon_video_widget_get_mrls),
	(bacon_video_widget_set_video_device):
	* src/bacon-video-widget.h: add a way to set the video device,
	for vanity, add a warning if there's a file opened before realizing
	the widget, don't warn if there's no output at all and we're
	opening an audio-only file

2004-05-06  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_metadata_string): avoid a possible crash
	when we actually use the Musicbrainz CD Index

2004-05-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_dir_compare),
	(totem_pl_parser_add_directory): sort the files when adding a whole
	directory in the playlist (Closes: #131171)

2004-05-05  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/bacon-video-widget-xine.c: (load_video_out_driver),
	(load_audio_out_driver), (bvw_config_helper_num), (setup_config),
	(setup_config_video), (video_window_translate_point),
	(bacon_video_widget_new), (bacon_video_widget_expose),
	(bacon_video_widget_set_visuals_quality),
	(bacon_video_widget_set_auto_resize),
	(bacon_video_widget_get_metadata_string):
	* src/bacon-video-widget.h: add support for the Musicbrainz CD Index
	in the video widget (Closes: #130833), make the widget compile
	without the xine-lib deprecated features, disable CDDB info
	fetching by default

2004-05-04  Stanislav Visnovsky <visnovsky@nenya.ms.mff.cuni.cz>

	* configure.in: Added "sk" (Slovak) to ALL_LINGUAS.

2004-05-03  Bastien Nocera  <hadess@hadess.net>

	* help/de/Makefile.am: stop getting the German docs registered as
	C language. If you checked the docs recently, they *are* available
	in English as well ;)

2004-05-03  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications:
	* data/totem.keys: support "video/x-mpeg" mime-type, for the
	benefit of Outlook...

2004-05-02  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_audio_out_type): update audio out type
	selection for xine-lib 1-rc4a

2004-04-30  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (xine_error): fix a crash when
	an error occurs with mms:// (Closes: #141055)

2004-04-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem-stock-icons.c: (totem_named_icons_init):
	* src/totem-video-thumbnailer.c: (add_holes_to_pixbuf):
	* src/totem.c: (main):
	* src/video-utils.c: (totem_pixbuf_mirror):
	* src/video-utils.h:
	move our gdk_pixbuf_mirror function to video-utils.[ch] and rename
	it totem_pixbuf_mirror(). Modify totem-video-thumbnailer to use
	the new function, Mirror the Play button in RTL languages, and
	simplify the Next/Prev button handling in RTL languages by using
	the mirror function as well

2004-04-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem-stock-icons.c: (totem_set_default_icons):
	Swap the next and previous icons for RTL languages

2004-04-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem-private.h:
	* src/totem.c: (move_popups), (size_changed_cb),
	(on_video_motion_notify_event): fix placement of the popups with
	RTL languages (Impressive, that was the only thing to fix ;)

2004-04-19  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* data/Makefile.am:
	* data/mozilla-viewer.glade:
	* src/Makefile.am:
	* src/totem-mozilla-plugin.c: (totem_plugin_fork),
	(totem_plugin_new_instance), (totem_plugin_destroy_instance),
	(totem_plugin_set_window), (totem_plugin_new_stream),
	(totem_plugin_destroy_stream), (totem_plugin_write_ready),
	(totem_plugin_write), (totem_plugin_stream_as_file),
	(totem_plugin_url_notify), (totem_plugin_get_value),
	(totem_plugin_set_value), (NP_GetValue), (NP_GetMIMEDescription),
	(NP_Initialize), (NP_Shutdown):
	* src/totem-mozilla-viewer.c: (totem_embedded_error_and_exit),
	(totem_embedded_open), (totem_embedded_add_children), (embedded),
	(main): Fix the GTK+ only build, disable vanity building by default
	(we need to finish it first...), commit the first version (slightly
	broken *cough*understatement*cough*) of the Mozilla plugin

============ Version 0.99.11

2004-04-18  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: upd for release

2004-04-18  Bastien Nocera  <hadess@hadess.net>

	* README: upd

2004-04-16  Bastien Nocera  <hadess@hadess.net>

	* README: removed TODO item
	* src/bacon-video-widget-xine.c: (xine_event_message),
	(xine_error), (bacon_video_widget_open),
	(bacon_video_widget_can_get_frames):
	* src/totem.c: (totem_action_error), (totem_action_eject),
	(on_take_screenshot1_activate):
	Make sure that only one period appears on error messages, GErrors
	have periods to finish up their messages
	Sorry to the translators...

2004-04-16  IÃ±aki LarraÃ±aga  <dooteo@euskalgnu.org>

	* configure.in: Added "eu" (Basque) to ALL_LINGUAS.

2004-04-16  Bastien Nocera  <hadess@hadess.net>

	* README:
	* src/bacon-video-widget-xine.c: (bacon_video_widget_pause):
	HAVE_XINE_CLOSE wasn't set by configure.in anymore, remove the ifdef

2004-04-16  Christian Neumair  <chris@gnome-de.org>

	* configure.in: (AC_OUTPUT):
	* help/Makefile.am: (SUBDIRS):
	* help/de/*:
	* help/de/figures/*: Added German documentation translation. Kudos to
	Sebastian Heinlein (sebastian.heinlein@web.de) for translation.
	* NEWS: Reflect above changes.

2004-04-15  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (xine_error): error message
	collapsing on open(), fixes 2 message boxes popping up when
	the input plugin is whinging and the engine fails to open the stream

2004-04-15  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/bacon-video-widget-xine.c: (xine_event_message):
	plan for the "permission denied" error in xine-lib
	* src/cd-drive.c: (linux_bsd_media_type):
	* src/egg-recent-util.c: upd from libbacon and libegg

2004-04-15  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_error_and_exit),
	(on_properties1_activate): remove separators in the dialogs

2004-04-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (show_controls): don't crash when hiding/showing the
	controls, following the GTK+-only build changes

2004-04-14  Bastien Nocera  <hadess@hadess.net>

	* data/screenshot.glade:
	* src/totem-screenshot.c: (totem_screenshot_new): make the screenshot
	dialog look more like the GNOME panel one, use a Save file chooser
	in the screenshot dialog (Closes: #140013)

2004-04-14  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2004-04-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_get_extinfo_title),
	(totem_pl_parser_add_m3u): fix crash in m3u with extinfo parsing
	(Closes: #140010)

2004-04-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem-stock-icons.c: (totem_named_icons_dispose),
	(totem_named_icons_init): make all our installed icons loadable by
	Totem (Closes: #139922)

2004-04-12  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added Arabic (ar), Macedonian (mk),
	and Walloon (wa) to ALL_LINGUAS.

2004-04-12  Bastien Nocera  <hadess@hadess.net>

	* src/dvd_plus_rw_utils.cpp: update for more cleanups from libbacon
	* src/totem-playlist.c: (button_press_cb), (button_release_cb),
	(drag_begin_cb), (drag_end_cb):
	* src/totem.c: (totem_callback_connect), (main): cleanups

2004-04-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2004-04-10  Bastien Nocera  <hadess@hadess.net>

	* src/dvd_plus_rw_utils.cpp: update from libbacon (Closes: #139594)

2004-04-10  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* data/totem.glade:
	* src/Makefile.am:
	* src/bacon-cd-selection.c: (bacon_cd_selection_new),
	(bacon_cd_selection_set_device), (bacon_cd_selection_get_device):
	* src/bacon-cd-selection.h:
	* src/bacon-v4l-selection.c: (bacon_v4l_selection_new),
	(bacon_v4l_selection_set_device), (bacon_v4l_selection_get_device):
	* src/bacon-video-widget-properties.c:
	* src/egg-recent-item.c: (egg_recent_item_new),
	(egg_recent_item_set_private), (egg_recent_item_get_private):
	* src/egg-recent-item.h:
	* src/egg-recent-util.c:
	* src/egg-recent-view.h:
	* src/totem-pl-parser.c:
	* src/totem-playlist.c: (button_press_cb), (button_release_cb),
	(drag_begin_cb), (drag_end_cb), (init_treeview):
	* src/totem-preferences.c:
	* src/totem-private.h:
	* src/totem-screenshot.c:
	* src/totem-statusbar.c:
	* src/totem-stock-icons.c:
	* src/totem-video-thumbnailer.c:
	* src/totem.c: (on_open_location1_activate),
	(totem_callback_connect), (main):
	* src/vanity.c: (on_about1_activate), (vanity_callback_connect),
	(main):
	* src/video-dev.c:
	Loads of changes for the start of the GTK+ only build,
	Glade files are still broken, and the Nautilus properties page
	is built unconditionally because of what I suspect is a make bug
	Also committed a patch by Sanjay Kumar .J <vjsanjay_signed@yahoo.com>
	to allow DND reordering in the playlist, doesn't work on my machine
	I think I found another libXi bug (Closes: #121275)

2004-04-09  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_set_aspect_ratio),
	(bacon_video_widget_get_aspect_ratio):
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_aspect_ratio),
	(bacon_video_widget_get_aspect_ratio):
	* src/bacon-video-widget.h:
	* src/totem.c: (totem_action_toggle_aspect_ratio),
	(totem_action_set_aspect_ratio), (totem_action_get_aspect_ratio),
	(on_aspect_ratio_auto_activate), (on_aspect_ratio_square_activate),
	(on_aspect_ratio_fbt_activate), (on_aspect_anamorphic_activate),
	(on_aspect_ratio_dvb_activate), (totem_callback_connect):
	* src/totem.h: implement aspect ratio changing via a menu, adapted
	from patch by Sanjay Kumar .J <vjsanjay_signed@yahoo.com>
	(Closes: #119897)

============ Version 0.99.10

2004-04-08  Bastien Nocera  <hadess@hadess.net>

	* NEWS:
	* README: updated for release

2004-04-08  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* README: removed TODO item
	* configure.in: detect newer xine-lib versions, and require them
	Update the version to 0.99.10
	* src/bacon-video-widget-xine.c: (bacon_video_widget_tick_send):
	* src/totem.c: (play_pause_set_label), (totem_action_eject),
	(update_mrl_label), (totem_action_set_mrl), (update_current_time):
	Make sure that the statusbar label and time show that the playback
	was completely stopped, don't show a "Paused" label when the logo is
	displayed

2004-04-08  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/playlist.glade:
	* data/totem.1:
	Added a man page for totem by Andre Lehovich <andrel@U.Arizona.EDU>
	Changed the label of the playlist context menu from "Copy" to
	"Copy Location"

2004-04-07  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: forgot the hotkey for "Show Controls"
	(Closes: 139425)

2004-04-07  Bastien Nocera  <hadess@hadess.net>

	* README: new TODO item
	* data/playlist.glade:
	* src/totem-playlist.c: (on_copy1_activate),
	(treeview_button_pressed), (init_treeview), (totem_playlist_new):
	* src/totem.c: (on_video_button_press_event):
	add a right-click menu to the playlist, so that we can cut'n'paste
	URLs off of it

2004-04-05  Bastien Nocera  <hadess@hadess.net>

	* README: remove TODO item
	* src/totem.c: (totem_action_load_media),
	(totem_action_open_files), (on_open_location1_activate),
	(process_options), (main): fix command-line when Totem is a "server",
	add the --debug option, remove the now useless "ignore_first"
	argument to totem_action_open_files()

2004-04-05  Bastien Nocera  <hadess@hadess.net>

	* README: remove TODO item
	* src/totem.c: (totem_is_media): make "totem cd:" on the command-line
	work again (Closes: #138791)

2004-04-05  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* README: removed TODO item
	* src/bacon-video-widget-xine.c: (xine_event_message),
	(bacon_video_widget_unrealize),
	(bacon_video_widget_can_get_frames): handle events from xine-lib
	even if the explanation field is empty (Closes: #130774)
	Handle the XINE_MSG_AUDIO_OUT_UNAVAILABLE event (Closes: #111602)
	Destroy event queues in the right order, make it possible to take
	a screenshot of the logo
	* src/dvd_plus_rw_utils.cpp: valgrind fixes from libbacon
	* src/vanity.c: (vanity_callback_connect), (video_widget_create):
	make the --debug mode work again

2004-04-05  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_set_logo):
	gdk_pixbuf_new_from_file does not accept NULL GError it seems. That
	was working before though. Thanks to aldug for helping on that one.

2004-04-02  Andras Timar  <timar@gnome.hu>

	* configure.in: Added 'hu' to ALL_LINGUAS.

2004-04-01  Johan Dahlin  <johan@gnome.org>

	* src/bacon-video-widget-gst.c (bacon_video_widget_class_init):
	Tick, add BOOLEAN to end of argument list
	(got_time_tick): Send seekable argument.

2004-03-31  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(generate_mouse_event), (bacon_video_widget_realize),
	(bacon_video_widget_tick_send), (bacon_video_widget_open),
	(bacon_video_widget_is_seekable):
	* src/bacon-video-widget.h:
	* src/baconvideowidget-marshal.list:
	* src/bvw-test.c: (main):
	* src/cd-drive.c: (get_cd_scsi_id), (get_scsi_cd_name),
	(linux_scan):
	* src/dvd_plus_rw_utils.cpp:
	* src/totem.c: (totem_action_set_mrl), (on_got_metadata_event),
	(update_seekable), (update_current_time), (gui_update_cb),
	(video_widget_create): go to towards valgrind clean, fixed up a
	deadlock when opening remote files that require authentication,
	add a "seekable" member to the tick signal

2004-03-30  Adam Weinberger  <adamw@gnome.org>

	* configure.in: Added en_CA to ALL_LINGUAS.

2004-03-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_add_files),
	(totem_playlist_save_files):
	* src/totem-screenshot.c: (totem_screenshot_new):
	* src/totem.c: (on_open1_activate): use the new file chooser in the
	screenshot dialog, and allow non-local files while opening and saving
	files

2004-03-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (parse_asx_entry), (parse_asx_entries):
	Fix parsing for http://switch.streamgate.nl/cgi-bin/streamswitch?streamid=58&a=.asx
	following the docs at http://msdn.microsoft.com/library/default.asp?url=/library/en-us/wmplay/mmp_sdk/entryrefelement.asp

2004-03-26  Å½ygimantas BeruÄka  <uid0@akl.lt>

	* configure.in: Added "lt" (Lithuanian) to ALL_LINGUAS.

2004-03-25  Jan Schmidt  <thaytan@mad.scientist.com>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_get_mrls):
	End the array with a NULL. DVD and CD playback now work with
	the GStreamer backend.

2004-03-24  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(bacon_video_widget_realize), (bacon_video_widget_stop),
	(bacon_video_widget_set_fullscreen),
	(bacon_video_widget_set_show_cursor),
	(bacon_video_widget_set_tv_out): identation fixes, remove the
	key_press_event override, we were just calling the parent class'
	implementation

2004-03-22  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem-preferences.c: (on_tpw_color_reset_clicked),
	(totem_setup_preferences):
	* src/totem-stock-icons.c: (totem_set_default_icons):
	add a "Reset defaults" button for the colour balance sliders
	(Closes: #137946)

2004-03-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem-stock-icons.c: (totem_set_default_icons),
	(totem_get_pixbuf_from_totem_install), (totem_named_icons_init):
	add support for the Playlist stock icon

2004-03-22  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/totem-private.h:
	* src/totem-stock-icons.c: (totem_get_icon_from_theme),
	(remove_value), (totem_named_icons_dispose),
	(totem_default_theme_changed), (totem_set_default_icons),
	(totem_get_named_icon_for_id), (totem_named_icons_init):
	* src/totem-stock-icons.h:
	* src/totem.c: (totem_action_exit), (play_pause_set_label),
	(totem_callback_connect), (main): add support for the stock icons for
	the Play, Pause, Previous, Next and Screenshot icons

2004-03-21  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/screenshot.glade:
	* data/totem.glade:
	* src/Makefile.am:
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_can_get_frames):
	* src/totem-screenshot.c: (totem_screenshot_get_type),
	(totem_screenshot_action_error), (screenshot_make_filename_helper),
	(screenshot_make_filename), (on_radiobutton_shot_toggled),
	(totem_screenshot_response), (totem_screenshot_init),
	(totem_screenshot_finalize), (totem_screenshot_new),
	(totem_screenshot_class_init):
	* src/totem-screenshot.h:
	* src/totem.c: (on_take_screenshot1_activate),
	(totem_callback_connect):
	* src/vanity.c: (vanity_action_error), (on_about1_activate),
	(on_save1_activate), (vanity_callback_connect):
	split out the screenshot dialog into a separate widget, make Totem
	and Vanity use the new widget

2004-03-20  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* README: removed TODO item
	* src/bacon-video-widget-xine.c: (setup_url_handlers),
	(setup_config): setup the url handlers for the pnm, mms and rtsp
	protocols

2004-03-20  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (setup_config_video),
	(bacon_video_widget_realize), (xine_event_message),
	(bacon_video_widget_new): do not re-use the sound driver when creating
	a new stream, disable ALSA's event thread with current xine-lib
	CVS (Closes: #122120)

2004-03-20  Bastien Nocera  <hadess@hadess.net>

	* NEWS: removed duplicate entry
	* src/bacon-video-widget-xine.c: (load_video_out_driver):
	* src/totem-preferences.c: (on_checkbutton2_toggled),
	(totem_setup_preferences):
	* src/video-utils.c: (totem_display_is_local):
	* src/video-utils.h: move totem_display_is_local to the video-utils
	and use it before probing for the Xv driver

2004-03-18  Bastien Nocera  <hadess@hadess.net>

	* configure.in: detect bad taste in TV series (Closes: #137526)

2004-03-13  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_instance_init), (setup_config_stream),
	(xine_event): don't set the image settings if they already are set
	(possibly Close: #133011)
	remove the white artifacts work-around, doesn't work properly

2004-03-12  Ronald Bultje  <rbultje@ronald.bitfreak.net>

	* configure.in:
	  GStreamer 0.8 doesn't exist yet, use gstreamer-0.8 with min. version
	  set to 0.7.6.

2004-03-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in: update to use GStreamer 0.8
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_instance_init), (bacon_video_widget_realize),
	(bacon_video_widget_unrealize), (bacon_video_widget_expose),
	(bacon_video_widget_open): work-around the white artifacts when
	switching on to fullscreen, only save the volume if it's possible
	to save the volume to avoid getting a '0' volume when we restart
	with an audio output

2004-03-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS: update the news

2004-03-10  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_fullscreen_mode_available):
	oops, forgot to add
	an argument to this function (thanks to Johan for spotting it)
	* src/bacon-video-widget-xine.c: (bacon_video_widget_finalize),
	(bacon_video_widget_realize), (bacon_video_widget_new):
	show a nice error when there's no video output plugin available
	* src/totem-playlist.c: (totem_playlist_error),
	(totem_playlist_save_files), (totem_playlist_init):
	* src/totem-preferences.c: (totem_action_info), (ask_show_visuals):
	* src/totem.c: (totem_action_error), (totem_action_error_and_exit),
	(on_properties1_activate):
	don't set off the separator after constructing the dialogs, fixes
	a bunch of run-time warnings

2004-03-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS:
	* src/bacon-video-widget-xine.c: (bacon_video_widget_play):
	patch from Fabio Bonelli <fabiobonelli@libero.it> to restore
	the auto audio stream if a file doesn't have the same one
	available (Closes: #126578)

2004-03-10  Anders Carlsson  <andersca@gnome.org>

	* src/totem-playlist.c: (totem_playlist_add_files),
	(totem_playlist_save_files):
	* src/totem.c: (on_open1_activate):
	Set default response to GTK_RESPONSE_ACCEPT so double-clicking
	on files will work.
	
2004-03-09  Bastien Nocera  <hadess@hadess.net>

	* src/egg-recent-util.c: (egg_recent_util_get_icon):
	* src/totem.c: (totem_action_add_recent), (totem_setup_recent):
	update recent-files from libegg (fixes run-time warnings)
	Don't forget to set the groups in recent-files (Closes: #131094)

2004-03-09  Anders Carlsson  <andersca@gnome.org>

	* src/totem-playlist.c: (totem_playlist_add_files),
	(totem_playlist_save_files):
	* src/totem.c: (on_open1_activate):
	Fix button ordering in file chooser.
	
2004-03-06  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* data/totem.glade:
	* src/Makefile.am:
	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_fullscreen_mode_available):
	* src/bacon-video-widget-xine.c: (bacon_video_widget_realize),
	(bacon_video_widget_unrealize),
	(bacon_video_widget_fullscreen_mode_available),
	(bacon_video_widget_set_fullscreen),
	(bacon_video_widget_set_tv_out):
	* src/bacon-video-widget.h:
	* src/totem-playlist.c: (totem_playlist_add_files),
	(totem_playlist_save_files):
	* src/totem-preferences.c: (totem_preferences_tvout_setup):
	* src/totem.c: (totem_action_open_files_list), (on_open1_activate):
	patch from Mattias Eriksson <snaggen@acc.umu.se> to unbreak
	NVidia TV-Output (Closes: #131080)
	Fix crashes when opening the file choosers a second time

2004-03-01  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* src/totem.c: (totem_action_open_files_list): don't ignore the
	last item in the list of files to open

2004-02-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem-private.h:
	* src/totem.c: (update_current_time), (vol_slider_pressed_cb),
	(vol_slider_released_cb), (seek_slider_changed_cb),
	(seek_slider_released_cb), (vol_cb), (popup_hide), (main):
	use GObject data rather than comparing pointers to widgets for
	fullscreen/windowed mode updates (Closes: #135513)
	* src/video-dev.c: (linux_add_video_dev), (linux_scan):
	add Linux 2.6 support, from libbacon

2004-02-28  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: Honour gconf2 configure arguments (patch by
	Julio M. Merino Vidal <jmmv@menta.net>) (Closes: #135415)

2004-02-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_add_files),
	(totem_playlist_save_files): update the TotemPlaylist to use the
	GtkFileChooser (Closes: #133210)

2004-02-26  Julien MOUTTE <julien@moutte.net>

	* README: updated GStreamer backend todo list.

2004-02-24  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-cd-selection.c: (bacon_cd_selection_new): update from
	libbacon

2004-02-20  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* src/Makefile.am:
	* src/gnome-caption-table.c:
	* src/gnome-caption-table.h:
	* src/gnome-password-dialog.c:
	* src/gnome-password-dialog.h: more unused files removed
	* src/totem.c: (totem_action_open_files),
	(totem_action_open_files_list), (on_open1_activate),
	(on_open_location1_activate):
	* src/totem.h: updated Totem itself to use the GtkFileChooser

2004-02-19  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* data/Makefile.am:
	* data/totem-download.glade:
	* src/Makefile.am:
	* src/totem-download.c:
	* src/totem-download.h:
	* src/totem.c: (totem_action_set_mrl): remove the automatic download
	of Windows DLLs as there weren't any useful downloadable DLLs, and that
	we don't want Microsoft to sue us.
	Removes the dependency on CURL

2004-02-19  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* data/Makefile.am:
	* data/totem-random.pl: removed the useless random script, the
	functionality is builtin now

2004-02-19  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am:
	* src/gnome-authn-manager.c:
	* src/gnome-authn-manager.h:
	* src/totem.c:
	* src/vanity.c: Removed the builtin authentication manager, and
	use the one shipped in libgnomeui from the 2.4 version

2004-02-19  Bastien Nocera  <hadess@hadess.net>

	* configure.in: require GTK+ 2.3
	* src/totem.c: (totem_set_screenshot_icon),
	(totem_callback_connect): Added a totem_set_screenshot_icon function
	to use the proper icon for the screenshot function if the
	gnome-screenshot.png file (from gnome-panel) is available
	(Closes: #131708)

2004-02-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): make the command-line options translated
	(work-around #134483)

2004-02-19  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_new): Allowing for
	different schedulers to used from command line options.

2004-02-18  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_add_directory):
	Looks like g_build_filename changed behaviour when dealing with
	URIs (as opposed to local paths) (Closes: #134616)

2004-02-16  Arafat Medini  <lumina@silverpen.de>

	* confiigure.in: Added Arabic locale "ar" to ALL_LINGUAS.

2004-02-15  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_signal_idler),
	(got_error): Correct error handling.

2004-02-15  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_signal_idler),
	(got_found_tag), (got_video_size), (got_eos), (got_error): Some EOS
	fixes, and better naming of ASYNC signals.

2004-02-13  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_instance_init),
	(bacon_video_widget_get_popt_table), (bacon_video_widget_new):
	Implementing the popt options gathering method.
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_popt_table): Implementing the popt options 
	gathering method.
	* src/bacon-video-widget.h: Adding a method to get backend popt options.
	* src/totem.c: (main): Implementing correct popt options handling 
	through gnome_program_init. We now support backend options aswell.

2004-02-13  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_new): Fix a mistake
	that always triggered the error.

2004-02-13  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_new): Implementing
	correct error handling. Totem now fails nicely if some elements are
	lacking for the GStreamer pipeline.

============ Version 0.99.9

2004-02-13  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* configure.in: version 0.99.9
	* src/totem-playlist.c:
	(totem_playlist_gtk_tree_model_iter_previous),
	(totem_playlist_gtk_tree_path_equals), (treeview_row_changed),
	(totem_playlist_has_previous_mrl), (totem_playlist_set_previous):
	Don't pollute the gtk namespace

2004-02-13  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_signal_idler): Add
	some safety check around tag list management.

2004-02-12  Julien MOUTTE  <julien@moutte.net>

	* src/gstvideowidget.c: (gst_video_widget_reorder_windows),
	(gst_video_widget_init): Very simple fix for a very annoying bug. So 
	now the video window should show up correctly all the time and the
	black squares that were staying over it should disappear.

2004-02-07  Robert Sedak  <robert.sedak@sk.htnet.hr>
 
         * configure.in: Added "hr" (Croatian) to ALL_LINGUAS.

2004-02-05  Bastien Nocera  <hadess@hadess.net>

	* data/uri.glade: add a default button for the "Open Location"
	dialog, patch from Josselin Mouette (Closes: #132138)

2004-02-05  Bastien Nocera  <hadess@hadess.net>

	* configure.in: simple fix for older autoconfs, patch by
	Harsh Jaitly <hjaitly@novell.com> (Closes: #131709)

2004-02-05  Bastien Nocera  <hadess@hadess.net>

	* src/egg-*:
	* src/totem.c: (totem_setup_recent): Revert all the egg-recent
	changes, (should Close: #131094)

2004-02-04  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_vw_exposed),
	(bacon_video_widget_class_init), (bacon_video_widget_new): Implement
	the expose method of XOverlay interface. This way we refresh the video
	frame even when paused on expose events.
	* src/gstvideowidget.c: (gst_video_widget_expose): Fix expose method.

2004-02-02  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-v4l-selection.h:
	* src/cd-drive.c: (hal_scan_add_whitelist), (hal_scan),
	(linux_bsd_media_type), (get_device_max_speed), (scan_for_cdroms):
	* src/dvd_plus_rw_utils.cpp: update from libbacon

2004-02-01  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_motion_notify_callback),
	(bacon_video_widget_instance_init), (bacon_video_widget_open),
	(bacon_video_widget_new): Fixing for latest GStreamer CVS Head, fixing 
	mouse motion in fullscreen mode. Using opt again.

2004-01-31  Jon Trowbridge <trow@ximian.com>

	* src/bacon-cd-selection.c:
	* src/bacon-message-connection.c:
	* src/bacon-v4l-selection.c:
	* src/bacon-video-widget-properties.c:
	* src/bacon-video-widget-xine.c:
	* src/scrsaver.c:
	* src/totem-download.c:
	* src/totem-pl-parser.c:
	* src/totem-playlist.c:
	* src/totem-preferences.c:
	* src/totem-video-thumbnailer.c:
	* src/vanity.c: Paranoia.  Replaced a bunch of instances of
	'foo == TRUE' with 'foo != FALSE'.
	
	* src/bacon-message-connection.c:
	* src/bacon-video-widget-properties.c:
	* src/totem-download.c:
	* src/totem-pl-parser.c:
	* src/totem-video-thumbnailer.c:
	* src/totem.c:
	* src/vanity.c:
	* src/video-dev.c: Corrected usage of g_build_filename.  This
	fixes bug #132674.

	* src/totem.c (seek_slider_pressed_cb): Set seeking to TRUE
	in the status bar.
	(seek_slider_changed_cb): Added.  If we are dragging the seek
	slider, put the current seek position in the status bar.
	(seek_slider_released_cb): Set seeking to FALSE in the status
	bar.
	(totem_callback_connect): Connect seek_slider_changed_cb
	to the adjustment's "value_changed" signal.

	* src/totem-statusbar.c (totem_statusbar_set_seeking): Added.
	Controls the seeking flag.
	(totem_statusbar_update_time): If the seeking flag is set,
	append 'Seeking to' to the status bar label.

2004-01-30  Jon Trowbridge <trow@ximian.com>

	* src/bacon-video-widget-gst.c (bacon_video_widget_seek_time):
	Multiply the seek time by GST_MSECOND.  This fixes (among other
	things) relative seeking.

2004-01-28  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* src/totem-preferences.c: (totem_setup_preferences):
	Remove an gconf call, info was already available in a variable.

2004-01-25  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (store_tag),
	(bacon_video_widget_signal_idler): Implement metadata with the new 
	architecture.

2004-01-25  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_instance_init),
	(bacon_video_widget_signal_idler), (got_found_tag),
	(bacon_video_widget_close): Fixing metadata tags, and a bug when
	loading a media from command line.

2004-01-18  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-v4l-selection.h:
	* src/gnome-caption-table.h:
	* src/totem-preferences.h:
	* src/totem.h: Fixing some compilation warnings.

2004-01-16  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_video_property): Removing a warning when
	slider reaches the edges.

2004-01-16  Julien MOUTTE <julien@moutte.net>

	* data/totem.schemas.in: Adding hue and saturation gconf keys.
	* src/bacon-video-widget-gst.c: (bacon_video_widget_new): Removing
	some debugging g_message.
	* src/bacon-video-widget-xine.c: (setup_config_stream): Fixing my own
	stupidity... i will write a 1000 times "i should not commit before
	having compiled with --enable-xine at least only once."

2004-01-15  Julien MOUTTE <julien@moutte.net>

	* data/totem.glade: Adding saturation and hue slider transforming the
	display notebook in a real colorbalance configuration interface.
	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_video_property),
	(bacon_video_widget_set_video_property), (bacon_video_widget_new):
	Implementing colorbalance and software sound mixer.
	* src/bacon-video-widget-xine.c: Implementing hue and saturation.
	* src/bacon-video-widget.h: Adding hue and saturation.
	* src/totem-preferences.c: (saturation_changed), (hue_changed),
	(totem_setup_preferences), (totem_preferences_visuals_setup):
	Integrating the 2 new sliders for hue and saturation.

2004-01-13  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* src/totem.c: (on_open1_activate): allow the user to cancel the open
	(Closes: #131323)

2004-01-12  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_video_property),
	(bacon_video_widget_set_video_property), (bacon_video_widget_new):
	Implementing brightness and contrast setting/getting thanks to the
	colorbalance interface in xvimagesink.

2004-01-12  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_set_visuals_quality): Removing the visual quality
	warning. I ll fix that later with filtered caps.

2004-01-10  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_open),
	(bacon_video_widget_can_play), (bacon_video_widget_get_mrls):
	Adding support for Audio CD playback in GStreamer backend.

2004-01-10  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_finalize),
	(bacon_video_widget_open), (bacon_video_widget_close),
	(bacon_video_widget_set_media_device), (bacon_video_widget_new):
	Implementing set_media_device to use the prefered cdrom reader.

2004-01-10  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_vw_realized),
	(bacon_video_widget_vw_allocate),
	(bacon_video_widget_button_press),
	(bacon_video_widget_button_release),
	(bacon_video_widget_motion_notify_callback),
	(bacon_video_widget_new): Implementing DVD navigation.

2004-01-10  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_open),
	(bacon_video_widget_can_play), (bacon_video_widget_get_mrls): Adding
	DVD playback in GStreamer bacon video widget. Fixes now need to be done
	in GStreamer for that work correctly.

2004-01-10  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am: explicitely link against libX11 to avoid problems
	with crappy linkers (like the Solaris one) (Closes: #130894)

2004-01-10  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/bacon-video-widget-xine.c: (bacon_video_widget_idle_signal):
	the automatic resize on new stream should be of 1:1, apparently, any
	other size confuses users (Closes: #131026)

2004-01-09  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_instance_init),
	(bacon_video_widget_signal_idler), (got_found_tag),
	(got_video_size), (got_stream_length), (got_time_tick),
	(got_error), (bacon_video_widget_finalize),
	(bacon_video_widget_set_property),
	(bacon_video_widget_get_property): Implementing an AsyncQueue for
	GStreamer signals. That fixes the resizing/fullscreen.
	* src/gstvideowidget.c: (gst_video_widget_reorder_windows),
	(gst_video_widget_realize), (gst_video_widget_expose),
	(gst_video_widget_allocate), (gst_video_widget_class_init),
	(gst_video_widget_set_source_size),
	(gst_video_widget_get_source_size), (gst_video_widget_get_logo):
	* src/gstvideowidget.h: Synchronizing with latest video widget from 
	gst-player, some bug fixes and warnings removal.

2004-01-09  Jon Trowbridge <trow@ximian.com>

	* src/bacon-video-widget-gst.c (bacon_video_widget_finalize):
	Since the GstVideoWidget stored in bvw->priv->vw has been packed
	into the BaconVideoWidget bvw, it doesn't need to be destroyed.
	(This fixes a segfault on BaconVideoWidget finalization.)

2004-01-08  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* configure.in: removed checks for the Sun keysym headers
	* data/Makefile.am:
	* src/Makefile.am: more work on making vanity optional, fix build
	(working around an automake dependency calculation bug)
	* src/totem.c: (totem_action_handle_key): don't use the XFree86
	multimedia keysyms if we're not building against XFree86
	(patch by Harsh Jaitly <hjaitly@novell.com>) (Closes: #130169)

2004-01-07  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am: make vanity optional via --enable-vanity, patch
	most from Harsh Jaitly <hjaitly@novell.com> (Closes: #130467)
	* src/bvw-test.c: (test_xine_set_mrl), (on_eos_event): fix warnings

2004-01-07  Bastien Nocera  <hadess@hadess.net>

	* src/cd-drive.[ch]:
	* src/transport.hxx: FreeBSD fixes from libbacon
	* src/totem-playlist.c:
	* src/totem-playlist.h: make set_at_end public and declare it in the
	header
	* src/totem.c: (seek_slider_released_cb), (vol_cb),
	(totem_action_open_files), (on_open1_activate):
	Make sure that non-existant local files don't get added to the
	playlist, fix handling of non-local files (unbreaks the Open URL
	support) (Closes: #130689)

2004-01-05  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications:
	* data/totem.keys: We also have matroska support now

2004-01-05  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (load_video_out_driver):
	Don't try to load the XvMC plugin, as it's broken for most
	purposes (Closes: #129783)

2004-01-05  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_open_files), (on_open1_activate):
	Patch to avoid being able to select directories in the main window
	file selector (Closes: #129459)
	Patch by Harsh Jaitly <hjaitly@novell.com>

2004-01-04  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_add_pls):
	When a file is empty, don't try to parse it, and say we parsed
	properly, fixes the problem of Totem trying to play ~/.gnome2/totem.pls
	(Closes: #129591)

2004-01-04  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_button_press):
	Don't hide mouse button presses from GTK+ (Closes: #127586)

2004-01-04  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/totem-playlist.c:
	* src/totem.c: (on_recent_file_activate):
	When a file is clicked inside the recent-files, it's added at
	the end of the playlist and played straight away (Closes: #129581)
	Patch by Harsh Jaitly <hjaitly@novell.com>

2003-12-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: remove unused defines and includes
	* src/totem.c: (totem_action_error_and_exit),
	(video_widget_create), (main): make sure that we don't get an
	extra period in error messages
	* src/video-utils.c: remove unneeded stdint.h include (Closes: #129909)

2003-12-29  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* README: upd
	* src/totem-preferences.c: (totem_setup_preferences):
	When the media device doesn't exist, we should get it directly from
	the selection widget (fixes problems with disappearing devices)

2003-12-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_restore_pl):
	Set the logo path if we can't restore a playlist on startup

2003-12-23  Julien MOUTTE <julien@moutte.net>

	* configure.in: Switching to GStreamer 0.7.x and using
	gstreamer-interfaces package.
	* src/bacon-video-widget-gst.c: (bacon_video_widget_realized),
	(print_tag), (got_found_tag), (got_video_size),
	(bacon_video_widget_finalize), (bacon_video_widget_open),
	(bacon_video_widget_play), (bacon_video_widget_seek),
	(bacon_video_widget_stop), (bacon_video_widget_close),
	(bacon_video_widget_pause), (bacon_video_widget_can_set_volume),
	(bacon_video_widget_set_volume), (bacon_video_widget_get_volume),
	(bacon_video_widget_set_show_visuals),
	(bacon_video_widget_get_visuals_list),
	(bacon_video_widget_set_visuals), (bacon_video_widget_is_playing),
	(bacon_video_widget_new): Implement the newest libgstplay API.
	* src/gstvideowidget.c: (gst_video_widget_reorder_windows),
	(gst_video_widget_realize), (gst_video_widget_expose),
	(gst_video_widget_allocate), (gst_video_widget_set_property),
	(gst_video_widget_get_property), (gst_video_widget_class_init),
	(gst_video_widget_get_video_window),
	(gst_video_widget_set_logo_focus): Implement a new video widget
	compliant with the XOverlay interface using a model similar to
	xine-lib.
	* src/gstvideowidget.h:

2003-12-22  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications:
	* data/totem.keys: added audio/x-flac as supported

2003-12-22  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: add Ctrl+P as a shortcut to show/hide the playlist

2003-12-19  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/totem-pl-parser.c: (totem_pl_parser_num_entries),
	(totem_pl_parser_write): oopsie, it didn't work the way it should have

2003-12-19  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_media_device): also set the media device
	for the new VCD plugin (Closes: #129452)

2003-12-18  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: remove duplicate "f" mnemonic (Closes: #129590)

2003-12-17  Bastien Nocera  <hadess@hadess.net>

	* src/cd-drive.[ch]: 
	* src/cd-drive.h:
	* src/egg-recent-*: update from libegg and libbacon
	* src/totem.c: (totem_action_add_recent), (totem_setup_recent):
	update for the API changes in libegg (Closes: #129151)

2003-12-10  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_languages),
	(bacon_video_widget_get_subtitles): we'll get this right soon :)

2003-12-10  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_open),
	(bacon_video_widget_close), (bacon_video_widget_get_languages),
	(bacon_video_widget_get_language),
	(bacon_video_widget_set_language),
	(bacon_video_widget_get_subtitles):
	Fix bugs related to subchannels labels lengths, in conjunction
	with xine-lib CVS

2003-12-09  Bastien Nocera  <hadess@hadess.net>

	* configure.in: add a --disable-curl option (Closes: #128741)
	patch by DmD Ljungmark <spider@gnome.org>
	* data/totem.applications:
	* data/totem.keys: add support for video/x-flc and video/x-anim
	mime-types

2003-12-08  Bastien Nocera  <hadess@hadess.net>

	* README: updated

2003-12-07  Jorn Baayen  <jorn@nl.linux.org>

	* data/playlist.glade:
	* data/totem.glade:
	* src/totem-playlist.c: (totem_playlist_error),
	(totem_playlist_save_files), (totem_playlist_init):
	* src/totem-preferences.c: (totem_action_info), (ask_show_visuals):
	* src/totem.c: (totem_action_error),
	(totem_action_error_try_download), (totem_action_error_and_exit),
	(update_mrl_label), (on_properties1_activate):

	HIG compliancy fixes.
	
	* data/totem.applications:

	Support application/ogg in addition to application/x-ogg.

2003-12-07  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/bacon-video-widget-xine.c: (xine_event_message):
	add support for security UI messages
	* src/totem-pl-parser.c: (totem_pl_parser_add_ram),
	(totem_pl_parser_add_m3u): small updates

2003-11-28  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* src/totem.c: (update_seekable):
	Also fix fullscreen mode.

2003-11-28  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* src/totem.c: (update_seekable):
	Disable "Time" label when stream is not seekable.

2003-11-27  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: oopsie, forgot some debug in there
	* src/totem.c: (on_take_screenshot1_activate): use
	gdk_pixbuf_scale_simple in place of gnome_thumbnail_scale_down_pixbuf
	as otherwise it barfs when scaling up (stupid thing)

2003-11-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_add_ram),
	(totem_pl_parser_get_extinfo_title), (totem_pl_parser_add_m3u),
	(totem_pl_parser_add_ra): split m3u parsing from ram parsing,
	add support for the extm3u format

2003-11-22  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (xine_event_message):
	* src/totem-playlist.c: (totem_playlist_is_media),
	(totem_playlist_create_full_path): explode in your face you're
	trying to playback DRM'ed crap. Die DRM, Die.

2003-11-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_create_full_path),
	(totem_playlist_add_one_mrl): add totem_playlist_create_full_path(),
	(Closes: #126558)

2003-11-20  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* data/totem.applications: added "uses_gnomevfs" entry which should
	allow Nautilus to know we can handle everything gnome-vfs does
	(Closes: #126715)
	* src/totem.c: (vol_slider_pressed_cb), (vol_slider_released_cb),
	(update_volume_sliders), (popup_hide), (totem_callback_connect):
	don't hide the popup window until we released the volume slider
	(Closes: #125791)

2003-11-20  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications:
	* data/totem.keys: added video/dv support (Closes: #126023)

2003-11-20  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* configure.in: fix build (bah!)
	* data/totem.applications:
	* data/totem.keys: added support for audio/x-ms-wax
	* src/totem-pl-parser.c:
	* src/totem-pl-parser.h:
	* src/totem-playlist.c: (totem_playlist_init): move the schemes to
	ignore out of the playlist parser, don't save playlist items with
	schemes to ignore (Closes: #125201)

2003-11-17  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications:
	* data/totem.keys: add support for .m4a files

2003-11-17  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_create_full_path): fix problems opening files
	with paths containing escape codes

2003-11-13  Bastien Nocera  <hadess@hadess.net>

	* configure.in: make the mmkeys detection work with -Werror

2003-11-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-remote.c: (totem_remote_init): show some errors when in
	debug mode and lirc fails to initialise

============ Version 0.99.8

2003-11-09  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* configure.in:
	* help/.cvsignore:
	* help/C/.cvsignore: fix build for the new manual, release 0.99.8

2003-11-09  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* README: updated
	* configure.in:
	* data/totem.glade:
	* help/C/Makefile.am:
	* omf.make:
	* src/Makefile.am: remove deprecation flags to compile with
	GTK+ 2.3.x
	* src/totem.c: (on_help_activate), (totem_callback_connect):
	* xmldocs.make: put the help in the build system, add a menu
	item to get to the help

2003-11-07  Chee Bin HOH  <cbhoh@gnome.org>

	* help/Makefile.am:
	* help/omf.make:
	* help/xmldocs.make:
	* help/C/legal.xml:
	* help/C/Makefile.am:
	* help/C/totem-C.omf:
	* help/C/totem.xml:
	* help/C/figures/totem_next_button.png:
	* help/C/figures/totem_pause_button.png:
	* help/C/figures/totem_play_button.png:
	* help/C/figures/totem_previous_button.png:
	* help/C/figures/totem_show_playlist_button.png:
	* help/C/figures/totem_start_window.png:
	* help/C/figures/totem_volume_maximum_button.png:
	* help/C/figures/totem_volume_mute_button.png: added online manual
	
2003-11-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): fix crash when launched without any arguments

2003-11-05  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications:
	* data/totem.keys: added type audio/x-ms-asf

2003-11-04  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* src/bacon-resize.c:
	* src/bacon-resize.h: fix build
	* src/cd-drive.c: (linux_bsd_media_type), (guess_media_type):
	updated from libbacon
	* src/totem.c: (main): make --fullscreen launch Totem in 
	fullscreen

2003-11-02  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (xine_event): when getting we
	get a reference MRL from xine, that means we're playing, so play
	the file straight away (fixes playback of most of the trailers
	on the Apple website)

2003-10-25  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_add_m3u):
	handle the stop command in Real Media playlists

2003-10-23  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* src/bacon-video-widget-xine.c: (load_video_out_driver): try to
	load the xvmc driver before xv and xshm

2003-10-20  Bastien Nocera  <hadess@hadess.net>

	* README: update link to the release notes

2003-10-19  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* src/Makefile.am:
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_get_type),
	(bacon_video_widget_properties_new),
	(bacon_video_widget_properties_class_init): descend of a VBox
	instead of Dialog
	* src/bacon-video-widget-properties.h: ditto
	* src/bacon-video-widget-xine.c: (bacon_video_widget_new):
	drop the number of buffers to 5 instead of 500
	* src/totem-properties-page.c: (on_got_metadata_event),
	(totem_properties_page_init), (totem_properties_page_finalize),
	(set_property): embed the BaconVideoWidgetProperties instead
	of cut'n'paste silliness
	* src/totem.c: (hide_props_dialog), (on_properties1_activate):
	update for new BaconVideoWidgetProperties

2003-10-17  Bastien Nocera  <hadess@hadess.net>

	* src/totem-statusbar.c: (totem_statusbar_push):
	pop the old labels and progress when we reach 100% buffering

2003-10-17  Bastien Nocera  <hadess@hadess.net>

	* src/totem-private.h:
	* src/totem-statusbar.c: (totem_statusbar_update_time),
	(totem_statusbar_set_time), (totem_statusbar_timeout_pop),
	(totem_statusbar_push), (totem_statusbar_pop):
	* src/totem-statusbar.h:
	* src/totem.c: (totem_action_error), (on_buffering_event):
	remove the buffering dialog, and use the statusbar for buffering
	status as not all buffers are filled when just opening a stream
	for example

============ Version 0.99.7

2003-10-15  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* configure.in: 0.99.7

2003-10-14  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (frame_output_cb),
	(bacon_video_widget_realize), (bacon_video_widget_set_fullscreen):
	take into account the return value from bacon_resize_init before
	calling bacon_resize itself

2003-10-13  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/totem-pl-parser.c: (totem_pl_parser_add_m3u),
	(parse_asx_entry): fix parsing of m3u and asx playlists

2003-10-13  Bastien Nocera  <hadess@hadess.net>

	* README: updated

2003-10-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_seek_relative): the function expects
	seconds and we were passing milliseconds, fixes seeking with the
	arrows

2003-10-13  Bastien Nocera  <hadess@hadess.net>

	* configure.in: enable HAVE_GNOME_DESKTOP by default in our
	application
	* src/bacon-video-widget-xine.c: 
	(bacon_video_widget_set_proprietary_plugins_path): add
	/usr/lib/RealPlayer9/Codecs/ as a possible path for Realplayer codecs
	* src/totem-pl-parser.c: (totem_pl_parser_write),
	(totem_pl_parser_add_pls), (totem_pl_parser_add_desktop): fix
	.pls reading and writing (damn), fix .desktop parsing
	* src/totem-playlist.c: (totem_playlist_error),
	(totem_playlist_save_current_playlist): add an error message
	when we couldn't save the playlist
	* src/totem.c: (totem_action_error): escape the url for display
	before showing it in the error message

2003-10-13  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_proprietary_plugins_path): add some additional
	paths to link to from Realplayer 8 and 9 (Closes: #124459)

============ Version 0.99.6

2003-10-12  Bastien Nocera  <hadess@hadess.net>

	* configure.in: pump up to 0.99.6
	* src/Makefile.am: build fixes

2003-10-12  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_add_directory): oopsie,
	if the file is not special, then we need the directory parser to add
	it manually by itself, not discard it

2003-10-12  Bastien Nocera  <hadess@hadess.net>

	* README:
	* src/totem-statusbar.c: (totem_statusbar_update_time):
	* src/totem.c: (update_mrl_label): sort out the 0 length vs.
	streaming mess

2003-10-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (parse_asx_entry): forgot to port a fix
	for the ASX parser

2003-10-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_parse): add the ignore
	mimetypes from the playlist rather than from the parser to keep
	the title unchanged (yet another Audio CD fix)

2003-10-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_add_m3u): ignore empty lines
	in m3u files (fixes parsing of the magnatune playlists)

2003-10-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_ignore),
	(totem_pl_parser_parse): fix parsing of directories with non-dual
	and non-special mimetypes

2003-10-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-pl-parser.c: (totem_pl_parser_add_pls),
	(totem_pl_parser_ignore): fix parsing of .pls playlists (ie. don't
	whinge if there's no files in it)

2003-10-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_mrl_to_title),
	(totem_playlist_save_get_iter_func),
	(totem_playlist_save_current_playlist),
	(gtk_tree_selection_has_selected): do the saving using the parser
	as well, nifty (not tested obviously, i'm so dazed by the visuals
	of my running version that i won't stop it)

2003-10-10  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added gnome-vfs-module as a dep (urgh!)
	* src/.cvsignore: upd
	* src/Makefile.am: upd
	* src/totem-pl-parser.[ch]: build from Colin Walters' work on
	splitting out the parsing code from the playlist to another object
	* src/totem-playlist.c: (totem_playlist_entry_parsed),
	(totem_playlist_init), (totem_playlist_finalize),
	(totem_playlist_add_mrl): updated the playlist to use the new parser
	* src/totemplparser-marshal.list: added

2003-10-10  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_tick_send):
	oopsie, the tick wasn't sent when there wasn't a logo ;)

2003-10-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_add_one_mrl),
	(totem_playlist_add_mrl): add a work-around for huge playlists so
	that we try to guess by name first (that fixes loading the remote
	playlists with ~500 entries on magnatune.com)

2003-10-10  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_unrealize):
	only switch off the visual effects if we're not paused, fixes a
	deadlock on exit

2003-10-07  Bastien Nocera  <hadess@hadess.net>

	* README: remove a TODO item
	* src/bacon-video-widget-gst.c: (got_time_tick):
	* src/bacon-video-widget-xine.c: (bacon_video_widget_tick_send):
	modify backends to only send ticks when playing back a movie
	* src/totem.c: (update_skip_to), (update_mrl_label),
	(update_current_time): update the skip to spinner as we receive
	different stream lengths

2003-10-07  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_add_mrl): oops, return when
	a blacklisted scheme was used in the filename (fixes the audio CD
	tracks appearing twice)

2003-10-07  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_take_screenshot1_activate): scale down using
	gnome_thumbnail_scale_down_pixbuf instead of gdk_pixbuf_scale_simple

2003-10-07  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init):
	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(bacon_video_widget_idle_signal), (xine_event):
	* src/bacon-video-widget.h:
	* src/totem.c: (on_speed_warning_event), (video_widget_create):
	added support for XINE_EVENT_DROPPED_FRAMES event on the xine-side,
	add the "speed-warning" signal to BaconVideoWidget, still need
	to implement the GUI on the Totem side
	See for details:
	http://sourceforge.net/mailarchive/forum.php?thread_id=2753813&forum_id=7131

2003-10-07  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (setup_config),
	(bacon_video_widget_tick_send), (bacon_video_widget_play),
	(bacon_video_widget_pause): fix a possible crash when setting the
	GError in bacon_video_widget_play, do a xine_play when the stream
	is paused *and* not playing, stop live streams on pause
	(Closes: #123557)
	* src/debug.h: fix warning
	* src/totem.c: (on_play_pause_button_clicked),
	(on_previous_button_clicked), (on_next_button_clicked),
	(on_buffering_event): add profiling to a couple of totem functions, 
	only create a buffering dialog if the buffering is below 100%

2003-10-06  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* src/totem-download.c: fix warnings
	* src/totem-playlist.c: (write_string), (ensure_shuffled),
	(totem_playlist_add_mrl_with_data), (totem_playlist_add_mrl):
	fix warnings
	* src/totem.c: (totem_action_drop_files): don't transform URIs into
	local filenames, fixes drag'n'dropping local files with percentages
	in their name

2003-10-06  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.h: sort the functions by type

2003-10-05  Mugurel Tudor  <mugurelu@go.ro>

	* configure.in: Added 'ro' to ALL_LINGUAS

2003-10-05  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (main): fix seeking

2003-10-04  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_seek),
	(bacon_video_widget_get_position):
	* src/bacon-video-widget.h:
	* src/totem-playlist.c:
	* src/totem-playlist.h:
	* src/totem-video-thumbnailer.c:
	* src/totem.c: (on_about1_activate), (main): couple of warnings fixes

2003-10-04  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init),
	(got_stream_length), (got_time_tick): Fixing seeking, stream length
	and current position.

2003-10-04  Bastien Nocera  <hadess@hadess.net>

	* configure.in: more warnings
	* src/bacon-video-widget-gst.c: (got_stream_length),
	(got_time_tick), (got_error), (bacon_video_widget_play),
	(bacon_video_widget_seek), (bacon_video_widget_seek_time),
	(bacon_video_widget_set_show_visuals),
	(bacon_video_widget_get_visuals_list),
	(bacon_video_widget_get_auto_resize), (bacon_video_widget_new):
	more fixes for the gstreamer backend

2003-10-04  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init),
	(got_time_tick), (bacon_video_widget_play),
	(bacon_video_widget_seek), (bacon_video_widget_seek_time),
	(bacon_video_widget_pause): update the gstreamer widget

2003-10-04  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(bacon_video_widget_tick_send), (bacon_video_widget_play),
	(bacon_video_widget_seek), (bacon_video_widget_seek_time),
	(bacon_video_widget_set_property),
	(bacon_video_widget_get_property), (bacon_video_widget_pause),
	(bacon_video_widget_get_position),
	(bacon_video_widget_get_current_time),
	(bacon_video_widget_is_playing):
	* src/bacon-video-widget.h:
	* src/totem.c: (totem_action_play_pause): remove get and set_speed,
	use play/pause instead, fix seeking while paused

2003-10-04  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(bacon_video_widget_unrealize), (bacon_video_widget_tick_send),
	(show_vfx_update), (bacon_video_widget_play),
	(bacon_video_widget_seek), (bacon_video_widget_seek_time),
	(bacon_video_widget_close), (bacon_video_widget_get_property),
	(bacon_video_widget_set_logo), (bacon_video_widget_get_position):
	* src/bacon-video-widget.h:
	* src/baconvideowidget-marshal.list:
	* src/bvw-test.c: (on_eos_event), (main):
	* src/totem-video-thumbnailer.c: (main):
	* src/totem.c: (totem_action_eject), (totem_action_play),
	(totem_action_seek), (totem_action_set_mrl_and_play),
	(totem_action_play_pause), (totem_action_set_mrl),
	(totem_action_seek_relative), (update_current_time),
	(seek_slider_released_cb), (totem_action_open_files),
	(commit_hide_skip_to), (totem_action_remote):
	* src/totem.h:
	* src/vanity.c: (video_widget_create), (process_command_line),
	(main): split bvw_play() into bvw_play, bvw_seek() and bvw_seek_time()
	seeking while paused is still broken, make the API a bit more GObject-
	like

2003-09-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (treeview_row_changed): and don't crash
	when we're not in shuffle mode

2003-09-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (treeview_row_changed): also handle
	changing the current_shuffled song index when double-clicking (oops)

2003-09-27  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (update_current_from_playlist),
	(ensure_shuffled), (totem_playlist_init), (totem_playlist_new),
	(totem_playlist_add_one_mrl), (totem_playlist_set_previous),
	(totem_playlist_set_next): fix a couple of crashers, when starting
	playback, use the first item of the shuffled playlist, not the first
	of the non shuffled one (so opening totem, dropping a bunch of files
	and pressing play will play all the files)

2003-09-27  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_save_current_playlist),
	(update_current_from_playlist), (totem_playlist_remove_files),
	(compare_random), (ensure_shuffled), (shuffle_button_toggled),
	(totem_playlist_add_one_mrl), (totem_playlist_add_mrl),
	(totem_playlist_has_previous_mrl), (totem_playlist_has_next_mrl),
	(totem_playlist_set_previous), (totem_playlist_set_next),
	(totem_playlist_set_at_end): hopefully, make shuffle work

2003-09-26  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* src/cd-drive.c: (linux_bsd_media_type), (add_whitelist),
	(get_device_max_speed), (add_linux_cd_recorder),
	(add_linux_cd_drive), (linux_scan):
	* src/cd-drive.h:
	* src/dvd_plus_rw_utils.cpp:
	updated from libbacon.

	* src/egg-recent-item.c: (egg_recent_item_ref),
	(egg_recent_item_unref):
	* src/egg-recent-item.h:
	updated from libegg.


2003-09-26  Bastien Nocera  <hadess@hadess.net>

	* data/playlist.glade:
	* data/totem.glade:
	* data/totem.schemas.in:
	* src/totem-playlist.c: (totem_playlist_save_current_playlist),
	(totem_playlist_remove_files), (shuffle_button_toggled),
	(update_shuffle_cb), (init_config), (totem_playlist_init),
	(totem_playlist_add_one_mrl), (parse_asx_entry),
	(totem_playlist_set_previous), (totem_playlist_get_shuffle),
	(totem_playlist_set_shuffle), (totem_playlist_set_at_end),
	(totem_playlist_class_init):
	* src/totem-playlist.h:
	* src/totem.c: (on_shuffle_mode1_toggled),
	(playlist_shuffle_toggle_cb), (totem_callback_connect):
	starts of a shuffle playlist, fix parsing of ASX playlists (fixes
	playback of sr.se)

2003-09-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_save_size), (totem_action_exit),
	(totem_action_fullscreen_toggle): fix saving the size of the widget
	before going to fullscreen, or on exit if we're not in fullscreen
	(Closes: #123109)

2003-09-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_open_files): close and stop the stream
	before trying to open the CD tracks, fixes run-time warning, and
	delay getting the CD track titles

2003-09-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_add_recent),
	(totem_add_cd_track_name), (totem_action_open_files):
	fix memleaks when using "dvd:" or "cd:" on the command-line,
	get the title of all the tracks when reading an Audio CD
	(Closes: #122821)

2003-09-22  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: fix mnemonic for the audio drop-down
	* src/bacon-video-widget-xine.c: fix compile-time warning

2003-09-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_instance_init), (bvw_config_helper_string),
	(bvw_config_help_num), (setup_config), (setup_config_video),
	(bacon_video_widget_set_media_device),
	(bacon_video_widget_set_proprietary_plugins_path),
	(bacon_video_widget_set_visuals_quality),
	(bacon_video_widget_set_audio_out_type): add bvw_config_helper_string
	and bvw_config_help_num working-around the crummy config system from
	xine, fix codepath for the proxy (the code to set the proxy was never
	executed) (Closes: #122212), partially fix #122580 with the new config
	changes (AC-3 passthrough not instant-apply)

2003-09-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c:
	* src/bacon-video-widget-xine.c:
	* src/bacon-video-widget.h: remove the _eject() command, nothing to
	do in there
	* src/totem.c: (totem_action_eject), (on_eject1_activate):
	use the "eject" command to eject CDs instead of xine-lib's internal
	one, more reliable (Closes Debian BTS #211968)

2003-09-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_key_press),
	(totem_playlist_new):
	* src/totem.c: (totem_action_handle_key), (video_widget_create):
	make it possible to delete playlist entries with the "Delete" key
	(Closes: #122823), fix handling of F10+modifier other than Shift

2003-09-20  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: Added more access keys (Patch from Piers Cornwell
	<piers@myrealbox.com>)

2003-09-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key): make Shit+F10 display the
	popup menu (Closes: #122799)

2003-09-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_set_mrl): set the File->Properties
	menu item unsensitive if we didn't manage to open a file, or we
	opened the logo (Closes: #122794)

2003-09-19  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* src/totem-playlist.c: (totem_playlist_add_directory):
	Remove debug.

2003-09-16  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_set_fullscreen): Fix scaling when going
	fullscreen.

2003-09-16  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_finalize):
	Possible fix for bug #120119.

2003-09-16  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_instance_init),
	(got_vis_video_size), (bacon_video_widget_open),
	(bacon_video_widget_new): fixing bug #118533, fixing visualisation but
	we will need gstreamer-0.6.4 soon, and fixing compilation warning.

2003-09-16  Julien MOUTTE <julien@moutte.net>

	* src/gstvideowidget.c: (gst_video_widget_size_request),
	(gst_video_widget_allocate), (gst_video_widget_set_xembed_xid),
	(gst_video_widget_set_source_size): Updating gstvideowidget from
	gst-player 0.6.0. This one handles correctly scaling.

============ Version 0.99.5

2003-09-15  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* configure.in: version 0.99.5

2003-09-12  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/rhythmbox-volume-medium.png:
	* data/rhythmbox-volume-min.png: removed
	* data/totem.glade: upd
	* src/totem.c: (totem_action_volume_relative),
	(update_volume_sliders), (vol_cb), (on_volume_mute_button),
	(on_volume_max_button), (totem_callback_connect):
	change the volume sliders to have a button on each side, allowing
	to mute and set to the max the volume, in one click (Closes: #117764)

2003-09-11  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_time_to_string):
	* src/totem-properties-page.c:
	(bacon_video_widget_properties_time_to_string): plural handling
	patch with ngettext (patch from <tvainika+gnomebugs@cc.hut.fi>)

2003-09-11  Bastien Nocera  <hadess@hadess.net>

	* README: updated

2003-09-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (totem_action_info),
	(totem_prefs_set_show_visuals), (on_tvout_toggled),
	(on_button1_clicked), (visual_menu_changed):
	* src/totem.c: (totem_action_error),
	(totem_action_error_try_download), (totem_action_error_and_exit),
	(totem_action_play), (totem_action_load_media),
	(totem_action_set_mrl), (totem_action_seek_relative),
	(on_error_event), (on_open_location1_activate),
	(on_eject1_activate), (on_take_screenshot1_activate),
	(on_properties1_activate), (commit_hide_skip_to),
	(video_widget_create), (main):
	* src/totem.h: HIG-ify the error dialogs

2003-09-11  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* src/totem.c: (totem_action_set_mrl_and_play),
	(totem_action_set_mrl), (totem_action_previous),
	(totem_action_next), (totem_action_drop_files),
	(on_playlist_button_toggled), (update_current_time),
	(totem_action_open_files), (screenshot_make_filename_helper),
	(screenshot_make_filename), (on_take_screenshot1_activate),
	(popup_hide), (on_video_motion_notify_event), (update_buttons),
	(main): s/== TRUE/!= FALSE/, and fixed double-free that might end
	up with mighty weird hangs in _int_malloc

2003-09-07  Bastien Nocera  <hadess@hadess.net>

	* src/totem-playlist.c: (totem_playlist_add_mrl): work-around the
	gnome-vfs cdda method being quite crappy

2003-09-05  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (setup_config_video),
	(bacon_video_widget_realize), (bacon_video_widget_unrealize),
	(bacon_video_widget_play), (bacon_video_widget_set_speed),
	(bacon_video_widget_set_visuals): better solution for changing
	visual plugins when the engine is paused, still avoiding the lockup

2003-09-05  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_exit),
	(totem_action_fullscreen_toggle): save the video widget's size on
	exit, not when switching to fullscreen (thanks to Sebastien Bacher
	for the report)

2003-09-05  Taneem Ahmed  <taneem@bengalinux.org>

	* configure.in: Added "bn" to ALL_LINGUAS.

2003-09-05  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/bacon-video-widget-xine.c: (bacon_video_widget_set_speed):
	release the sound card with the xine backend if xine-lib is new
	enough to allow that feature

2003-09-04  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-cd-selection.h:
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_instance_init),
	(bacon_video_widget_size_request), (bacon_video_widget_eject),
	(bacon_video_widget_get_auto_resize),
	(bacon_video_widget_get_audio_out_type):
	* src/bvw-test.c: (main):
	* src/scrsaver.c: (scrsaver_disable), (scrsaver_enable):
	* src/totem-download.c: (cab_download),
	(totem_download_from_fourcc):
	* src/totem-playlist.c: (totem_playlist_add_m3u),
	(totem_playlist_add_mrl):
	* src/totem-preferences.c: (on_checkbutton2_toggled),
	(on_button1_clicked), (totem_setup_preferences),
	(totem_preferences_tvout_setup):
	* src/totem.c: (totem_action_error_try_download),
	(totem_action_load_media), (create_submenu),
	(update_dvd_menu_sub_lang):
	* src/vanity.c: (drag_video_cb):
	* src/video-dev.c: (linux_add_video_dev):
	* src/video-utils.c:

	Updated everything from libbacon, remove all the -Wall warnings,
	Work-around xscreensaver not using XSetScreenSaver (Closes: #121473)

============ Version 0.99.4

2003-09-03  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* configure.in: pump up to 0.99.4

2003-09-01  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: back out a couple of changes made by an old version
	of glade (Closes: #121136)
	* src/bacon-video-widget-xine.c: (bacon_video_widget_close):
	emit the channel-changed signal when closing a file, fixes the
	subtitles and languages menus still being populated after removing a
	DVD from the playlist

============ Version 0.99.3

2003-08-31  Bastien Nocera  <hadess@hadess.net>

	* README: updated NEWS
	* configure.in: pump up to 0.99.3

2003-08-31  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (screenshot_make_filename_helper),
	(screenshot_make_filename): take into account the "Home dir as Desktop"
	preference when saving the screenshots to the desktop (thanks to
	Ross Burton for pointing it out)

2003-08-31  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_set_mrl): set the take screenshot menu
	item unsensitive if no file has been opened (Closes: #119901)

2003-08-30  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-resize.c: put the XRandR includes inside ifdef's,
	spotted by David Collett <jg@webone.com.au>

2003-08-28  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* data/totem.glade:
	Screenshot file selector should be modal otherwise it freezes UI.

2003-08-28  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* src/totem-preferences.c: (on_button1_clicked):
	Use Konqueror instead of nautilus if running under KDE.
	Run nautilus with --no-desktop to prevent it from managing desktop.

2003-08-27  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_set_visuals):
	work-around a deadlock when unwiring the post plugin with the xine
	engine paused

2003-08-26  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: removed ICON_PATH from the CFLAGS
	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init),
	(bacon_video_widget_open), (bacon_video_widget_get_speed),
	(bacon_video_widget_set_visuals),
	(bacon_video_widget_set_visuals_quality),
	(bacon_video_widget_get_type): removed useless debug, fixed runtime
	warning
	* src/bacon-video-widget-xine.c: (bacon_video_widget_get_type),
	(bacon_video_widget_class_init),
	(bacon_video_widget_instance_init), (bacon_video_widget_finalize),
	(frame_output_cb): removed unused icon private member
	* src/bacon-video-widget.h: make the video widget descend from a
	GtkBox instead of a GtkVBox

2003-08-26  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-cd-selection.h: upd from libbacon

2003-08-07  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: s/langage/language/ (Closes: #119295)

2003-08-06  Metin Amiroff <metin@karegen.com>

	* configure.in: Added "az" (Azerbaijani) to ALL_LINGUAS

2003-08-03  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-resize.c:
	* src/bacon-resize.h: change the headers to reflect the LGPL
	copyright

2003-08-03  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-resize.c: (bacon_resize): make sure that the resizing
	works even when the resolutions from XRandR aren't sorted

2003-08-03  Telsa Gwynne  <hobbit@aloss.ukuu.org.uk>

	* configure.in: Added "cy" (Welsh) to ALL_LINGUAS

2003-08-02  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications: added startup notify key so that Nautilus
	can give us an hourglass when opening a file

2003-08-02  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/totem-playlist.c: (totem_playlist_add_directory): fix recursive
	directory loading when a unix local path is passed

2003-08-01  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in: fix missing ">" (Closes: #118710)

2003-07-31  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in: add full stops at the end of the long
	descriptions (Closes: #118710)

2003-07-30  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_load_media): change the "Install..." to
	"Please install...", tell the type of media that the user tried to play
	in the error message (Closes: #118658)

2003-07-30  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in: added window_w and window_h entries
	* src/bacon-video-widget-xine.c: (bacon_video_widget_new),
	(bacon_video_widget_size_allocate): fix first widget size allocation
	when a widget size has been given specifically
	* src/totem.c: (totem_action_fullscreen_toggle),
	(totem_setup_window), (video_widget_create), (main): save and restore
	the size of the video widget across sessions (Closes: #118526)

2003-07-30  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in: added "window_on_top" item, updated docs
	for the audio output
	* src/totem-preferences.c: (totem_setup_preferences):
	* src/totem.c: (gui_update_cb), (on_always_on_top1_activate),
	(popup_hide), (on_video_button_press_event),
	(totem_action_handle_key), (totem_callback_connect),
	(totem_setup_recent): remember the "Always On Top" setting across
	sessions (Closes: #114162)

2003-07-30  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-resize.c: (bacon_resize_init): disable xrandr's
	automatic resize, it's broken :/
	* src/totem.c: (totem_action_exit): switch off fullscreen in the
	video widget before exiting

2003-07-29  Bastien Nocera  <hadess@hadess.net>

	* README: removed TODO item
	* src/totem-playlist.c: (totem_playlist_add_directory): implement
	recursive directory loading (Closes: #118516)

2003-07-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (main): call nice() before
	initialising threads to make glib shut up, check that there is a
	GError coming out of bacon_video_widget_can_get_frames before
	printing it (Closes: #118587)

2003-07-29  Bastien Nocera  <hadess@hadess.net>

	* README: removed TODO item
	* src/totem.c: (popup_hide), (totem_callback_connect): hide the popups
	when we're changing workspaces so that they don't follow us around

2003-07-28  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/bacon-cd-selection.h: upd from libbacon
	* src/bacon-v4l-selection.[ch]:
	* src/video-dev.[ch] added the V4l Video device selection widget
	from libbacon

2003-07-26  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/totem-remote.c: (totem_remote_init): make lirc silent on startup

2003-07-25  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_realize),
	(bacon_video_widget_set_visuals): switch on-the-fly between visual
	plugins

2003-07-24  Bastien Nocera  <hadess@hadess.net>

	* src/cd-drive.c: (get_device_max_speed), (get_scsi_cd_name),
	(add_linux_cd_recorder): upd from libbacon
	* src/totem-playlist.[ch]: couple of coding style cleanups
	* src/totem.c: (on_got_metadata_event): update the playlist title
	when playing a CD with CDDB

2003-07-23  Bastien Nocera  <hadess@hadess.net>

	* data/vanity.glade: removed the placeholder
	* src/Makefile.am:
	* src/gtk-playlist.[ch]:
	* src/totem-playlist.[ch]:
	* src/totem-playlist.h:
	* src/totem-private.h:
	* src/totem.c: renamed the GtkPlaylist widget to TotemPlaylist

2003-07-22  Wang Jian  <lark@linux.net.cn>

	* configure.in: Added "zh_CN" to ALL_LINGUAS.

2003-07-19  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: link vanity against the gnome-vfs authentication
	manager (fixes building on GNOME 2.2.x)

2003-07-18  Bastien Nocera  <hadess@hadess.net>

	* src/.cvsignore: upd
	* src/Makefile.am: upd
	* src/bacon-video-widget-xine.c: (bacon_video_widget_unrealize),
	(bacon_video_widget_new): fixed 2 potential crashes
	* src/bvw-test.c: added a test program
	* src/totem.c: (on_video_motion_notify_event): maybe fix the popup
	placement issue for good?

2003-07-16  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: remove accelerators from the tab labels

2003-07-15  Bastien Nocera  <hadess@hadess.net>

	* configure.in: fix libcurl detection for version equal to the
	requirements

2003-07-15  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_play), (totem_action_set_mrl): unescape
	the MRLs for display before using them in the error messages

2003-07-15  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_idle_signal),
	(xine_event_message): pass the error messages events through the async
	handler (Closes: #117151, maybe)

2003-07-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_open_files): don't open files with
	relative paths and 2 dashes in front (ie. don't try to open command-line
	arguments) (Closes: #117359)

2003-07-13  Julien MOUTTE <julien@moutte.net>

	* src/gstvideowidget.c: Fixing indentation, and a bug when
	visualisation window resizes itself the widget needs to queue a
	resize request.
	* src/gstvideowidget.h: Adding a method to destroy embedded window.

2003-07-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem-remote.h:
	* src/totem.c: (totem_action_remote),
	(totem_message_connection_receive_cb), (process_command_line):
	don't gtk_window_present when enqueuing or replacing items in the
	playlist, but do so if totem is ran without any arguments (lost your
	Totem window under your windows? :)

2003-07-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_load_media),
	(totem_action_play_media): check if we could actually get any mrls
	before starting playback of a media being loaded (Closes: #117160)

2003-07-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (time_monitor): don't tell nautilus
	that the file can't be thumbnailed if it takes too long to do so

2003-07-11  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_audio_out_type):
	* src/bacon-video-widget.h: also do ac3 passthrough with the audio
	output configuration

2003-07-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in: fix detection of curl with 2 digits in either the
	major, minor or micro version, and fix the tests to actually compare
	version correctly (Spotted by Frederic Crozat, fixed with help
	from James Henstridge)

2003-07-09  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: oopsie, forgot $(XRANDR_LIBS) for
	totem-properties-page (Closes: #117073)

2003-07-07  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am:
	* src/bacon-cd-selection.[ch]:
	* src/cd-drive.[ch]:
	* src/dvd_plus_rw_utils.cpp:
	* src/egg-recent-model.c: (egg_recent_model_read_raw): memleak fix
	from Kjartan Maraas, upd from libegg
	* src/transport.hxx: updated from libbacon

2003-07-06  Gil "Dolfin" Osher <dolfin@rpg.org.il>

	* configure.in: Added "he" (Hebrew) to ALL_LINGUAS.

============ Version 0.99.2

2003-07-07  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* configure.in: pumped up to 0.99.2
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_instance_init): start the timeout for 140 msec,
	should be often enough
	* src/totem.c: (on_about1_activate): added Julien in the about box,
	updated copyright notice

2003-07-05  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added subst for RANDR_LIBS
	* src/Makefile.am: added RANDR_LIBS, should fix compilation on some
	machines
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_audio_out_type): removed debug

2003-07-03  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_metadata_string): if the metadata isn't UTF-8,
	try to transform it into that, fixes display of non-UTF-8 id3 tags

2003-07-03  Bastien Nocera  <hadess@hadess.net>

	* AUTHORS: added Julien
	* README: updated
	* configure.in: added a little echo to show which backend is used
	when configure finished
	* src/bacon-video-widget-xine.c: (bacon_video_widget_unrealize):
	xine_stop the stream before closing it, fixes the long time periods
	when closing the application while something was playing
	* src/totem-preferences.c: (totem_prefs_set_show_visuals): really
	set the visuals in the video widget on startup

2003-07-02  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: a real audio file starting with http:// will
	be recognised as text/plain, let's handle that

2003-07-02  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: now it's totem depending on scrscaver, not the
	whole video widget
	* src/scrsaver.c: (fake_event), (scrsaver_new), (scrsaver_disable),
	(scrsaver_enable): rewrite most bits so the locking is correct,
	don't try to set g_timeout_adds of 0, get the screensaver intervals
	when disabling/enabling it
	* src/scrsaver.h: don't need the display
	* src/totem.c: (video_widget_create): re-enable the screensaver stuff
	This all fixes the "Why don't I get my expose events" bug

2003-07-02  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-resize.c: (bacon_resize_init): lock the display before
	testing for existence of the extension
	* src/scrsaver.c: (scrsaver_new): the screensaver timeout is in seconds
	and the timeout for the g_timeout_add in msec
	* src/totem-preferences.c: (totem_prefs_set_show_visuals),
	(on_checkbutton2_toggled), (totem_setup_preferences): update
	the visuals drop-down correctly on startup if they are disabled
	* src/totem.c: (video_widget_create), (main): move the screensaver
	creation before the video widget creation, and disable for now,
	it seems to be causing expose events to never reach the application

2003-07-02  Jordi Mallach  <jordi@sindominio.net>

	* data/totem.desktop.in, data/vanity.desktop.in: Replace "0" with
	"false" in Terminal entries.

2003-07-01  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_metadata_string): set the string as NULL
	if there's no data in it, fixes " - " style titles

2003-07-01  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_unrealize):
	close the stream before hiding the window

2003-06-30  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/gtk-playlist.c: (gtk_playlist_base_url),
	(gtk_playlist_add_m3u), (gtk_playlist_add_asx),
	(gtk_playlist_add_smil): the m3u playlist parser now supports
	relative URIs and paths, should make it possible to launch
	m3u files from CD-Roms, be them dos-text files or unix ones

2003-06-30  Bastien Nocera  <hadess@hadess.net>

	* README: removed screensaver TODO item
	* configure.in: added check for XRandR for XFree86 4.3.0
	* src/bacon-resize.c: (bacon_resize_init), (bacon_resize),
	(bacon_resize_get_current), (bacon_restore): fix compilation with
	XFree86 < 4.3.0
	* src/scrsaver.c: (fake_event), (scrsaver_new), (scrsaver_disable),
	(scrsaver_enable): fix screensaver functions not poking the root window
	often enough

2003-06-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (screenshot_make_filename_helper): fix the location
	of the default Desktop for GNOME

2003-06-29  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* data/totem.desktop.in: 
	* data/vanity.desktop.in: moved the applications to the main Red Hat
	and Ximian GNOME menus

2003-06-29  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/totem.c: (process_command_line), (main): removed FIXME about the
	libXi bug, it's fixed now, changed default command-line action to
	replace, not enqueue (Closes: #107997)

2003-06-29  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/Makefile.am: remove languages.h
	* src/bacon-resize.[ch]: added
	* src/bacon-video-widget-xine.c: (frame_output_cb), (setup_osd),
	(bacon_video_widget_realize), (bacon_video_widget_unrealize),
	(bacon_video_widget_play), (bacon_video_widget_set_fullscreen):
	change the screen resolution automatically depending on the movie
	dimensions when switching to fullscreen, uses the auto resize setting,
	takes aspect ratio into account (Closes: #113193)
	disable all the OSD stuff for now
	* src/languages.h: removed
	* src/totem-video-thumbnailer.c: (time_monitor), (main): fixed seeking
	to a third into the stream (swapped args), implement the time monitor
	thread so that thumbnailing doesn't take more than 30 secs
	* src/totem.c: (create_submenu), (totem_action_fullscreen_toggle): we
	now get directly the language, and not a code for it; the video widget
	is supposed to know when to use the auto-resize or not

2003-06-27  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_audio_out_type),
	(bacon_video_widget_set_audio_out_type), (bacon_video_widget_open),
	(bacon_video_widget_can_play): Preparing the can play function for a
	future audio cd support, fixed new methods breaking build
	audio_out_type.

2003-06-27  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/bacon-video-widget-xine.c: (xine_event_message),
	(xine_event): change the message when a destination doesn't resolve,
	implement reference MRLs as close/open calls
	* src/gtk-playlist.c: (gtk_playlist_add_m3u): patch from Ofer Achler
	to allow Totem to read Winamp m3u files with SMB locations
	(Closes: #110129)

2003-06-25  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* data/totem.glade: remove trailing spaces (Closes: #115893)
	* data/totem.schemas.in: fix text (thanks Menthos) (Closes: #115894)
	* src/bacon-video-widget-xine.c: (setup_osd),
	(setup_config_stream), (bacon_video_widget_realize),
	(bacon_video_widget_unrealize), (bacon_video_widget_play):
	first try at OSD display on audio-only streams

2003-06-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem-private.h:
	* src/totem.c: (update_mrl_label), (on_error_event),
	(update_seekable), (show_controls), (totem_is_fullscreen),
	(on_video_motion_notify_event): plenty of code style cleanups,
	fix the controls popup window not having the right position when first
	appearing

2003-06-24  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: added a drop-down menu for the audio output
	configuration
	* data/totem.schemas.in: ditto
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_audio_out_type),
	(bacon_video_widget_set_audio_out_type): added
	* src/bacon-video-widget.h: upd
	* src/totem-preferences.c: (audio_out_menu_changed),
	(totem_setup_preferences): it's now possible to change the type
	of audio output, like stereo, 4.0, 5.0 and 5.1 channels
	(Closes: #115783)

2003-06-22  Julien MOUTTE <julien@moutte.net>

	* README: upd, updated gst TODO list
	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_set_visuals_quality): Synchronized visuals quality
	to match xine backend ones.

2003-06-22  Julien MOUTTE <julien@moutte.net>

	* README: upd, updated gst TODO list
	* src/bacon-video-widget-gst.c: (bacon_video_widget_play): Implemented
	seek_to support.

============ Version 0.99.1

2003-06-22  Bastien Nocera  <hadess@hadess.net>

	* README: upd, added a gst TODO list
	* configure.in: 0.99.1
	* data/Makefile.am: fixed dependencies
	* data/totem.applications: added audio/mpeg
	* data/totem.keys: ditto

2003-06-22  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_video_property),
	(bacon_video_widget_set_video_property): Fixing build failure

2003-06-22  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: changed the names of the scales for brightness
	and contrast
	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_video_property),
	(bacon_video_widget_set_video_property): added dummy functions
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_video_property): fixed an inverted test
	* src/totem-preferences.c: (brightness_changed),
	(contrast_changed), (totem_setup_preferences): change the brightness
	and contrast when somebody wiggles these scales (Closes: #112788)

2003-06-21  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: upd
	* data/stock-tool-brightness-contrast-22.png: added
	* data/totem.glade: added a nice brightness/contrast icon from the GIMP
	* data/totem.schemas.in: added brightness and contrast
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_instance_init), (setup_config),
	(setup_config_stream), (bacon_video_widget_realize),
	(bacon_video_widget_open), (bacon_video_widget_set_logo),
	(bacon_video_widget_set_visuals_quality),
	(bacon_video_widget_get_mrls),
	(bacon_video_widget_set_scale_ratio),
	(bacon_video_widget_get_video_property),
	(bacon_video_widget_set_video_property): added a widget-wide
	GConfClient, configure the brightness and contrast on startup, tweaks
	to get goom fast enough on a decent machine, 
	* src/bacon-video-widget.h: added brightness and contrast functions
	* src/totem.c: (totem_action_set_mrl), (screenshot_make_filename):
	don't set the GError twice, try to write on ~/Desktop too, as it's the
	new GNOME default

2003-06-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem-download.c: (cab_download_from_td_try): try downloading from
	the 2 servers, not both times from the same one
	* src/totem-video-thumbnailer.c: (main): try to playback from '0' if
	playing back from a third fails, fixes thumbnailing small streams even
	more

2003-06-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_video_motion_notify_event): fix a crash when
	using the mousewheel in fullscreen (Closes: #115463)

2003-06-20  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_set_mrl), (on_got_metadata_event),
	(update_dvd_menu_sub_lang): set the labels and playlist items when
	we get the metadata properly, fixes setting the labels with both
	backends, update subtitles and audio menus on non-DVDs as well,
	fixes OGM subtitles

2003-06-20  Bastien Nocera  <hadess@hadess.net>

	* README: updated with the latest fixes

2003-06-16  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init),
	(got_error), (bacon_video_widget_get_metadata_string): error signal
	now indicates if playback has been stopped so that UI can update.
	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(xine_event_message): Applied the same change to xine backend.
	* src/bacon-video-widget.h: Changed signal prototype.
	* src/baconvideowidget-marshal.list: Added a STRING_BOOLEAN.
	* src/totem.c: (totem_action_error), (on_got_metadata_event),
	(on_error_event): updating depending on error signal and changing
	playlist title on metada event.

2003-06-16  Kjartan Maraas  <kmaraas@gnome.org>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_information):
	Make it compile again with gcc 2.9x.

2003-06-15  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (update_vis_xid), (update_xid),
	(bacon_video_widget_open), (bacon_video_widget_play),
	(bacon_video_widget_set_visuals), (bacon_video_widget_information):
	Removing some unneeded debug messages.
	* src/totem.c: (totem_action_error), (on_got_metadata_event): Updating
	title label on got_metadata event, changing play_pause label on error.

2003-06-15  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-gst.c: Fixed indentation, cleaning hash table
	that has metadata, emit the got_metadata signal on get_length, other
	fixes

2003-06-15  Yanko Kaneti  <yaneti@declera.com>

	* configure.in (ALL_LINGUAS): Added "bg" (Bulgarian).

2003-06-13  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_set_volume),
	(bacon_video_widget_get_volume): Fixed volume slider setting/getting
	volume. Thanks to kmaraas.

2003-06-12  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade: remove unneeded gnome dependency
	* src/bacon-video-widget-properties.c: remove the separator
	(bacon_video_widget_properties_new):
	* src/totem-download.c: (cab_extract),
	(cab_url_from_fourcc_with_url), (cab_download_from_td_try),
	(cab_download), (totem_download_from_fourcc):
	* src/totem.c: (totem_action_error_try_download),
	(totem_action_set_mrl): check if the codec was downloaded correctly
	before trying to play the video again

2003-06-11  Dennis Cranston <dennis_cranston at yahoo com>

	* data/totem.glade:  Fix widget padding per HIG.  Fix case of various
	strings and adds/removes mnemonics per HIG.
	
	* data/playlist.glade:  Fix case and add a missing mnemonic for check 
	item.  Set border width to be consistant with the HIG.
	
	* data/properties.glade, data/totem-download.glade,
	  data/uri.glade:  Fix widget padding per HIG.
	  
2003-06-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (main): more tweaks for thumbnailing
	small streams

2003-06-11  Bastien Nocera  <hadess@hadess.net>

	* data/schemas.sh: try to thumbnail Real Video files
	* src/totem.c: (totem_action_error_try_download): added a FIXME

2003-06-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in: fixes to get the HAVE_X86 #define right
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_can_get_frames),
	(bacon_video_widget_get_current_frame): don't whinge on 0x0 dimensions,
	probably an error, or fail later while getting the frame
	* src/totem-video-thumbnailer.c: (main): try harder to capture small
	streams, fixes thumbnailing real short films
	* src/totem.c: (totem_action_set_mrl), (totem_setup_recent):
	fix a crash on startup with setting the limit of the egg_recent stuff,
	try to reopen the movie after downloading a new codec so it can be
	played straight away, removed some unused debug

2003-06-11  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-message-connection.c: (try_server),
	(bacon_message_connection_set_callback): updated from libbacon
	* src/totem.c: (main): if we're a server, only listen to changes
	after the application is fully started, fixes a crash on startup
	when launching 2 videos from nautilus at the same time

2003-06-10  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am:
	* src/bacon-video-widget-xine.c: (bacon_video_widget_open):
	* src/totem.c: (totem_action_set_mrl), (totem_setup_recent): only
	try to auto-download codecs on x86 platforms with a recent enough
	version of libcurl, only show 5 items in the recent files list

2003-06-09  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: moved all the display preferences to another tab of
	the notebook, added GUI bits for the brightness/contrast prefs

2003-06-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (create_submenu): add a "None" entry to the subtitles
	submenu to turn them off completely (for some DVDs, "Auto" is not "No
	subtitles") (Closes: #113526)

2003-06-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_load_media),
	(totem_action_play_media), (totem_action_open_files): don't start/stop
	playing optical media files on startup (Closes: #113959)

2003-06-09  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata): check for a null GValue
	* src/totem-video-thumbnailer.c: (main): add a FIXME
	* src/totem.c: (totem_action_error_try_download): initialise the GValue
	properly before using it, fixes a segfault

2003-06-08  Bastien Nocera  <hadess@hadess.net>

	* src/video-utils.c: FreeBSD compile fix (patch by Hendrik Scholz
	<hscholz@raisdorf.net>)

2003-06-05  Julien MOUTTE <julien@moutte.net>

	* src/totem.c: (totem_action_fullscreen_toggle), (show_controls),
	(on_show_controls1_activate): Fixing the show controls menu item in
	the righ click menu. It was not handled correctly with fullscreen.

2003-06-05  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_open):
	fix compilation

2003-06-03  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* configure.in: added a curl-dev dependency
	* data/Makefile.am: upd
	* data/totem-download.glade: added
	* src/Makefile.am: upd
	* src/bacon-video-widget-xine.c: (xine_event_message),
	(bacon_video_widget_open), (bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata): fixed a bunch of warnings, save the
	fourcc's of the video and audio after closing them
	* src/bacon-video-widget.h: added fourcc fields to the metadata
	* src/totem-download.[ch]: added
	* src/totem.c: (totem_action_error),
	(totem_action_error_try_download), (totem_action_set_mrl),
	(on_error_event), (on_buffering_event): added a automatic downloader
	for the DLLs on x86 machines

2003-05-31  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (shrink_toplevel),
	(update_vis_xid), (update_xid), (got_error),
	(bacon_video_widget_set_scale_ratio), (bacon_video_widget_new): Error
	handling. It works with GStreamer's HEAD. Will be in 0.6.2. Fixing
	scale ratio and auto resize stuff with a shrink method of toplevel
	* src/gstvideowidget.h: Fixed tabs

2003-05-29  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Added "zh_TW" to ALL_LINGUAS.

2003-05-28  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (xine_event_message): fyx a tippo
	(Closes: #113915)

2003-05-28  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_mrl_to_title):
	if the filename isn't in UTF-8, try to transform it from the current
	locale, fixed filenames not showing up on older systems

============ Version 0.99.0

2003-05-27  Bastien Nocera  <hadess@hadess.net>

	* configure.in: released 0.99.0

2003-05-27  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/bacon-video-widget-xine.c: (xine_event_message),
	(xine_event), (xine_error):
	* src/totem.c: (on_recent_file_activate), (on_error_event),
	(totem_action_open_files), (video_widget_create): add more error
	handling from the xine engine (like "connection refused" dialogs, and
	stuff), don't transform the uri into a local filename before feeding
	it to the playlist when restoring from the recent files, remove the
	work-arounds in adding recent files

2003-05-27  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in: s/Wether/Whether/ (Closes: #113833)
	Thanks Menthos

2003-05-27  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/cd-drive.c: (get_scsi_units), (linux_scan), (freebsd_scan),
	(scan_for_cdroms): freebsd support and memory corruption fix
	(synced from libbacon)

2003-05-26  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* data/totem.schemas.in:
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_instance_init): Add the /apps/totem/debug entry
	to enable debug in the playback engine

2003-05-25  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/gtk-playlist.c: (gtk_playlist_add_asf_playlist),
	(gtk_playlist_add_asf), (gtk_playlist_add_mrl_with_data),
	(gtk_playlist_add_mrl): treat video/x-ms-wmv and video/x-ms-wvx
	specially, implement mmsh redirections (Closes: #109952)

2003-05-25  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_add_m3u),
	(gtk_playlist_add_asf_playlist), (gtk_playlist_add_pls),
	(gtk_playlist_add_asx), (gtk_playlist_add_ra),
	(gtk_playlist_add_smil), (gtk_playlist_add_desktop),
	(gtk_playlist_add_directory), (gtk_playlist_add_mrl_with_data),
	(gtk_playlist_add_mrl): only check for playlist and "playlist/video"
	types and add the other types straight away, it will bug the user
	when they add stuff that's not files to it, makes loading files in the
	playlist a lot faster as well

2003-05-23  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added dependency on gconf for the xine backend
	* src/bacon-video-widget-xine.c: (setup_config): set the proxy
	settings in xine with the gnome settings
	* src/totem-preferences.c: (visual_quality_menu_changed): actually
	set the quality when we popup the menu
	* src/totem.c: (totem_action_fullscreen_toggle): inform the video
	widget that we're switching to fullscreen

2003-05-22  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* data/schemas.sh: make sure we don't try to thumbnail flac files

2003-05-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_buffering_event): create the dialog when the
	buffering is > 0 so it doesn't get in the way of possible errors

2003-05-22  Bastien Nocera  <hadess@hadess.net>

	* README: removed TODO item
	* src/gtk-playlist.c: (gtk_playlist_add_nsv),
	(gtk_playlist_add_mrl): move the nsv work-around to another function
	* src/totem.c: (totem_action_error),
	(totem_action_fullscreen_toggle), (totem_action_set_mrl): set the logo
	mode before launching it or we'll get auto-resized on logo load,
	remove the buffering dialog if we get an error
	* src/vanity.c: (drag_video_cb), (video_widget_create): don't hide
	the main window if we get an error on startup

2003-05-22  Bastien Nocera  <hadess@hadess.net>

	* README: added TODO item
	* src/gtk-playlist.c: (gtk_playlist_add_mrl): added work-around for
	the nullsoft user-agent verifier

2003-05-21  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_set_visuals),
	(bacon_video_widget_set_visuals_quality),
	(bacon_video_widget_get_auto_resize),
	(bacon_video_widget_set_scale_ratio): Implemented visuals quality and
	scale ratio handling
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_auto_resize):
	* src/bacon-video-widget.h: New method for getting auto resize mode
	* src/gstvideowidget.c: (gst_video_widget_size_request),
	(gst_video_widget_allocate), (gst_video_widget_get_scale_override),
	(gst_video_widget_set_scale_override),
	(gst_video_widget_set_scale): Adding a new method for scale override
	* src/gstvideowidget.h: Adding a new method for scale override

2003-05-21  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications:
	* data/totem.keys:
	* src/gtk-playlist.c: (gtk_playlist_add_mrl): added support for the
	SWF flash files, and FLAC

2003-05-20  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_size_request),
	(bacon_video_widget_set_scale_ratio): set the size request of the
	widget if we're trying to scale to a size that's smaller than the
	current widget size (allows 'zoom 1:2' to shrink to sizes smaller than
	the default size)

2003-05-20  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_size_request),
	(bacon_video_widget_size_allocate), (bacon_video_widget_new): Throwing
	away the first_alloc static var to use the same mechanism than
	bvw-xine.

2003-05-20  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(bacon_video_widget_instance_init),
	(bacon_video_widget_size_request),
	(bacon_video_widget_size_allocate):
	* src/totem.c: (totem_action_fullscreen_toggle), (show_controls),
	(on_show_controls1_activate): patch from Julien MOUTTE
	<julien@moutte.net> to fix the hide/show controls, fullscreen,
	and auto-resize with both the xine and gst backends

2003-05-20  Bastien Nocera  <hadess@hadess.net>

	* configure.in: lower the gnome-desktop requirement
	* src/cd-drive.c: (linux_scan):
	* src/egg-recent-model.c: (egg_recent_model_get_list): updated from
	libegg and libbacon

2003-05-20  Thomas Vander Stichele <thomas at apestaart dot org>

        * configure.ac: added AC_PROG_LIBTOOL so it can compile against
          uninstalled gstreamer
          

2003-05-20  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* data/totem.keys: added video/x-nsv type

2003-05-20  Julien MOUTTE  <julien@moutte.net>

	* src/totem.c: (totem_action_fullscreen_toggle), (show_controls),
	(on_show_controls1_activate): Fixed hide/show controls and fullscreen
	the nice way. (At last...)

2003-05-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_fullscreen_toggle), (show_controls),
	(on_show_controls1_activate), (on_video_motion_notify_event):
	fix resizing of the widget when hiding/showing the controls

2003-05-19  Julien MOUTTE  <julien@moutte.net>

	* src/totem.c: (show_controls), (video_widget_create): Fixing a bug
	which was breaking the size request/allocate system of
	bacon_video_widget. Thanks to Kristian Rietveld <kris@gtk.org>.
	* src/vanity.c: (video_widget_create): Same here.

2003-05-18  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* configure.in: added dependency on gnome-desktop
	* src/gtk-playlist.c: (gtk_playlist_add_desktop),
	(gtk_playlist_add_mrl): we can now read the links .desktop files
	that we create when drag and dropping the video widget

2003-05-18  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_create_full_path), (totem_action_open_files):
	work-around another egg-recent bug wrt. local filenames

2003-05-18  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_size_request),
	(bacon_video_widget_size_allocate): Adding debug for fixing the
	allocation problem
	* src/gstvideowidget.c: (gst_video_widget_expose),
	(gst_video_widget_size_request), (gst_video_widget_allocate): Fixed
	some bugs with minimum size and putting some debug for allocation
	problem
	* src/totem.c: (totem_action_fullscreen_toggle),
	(video_widget_create): Added a name to bvw, changed fullscreen
	behaviour to disbable auto_resize

2003-05-17  Bastien Nocera  <hadess@hadess.net>

	* configure.in: really fix --disable-lirc
	* src/totem.c: (totem_create_full_path), (totem_is_media),
	(update_media_menu_items): fix playback of dvds, and all

2003-05-17  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added a --disable-lirc option for packagers

2003-05-17  Bastien Nocera  <hadess@hadess.net>

	* configure.in: fixed a warning, and make sure that Linux systems
	are detected properly

2003-05-13  Bastien Nocera  <hadess@hadess.net>

	* README:
	* data/totem.glade:
	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init),
	(bacon_video_widget_set_fullscreen), (bacon_video_widget_new):
	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(dest_size_cb), (frame_output_cb), (bacon_video_widget_realize),
	(bacon_video_widget_unrealize), (bacon_video_widget_set_property),
	(bacon_video_widget_get_property),
	(bacon_video_widget_set_fullscreen),
	(bacon_video_widget_set_show_cursor),
	(bacon_video_widget_ratio_fits_screen):
	* src/bacon-video-widget.h:
	* src/totem-preferences.c: (on_checkbutton2_toggled),
	(deinterlace_changed_cb), (auto_resize_changed_cb),
	(show_vfx_changed_cb), (mediadev_changed_cb),
	(totem_setup_preferences), (totem_preferences_tvout_setup),
	(totem_preferences_visuals_setup):
	* src/totem-private.h:
	* src/totem.c: (play_pause_set_label), (volume_set_image),
	(totem_action_fullscreen_toggle), (totem_action_fullscreen),
	(update_mrl_label), (totem_action_set_mrl), (update_seekable),
	(on_show_playlist1_activate), (show_controls),
	(on_show_controls1_activate), (on_show_controls2_activate),
	(screenshot_make_filename), (on_radiobutton_shot_toggled),
	(hide_screenshot), (on_take_screenshot1_activate),
	(commit_hide_skip_to), (spin_button_value_changed_cb),
	(on_skip_to1_activate), (toggle_playlist_from_playlist),
	(playlist_repeat_toggle_cb), (totem_is_fullscreen),
	(on_video_motion_notify_event), (on_video_button_press_event),
	(totem_action_handle_key), (update_media_menu_items),
	(update_buttons), (update_dvd_menu_sub_lang),
	(totem_callback_connect), (video_widget_create),
	(totem_setup_recent), (main): big huge patch by Julien Moutte
	<julien@moutte.net> to rename the widgets to meaningful names,
	and move the fullscreen stuff to just use gtk_window_fullscreen(),
	xine fixes by myself, more work needed to avoid regressions

2003-05-12  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-cd-selection.c: (bacon_cd_selection_get_type):
	* src/cd-drive.c: (get_scsi_units), (cdrom_get_name),
	(add_linux_cd_recorder), (add_linux_cd_drive),
	(get_cd_device_file), (linux_scan): updated from libbacon
	(Closes: #110454)

============ Version 0.98.0

2003-05-11  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* configure.in: version 0.98.0
	* data/Makefile.am: fixes for srcdir != builddir
	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init):
	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init):
	upd gst backend so it compiles and run without warnings

2003-05-11  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(bacon_video_widget_idle_signal), (xine_event):
	* src/bacon-video-widget.h:
	* src/totem-private.h:
	* src/totem.c: (totem_action_restore_pl),
	(totem_action_drop_files), (on_buffering_cancel_event),
	(on_buffering_event), (totem_action_open_files),
	(playlist_repeat_toggle_cb), (totem_action_handle_key),
	(totem_callback_connect), (video_widget_create), (main): added a
	buffering dialog when opening files from the network, it needs a bit
	of HIG love, still

2003-05-11  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_open): emit the
	got-metadata signal before we close the file, if there are errors
	* src/totem-properties-page.c:
	(bacon_video_widget_properties_time_to_string),
	(bacon_video_widget_properties_set_label),
	(bacon_video_widget_properties_reset),
	(bacon_video_widget_properties_set_from_current),
	(bacon_video_widget_properties_update), (on_got_metadata_event),
	(totem_properties_page_init), (totem_properties_page_finalize),
	(get_property), (set_property), (main): implement the properties
	loading and display (have it!)

2003-05-11  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/gtk-playlist.c: (my_gnome_vfs_get_mime_type_with_data),
	(gtk_playlist_add_asf_playlist), (gtk_playlist_add_asf):
	* src/totem.c: (totem_create_full_path), (totem_action_open_files),
	(on_open_location1_activate): load x-ms-asf videos (need to finish the
	asf playlist loading), some fixes to always put uris in the playlist,
	NULL-terminate the array used to store the "open location" uri
	(Closes: #112761)

2003-05-11  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade: removed the unused url widget
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_reset),
	(bacon_video_widget_properties_set_from_current),
	(bacon_video_widget_properties_update),
	(bacon_video_widget_properties_new):
	* src/bacon-video-widget-properties.h:
	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(bacon_video_widget_realize), (bacon_video_widget_idle_signal),
	(xine_event), (bacon_video_widget_expose),
	(bacon_video_widget_open), (bacon_video_widget_play):
	* src/gstvideowidget.c: (gst_video_widget_expose):
	* src/totem.c: (totem_action_play), (totem_action_set_mrl),
	(on_title_change_event), (on_channels_change_event),
	(on_got_metadata_event), (update_dvd_menu_sub_lang),
	(video_widget_create): use the "channels-change" signal to change the
	subtitles rather than everytime the title changes, use the
	"got-metadata" signal for the xine implementation, draw a nice black
	background to the video widget on startup (restoring playlists doesn't
	look so crap anymore)

2003-05-11  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init),
	(xine_event), (bacon_video_widget_set_visuals_quality):
	* src/bacon-video-widget.h: added the "channels_changed" signal,
	fix a crash in bacon_video_widget_set_visuals_quality

2003-05-10  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_set_proprietary_plugins_path):
	* src/totem-preferences.c: (on_button1_clicked),
	(totem_setup_preferences):
	* src/video-utils.c: (totem_create_symlinks):
	* src/video-utils.h: oops, we used to set the win32 path twice, and
	never for the Real .so files. On startup, create links from
	/usr/lib/win32 to ~/.gnome2/totem-addons/ (Closes: #112677)

2003-05-08  Julien MOUTTE,,,  <julien@moutte.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_set_fullscreen): Second draft. still not catching
	events.

2003-05-08  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_restore_pl), (update_mrl_label):
	added a note about the statusbar with the gst backend,
	we need to unplug the playlist before adding stuff to it on
	restore, or we end up playing it on startup

2003-05-08  Julien MOUTTE <julien@moutte.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_set_fullscreen),
	(bacon_video_widget_is_fullscreen), (bacon_video_widget_new): First
	draft of fullscreen handling code.

2003-05-08  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (my_gnome_vfs_get_mime_type_with_data),
	(gtk_playlist_save_current_playlist),
	(gtk_playlist_add_asf_playlist), (gtk_playlist_add_asf):
	* src/totem-video-thumbnailer.c: (main): fixed a bunch of warnings

2003-05-08  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_open),
	(bacon_video_widget_get_connection_speed),
	(bacon_video_widget_set_tv_out),
	(bacon_video_widget_set_visuals_quality),
	(bacon_video_widget_get_languages),
	(bacon_video_widget_get_subtitles):
	* src/totem-statusbar.c: (totem_statusbar_init):
	* src/totem.c: (totem_action_restore_pl), (totem_action_set_mrl),
	(update_current_time), (update_media_menu_items), (create_submenu),
	(process_command_line), (main):
	* src/vanity.c: (main): remove unused variables, fix some retvals,
	fix statusbar saying "Streaming" when a file can't be opened, fix
	"double-play" when restoring a playlist

2003-05-07  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_set_auto_resize),
	(bacon_video_widget_set_scale_ratio),
	(bacon_video_widget_information),
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata_bool), (bacon_video_widget_new): new
	video widget has auto_resize so connecting it, improving metadata
	support (still buggy)
	* src/gstvideowidget.c: (gst_video_widget_expose),
	(gst_video_widget_size_request), (gst_video_widget_allocate): Removing
	debug messages

2003-05-07  Julien MOUTTE  <julien@moutte.net>

	* src/gstvideowidget.c: (gst_video_widget_update_cursor),
	(gst_video_widget_reorder_windows), (gst_video_widget_realize),
	(gst_video_widget_unrealize), (gst_video_widget_expose),
	(gst_video_widget_size_request), (gst_video_widget_allocate),
	(gst_video_widget_set_property), (gst_video_widget_get_property),
	(gst_video_widget_class_init), (gst_video_widget_init),
	(gst_video_widget_set_xembed_xid),
	(gst_video_widget_get_xembed_xid),
	(gst_video_widget_set_source_size),
	(gst_video_widget_get_source_size),
	(gst_video_widget_set_minimum_size),
	(gst_video_widget_get_minimum_size),
	(gst_video_widget_set_cursor_visible),
	(gst_video_widget_get_cursor_visible),
	(gst_video_widget_set_logo_focus),
	(gst_video_widget_get_logo_focus),
	(gst_video_widget_set_event_catcher),
	(gst_video_widget_get_event_catcher),
	(gst_video_widget_set_auto_resize),
	(gst_video_widget_get_auto_resize), (gst_video_widget_set_scale),
	(gst_video_widget_get_scale), (gst_video_widget_set_logo),
	(gst_video_widget_get_logo): Integrating latest gstvideowidget which
	support auto detection of source size, code cleanup, auto resize mode
	(experimental still)
	* src/gstvideowidget.h:

2003-05-07  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init),
	(update_vis_xid), (update_xid), (got_time_tick),
	(bacon_video_widget_finalize), (bacon_video_widget_open),
	(bacon_video_widget_get_visuals_list),
	(bacon_video_widget_set_visuals),
	(bacon_video_widget_set_visuals_quality),
	(bacon_video_widget_information),
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata_bool),
	(bacon_video_widget_get_metadata), (bacon_video_widget_new):
	Implementing metadata hashtable, visuals plugin list, on the fly
	visualization plugin change, got_metadata signal.

2003-05-07  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_finalize),
	(bacon_video_widget_get_visuals_list): cache the list of visuals plugins
	* src/totem.c: (totem_action_error): fix crash, the weak pointer is not
	needed anymore
	* src/vanity.c: (video_widget_create), (process_command_line),
	(main): with --debug, we load up the logo, so that work is possible
	without a webcam

2003-05-07  Julien MOUTTE  <julien@moutte.net>

	* src/totem-preferences.c: (visual_menu_changed),
	(totem_setup_preferences), (totem_preferences_visuals_setup): Not
	freeing visuals list as BVW might cache them.

2003-05-07  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_class_init):
	adding a "got_metadata" signal, so that the gst backend can inform
	totem when metadata are available.
	* src/bacon-video-widget.h:

2003-05-06  Bastien Nocera  <hadess@hadess.net>

	* src/totem-properties-page.c: (totem_properties_page_init),
	(totem_properties_page_finalize): implemented the widget creation

2003-05-06  Bastien Nocera  <hadess@hadess.net>

	* data/.cvsignore:
	* src/.cvsignore: spring cleaning

2003-05-06  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/totem-properties-page.c: added the starts of a nautilus
	properties page (should probably share code with the actual totem one)

2003-05-06  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/Totem_properties.server.in.in._1:
	* data/Totem_properties.server.in.in._3:
	* data/servers.sh: added scripts and server file for the property
	pages

2003-05-06  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* data/Makefile.am: only install the vanity desktop file on Linux
	systems, we could not build or install any of it, but it's not much
	point actually

2003-05-06  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (setup_config_video):
	revert change for the colour key, seems to break on some machines...
	(Closes: #112339)

2003-05-06  Danilo ? egan  <dsegan@gmx.net>

	* configure.in: Added "sr" and "sr@Latn" to ALL_LINGUAS.

2003-05-06  Bastien Nocera  <hadess@hadess.net>

	* src/languages.h: add all the languages from ISO 639-1
	* src/totem.c: (language_name_get_from_code), (main): fix for the new
	ISO 639-1 table above, and add a notice for translators

2003-05-06  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_realize): don't
	try to create a goom if we don't have an audio ouput
	* src/gtk-playlist.c: (gtk_playlist_add_mrl): application/ogg and
	application/octet-stream are good mimetypes for us (octet streams can
	happen with streaming content)
	* src/totem-statusbar.c: (totem_statusbar_update_time):
	* src/totem.c: (update_mrl_label), (update_current_time): show
	"Streaming" when we have a file for which we don't know the length

2003-05-05  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/totem-random.pl: added, should make people on #111942 happy
	* data/totem.keys: added application/ogg to the list of supported
	mime-types

2003-05-03  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (setup_config_video),
	(bacon_video_widget_realize): setup the colour key for Xv as dark dark
	dark dark dark dark dark dark dark black, looks nicer
	* src/totem-preferences.c: (visual_menu_changed): only whinge about
	restarting totem if the visual is actually changed
	* src/totem.c: (video_widget_create):
	* src/vanity.c: (video_widget_create): remove the hard-coded size for
	the frame containing the video widget so that we can resize to sizes
	smaller than the default size, it would make some zoom settings look
	like they weren't working

2003-05-03  Bastien Nocera  <hadess@hadess.net>

	* configure.in: take the results of AC_PATH_X into account for the
	tests for headers (Closes: #112015)

2003-05-02  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* data/totem.schemas.in:
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_instance_init), (bacon_video_widget_realize),
	(bacon_video_widget_set_show_visuals),
	(bacon_video_widget_get_visuals_list),
	(bacon_video_widget_set_visuals),
	(bacon_video_widget_set_visuals_quality):
	* src/bacon-video-widget.h:
	* src/gtk-playlist.c:
	* src/totem-preferences.c: (on_checkbutton2_toggled),
	(visual_menu_changed), (visual_quality_menu_changed),
	(totem_setup_preferences), (totem_preferences_tvout_setup),
	(totem_preferences_visuals_setup):
	* src/totem-preferences.h:
	* src/totem.c: (video_widget_create): added options to configure the
	visual plugin used, and the quality of them (size, frames per second)
	(Closes: #107244 and #109166)

2003-04-30  Bastien Nocera  <hadess@hadess.net>

	* src/vanity.c: (video_widget_create): added error checking

2003-04-30  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/vanity.desktop.in: added
	* data/vanity.glade: remove label in the frame, that breaks the ratio
	* src/vanity.c: (main): don't crash when showing the prefs

2003-04-30  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* data/Makefile.am:
	* data/vanity.glade:
	* data/vanity.png:
	* src/Makefile.am:
	* src/vanity.c: Vanity, revived from the dead

2003-04-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem-private.h: huh? we don't have any treeviews in the main
	totem window

============ Version 0.97.0

2003-04-29  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* configure.in: 0.97.0

2003-04-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_restore_pl), (main): automatically
	restore the playlist on startup, it doesn't play automatically
	however, and which playlist item was being played is not saved either,
	as it is not possible with the playlist format used (Closes: #111665)
	* README: updated

2003-04-29  Bastien Nocera  <hadess@hadess.net>

	* data/playlist.glade: added save button
	* src/gtk-playlist.c: (write_string),
	(gtk_playlist_save_current_playlist), (gtk_playlist_add_files),
	(gtk_playlist_save_files), (gtk_playlist_up_files),
	(gtk_playlist_new):
	* src/gtk-playlist.h:
	* src/totem.c: (totem_action_exit): added playlist saving feature
	(Closes: #111666), the playlist is automatically saved to
	~/.gnome2/totem.pls on exit, keep the fileselector's paths even if we
	cancel the add/save

2003-04-27  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* src/bacon-video-widget-xine.c: (update_fullscreen_size): remove
	unneeded locks
	* src/gtk-playlist.c:
	* src/gtk-playlist.h: updated copyrights
	* src/totem.c: (main): display a graphical error message if X isn't
	compiled with threads, enable XInitThreads all the time now that
	a work-around has been found. See
	http://bugzilla.gnome.org/show_bug.cgi?id=111349 for details.
	1) Remove the call to XInitThreads in totem.c, totem is very
	likely to lockup, especially with the xine backend
	2) Install a Gtk+ with XInput disabled
	3) Install a fixed version of X, see the bug above for the patch

2003-04-26  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_remove_files): plug a memleak

2003-04-26  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_remove_files):
	* src/totem.c: (current_removed_cb): play the item after the currently
	removed one (Closes: #111239)

2003-04-26  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_languages),
	(bacon_video_widget_get_subtitles): look into 32 subchannels
	instead of 16
	* src/gtk-playlist.c: (gtk_playlist_move_files): update the current
	treepath, this fixes problems when moving the currently played movie

2003-04-26  Bastien Nocera  <hadess@hadess.net>

	* README: upd regarding debugging
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_instance_init), (load_audio_out_driver),
	(bacon_video_widget_open): added some way to get debugging,
	if we can't autoprobe a device, fallback on null output, and stop
	whinging, complain if a file is audio-only and there's no audio out,
	tell the user about the additional plugins only if we don't have a
	decoder for the video
	* src/totem.c: (totem_action_set_mrl): move the "additional plugins"
	hint to the video widget

2003-04-25  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* data/totem.glade: upd
	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_deinterlacing),
	(bacon_video_widget_set_tv_out), (bacon_video_widget_get_tv_out):
	* src/bacon-video-widget-xine.c: (load_video_out_driver),
	(bacon_video_widget_unrealize),
	(bacon_video_widget_get_deinterlacing),
	(bacon_video_widget_set_tv_out), (bacon_video_widget_get_tv_out):
	* src/bacon-video-widget.h:
	* src/totem-preferences.c: (on_tvout_toggled),
	(totem_setup_preferences), (totem_preferences_tvout_setup):
	* src/totem-preferences.h:
	* src/totem.c: (totem_action_error), (totem_action_handle_key),
	(video_widget_create): implemented tv-out via DXR3 or nvtv, only
	the dxr3 setting is actually saved, tv-out needs to be enabled at
	run-time for nvtv

2003-04-25  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (got_time_tick),
	(bacon_video_widget_finalize): Fixed seeking support.

2003-04-25  Bastien Nocera  <hadess@hadess.net>

	* totem.spec.in: Package the thumbnailer as well (spotted by Chris
	Chabot <chabotc@4-ice.com>

2003-04-25  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* src/gtk-playlist.c: (drop_cb), (selection_changed),
	(gtk_playlist_add_files), (gtk_playlist_remove_files),
	(gtk_playlist_move_files), (gtk_playlist_up_files),
	(gtk_playlist_down_files), (treeview_row_changed),
	(repeat_button_toggled), (update_repeat_cb), (init_config),
	(gtk_playlist_new): implement list reordering (Closes: #110236),
	small cleanups

2003-04-24  Bastien Nocera  <hadess@hadess.net>

	* README: added mention of the deinterlacing
	* data/totem.glade: made accelerator visible in the menu

2003-04-24  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* data/totem.schemas.in:
	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_set_deinterlacing),
	(bacon_video_widget_get_deinterlacing):
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_connection_speed),
	(bacon_video_widget_set_deinterlacing),
	(bacon_video_widget_get_deinterlacing):
	* src/bacon-video-widget.h:
	* src/totem-preferences.c: (on_deinterlace1_activate),
	(deinterlace_changed_cb), (auto_resize_changed_cb),
	(totem_setup_preferences):
	* src/totem.c: (totem_action_handle_key): added deinterlace
	functionality (dummy functions in gst port), don't forget to reconnect
	the "toggled" signal on the show visual fx button when the setting is
	changed via gconf, added more checks for some functions

2003-04-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_video_motion_notify_event),
	(totem_action_handle_scroll), (totem_action_handle_volume_scroll):
	Increase the timeout for the popup windows (5 seconds) and make
	sure that wheel mouse scrolls are taking into account as events, so
	that the window doesn't disappear in the middle of a scroll
	(Closes: #109222)

2003-04-24  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_realize),
	(bacon_video_widget_unrealize),
	(bacon_video_widget_set_fullscreen):
	* src/scrsaver.c: (fake_event), (scrsaver_new), (scrsaver_disable),
	(scrsaver_enable), (scrsaver_free):
	* src/scrsaver.h:
	* src/totem-preferences.c: (on_checkbutton2_toggled),
	(on_button1_clicked):
	* src/totem-private.h:
	* src/totem.c: (totem_action_error), (totem_action_play),
	(totem_action_play_media), (totem_action_set_mrl),
	(totem_action_seek_relative), (on_open_location1_activate),
	(on_eject1_activate), (on_take_screenshot1_activate),
	(on_properties1_activate), (commit_hide_skip_to),
	(on_video_motion_notify_event):
	* src/totem.h: remove usage of a bunch of static variables, transform
	the screensaver into an "object", and some cleanups

2003-04-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_exit): don't crash on exit if the totem is
	NULL (early start)

2003-04-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (totem_display_is_local),
	(ask_show_visuals), (on_checkbutton2_toggled),
	(totem_setup_preferences): take into account the result from the
	"enable visuals" dialog (Really Closes: #110851)

2003-04-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): forgot a space in the string (Closes: #111459)

2003-04-23  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (configure_cb): add borders from
	the widget itself
	* src/totem.c: (main): fix a bug with quotes (Closes: #111459)

2003-04-23  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (ask_show_visuals),
	(on_checkbutton2_toggled), (totem_setup_preferences):
	* src/totem.c: (totem_action_error_and_exit), (main): ask the user if he
	really wants visual effects when running on a non-local display
	(Closes: #110851), really display the error messages when we have
	errors on startup

2003-04-22  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/totem.c: (totem_action_error), (totem_action_error_and_exit),
	(totem_action_exit), (video_widget_create), (main): deactivate the
	XInitThreads when starting up with the GStreamer backend to work-around
	#111349, manage to show the error messages when the video widget
	couldn't be initialised, Gst needs more error handling

2003-04-21  Bastien Nocera  <hadess@hadess.net>

	* configure.in: debug is disabled by default
	* src/bacon-video-widget-gst.c: (bacon_video_widget_finalize): don't
	crash on exit anymore (Closes: #111300)

2003-04-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (got_time_tick): don't do divisions by
	zero (Closes: #111295)

2003-04-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_instance_init):
	work with ANSI compilers

2003-04-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-xine.c: (bacon_video_widget_open):
	* src/totem.c: (totem_action_set_mrl): better message when the video
	type is not handled, ie. give a pointer to the additional plugins

2003-04-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): call XInitThreads very early on, before we
	even remotely touch the X server connection. Fixes the possible
	(async reply) lockups. Thanks to Owen Taylor for his quick diagnosis
	to the symptoms

2003-04-18  Bastien Nocera  <hadess@hadess.net>

	* src/totem-preferences.c: (totem_display_is_local),
	(totem_setup_preferences): some work towards fixing #110851

2003-04-18  Bastien Nocera  <hadess@hadess.net>

	* src/scrsaver.c: (fake_event), (scrsaver_init),
	(scrsaver_disable), (scrsaver_enable): plenty of display locking around
	all that, and use XSync, not XFlush
	* src/totem-video-thumbnailer.c: (main): enable threads all the time

2003-04-18  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* data/totem.glade:
	* src/totem.c: (totem_action_exit), (on_show_controls1_activate),
	(on_show_controls2_activate), (totem_action_handle_key),
	(totem_callback_connect): added controls to show/hide everything but
	the video canvas

2003-04-18  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* data/totem.glade:
	* src/totem.c: (totem_action_set_mrl), (update_seekable),
	(on_video_button_press_event), (update_buttons),
	(totem_callback_connect), (video_widget_create): added a popup menu
	on the canvas, for right click

2003-04-18  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_set_proprietary_plugins_path):
	* src/bacon-video-widget-xine.c: (setup_config),
	(bacon_video_widget_set_media_device),
	(bacon_video_widget_set_proprietary_plugins_path):
	* src/bacon-video-widget.h:
	* src/totem-preferences.c: (hide_prefs), (on_checkbutton1_toggled),
	(on_checkbutton2_toggled), (on_combo_entry1_changed),
	(auto_resize_changed_cb), (show_vfx_changed_cb),
	(mediadev_changed_cb), (option_menu_connection_changed),
	(on_button1_clicked), (totem_setup_preferences): added an "Add
	proprietary plugins" button to the preferences, make the xine backend
	use this path (Closes: #110384)

2003-04-18  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init): We do
	no need those callbacks as the widget will forward those events.
	* src/totem.c: (totem_action_exit): Added sanity checks before
	destroying widgets that might not exist.

2003-04-18  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/bacon-video-widget-gst.c: (update_xid),
	(bacon_video_widget_open), (bacon_video_widget_play),
	(bacon_video_widget_set_show_visuals),
	(bacon_video_widget_is_playing), (bacon_video_widget_new): we require
	0.6.0.3 (0.6.1-pre) now, so enable all the visualisation stuff

2003-04-17  Bastien Nocera  <hadess@hadess.net>

	* README: updated, added wishlist for Uraeus

2003-04-17  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (got_stream_length),
	(got_time_tick), (bacon_video_widget_open),
	(bacon_video_widget_play), (bacon_video_widget_new): Connected time
	tick, gather stream length, seeking should work.

2003-04-16  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_about1_activate): fix description (Closes: #110975)

2003-04-16  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_new): make it
	compile on 0.6.0, meanwhile
	* src/bacon-video-widget.c: oops, forgot to remove it, it seems

2003-04-16  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: (bacon_video_widget_set_logo):
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_backend_name),
	(bacon_video_widget_set_logo):
	* src/bacon-video-widget.h:
	* src/totem.c: (on_about1_activate): booya, fix mem leaks

2003-04-16  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c:
	(bacon_video_widget_get_backend_name): Adding method to get backend
	* src/bacon-video-widget-xine.c:
	(bacon_video_widget_get_backend_name): Adding method to get backend
	* src/bacon-video-widget.h: Adding method to get backend infos
	* src/totem.c: (on_about1_activate): Added backend info in about box

2003-04-16  Julien MOUTTE  <julien@moutte.net>

	* src/bacon-video-widget-gst.c: (update_xid), (update_vis_xid),
	(got_video_size), (got_eos), (bacon_video_widget_finalize),
	(bacon_video_widget_open), (bacon_video_widget_set_logo),
	(bacon_video_widget_set_logo_mode),
	(bacon_video_widget_get_logo_mode),
	(bacon_video_widget_set_show_cursor),
	(bacon_video_widget_get_show_cursor),
	(bacon_video_widget_set_show_visuals), (bacon_video_widget_new):
	Prepared for visualisation support, managing logo trough video
	widget, implemented methods for stuff like cursor and logo focus,
	implemented finalize method and eos signal
	* src/bacon-video-widget-xine.c: (bacon_video_widget_set_logo) :
	implemented logo management as header changed
	* src/bacon-video-widget.h: Changed header adding
	bacon_video_widget_set_logo method.
	* src/gstvideowidget.c: (gst_video_widget_set_cursor_visible),
	(gst_video_widget_set_logo_focus),
	(gst_video_widget_set_event_catcher): Fixed some gdk_threads lock bugs
	* src/totem.c: (totem_action_set_mrl), (main): changed logo management
	according to bacon widget changes

2003-04-16  Julien MOUTTE  <julien@moutte.net>

	* src/Makefile.am: Added gstvideowidget in EXTRA_DIST
	* src/bacon-video-widget-gst.c: (bacon_video_widget_size_request),
	(bacon_video_widget_size_allocate),
	(bacon_video_widget_class_init),
	(bacon_video_widget_instance_init), (update_xid), (got_video_size),
	(bacon_video_widget_open), (bacon_video_widget_play),
	(bacon_video_widget_get_type), (bacon_video_widget_new): Integrated
	gstvideowidget, scaling now works, fixed some initialisation problems.
	* src/bacon-video-widget-xine.c: (bacon_video_widget_get_type),
	(bacon_video_widget_class_init), (dest_size_cb), (frame_output_cb),
	(bacon_video_widget_new), (bacon_video_widget_set_fullscreen),
	(bacon_video_widget_set_scale_ratio),
	(bacon_video_widget_get_current_frame): bvw now inherits from GtkVbox.
	* src/bacon-video-widget.h: bvw now inherits from GtkVbox

2003-04-16  Julien MOUTTE  <julien@moutte.net>

	* src/Makefile.am: GStreamer enabled builds with gstvideowidget
	* src/gstvideowidget.c: Adding Gstreamer video widget 
	* src/gstvideowidget.h: Adding Gstreamer video widget

2003-04-15  Julien MOUTTE  <julien@moutte.net>

	* configure.in: only gstreamer-play and gstreamer-gconf are needed

2003-04-15  Bastien Nocera  <hadess@hadess.net>

	* configure.in: updated to check for different versions of gstreamer
	(based on a patch by Julien Moutte <jmoutte@electronic-group.com>)

2003-04-15  Bastien Nocera  <hadess@hadess.net>

	* README_CVS: removed

2003-04-15  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added dep on gstreamer-gconf
	* src/bacon-video-widget-gst.c: (bacon_video_widget_class_init),
	(update_xid), (bacon_video_widget_open), (bacon_video_widget_play),
	(bacon_video_widget_new): ok, so GStreamer now plays mp3s and mpeg
	files for me (real enough for you?)

2003-04-14  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: plenty of changes, playback is not
	very far away it seems

2003-04-14  Bastien Nocera  <hadess@hadess.net>

	* configure.in: make it possible to switch between gst and xine
	backend at compile time
	* src/Makefile.am: updated
	* src/bacon-video-widget-gst.c: plenty of changes to make it at least
	compile, it's bloody far from working (there are only stubs, you lazy
	Julien!)

2003-04-14  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-gst.c: starting adding bits of the gst backend
	by Julien Moutte <jmoutte@electronic-group.com>

2003-04-14  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/bacon-video-widget-xine.c:
	* src/bacon-video-widget.c: Renamed bacon-video-widget.c to
	bacon-video-widget-xine.c

2003-04-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_video_motion_notify_event), (main): take the height
	of the control popup into account immediately when switching to
	fullscreen. Fixes a bug when part of the popup would be invisible
	when switching to fullscreen

2003-04-11  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* src/Makefile.am:
	* src/totem.c: (main):
	don't use GConf deprecated calls.

	* src/totem-video-thumbnailer.c: add missing header.
	
2003-04-11  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (main): Don't forget to initialise threads
	(Patch by Fr?Â©d?Â©ric Bellaiche <bellaiche.frederic@wanadoo.fr> (Closes: #110495)

2003-04-10  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* src/Makefile.am:
	* src/totem.c: (main):
	don't use deprecated libglade calls.

2003-04-10  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (show_vfx_update): re-enable the visuals
	on the fly as well

============ Version 0.96.0

2003-04-09  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/bacon-cd-selection.c: (bacon_cd_selection_get_device): update to
	get a bug fix by Ross Burton
	* src/bacon-message-connection.c: (server_cb),
	(bacon_message_connection_send): fix a buf which would make Totem
	receive only the first file of a list of them
	* src/totem.c: (process_command_line): make it work (better)

2003-04-09  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c:
	* src/totem.c: (totem_action_set_mrl): fix the setting of the custom
	name being rather random

2003-04-09  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* data/playlist.glade:
	* data/properties.glade:
	* data/totem.glade:
	* data/uri.glade:
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_reset),
	(bacon_video_widget_properties_set_from_current):
	* src/bacon-video-widget.c: (bacon_video_widget_instance_init),
	(bacon_video_widget_close), (bacon_video_widget_eject):
	* src/bacon-video-widget.h:
	* src/gtk-playlist.c: (gtk_playlist_mrl_to_title),
	(gtk_playlist_add_asf_playlist), (gtk_playlist_add_asf),
	(gtk_playlist_add_mrl):
	* src/totem.c: (totem_action_set_mrl), (totem_playing_dvd),
	(totem_playing_media), (on_eject1_activate),
	(update_media_menu_items), (totem_callback_connect):
	Added Eject button, applied bits of patches from Christian Neumair,
	Update the time display every 7 100th of a second

2003-04-05  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* src/gtk-playlist.c: (gtk_playlist_add_m3u),
	(gtk_playlist_add_ra): differentiate video files from the playlists
	with the same mime-type

2003-04-05  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (my_eel_read_entire_file),
	(gtk_playlist_add_asx), (parse_smil_entry),
	(gtk_playlist_add_smil): try to recover nicely from broken XML files
	used in XMIL and ASX playlists (Closes: #109953)

2003-04-05  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (bacon_video_widget_class_init),
	(update_fullscreen_size), (video_window_translate_point):
	* src/debug.h:
	* src/totem.c: (main): add some locks around getting the screen size,
	this should fix an "Xlib async reply" problem when resizing,
	especially on startup

2003-04-04  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (my_gnome_vfs_get_mime_type_with_data),
	(my_eel_read_entire_file), (gtk_playlist_add_m3u),
	(gtk_playlist_add_pls), (gtk_playlist_add_asx),
	(gtk_playlist_add_ra), (parse_smil_video_entry),
	(parse_smil_entry), (parse_smil_entries), (gtk_playlist_add_smil),
	(gtk_playlist_add_mrl): parse SMIL playlists correctly so not only
	the last entry is added to the playlist, get some data from the file
	while getting the mime-type, so we can poke at it for our dual 
	playlist/video formats, like "Real Audio"

2003-04-04  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_mrl_to_title), (init_treeview),
	(gtk_playlist_add_one_mrl), (parse_asx_entry), (parse_asx_entries),
	(gtk_playlist_add_asx), (parse_smil_entry), (parse_smil_entries),
	(gtk_playlist_add_smil), (gtk_playlist_add_mrl),
	(gtk_playlist_get_current_title), (gtk_playlist_set_at_end):
	* src/gtk-playlist.h:
	* src/totem.c: (totem_action_set_mrl): SMIL playlist support
	(Closes: #109953), make the playlist-supplied name take precedence
	over the MRL mangling to get something nice to display

2003-04-04  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/bacon-video-widget.c: (load_video_out_driver),
	(bacon_video_widget_realize), (bacon_video_widget_new),
	(bacon_video_widget_set_media_device):
	* src/totem.c: (totem_get_nice_name_for_stream),
	(totem_action_set_mrl), (totem_action_open_files): when there's a
	artist and title info, use that for the main label and the playlist
	entry. This allows mp3s, oggs and audio CDs to update the playlist
	with more meaningful entries (Closes: #109405)

2003-04-03  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_set_from_current):
	* src/totem.c: (update_mrl_label): escape the strings before pushing
	them to the label as pango markup, fixes warnings when opening files
	like "Foo & Bar.mp3"

2003-04-03  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (bacon_video_widget_can_set_volume):
	work around a bug in xine that would make the write to the audio
	device take about 30 seconds, thus locking up our read of the volume,
	on Red Hat Linux 9 (Closes: #107359)

2003-04-02  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: add a separator between the volume control and
	the playback controls
	* src/bacon-video-widget.c: (video_window_translate_point),
	(generate_mouse_event), (bacon_video_widget_set_scale_ratio): use
	gtk_window_resize instead of the more error-prone queue_resize, fixes
	a couple of possible lockups when the window is being resized quickly
	* src/debug.h: more debug again
	* src/gtk-playlist.c: (gtk_playlist_add_ra),
	(gtk_playlist_add_mrl): add a few FIXMEs

2003-04-01  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (bacon_video_widget_idle_signal),
	(bacon_video_widget_set_scale_ratio): upd, removed unneeded call to
	the main loop
	* src/languages.h: updated to use the real letters for French and
	Spanish. It should work.
	* src/totem.c: (totem_create_full_path), (totem_action_open_files),
	(process_command_line): make sure that the file paths are full ones,
	not relative ones, which would end up confusing the playlist

2003-03-31  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* configure.in: pump up to 0.96.0

2003-03-31  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: add subtitles and audio languages selection menus
	* src/Makefile.am:
	* src/bacon-video-widget.c: (frame_output_cb),
	(bacon_video_widget_idle_signal), (xine_event),
	(bacon_video_widget_new),
	(bacon_video_widget_properties_get_title),
	(bacon_video_widget_get_languages),
	(bacon_video_widget_get_language),
	(bacon_video_widget_set_language),
	(bacon_video_widget_get_subtitles),
	(bacon_video_widget_get_subtitle),
	(bacon_video_widget_set_subtitle):
	* src/bacon-video-widget.h:
	* src/languages.h: added, it needs to be fixed to include the *real*
	names for the languages, so they appear i18n'ed in the menus
	* src/totem-private.h:
	* src/totem.c: (language_name_get_from_code),
	(totem_g_list_deep_free), (totem_action_play), (totem_playing_dvd),
	(totem_action_previous), (drag_video_cb), (on_title_change_event),
	(on_sub_activate), (on_lang_activate), (add_item_to_menu),
	(create_submenu), (update_dvd_menu_sub_lang),
	(totem_callback_connect), (main): don't call gtk functions from within
	the xine event callback (within the xine thread), should Closes
	#105860 and kill the X Async replies problems
	Added subtitles and audio languages selection menus (Closes: #106333)

2003-03-25  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (bacon_video_widget_instance_init),
	(show_vfx_update), (bacon_video_widget_set_property),
	(bacon_video_widget_get_property),
	(bacon_video_widget_set_media_device),
	(bacon_video_widget_set_show_visuals),
	(bacon_video_widget_get_mrls): on-the-fly setting for the vis plugin
	(Really Closes: #108595), use CD instead of CDDA for the xine CD
	plugin, use the right device for the Audio CD
	* src/bacon-video-widget.h:
	* src/totem.c: (update_dvd_menu_items), (update_buttons): upd

2003-03-24  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/totem_logo.mpv: removed
	* data/totem_logo.png: added
	* src/Makefile.am:
	* src/gtk-playlist.c: (gtk_playlist_add_mrl): use a PNG logo now that
	xine supports it, it's easier to generate

2003-03-20  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (size_changed_cb): fix stupid crash when
	changing the resolution of the screen via RandR

2003-03-19  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (setup_config),
	(bacon_video_widget_unrealize),
	(bacon_video_widget_can_set_volume),
	(bacon_video_widget_set_volume), (bacon_video_widget_get_volume),
	(bacon_video_widget_get_metadata_bool): make the BaconVideoWidget
	modify an internal amp instead of touching the system volume

2003-03-18  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: updated the preferences window to respect the HIG
	better, look a bit cleaner and more spaced now
	* src/bacon-video-widget.c: (show_vfx_update),
	(bacon_video_widget_set_show_visuals):
	* src/bacon-video-widget.h:
	* src/totem-preferences.c: (on_checkbutton2_toggled):
	* src/totem.c:
	* src/totem.h: the retval of bacon_video_widget_set_show_visuals() now
	indicates if the setting is taken into account immediately
	(Closes: #108595)

2003-03-17  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (show_vfx_update),
	(bacon_video_widget_open), (bacon_video_widget_set_show_visuals):
	some work towards fixing #108595, the problem is that the xine
	engine hangs if we rewire the audio outputs while it's playing,
	disabled for now

2003-03-16  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-message-connection.c: (bacon_message_connection_new):
	install the socket in $(HOME)
	* src/bacon-video-widget.c: (bacon_video_widget_get_type): upd

2003-03-16  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: disable debug

2003-03-16  Bastien Nocera  <hadess@hadess.net>

	* src/totem-video-thumbnailer.c: (gdk_pixbuf_mirror),
	(add_holes_to_pixbuf): fix gdk_pixbuf_mirror, the right edge was off
	by one pixel, enable the mirroring of the holes now so the margins
	look OK

2003-03-14  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: upd
	* data/emblem-multimedia.png: removed
	* data/filmholes.png: added
	* src/totem-video-thumbnailer.c: (add_emblem_to_pixbuf),
	(save_pixbuf), (main): modify so it puts nice little holes like on
	films cells. Thanks to Tuomas <tigert@ximian.com> for the idea and
	the gfx

2003-03-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): add an Application Name

2003-03-13  Bastien Nocera  <hadess@hadess.net>

	* data/emblem-multimedia.png: updated to another overlay image from
	Jakub Steiner <jimmac@ximian.com>

2003-03-13  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: upd
	* data/emblem-multimedia.png: added the multimedia emblem
	* src/totem-video-thumbnailer.c: (add_emblem_to_pixbuf),
	(save_pixbuf), (main): Hack the addition of an emblem on top of the
	thumbnailed video. Not really done properly as the metadata nautilus
	uses is nautilus-only for now (Closes: #105891)

2003-03-12  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/totem.c: (totem_setup_recent): don't show the icons in the most
	recently played files

2003-03-12  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/uri.glade: upd
	* src/totem.c: (on_open_location1_activate): added "File" -> "Open
	Location..." menu item with the corresponding dialog to allow
	URLs to be fed to Totem in a GUI way (Closes: #106916)

2003-03-12  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* data/uri.glade:
	* src/totem.c: (on_open1_activate), (open_location1_activate),
	(totem_callback_connect): started working at #106916, doesn't compile
	anymore, will fix in a mo

2003-03-12  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* src/gtk-playlist.c: (selection_changed): upd
	* src/totem.c: (totem_action_play), (totem_action_seek_relative),
	(commit_hide_skip_to): stop playback when there is an error playing

2003-03-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_fullscreen_toggle): set the window on top
	again when coming back from fullscreen

2003-03-10  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_volume_up1_activate),
	(on_volume_down1_activate), (totem_action_remote),
	(totem_action_handle_key), (totem_action_handle_scroll),
	(totem_action_handle_volume_scroll), (on_volume_scroll_event),
	(totem_callback_connect): add mouse-wheel support to all the widgets
	that could (the sliders)

2003-03-10  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (bacon_video_widget_can_get_frames),
	(bacon_video_widget_get_current_frame): Make it possible to take
	screenshots of visual plugins. This requires xine-lib beta8. People
	filing bugs because they use an older version owe me 50 quid.

2003-03-06  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/totem.c: (on_recent_file_activate): removed debug

2003-03-06  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (bacon_video_widget_can_get_frames):
	changes so we can take screenshots of everything that's got a video,
	we can now screenshot vis plugins, and oh fuck do they look nice ;)

2003-03-06  Anders Carlsson <andersca@codefactory.se>

	reviewed by: Bastien Nocera <hadess@hadess.net>

	* data/totem.glade:
	* src/totem.c: (on_always_on_top1_activate),
	(totem_callback_connect):
	* src/video-utils.c: (gdk_wmspec_change_state),
	(totem_gdk_window_set_always_on_top):
	* src/video-utils.h: Add support for always-on-top for the main window

2003-03-05  Duarte Loreto <happyguy_pt@hotmail.com>

        * configure.in: Added "pt" to ALL_LINGUAS.

2003-03-05  Bastien Nocera  <hadess@hadess.net>

	* src/video-utils.c: (yv12torgb): fix warning

2003-03-05  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* src/bacon-video-widget.c: (bacon_video_widget_get_current_frame):
	* src/video-utils.c: (yuy2toyv12), (yv12torgb):
	* src/video-utils.h: simplified the screenshot code and moved the
	colour conversion functions to video-utils.[ch], colour conversion
	comes from Guenter Bartsch <guenter@users.sourceforge.net>

2003-03-04  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: updated
	* src/bacon-video-widget.c: (setup_config),
	(bacon_video_widget_set_connection_speed),
	(bacon_video_widget_get_connection_speed),
	(bacon_video_widget_set_show_visuals):
	* src/bacon-video-widget.h:
	* src/totem-preferences.c: (auto_resize_changed_cb),
	(option_menu_connection_changed), (totem_setup_preferences):
	added support for setting the network connection speed
	* README: updated

2003-03-04  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: adding a connection speed dropdown to the
	preferences dialog

2003-03-03  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (drag_video_cb): a little bit better, use text/uri-list
	by default as well

2003-03-03  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (drag_video_cb): fix a crash when the file's mrl was not
	a local filename but a full-fledged URI (start for #106970)

2003-02-28  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: don't distribute the
	totem-video-thumbnail.schemas.in file, it's autogenerated
	* src/bacon-video-widget.c: (xine_error): add a generic error
	* src/totem-video-thumbnailer.c: (main): forgot a carriage return

2003-02-26  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* src/bacon-video-widget.c: (frame_output_cb),
	(bacon_video_widget_idle_signal), (xine_event): starting adding
	support for the progress event and reference MRLs
	* src/gtk-playlist.c: (gtk_playlist_add_m3u),
	(gtk_playlist_add_pls): null-terminate the strings we read from eel

============ Version 0.95.1

2003-02-26  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (bacon_video_widget_set_fullscreen): fix a
	crash when switching to fullscreen
	* configure.in: 0.95.1

============ Version 0.95.0

2003-02-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main_window_destroy_cb), (drop_video_cb),
	(drop_playlist_cb), (on_play_pause_button_clicked),
	(on_previous_button_clicked), (on_next_button_clicked),
	(on_playlist_button_toggled), (on_title_change_event),
	(update_current_time), (update_cb_often), (update_cb_rare),
	(seek_slider_pressed_cb), (seek_slider_released_cb), (vol_cb),
	(on_open1_activate), (on_play_dvd1_activate),
	(on_play_vcd1_activate), (on_play_cd1_activate),
	(on_play1_activate), (on_full_screen1_activate),
	(on_zoom_1_2_activate), (on_zoom_1_1_activate),
	(on_zoom_2_1_activate), (on_toggle_aspect_ratio1_activate),
	(on_show_playlist1_activate), (on_fs_exit1_activate),
	(on_quit1_activate), (on_repeat_mode1_toggled),
	(on_about1_activate), (on_radiobutton_shot_toggled),
	(hide_screenshot), (on_take_screenshot1_activate),
	(on_properties1_activate), (on_preferences1_activate),
	(on_dvd_root_menu1_activate), (on_dvd_title_menu1_activate),
	(on_dvd_audio_menu1_activate), (on_dvd_angle_menu1_activate),
	(on_dvd_chapter_menu1_activate), (commit_hide_skip_to),
	(spin_button_value_changed_cb), (on_skip_to1_activate),
	(on_skip_forward1_activate), (on_skip_backwards1_activate),
	(on_volume_up1_activate), (on_volume_down1_activate),
	(toggle_playlist_from_playlist), (playlist_changed_cb),
	(current_removed_cb), (playlist_repeat_toggle_cb),
	(size_changed_cb), (on_mouse_click_fullscreen),
	(on_video_motion_notify_event), (on_eos_event),
	(on_window_key_press_event), (on_window_scroll_event),
	(totem_callback_connect), (video_widget_create),
	(totem_message_connection_receive_cb), (main): modify all the
	callbacks so they get a Totem * directly rather than a gpointer, so we
	don't have to cast that much. Get the keybindings working again in
	fullscreen mode

2003-02-26  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (size_changed_cb): move the popups when the screen
	size changes

2003-02-26  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added detection for XSun headers (Closes: #107115)
	* src/totem-private.h:
	* src/totem.c: (totem_action_fullscreen_toggle),
	(on_fs_exit1_activate), (update_fullscreen_size),
	(size_changed_cb), (on_video_motion_notify_event),
	(totem_callback_connect), (totem_message_connection_receive_cb),
	(process_command_line), (main): place the popups properly on multihead
	displays and when the screen size changes (Closes: #101149), present
	the window when we receive an event, fix a segfault when launch totem
	without any arguments in client mode, finish with the startup
	notification when we're in client mode

2003-02-25  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added Korean

2003-02-24  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (bacon_video_widget_can_get_frames):
	* src/totem.c: (on_take_screenshot1_activate): taking a screenshot
	when the film is finished doesn't crash anymore (Closes: #106899)

2003-02-23  Bastien Nocera  <hadess@hadess.net>

	* README: updated

2003-02-23  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (bacon_video_widget_realize):
	* src/scrsaver.c: (scrsaver_init): fix the potential race in enabling
	the screensaver, which caused crazy XLib async replies on startup

2003-02-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (update_current_time), (update_volume_sliders),
	(update_cb_often), (seek_slider_pressed_cb),
	(seek_slider_released_cb), (commit_hide_skip_to), (popup_hide),
	(totem_callback_connect): we seek only when the scale is released,
	don't hide the popups when we're moving the slider (Closes: #106347)

2003-02-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (create_full_path), (process_command_line): when the
	file passed via remote isn't a fully qualified path or uri, we make it
	so

2003-02-22  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_error): fix deadlock when a file added
	via the remote interface triggers an error, gtk_dialog_run is evil
	in multi-threaded apps

2003-02-22  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_add_wmv): will need to see how to
	handle this properly
	* src/totem.c: (totem_action_set_mrl): small fixes

2003-02-22  Bastien Nocera  <hadess@hadess.net>

	* src/baconvideowidget-marshal.list: remove unused marshaller
	definition

2003-02-21  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* configure.in: added warnings
	* src/bacon-video-widget.c: (bacon_video_widget_class_init),
	(frame_output_cb), (load_audio_out_driver),
	(bacon_video_widget_realize), (bacon_video_widget_idle_signal),
	(xine_error), (bacon_video_widget_new), (bacon_video_widget_open),
	(bacon_video_widget_play):
	* src/bacon-video-widget.h:
	* src/totem-video-thumbnailer.c: (main):
	* src/totem.c: (totem_action_play), (totem_action_set_mrl),
	(totem_action_seek_relative), (commit_hide_skip_to),
	(on_error_event), (video_widget_create): more use of GError,
	plenty of code cleanup following, faster response to errors :)

2003-02-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (xine_event),
	(bacon_video_widget_motion_notify),
	(bacon_video_widget_button_press),
	(bacon_video_widget_get_logo_mode),
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata_bool),
	(bacon_video_widget_can_get_frames),
	(bacon_video_widget_get_current_frame):
	* src/bacon-video-widget.h:
	* src/totem-preferences.c:
	* src/totem-preferences.h:
	* src/totem-private.h:
	* src/totem-video-thumbnailer.c: (save_pixbuf), (main):
	* src/totem.c: (totem_action_exit), (play_pause_set_label),
	(totem_action_play), (totem_action_play_media),
	(totem_action_stop), (totem_action_play_pause),
	(totem_action_fullscreen_toggle), (totem_action_fullscreen),
	(update_mrl_label), (totem_action_set_mrl),
	(totem_action_previous), (totem_action_next),
	(totem_action_seek_relative), (totem_action_volume_relative),
	(totem_action_toggle_aspect_ratio), (totem_action_set_scale_ratio),
	(update_seekable), (update_sliders), (vol_cb),
	(on_take_screenshot1_activate), (on_properties1_activate),
	(on_dvd_root_menu1_activate), (on_dvd_title_menu1_activate),
	(on_dvd_audio_menu1_activate), (on_dvd_angle_menu1_activate),
	(on_dvd_chapter_menu1_activate), (commit_hide_skip_to),
	(popup_hide), (on_video_motion_notify_event),
	(totem_action_handle_key), (video_widget_create),
	(process_command_line), (main): fix all the warnings, simplify the
	code,add a GError return to bacon_video_widget_can_get_frames ()
	(Closes: #104881)

2003-02-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (bacon_video_widget_tick_send): always
	retunr TRUE so that the tick works even if we can't get the time
	properly
	* src/bacon-video-widget.h: typo

2003-02-21  Xan Lopez  <xan@masilla.org>

	* src/bacon-video-widget.c: (bacon_video_widget_tick_send):

	Fix timer in statusbar

2003-02-21  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "ga" to ALL_LINGUAS.

2003-02-21  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (bacon_video_widget_instance_init),
	(setup_config): the demux strategy used to be a string, but it's an
	enum now, makes it possible to play elementary MPEG streams that would
	be misdetected as program streams before (Closes: #106664)

2003-02-18  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade:
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_init),
	(bacon_video_widget_properties_reset),
	(bacon_video_widget_properties_set_from_current),
	(bacon_video_widget_properties_update),
	(bacon_video_widget_properties_new):
	* src/bacon-video-widget-properties.h:
	* src/bacon-video-widget.h:
	* src/gtk-playlist.c: (gtk_playlist_mrl_to_title):
	* src/totem.c: (totem_action_set_mrl), (on_properties1_activate):
	Added a Link to IMDB depending on the video name, but it doesn't work
	properly, don't count on it

2003-02-18  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_add_m3u),
	(gtk_playlist_add_ra), (gtk_playlist_add_mrl): add support for .ra
	files, we require an updated gnome-mime-data for the playlist files
	detection (fixes bug reported by Ross Burton)

2003-02-17  Bastien Nocera  <hadess@hadess.net>

	* README: updated

2003-02-17  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* configure.in: upd
	* src/bacon-video-widget.c: (bacon_video_widget_instance_init),
	(frame_output_cb), (setup_config),
	(bacon_video_widget_set_show_visuals),
	(bacon_video_widget_set_auto_resize):
	* src/bacon-video-widget.h:
	* src/totem-preferences.c: (on_checkbutton1_toggled),
	(totem_setup_preferences):
	* src/totem-video-thumbnailer.c: (main): removed gconf dependency in
	the BaconVideoWidget, removed linking to gconf for the thumbnailer

2003-02-17  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in: updated
	* src/bacon-video-widget.c: (load_audio_out_driver): remove audio
	driver from gconf, we use automatic stuff, or xine's config

2003-02-17  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/totem-preferences.c: (hide_prefs), (on_checkbutton1_toggled),
	(on_checkbutton2_toggled), (on_combo_entry1_changed),
	(auto_resize_changed_cb), (show_vfx_changed_cb),
	(mediadev_changed_cb), (bacon_cd_selection_create),
	(totem_setup_preferences):
	* src/totem-preferences.h:
	* src/totem.c: (totem_action_play), (totem_action_play_pause),
	(update_mrl_label), (totem_action_set_mrl),
	(totem_action_seek_relative), (totem_action_volume_relative),
	(totem_action_toggle_aspect_ratio), (totem_action_set_scale_ratio),
	(update_seekable), (update_sliders), (vol_cb),
	(on_dvd_root_menu1_activate), (on_dvd_title_menu1_activate),
	(on_dvd_angle_menu1_activate), (on_dvd_chapter_menu1_activate),
	(popup_hide), (on_video_motion_notify_event),
	(totem_action_handle_scroll), (totem_setup_recent):
	* src/totem.h:
	* src/totem-private.h: move all the prefs to its own files

2003-02-17  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (update_fullscreen_size),
	(size_changed_cb), (bacon_video_widget_realize),
	(bacon_video_widget_set_fullscreen),
	(bacon_video_widget_ratio_fits_screen): get a screen size as soon as
	we realize the widget, update when the screen changes size (XRandR)
	(Closes: #97306)

2003-02-13  Bastien Nocera  <hadess@hadess.net>

	* configure.in: we require at gnome-vfs 2.1.6

2003-02-12  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-video-widget.c: (dest_size_cb), (frame_output_cb),
	(bacon_video_widget_set_fullscreen),
	(bacon_video_widget_ratio_fits_screen):
	* src/totem.c: (totem_action_fullscreen_toggle),
	(totem_action_fullscreen), (totem_action_handle_key),
	(totem_action_handle_scroll), (on_window_key_press_event):
	use monitor information when possible instead of screen info (more
	fixes for Xinerama), fixes fulllscreen switching bugs for very high
	key repeat rates

2003-02-12  Yuriy Syrota  <rasta renome.rovno.ua>

	* configure.in: Added "uk" (Ukrainian) to ALL_LINGUAS.

2003-02-11  Bastien Nocera  <hadess@hadess.net>

	* src/.cvsignore:
	* src/Makefile.am:
	* src/bacon-video-widget-properties.c:
	(bacon_video_widget_properties_get_type),
	(bacon_video_widget_properties_init),
	(bacon_video_widget_properties_finalize),
	(bacon_video_widget_properties_time_to_string),
	(bacon_video_widget_properties_set_label),
	(bacon_video_widget_properties_reset),
	(bacon_video_widget_properties_set_from_current),
	(bacon_video_widget_properties_update), (hide_dialog),
	(bacon_video_widget_properties_new),
	(bacon_video_widget_properties_class_init):
	* src/bacon-video-widget-properties.h:
	* src/bacon-video-widget.c: (bacon_video_widget_get_type),
	(bacon_video_widget_class_init),
	(bacon_video_widget_instance_init), (bacon_video_widget_finalize),
	(dest_size_cb), (frame_output_cb), (load_video_out_driver),
	(load_audio_out_driver), (load_config_from_gconf),
	(video_window_translate_point), (dvd_skip_behaviour),
	(bacon_video_widget_dvd_event), (generate_mouse_event),
	(configure_cb), (bacon_video_widget_realize),
	(bacon_video_widget_idle_signal), (xine_event), (xine_error),
	(bacon_video_widget_unrealize), (bacon_video_widget_new),
	(bacon_video_widget_expose), (bacon_video_widget_motion_notify),
	(bacon_video_widget_button_press), (bacon_video_widget_key_press),
	(bacon_video_widget_size_allocate), (bacon_video_widget_tick_send),
	(get_fourcc_string), (bacon_video_widget_open),
	(bacon_video_widget_play), (bacon_video_widget_stop),
	(bacon_video_widget_close), (bacon_video_widget_set_property),
	(bacon_video_widget_get_property),
	(bacon_video_widget_set_logo_mode),
	(bacon_video_widget_get_logo_mode), (bacon_video_widget_set_speed),
	(bacon_video_widget_get_speed), (bacon_video_widget_get_position),
	(bacon_video_widget_set_fullscreen),
	(bacon_video_widget_is_fullscreen),
	(bacon_video_widget_can_set_volume),
	(bacon_video_widget_set_volume), (bacon_video_widget_get_volume),
	(bacon_video_widget_set_show_cursor),
	(bacon_video_widget_get_show_cursor),
	(bacon_video_widget_set_media_device),
	(bacon_video_widget_set_show_visuals),
	(bacon_video_widget_get_current_time),
	(bacon_video_widget_get_stream_length),
	(bacon_video_widget_is_playing), (bacon_video_widget_is_seekable),
	(bacon_video_widget_can_play), (bacon_video_widget_get_mrls),
	(bacon_video_widget_toggle_aspect_ratio),
	(bacon_video_widget_ratio_fits_screen),
	(bacon_video_widget_set_scale_ratio),
	(bacon_video_widget_get_metadata_string),
	(bacon_video_widget_get_metadata_int),
	(bacon_video_widget_get_metadata_bool),
	(bacon_video_widget_get_metadata),
	(bacon_video_widget_properties_get_title),
	(bacon_video_widget_can_get_frames),
	(bacon_video_widget_get_current_frame),
	(bacon_video_widget_get_current_frame_rgb), (scale_line_1_1),
	(scale_line_45_64), (scale_line_15_16), (scale_image),
	(yuy2toyv12), (yuy2_fudge), (yv12_2_rgb), (xine_frame_to_rgb):
	* src/bacon-video-widget.h:
	* src/gtk-xine-properties.c:
	* src/gtk-xine-properties.h:
	* src/gtk-xine.c:
	* src/gtk-xine.h:
	* src/gtkxine-marshal.list:
	* src/totem-video-thumbnailer.c: (main):
	* src/totem.c: (totem_action_exit), (totem_action_play),
	(totem_action_play_media), (totem_action_stop),
	(totem_action_play_pause), (totem_action_fullscreen_toggle),
	(totem_action_fullscreen), (update_mrl_label),
	(totem_action_set_mrl), (totem_action_previous),
	(totem_action_next), (totem_action_seek_relative),
	(totem_action_volume_relative), (totem_action_toggle_aspect_ratio),
	(totem_action_set_scale_ratio), (update_seekable),
	(update_current_time), (update_sliders), (update_cb_often),
	(update_cb_rare), (vol_cb), (on_take_screenshot1_activate),
	(on_dvd_root_menu1_activate), (on_dvd_title_menu1_activate),
	(on_dvd_audio_menu1_activate), (on_dvd_angle_menu1_activate),
	(on_dvd_chapter_menu1_activate), (commit_hide_skip_to),
	(spin_button_value_changed_cb), (on_checkbutton2_toggled),
	(on_combo_entry1_changed), (mediadev_changed_cb), (popup_hide),
	(on_video_motion_notify_event), (on_error_event),
	(totem_action_handle_key), (video_widget_create),
	(totem_setup_preferences), (main):
	* src/totem.h: rename GtkXine to BaconVideoWidget

2003-02-10  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_set_media_device): fix possible memory
	fuckage which caused the DVD/VCD to not work

2003-02-10  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-message-connection.c:
	* src/bacon-message-connection.h: upd from libbacon
	* src/egg-recent-model.c: (egg_recent_model_read): fix a leak
	* src/totem.c: upd copyright

2003-02-10  Bastien Nocera  <hadess@hadess.net>

	* data/schemas.sh: disable thumbnailing of the audio types, run that
	if your system still tries to thumbnail audio files

2003-02-08  Pauli Virtanen  <pauli.virtanen@hut.fi>

	* configure.in: Added "fi" (Finnish) to ALL_LINGUAS.

2003-02-07  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem.c: (on_repeat_mode1_toggled),
	(playlist_repeat_toggle_cb), (totem_callback_connect): added repeat
	menu item under View (Closes: #104450)

2003-02-07  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: move the Properties menu item to the File menu,
	according to the HIG (Closes: #104452)

2003-02-07  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in:
	* src/bacon-message-connection.c: (bacon_message_connection_free):
	updated from libbacon
	* src/totem.c: (totem_action_exit), (totem_action_remote),
	(totem_button_pressed_remote_cb),
	(totem_message_connection_receive_cb), (process_command_line),
	(main): added plenty of command-line options to control an already
	launched totem, enqueue is the default action, only one instance of
	totem can be launched at a time (Closes: #94410)

2003-02-07  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/bacon-message-connection.[ch]:
	* src/totem-remote.h:
	* src/totem.c: (totem_message_connection_receive_cb),
	(process_command_line), (main): added BaconMessageConnection stuff,
	did client-side implementation, added 2 new types of
	TotemRemoteCommands

2003-02-06  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_class_init), (gtk_xine_set_property),
	(gtk_xine_get_property), (gtk_xine_get_position):
	* src/gtk-xine.h: removed the set_audio_channel and associated, we
	don't use or need them

2003-02-06  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_set_media_device):
	* src/totem.c: (totem_setup_preferences): fix setting the media
	device, yet again

2003-02-06  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_realize), (gtk_xine_set_fullscreen): we
	don't need a thread-safe X, we have 2 connections to the X server,
	remove all the extraneous locks

2003-02-05  Bastien Nocera  <hadess@hadess.net>

	* README:
	* src/gtk-xine.c: (gtk_xine_get_type),
	(gtk_xine_set_audio_channel), (gtk_xine_is_fullscreen),
	(gtk_xine_set_volume), (gtk_xine_get_current_frame),
	(gtk_xine_get_current_frame_rgb), (scale_line_1_1),
	(scale_line_45_64), (scale_line_15_16), (scale_image),
	(yuy2toyv12), (yv12_2_rgb):
	* src/gtk-xine.h: remove usage of deprecated stuff (GtkType, gint,
	etc.), fixed prototype for gtk_xine_is_fullscreen (), updated TODO
	list in the README

2003-02-05  Bastien Nocera  <hadess@hadess.net>

	* README: updated requirements
	* data/.cvsignore: updated
	* data/Makefile.am:
	* data/schemas.sh: added generation of a script to update an existing
	gconf install
	* src/gtk-xine.c: (gtk_xine_class_init), (gtk_xine_instance_init),
	(gtk_xine_realize), (gtk_xine_unrealize), (gtk_xine_tick_send),
	(gtk_xine_play):
	* src/gtk-xine.h:
	* src/gtkxine-marshal.list:
	* src/totem-video-thumbnailer.c: (save_pixbuf):
	* src/totem.c: (update_mrl_label), (totem_action_previous),
	(totem_action_next), (update_current_time), (update_cb_often),
	(video_widget_create): add support for a "tick" signal, remove X
	completion event handling, it's now in the video output plugin, added
	better error message for totem-video-thumbnailer

2003-02-04  Zbigniew Chyla  <cyba@gnome.pl>

	* configure.in (ALL_LINGUAS): Added pl (Polish).

2003-02-02  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_set_fullscreen): use the monitor's
	geometry, not the full display's to show the fullscreen window
	(Should close #101149)

2003-02-02  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_play_pause), (totem_playing_dvd),
	(totem_action_seek_relative), (totem_action_volume_relative),
	(update_seekable): some style changes, fix compilation, go to bed

2003-02-02  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_set_mrl), (totem_action_previous),
	(totem_action_next), (update_seekable), (update_cb_rare),
	(update_buttons): update the menu items for seekable as well

2003-02-02  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_has_previous_mrl),
	(gtk_playlist_has_next_mrl), (gtk_playlist_set_previous),
	(gtk_playlist_set_next), (gtk_playlist_set_at_end):
	* src/totem.c: (totem_action_previous), (totem_action_next),
	(on_eos_event), (update_buttons): implement the Previous button in
	Repeat mode (goes to the end of the playlist) (Partly based on a patch
	by Julien Moutte <julien@moutte.net>) (Closes: #104725)

2003-02-01  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-cd-selection.c: (bacon_cd_selection_finalize):
	* src/cd-drive.c: (cd_drive_free):
	* src/cd-drive.h:
	* src/egg-recent-model.c: (egg_recent_model_read): fix memleaks by
	updating from libegg and libbacon

2003-02-01  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_expose), (gtk_xine_open): free the expose
	event, removed an extraneous assignement for the mrl (Inspired by a
	patch from xan <xan@dimensis.com>)

2003-02-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): fix properties' window icon

2003-02-01  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: removed -export-dynamic (not needed)
	* src/gtk-message.c:
	* src/gtk-message.h: removed, we'll use something else
	* src/totem.c: (totem_action_exit), (main): upd for gtk-message.[ch]'s
	removal

2003-02-01  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: add the window icon
	* src/gtk-xine.c: (gtk_xine_get_current_frame): fix screenshot when
	ratio is 1.0

2003-01-31  Bastien Nocera  <hadess@hadess.net>

	* src/egg-recent-model.c: (egg_recent_model_changed):
	* src/egg-recent-util.c: (load_icon_file):
	* src/egg-recent-view-gtk.c: (egg_recent_view_gtk_init): update
	recent-files stuff from libegg, we can now unmount CDs that have stuff
	in the recent-files

2003-01-31  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added en_GB translation

2003-01-31  Bastien Nocera  <hadess@hadess.net>

	* data/totem.desktop.in: added Encoding field
	* src/totem.c: (on_about1_activate): s/Xine/xine/

2003-01-30  Fatih Demir <kabalak@gtranslator.org>

	* configure.in: Added "tr" (Turkish) to the languages' list.

2003-01-30  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key): sort by alphabetical order

2003-01-29  Bastien Nocera  <hadess@hadess.net>

	* README: updated

============ Version 0.90.0

2003-01-29  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 0.90.0

2003-01-29  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (generate_mouse_event): fix typo that prevented the
	mouse clicks from being passed onto xine (Closes: #104598)

2003-01-29  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_window_key_press_event): If we have modifiers, and
	either Ctrl, Mod1 (Alt), or any of Mod3 to Mod5 (Mod2 is num-lock...)
	are pressed, we let Gtk+ handle the key (Closes: #104675)

2003-01-29  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_get_current_frame): really fix the
	screenshot aspect bug (it only worked because the test video was
	square, haha) (Closes: #104605)

2003-01-28  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (xine_thread), (gtk_xine_size_allocate): remove some
	debug, and unused variables

2003-01-28  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_get_current_frame): fix screenshot's aspect
	ratio (Closes: #104605)
	* src/totem.c: (on_window_key_press_event): we also process key presses
	when numlock or capslock are on

2003-01-25  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_class_init), (load_config_from_gconf),
	(gtk_xine_set_property), (gtk_xine_set_media_device),
	(gtk_xine_set_show_visuals):
	* src/gtk-xine.h:
	* src/totem.c: (on_checkbutton2_toggled),
	(totem_setup_preferences), (main): remove gconf dependency for the
	show visuals pref

2003-01-25  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_class_init), (load_config_from_gconf),
	(gtk_xine_realize), (gtk_xine_set_property),
	(gtk_xine_set_media_device), (gtk_xine_get_mrls):
	* src/gtk-xine.h:
	* src/totem.c: (on_combo_entry1_changed), (mediadev_changed_cb),
	(totem_setup_preferences): remove gconf dependency for the media
	device

2003-01-24  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_instance_init),
	(load_video_out_driver), (gtk_xine_realize), (gtk_xine_new):
	so we actually init the engine in gtk_xine_new, and we only init the
	video engine in the realize
	* src/totem-video-thumbnailer.c: (main): fix it, and make it simpler
	good stuff

2003-01-24  Bastien Nocera  <hadess@hadess.net>

	* data/playlist.glade:
	* data/properties.glade:
	* data/totem.glade: remove separators from the dialogs
	* src/bacon-cd-selection.c: (cdrom_option_menu):
	* src/cd-drive.c: (parse_sg_line), (get_scsi_cd_name),
	(cdrom_get_name): update these from libbacon, fixes a crash on startup
	on machines using ide-scsi
	* src/gtk-xine.c:
	* src/gtk-xine.h:
	* src/totem.c: (main): removed gtk_xine_check() calls, not needed
	anymore

2003-01-24  Daniel Yacob  <locales@geez.org>

        * configure.in: Added am to ALL_LINGUAS.

2003-01-23  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_class_init), (frame_output_cb),
	(gtk_xine_set_property), (gtk_xine_get_property),
	(gtk_xine_set_logo_mode), (gtk_xine_get_logo_mode):
	* src/gtk-xine.h:
	* src/totem.c: (totem_action_set_mrl): remove the dependency on
	LOGO_PATH from gtk-xine.c

2003-01-23  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_open), (gtk_xine_close): fix the crash
	when navigating to an unsupported file for the second time

2003-01-23  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (xine_error), (get_fourcc_string),
	(gtk_xine_open):
	* src/gtk-xine.h:
	* src/totem.c: (on_error_event): simplify the i18n code in GtkXine,
	added support for the "malformed mrl" error, made GTX_NO_CODEC work
	properly (garbage in the name, and static variable in get_fourcc_string
	removed)

2003-01-22  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (get_fourcc_string), (gtk_xine_open),
	(gtk_xine_stop), (gtk_xine_close), (gtk_xine_get_position),
	(gtk_xine_can_set_volume), (gtk_xine_get_volume),
	(gtk_xine_get_stream_length), (gtk_xine_get_metadata_string),
	(gtk_xine_get_metadata_int), (gtk_xine_get_metadata_bool),
	(gtk_xine_get_metadata):
	* src/totem.c: (on_error_event): boatloads of little fixes for
	crashers and don't skip files on error

2003-01-22  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_stop): fix a deadlock when there is no
	demuxer for the video/audio we're trying to play

2003-01-22  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_add_mrl): make it so we can add
	application/x-ogg files as well

2003-01-21  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_new): use the arguments to find
	the glade file, not the old code

2003-01-20  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-cd-selection.c: (cdrom_option_menu),
	(bacon_cd_selection_set_device):
	* src/bacon-cd-selection.h:
	* src/cd-drive.c: (parse_sg_line), (get_cd_scsi_id),
	(lookup_scsi_unit), (get_scsi_cd_name), (add_linux_cd_recorder),
	(cdrom_get_name), (add_linux_cd_drive), (get_cd_device_file),
	(linux_scan), (scan_for_cdroms):
	* src/cd-drive.h:
	* src/egg-recent-model.c: (egg_recent_model_add_full): update from
	libegg and libbacon (Closes: #103419)

2003-01-20  Bastien Nocera  <hadess@hadess.net>

	* README:
	* src/totem.c: (update_sliders), (totem_action_handle_key),
	(on_window_key_press_event): ignore key presses if there's a modifier,
	add "S" as a shortcut for "Skip to" and update the README

2003-01-20  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/gtk-xine-properties.c: (gtk_xine_properties_time_to_string),
	(gtk_xine_properties_set_from_current):
	* src/gtk-xine-properties.h:
	* src/totem.c: (update_mrl_label), (commit_hide_skip_to),
	(hide_skip_to), (spin_button_value_changed_cb),
	(on_skip_to1_activate), (totem_callback_connect): make the "Skip to"
	dialog actually work (Closes: #99150)

2003-01-20  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem.c: (totem_action_set_mrl_and_play),
	(totem_action_set_mrl), (on_skip_to1_activate),
	(on_skip_forward1_activate), (on_skip_backwards1_activate),
	(on_volume_up1_activate), (on_volume_down1_activate),
	(update_buttons), (totem_callback_connect): added a "Skip To..." menu
	item, made the menus items for skip and volume changes actually work
	(and nobody even noticed they weren't working ;)

2003-01-20  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/gtk-playlist.c: (repeat_button_toggled), (update_repeat_cb),
	(init_config), (gtk_playlist_unrealize), (gtk_playlist_unmap),
	(gtk_playlist_realize), (gtk_playlist_get_repeat),
	(gtk_playlist_set_repeat), (gtk_playlist_class_init):
	* src/gtk-playlist.h:
	* src/gtk-xine.c: (frame_output_cb), (load_audio_out_driver),
	(update_mediadev_conf), (show_vfx_changed_cb),
	(load_config_from_gconf):
	* src/totem.c: (on_checkbutton1_toggled),
	(on_checkbutton2_toggled), (on_combo_entry1_changed),
	(auto_resize_changed_cb), (show_vfx_changed_cb),
	(mediadev_changed_cb), (totem_setup_preferences), (main):
	fix more GCONF_PREFIX stuff, make the playlist position saving work
	again (I don't know how it ever worked...), set playlist icon,
	add a signal to GtkPlaylist for when repeat is toggled, get/set
	functions for toggled

2003-01-20  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (repeat_button_toggled), (update_repeat_cb),
	(init_config), (gtk_playlist_unrealize), (gtk_playlist_realize),
	(gtk_playlist_new):
	* src/gtk-playlist.h:
	* src/totem.c: (totem_action_play), (totem_action_stop),
	(totem_action_play_pause), (screenshot_make_filename_helper),
	(screenshot_make_filename), (on_take_screenshot1_activate),
	(on_checkbutton1_toggled), (on_checkbutton2_toggled),
	(on_combo_entry1_changed), (playlist_changed_cb), (on_eos_event),
	(on_error_event), (main): remove obvious dependency on totem in the
	playlist (glade/pix path), fix the absence of ~/.gnome-desktop dir and
	plug a small memleak

2003-01-19  Bastien Nocera  <hadess@hadess.net>

	* README:
	* src/totem.c: (totem_action_open_files): updated to support
	subtitles, see README for syntax (Closes: #92641)

2003-01-19  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/gtk-xine.c: (gtk_xine_realize), (gtk_xine_can_play),
	(gtk_xine_get_mrls):
	* src/gtk-xine.h:
	* README:
	* src/totem.c: (drag_video_cb), (totem_action_open_files),
	(on_play_cd1_activate), (totem_callback_connect): add CDDA support,
	needs a very very recent xine-lib, and works nicely (where's cddb
	support though ? ;)

2003-01-19  Bastien Nocera  <hadess@hadess.net>

	* README:
	* src/totem.c: (drag_video_cb), (video_widget_create): added drag
	support for the video widget, has a weird interaction with nautilus
	though

2003-01-18  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/Makefile.am:
	* src/totem-statusbar.c: (time_to_string),
	(totem_statusbar_get_type), (totem_statusbar_class_init),
	(totem_statusbar_init), (totem_statusbar_new),
	(totem_statusbar_update_time), (totem_statusbar_set_text),
	(totem_statusbar_set_time), (totem_statusbar_set_time_and_length),
	(totem_statusbar_set_has_resize_grip),
	(totem_statusbar_get_has_resize_grip), (totem_statusbar_destroy),
	(get_grip_edge), (get_grip_rect), (totem_statusbar_create_window),
	(totem_statusbar_destroy_window), (totem_statusbar_realize),
	(totem_statusbar_unrealize), (totem_statusbar_map),
	(totem_statusbar_unmap), (totem_statusbar_button_press),
	(totem_statusbar_expose_event), (totem_statusbar_size_request),
	(totem_statusbar_size_allocate):
	* src/totem-statusbar.h:
	* src/totem.c: (play_pause_set_label), (totem_action_play),
	(totem_action_play_pause), (update_mrl_label),
	(totem_action_set_mrl), (totem_action_seek_relative),
	(update_current_time), (current_removed_cb), (on_eos_event),
	(totem_statusbar_create), (main): add a statusbar and move the
	time/length displays to it

2003-01-17  Bastien Nocera  <hadess@hadess.net>

	* README:
	* src/totem.c: (totem_action_handle_scroll),
	(on_window_scroll_event), (totem_callback_connect): added mousewheel
	action for the video canvas (patch by xan <xan@dimensis.com>, with
	some behaviour and style changes), updated README

2003-01-16  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_take_screenshot1_activate): update the label for
	screenshot errors

2003-01-16  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem.c: (screenshot_make_filename),
	(on_radiobutton_shot_toggled), (hide_screenshot),
	(on_take_screenshot1_activate), (totem_callback_connect): finished the
	work on the screenshot dialog

2003-01-15  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c:
	* src/gtk-playlist.h: minor fixes

2003-01-15  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine-properties.c: (gtk_xine_properties_init),
	(gtk_xine_properties_set_from_current),
	(gtk_xine_properties_update), (gtk_xine_properties_new): port the
	metadata fetching to gtk_xine_get_metadata()
	* src/gtk-xine.c: (gtk_xine_get_metadata_int): fix getting dimensions
	* src/totem-remote.c: (totem_remote_read_code),
	(totem_remote_init): don't use warnings for these errors

2003-01-15  Bastien Nocera  <hadess@hadess.net>

	* data/schemas.sh: don't try to thumbnail audio files, you dummy
	(Well spotted Anders :)

2003-01-14  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine-properties.c: (gtk_xine_properties_init),
	(gtk_xine_properties_finalize), (time_to_string),
	(gtk_xine_properties_set_label), (gtk_xine_properties_reset),
	(gtk_xine_properties_set_from_current),
	(gtk_xine_properties_update), (gtk_xine_properties_new),
	(gtk_xine_properties_class_init):
	* src/gtk-xine-properties.h:
	* src/gtk-xine.c: (gtk_xine_instance_init), (gtk_xine_finalize),
	(gtk_xine_idle_signal):
	* src/totem.c: (totem_action_set_mrl), (on_properties1_activate),
	(main): update totem and GtkXine for the new GtkXine widget
	need to finish the GtkXineProperties update code

2003-01-14  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/gtk-playlist.c:
	* src/gtk-xine-properties.c:
	(gtk_xine_properties_class_init):
	* src/gtk-xine-properties.h:
	* src/gtk-xine.c:
	* src/gtk-xine.h:
	* src/totem.c: Work on moving the Properties window into its own
	widget, to remove the libglade dependency in GtkXine
	("To be continued..."-style hacking)

2003-01-14  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (load_video_out_driver), (gtk_xine_unrealize),
	(gtk_xine_open), (gtk_xine_get_metadata_string),
	(gtk_xine_get_metadata_int), (gtk_xine_get_metadata_bool),
	(gtk_xine_get_metadata), (gtk_xine_can_get_frames):
	* src/gtk-xine.h: added gtk_xine_get_metadata call, use the "none"
	video driver by default, fix a crash on exit in totem-video-thumbnailer

2003-01-13  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_set_fullscreen):
	* src/video-utils.c:
	* src/video-utils.h: remove the custom set_fullscreen stuff and use
	what's in gdk 2.2 for us

2003-01-13  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/gnome-authn-manager.c:
	* src/gnome-authn-manager.h:
	* src/gnome-caption-table.c:
	* src/gnome-caption-table.h:
	* src/gnome-password-dialog.c:
	* src/gnome-password-dialog.h: Added Gnome Authentication dialog
	for the benefit of the playlist and the xine gnome-vfs plugin
	* src/gtk-xine.c: (generate_mouse_event), (gtk_xine_realize),
	(gtk_xine_idle_signal), (xine_event), (gtk_xine_motion_notify),
	(gtk_xine_button_press):
	* src/gtk-xine.h:
	* src/totem.c: (on_video_motion_notify_event), (main): Fix the DVD
	menus wrt mouse motion. Send the eos and title change events from
	the xine thread directly, not using the idle signal generation

2003-01-13  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_class_init), (gtk_xine_realize),
	(gtk_xine_set_fullscreen): remove the gdk_window_set_transient_for
	call, as it seems to break fullscreen. re-add our configure hack

2003-01-13  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_class_init), (generate_mouse_event),
	(xine_thread), (gtk_xine_realize), (gtk_xine_unrealize),
	(gtk_xine_motion_notify), (gtk_xine_button_press),
	(gtk_xine_key_press), (gtk_xine_configure),
	(gtk_xine_size_allocate), (gtk_xine_set_fullscreen):
	* src/totem.c: (on_video_motion_notify_event),
	(totem_callback_connect), (video_widget_create): move all the
	signal handling out of the Gdk event filter, and update totem
	to take it into account

2003-01-13  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_instance_init),
	(gtk_xine_filter_events), (gtk_xine_expose),
	(gtk_xine_set_fullscreen): move the expose event handling from the
	filter queue to the widget's handler

2003-01-13  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* configure.in:
	* src/Makefile.am:
	* src/input_gnomevfs.c: removed the gnome-vfs plugin, it now belongs
	in xine-lib

2003-01-12  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_instance_init),
	(load_audio_out_driver): fix a warning in the audio driver error,
	the widget doesn't need to be non double-buffered

2003-01-12  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (load_audio_out_driver): add an error if we can't
	get a working driver, for the benefit of RhythmBox

2003-01-12  Bastien Nocera  <hadess@hadess.net>

	* src/video-utils.c: (wmspec_change_state):
	* src/video-utils.h: removed the old compat fullscreen function
	(get a decent WM, thank you)

2003-01-12  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_filter_events), (gtk_xine_realize),
	(gtk_xine_get_current_frame), (gtk_xine_get_current_frame_rgb),
	(xine_frame_to_rgb): fix plenty of warnings and cleanups

2003-01-12  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (generate_mouse_event), (xine_thread),
	(gtk_xine_filter_events), (gtk_xine_realize),
	(gtk_xine_size_allocate), (gtk_xine_set_fullscreen):
	Make the events needed for menus and all generated again,
	fullscreen works again (Can we also filter the completion event the
	same way ?)

2003-01-11  Bastien Nocera  <hadess@hadess.net>

	* README:
	* src/gtk-xine.c: (gtk_xine_instance_init),
	(load_video_out_driver), (gtk_xine_realize),
	(gtk_xine_set_fullscreen): disable fullscreen for a second, use a
	GdkWindow for video_window
	* src/video-utils.c: (wmspec_change_state),
	(old_wmspec_set_fullscreen), (window_set_fullscreen):
	* src/video-utils.h: use GdkWindows instead of Windows

2003-01-11  Bastien Nocera  <hadess@hadess.net>

	* data/.cvsignore: 
	* src/totem.c: (totem_action_drop_files), (drop_video_cb),
	(drop_playlist_cb), (totem_callback_connect),
	(video_widget_create): dnd on the canvas replaces the dnd on the
	action part of the UI, you can also dnd on the playlist button to add
	files to the playlist (Closes: #101903)

2003-01-11  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/gtk-xine.c: (gtk_xine_realize): use a GdkWindow, that enables
	use to have a working DND on the canvas

2003-01-10  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_realize): simple change that makes totem
	work on remote displays

2003-01-10  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: build fixes (again)
	* src/gtk-xine.c: (gtk_xine_get_stream_length):
	* src/totem.c: (totem_action_play),
	(totem_action_set_mrl_and_play), (totem_action_fullscreen_toggle),
	(totem_action_set_mrl): back out the previous time display changes
	and fix the gtk_xine_get_stream_length() call

2003-01-10  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: build fix

2003-01-10  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* data/Makefile.am:
	* data/schemas.sh: added, generates the
	totem-video-thumbnail.schemas.in from the totem.keys file
	* data/totem.schemas.in: fixed the default value for show_vfx

2003-01-09  Bastien Nocera  <hadess@hadess.net>

	* configure.in: remove STABLE/UNSTABLE stuff
	* data/Makefile.am: fix user-install (Closes: #102987), patch by
	jogzh001@sneakemail.com
	* src/Makefile.am: ditto configure.in
	* src/bacon-cd-selection.[ch]:
	* src/cd-drive.[ch]:
	* src/egg-*.[ch]: upd from libegg and libbacon
	* src/totem-video-thumbnailer.c: (main):
	* src/totem.c: (totem_action_play),
	(totem_action_set_mrl_and_play), (totem_action_fullscreen_toggle),
	(totem_action_set_mrl): fix time display, and the properties window

2003-01-09  Christian Neumair  <chris@gnome-de.org>

	* src/.cvsignore: Added list_cddrives.

2003-01-08  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_open):
	* src/totem.c: (totem_action_set_mrl_and_play),
	(totem_action_play_media), (totem_action_play_pause),
	(totem_action_set_mrl), (totem_action_previous),
	(totem_action_next), (drop_cb), (on_open1_activate),
	(playlist_changed_cb), (current_removed_cb), (main):
	* src/totem.h: removed debug, fixed typo in the decoder error
	(Closes: #102851), handle failed open better than we do now

2003-01-08  Bastien Nocera  <hadess@hadess.net>

	* src/bacon-cd-selection.c:
	* src/bacon-cd-selection.h:
	* src/cd-drive.c:
	* src/cd-drive.h:
	* src/egg-*.[ch]: Add these files for the benefit of the i18n people
	(Closes: #102777)

2003-01-08  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (get_fourcc_string), (gtk_xine_open):
	add error checking to gtk_xine_open, nicked get_fourcc_string from
	xine-ui

2003-01-08  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_about1_activate): fix small leak (spotted by
	Alex Duggan)

2003-01-07  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_get_position),
	(gtk_xine_get_current_time), (gtk_xine_get_stream_length):
	fixed endless loops, need to fix gtk_xine_open calls (check return
	value)

2003-01-07  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_get_position),
	(gtk_xine_get_current_time), (gtk_xine_get_stream_length):
	harden the functions using xine_get_pos_length. 10 tries to getting the
	current positions, and length. Makes seeking better

2003-01-07  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_open), (gtk_xine_play): moved the port
	rewiring from gtk_xine_play to gtk_xine_open, and add an error
	if there's no audio nor video supported in the stream (this should
	speed up seeking a bit)

2003-01-07  Bastien Nocera  <hadess@hadess.net>

	* src/.cvsignore: upd
	* src/gtk-xine.c: (gtk_xine_finalize), (gtk_xine_unrealize),
	(gtk_xine_can_get_frames): XINE_STREAM_INFO_VIDEO_HANDLED is broken for
	some decoders, we enable it so we can test it, destroy the event queue
	properly

2003-01-07  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: doh!, add the vfs files in again
	* src/totem-video-thumbnailer.c: (save_pixbuf): only return 1 for
	hardcore errors

2003-01-07  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_can_get_frames):
	XINE_STREAM_INFO_VIDEO_HANDLED is broken for now, disable it
	* src/totem-video-thumbnailer.c: (main): reenable the check for
	can_get_frames

2003-01-07  Bastien Nocera  <hadess@hadess.net>

	* README: add info about the thumbnailer
	* configure.in: add some gtk+ only flags
	* data/.cvsignore: upd
	* data/totem.glade: add the screenshot menu item
	* src/Makefile.am: upd
	* src/egg-recent-vfs-utils.[ch]: add these files in (I'm pretty sure
	Totem doesn't compile anymore on stable GNOME...)
	* src/gtk-playlist.c: (drop_cb), (gtk_playlist_add_mrl): removed
	useless debug
	* src/gtk-xine.c: (load_video_out_driver), (gtk_xine_realize),
	(gtk_xine_unrealize), (gtk_xine_get_position),
	(gtk_xine_get_current_time), (gtk_xine_get_stream_length),
	(gtk_xine_properties_dialog_get), (gtk_xine_can_get_frames),
	(gtk_xine_get_current_frame), (xine_frame_to_rgb): remove debug,
	add some FIXMEs, remove gnome dependency, more work on the thumbnailer
	side
	* src/gtk-xine.h: upd
	* src/list_cddrives.c: removed, it's in libbacon now
	* src/totem-video-thumbnailer.c: (save_pixbuf), (main): more work
	* src/totem.c: (on_take_screenshot1_activate),
	(totem_callback_connect), (video_widget_create): remove debug, started
	adding the screenshot function

2003-01-06  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: upd
	* src/gtk-xine.c: (gtk_xine_instance_init),
	(load_video_out_driver), (load_audio_out_driver), (gtk_xine_new),
	(gtk_xine_properties_update), (gtk_xine_get_current_frame),
	(gtk_xine_get_current_frame_rgb), (scale_line_1_1),
	(scale_line_45_64), (scale_line_15_16), (scale_image),
	(yuy2toyv12), (yuy2_fudge), (yv12_2_rgb), (xine_frame_to_rgb): nick a
	lot of functions from http://pornview.sf.net to add screenshooting
	capability
	* src/gtk-xine.h: upd
	* src/totem-video-thumbnailer.c: (print_usage), (show_pixbuf),
	(save_pixbuf), (main): added
	* src/totem.c: (video_widget_create): some runtime fixes

2003-01-06  Bastien Nocera  <hadess@hadess.net>

	* src/.cvsignore: upd

2003-01-02  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/gtk-xine.c: (gtk_xine_class_init), (gtk_xine_realize),
	(gtk_xine_idle_signal):
	* src/gtk-xine.h:
	* src/totem.c: (totem_action_open_files), (totem_callback_connect),
	(video_widget_create), (main):
	* src/totem.h: if we create a GdkWindow and use that for xine, we can
	get DND working. I need to create a test case and cook up some work
	arounds for the expose handling in gdk
	* src/xdnd.c:
	* src/xdnd.h: removed

2003-01-02  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/gtk-xine.c: (gtk_xine_class_init),
	(gtk_xine_process_file_list), (gtk_xine_filter_events),
	(gtk_xine_realize), (gtk_xine_idle_signal):
	* src/gtk-xine.h:
	* src/totem.c: (on_dnd_event), (totem_callback_connect),
	(video_widget_create):
	* src/xdnd.c: (wXDNDInitialize), (wXDNDMakeAwareness),
	(wXDNDClearAwareness), (wXDNDProcessSelection),
	(wXDNDProcessClientMessage):
	* src/xdnd.h: get the DND code from MPlayer instead of Window Maker,
	glib-ise a bit the whole thing, and clean up the code.
	DND now works on the video playback canvas

2003-01-02  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: build fixes

2003-01-02  Bastien Nocera  <hadess@hadess.net>

	* README_CVS:
	* data/totem.glade:
	* src/Makefile.am:
	* src/cd-drive.c: removed
	* src/cd-drive.h: ditto
	* src/totem-cd-selection.c: ditto
	* src/totem-cd-selection.h: ditto
	* src/totem.c: (on_combo_entry1_changed), (mediadev_changed_cb),
	(bacon_cd_selection_create), (totem_setup_preferences):
	update everything wrt the new libbacon

2002-12-30  Bastien Nocera  <hadess@hadess.net>

	* src/input_gnomevfs.c: (gnomevfs_plugin_get_optional_data):
	disable the subtitle stuff for now

2002-12-29  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (load_audio_out_driver),
	(video_window_translate_point), (gtk_xine_play): remove debug

2002-12-29  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_realize), (gtk_xine_play): fix the last
	bits missing for the Visual Effects plugins to work. Only Goom is
	supported at the moment

2002-12-29  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am: use pkg-config for xine as well now

2002-12-27  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: upd
	* data/totem.schemas.in: upd
	* src/gtk-xine.c: (gtk_xine_instance_init), (update_mediadev_conf),
	(show_vfx_changed_cb), (load_config_from_gconf), (gtk_xine_play),
	(gtk_xine_get_mrls): upd
	* src/totem.c: (on_checkbutton2_toggled), (show_vfx_changed_cb),
	(totem_setup_preferences): added Visual Effects Playback when a stream
	with no video is playing. See http://sourceforge.net/mailarchive/forum.php?thread_id=1460406&forum_id=11923 for interesting code

2002-12-27  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/gtk-xine.c: (gtk_xine_instance_init), (frame_output_cb),
	(gtk_xine_open), (gtk_xine_close):
	* src/totem.c: (totem_action_set_mrl), (on_checkbutton1_toggled),
	(on_combo_entry1_changed), (auto_resize_changed_cb),
	(mediadev_changed_cb), (totem_setup_preferences), (main):
	only resize the video if it's not the logo we're going to be showing,
	add the mrl to the GtkXine widget, use GCONF_PREFIX, cleanups
	(Closes: #101475)

2002-12-27  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: added some targets to remove the need for a manual
	regenerate-build-sources line

2002-12-27  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_about1_activate): the Copyright notice shouldn't be
	translatable (Closes: #101947, #102010)

2002-12-24  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/gtk-xine.c: (gtk_xine_filter_events), (gtk_xine_realize):
	* src/totem.c: (video_widget_create):
	* src/xdnd.c: (wXDNDInitializeAtoms), (wXDNDMakeAwareness),
	(wXDNDClearAwareness), (wXDNDProcessSelection), (isAwareXDND),
	(acceptXDND), (wXDNDProcessClientMessage):
	* src/xdnd.h: some work towards getting DND to work on the playback
	canvas itself, needs *more* work

2002-12-23  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_about1_activate): change the (C) to a proper
	copyright sign

2002-12-16  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (xine_thread), (gtk_xine_unrealize):
	* src/scrsaver.c: (scrsaver_init), (scrsaver_disable),
	(scrsaver_enable):
	* src/totem.c: (totem_action_exit): exit fixes, should fix the very
	slow exits (Closes: #101299, #101258)

2002-12-16  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (update_sliders), (main): fix up volume being at 0
	on startup (patch by John McCutchan <ttb@tentacle.dhs.org>)
	(Closes: #101298)

============ Version 0.13.1

2002-12-15  Bastien Nocera  <hadess@hadess.net>

	* src/list_cddrives.c: (list_cdroms): fix compilation,
	actually release 0.13.1 now

2002-12-15  Bastien Nocera  <hadess@hadess.net>

	* src/cd-drive.c: fix typo

2002-12-13  Bastien Nocera  <hadess@hadess.net>

	* src/cd-drive.c: (parse_sg_line), (add_linux_cd_recorder),
	(add_linux_cd_drive), (linux_scan), (scan_for_cdroms):
	* src/cd-drive.h: some fixes from Iain Holmes <iain@prettypeople.org>,
	change max_speed to max_speed_write, and add max_speed_read
	* src/totem-cd-selection.h: use (void) when there are no args, not just
	()

2002-12-12  Bastien Nocera  <hadess@hadess.net>

	* src/list_cddrives.c: (list_cdroms): list more stuff

2002-12-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 0.13.1
	* src/Makefile.am: add $(GLIB_UNSTABLE) (spotted by riccardo, on
	#gnome IRC)

2002-12-10  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (update_mediadev_conf), (load_config_from_gconf),
	(gtk_xine_get_mrls): make sure that the media device is changed when
	switched during the course of the session

2002-12-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem-cd-selection.c: (get_drive),
	(totem_cd_selection_set_device): fix crashes on CD-Rom-less machines,
	better handling of the default CD-Rom device checks

2002-12-09  Bastien Nocera  <hadess@hadess.net>

	* README: updated
	* TODO: upd

2002-12-09  Bastien Nocera  <hadess@hadess.net>

	* configure.in: glib 2.1.x detection
	* src/cd-drive.c: (cdrom_get_name), (linux_scan),
	(scan_for_cdroms): fix up glib-2.1.x usage, use g_strndup instead of
	strndup which is GNU only, some coding style fixes
	* src/totem-cd-selection.c: (cdrom_option_menu),
	(totem_cd_selection_set_device): make the widget insensitive if there
	are no CD-Rom drives on the machine, fallback to the default device if
	totem_cd_selection_set_device failed

============ Version 0.13.0

2002-12-08  Bastien Nocera  <hadess@hadess.net>

	* src/cd-drive.c: (g_str_has_prefix): implement g_str_has_prefix for
	glib-2.x platforms

2002-12-07  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 0.13.0

2002-12-07  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: upd
	* src/cd-drive.c: (cdrom_get_name): fixed getting the name
	* src/list_cddrives.c: (list_cdroms), (main): added test case
	* src/totem-cd-selection.c: (get_drive),
	(totem_cd_selection_instance_init), (option_menu_device_changed),
	(cdrom_option_menu), (totem_cd_selection_new),
	(totem_cd_selection_get_default_device),
	(totem_cd_selection_set_device), (totem_cd_selection_get_device):
	* src/totem-cd-selection.h: added the implementation for the option
	menu selection
	* src/totem.c: (totem_setup_preferences): updated
	* data/totem.schemas.in: changed the default mediadev to "auto"
	(Closes: #95653)

2002-12-07  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem-cd-selection.c: (totem_cd_selection_get_type),
	(totem_cd_selection_class_init),
	(totem_cd_selection_instance_init), (totem_cd_selection_realize),
	(totem_cd_selection_unrealize), (totem_cd_selection_finalize),
	(on_combo_entry_changed), (totem_cd_selection_new),
	(totem_cd_selection_set_property),
	(totem_cd_selection_get_property), (totem_cd_selection_set_device),
	(totem_cd_selection_get_device):
	* src/totem-cd-selection.h:
	* src/totem.c: (on_combo_entry1_changed), (mediadev_changed_cb),
	(label_create), (totem_cd_selection_create),
	(totem_setup_preferences): changes to use the new TotemCdSelection
	widget, no implementation using the CDDrive stuff yet

2002-12-07  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/cd-drive.c: (read_lines), (parse_sg_line), (count_strings),
	(get_cd_scsi_id), (lookup_scsi_unit), (get_device_max_speed),
	(add_linux_cd_recorder), (cdrom_get_name), (add_linux_cd_drive),
	(linux_scan), (scan_for_cdroms):
	* src/cd-drive.h:
	* src/totem-cd-selection.c: (totem_cd_selection_get_type),
	(totem_cd_selection_class_init),
	(totem_cd_selection_instance_init), (totem_cd_selection_finalize),
	(totem_cd_selection_idle_signal), (totem_cd_selection_new),
	(totem_cd_selection_set_property),
	(totem_cd_selection_get_property), (totem_cd_selection_set_speed):
	* src/totem-cd-selection.h:
	* src/totem.c: added the start of TotemCdSelection, and the
	implementation of scan_for_cdroms ()

2002-12-07  Christian Neumair  <chris@gnome-de.org>

	* .cvsignore: Updated.
	* src/totem.c: Marked a missing string for translation.

2002-12-06  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_add_mrl):
	* src/gtk-xine.c: (gtk_xine_get_volume):
	* src/totem.c: (update_sliders), (update_cb_often),
	(update_cb_rare), (totem_callback_connect), (video_widget_create),
	(main): try to be more efficient when setting the volume (including
	the updating of the image), don't check if we're seekable so often

2002-12-04  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (load_video_out_driver), (gtk_xine_dvd_event):
	fix stupidity in the return vals for gtk_xine_dvd_event (), fix aspect
	ratio, spotted by Henning Haaland Kulander <hennikul@ifi.uio.no>

2002-12-03  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/gtk-xine.c: (dvd_skip_behaviour), (gtk_xine_dvd_event):
	* src/gtk-xine.h:
	* src/totem.c: (totem_action_set_mrl), (totem_playing_dvd),
	(totem_action_previous), (totem_action_next), (drop_cb),
	(totem_action_open_files), (on_dvd_root_menu1_activate),
	(on_dvd_title_menu1_activate), (on_dvd_audio_menu1_activate),
	(on_dvd_angle_menu1_activate), (on_dvd_chapter_menu1_activate),
	(totem_action_handle_key), (update_dvd_menu_items),
	(update_buttons), (totem_callback_connect):
	big patch by John McCutchan <ttb@tentacle.dhs.org>. Added
	gtk_xine_dvd_event (), Skip by Chapter, DVD menu/Title menu/Angle
	menu/Chapter menu items and associated code.

2002-11-30  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_add_mrl),
	(gtk_playlist_has_next_mrl), (gtk_playlist_set_title):
	* src/gtk-playlist.h:
	* src/gtk-xine.c: (gtk_xine_class_init), (gtk_xine_idle_signal),
	(xine_event):
	* src/gtk-xine.h:
	* src/totem.c: (totem_action_set_mrl), (update_mrl_label),
	(on_title_change_event), (update_seekable), (update_current_time),
	(update_sliders), (update_cb), (totem_callback_connect),
	(video_widget_create): patch from John McCutchan
	<ttb@tentacle.dhs.org>, check if seekable every once in a while, set
	the title to be the one from the DVD, get the right length for the DVD
	chapters.
	Added gtk_playlist_set_title () for GtkPlaylist, also set the window
	title when setting the labels

2002-11-28  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (update_sliders_cb): show the time next to the seek
	slider, patch by John McCutchan <ttb@tentacle.dhs.org>

2002-11-28  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade: make properties text selectable
	(Closes: #99811)

2002-11-28  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_can_set_volume): if the volume is -1, we
	can't set the volume (the OSS output plugin doesn't seem to support
	setting the volume, weird) (Closes: #99757)

2002-11-27  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_open_files): removed debug message

============ Version 0.12.1

2002-11-27  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 0.12.1

2002-11-27  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_get_mrls): use DVD as the DVD plugin
	identifier, not NAV anymore
	* src/totem.c: (totem_action_open_files): not dvd:// anymore, but
	dvd:/, makes DVD playback work again. (Closes: #99556)

2002-11-27  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications:
	* data/totem.keys: whoo, xine 1.0 alpha2 can use the binary-only
	plugins from Real Player for Linux, added the Real Media mime-types

============ Version 0.12.0

2002-11-25  Bastien Nocera  <hadess@hadess.net>

	* configure.in: version 0.12.0

2002-11-25  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key): add support for a bunch of
	XFree86 multimedia keys (*hint* use acme *hint*)

2002-11-25  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_handle_key): add 'O' and 'o' (that's the
	letter 'o' not zero), switches to window mode, and opens the file
	selector (Closes: #99520) (it's not possible to do that kind of thing
	in fullscreen mode properly)

2002-11-25  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: remove the word stream from the interface

2002-11-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (main): fix the call to gtk_program_register

2002-11-24  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_open_files): fix double free that would
	crash totem on startup, bad bad

2002-11-22  Bastien Nocera  <hadess@hadess.net>

	* data/totem.desktop.in: added StartupNotify=true

2002-11-22  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_finalize): added more cleanups on _finalize

2002-11-22  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_unrealize): more exit code cleanups from
	Daniel Caujolle-Bert <segfault@club-internet.fr> (Merci Daniel!)

2002-11-21  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_unrealize): dispose of the stream and
	close both the audio and the video drivers before exiting, should fix
	the crash on exit (again...)

2002-11-21  Bastien Nocera  <hadess@hadess.net>

	* data/totem.desktop.in: added X-Bugzilla stuff
	* src/gtk-xine.c: (gtk_xine_unrealize): unmap before stopping the xine
	engine

2002-11-20  T?Âµivo Leedj?â¬rv  <toivo@linux.ee>

	* configure.in: Added et to ALL_LINGUAS.

2002-11-19  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (time_to_string): "0 seconds" not "0 second"

2002-11-18  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_unrealize): try to zero the pointers of
	the stream and the engine after closing them, yet another try at the
	crash on exit
	* src/totem.c: (totem_action_open_files): try to cut to the subtitle
	before checking for existance of the files

2002-11-17  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_unrealize):
	* src/totem.c: (totem_action_exit), (current_removed_cb): close the
	stream before destroying the xine engine, should really fix the crash
	on exit

2002-11-16  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: fix the fullscreen buttons
	* src/gtk-message.c: (gtk_message_queue_unref),
	(selection_get_func), (selection_clear_func),
	(gtk_program_register), (gtk_message_queue_new),
	(gtk_message_queue_is_server):
	* src/gtk-message.h: started porting to SysV message queues
	* src/totem.c: (totem_action_exit), (totem_action_set_mrl),
	(vol_cb), (totem_setup_preferences), (process_queue), (main): try to
	fix the crash on exit, fixes for the fullscreen volume slider, changes
	for gtk-message

2002-11-15  Dmitry G. Mastrukov  <dmitry@taurussoft.org>

	* configure.in: Added Belarusian to ALL_LINGUAS.

2002-11-14  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_mouse_motion_event): fix showing the label on the
	fullscreen controls

2002-11-14  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem.c: (totem_action_set_mrl): try to do some UI changes to
	the fullscreen controls

2002-11-13  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: some UI changes inspired by Luca Ferretti
	<elle.uca@libero.it>, the volume now has a minimum size, and moved the
	label underneath the video. It all looks a lot better for very small
	movies at real size

2002-11-13  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_set_mrl), (on_eos_event): some fixes to
	get logo working

2002-11-13  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_new):
	* src/gtk-playlist.h:
	* src/totem.c: (main): don't set the playlist as a transient of the
	main window

2002-11-13  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_instance_init),
	(gtk_xine_properties_dialog_get), (gtk_xine_properties_update):
	fix what's shown in the properties dialog when the logo is loaded

2002-11-10  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade:
	* src/gtk-xine.c: (time_to_string), (gtk_xine_properties_reset),
	(gtk_xine_properties_set_from_current): added a duration field to the
	movie properties dialog

2002-11-10  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (init_columns): only one column

2002-11-09  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade: s/Codec:/Codec: / to simplify the .po files

2002-11-09  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_properties1_activate): added error when we couldn't
	get the properties window

2002-11-09  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade:
	* src/gtk-xine.c: (gtk_xine_can_set_volume),
	(gtk_xine_properties_reset),
	(gtk_xine_properties_set_from_current): simplify
	gtk_xine_can_set_volume(), disable the video/audio frames in the
	properties depending on wether there is audio/video present

2002-11-09  Bastien Nocera  <hadess@hadess.net>

	* data/playlist-playing.png: invert the colours, otherwise you can't
	see a thing with most of the themes

2002-11-09  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade: change the frames to no shadow, and put the
	labels in bold (looks better indeed)

2002-11-08  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/properties.glade:
	* data/totem.glade:
	* src/gtk-xine.c: (gtk_xine_instance_init), (gtk_xine_finalize),
	(hide_dialog), (gtk_xine_properties_dialog_get),
	(gtk_xine_properties_get_title), (gtk_xine_properties_set_label),
	(gtk_xine_properties_reset),
	(gtk_xine_properties_set_from_current),
	(gtk_xine_properties_update):
	* src/gtk-xine.h:
	* src/totem.c: (totem_action_set_mrl), (on_about1_activate),
	(on_properties1_activate), (hide_prefs), (totem_callback_connect),
	(main): properties work (Closes: #92098), and fix the copyright notice
	so that Jordi stops bugging me

2002-11-08  Bastien Nocera  <hadess@hadess.net>

	* data/properties.glade: added

2002-11-08  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_play), (gtk_xine_set_speed),
	(gtk_xine_set_scale_ratio), (gtk_xine_properties_dialog_get),
	(gtk_xine_properties_get_title), (gtk_xine_properties_update):
	* src/gtk-xine.h: fix for when seeking goes beyond the length of the
	stream, starts of the properties dialog

2002-11-07  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem.c: (totem_action_set_mrl), (on_about1_activate),
	(on_error_event), (label_create): fix i18n issues (Closes: #97636)

2002-11-07  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.h:
	* src/totem.c: (auto_resize_changed_cb), (mediadev_changed_cb),
	(video_widget_create), (totem_setup_preferences):
	* src/totem.h: make preferences work, add copyright notices

2002-11-07  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem.c: (totem_action_play_media), (video_widget_create):
	make the VCD and DVD menu items easier on the users. Now the menu
	items are always sensitive, and a helpful error message appears when
	there's a problem

2002-11-07  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_play), (gtk_xine_set_speed):
	* src/gtk-xine.h:
	* src/totem.c: (totem_button_pressed_remote_cb),
	(totem_action_handle_key): fix seeking and speed arguments, fix API
	to make it less xine-specific

2002-11-07  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_play): fix seeking, xine now uses
	milliseconds not seconds
	* src/gtk-xine.h: add comment for gtk_xine_play
	* src/totem.c: (on_checkbutton1_toggled),
	(on_combo_entry1_changed), (totem_setup_preferences): more preferences
	work, need to update when changed from gconf

2002-11-04  Jordi Mallach  <jordi@sindominio.net>

	* configure.in (ALL_LINGUAS): Added Catalan (ca).

2002-11-04  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (load_config_from_gconf),
	(gtk_xine_set_fullscreen): remove gconf_is_initalized checks,
	fullscreen cleanups
	* src/video-utils.c: (wmspec_change_state),
	(old_wmspec_set_fullscreen), (window_set_fullscreen):
	* src/video-utils.h: fullscreen cleanups

2002-11-03  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (load_config_from_gconf):
	* src/totem.c: (totem_action_set_mrl), (main): Remove the logo stuff
	from the GtkXine widget and into totem itself

2002-11-03  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am: update to test for unstable libgnomeui (wheee,
	nifty icons in the menu for recent files)
	* src/input_gnomevfs.c: (gnomevfs_plugin_read),
	(gnomevfs_plugin_get_optional_data), (gnomevfs_klass_open):
	clean up debug

2002-11-02  Bastien Nocera  <hadess@hadess.net>

	* src/input_gnomevfs.c: (gnomevfs_plugin_get_capabilities),
	(gnomevfs_plugin_read), (gnomevfs_plugin_read_block),
	(gnomevfs_plugin_get_mrl), (gnomevfs_plugin_get_optional_data),
	(gnomevfs_klass_open): fix gnomevfs_klass_open (this->fh was never
	assigned the file handle), clean up the rest of the file

2002-10-31  Bastien Nocera  <hadess@hadess.net>

	* data/playlist-playing.png:
	* data/rhythmbox-volume-max.png:
	* data/rhythmbox-volume-medium.png:
	* data/rhythmbox-volume-min.png:
	* data/rhythmbox-volume-zero.png: updated with icons from Luca
	Ferretti <elle.uca@libero.it>

2002-10-31  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: added lirc_example to EXTRA_DIST

2002-10-30  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_instance_init), (frame_output_cb),
	(load_audio_out_driver), (load_config_from_gconf),
	(gtk_xine_realize), (xine_event), (gtk_xine_set_audio_channel),
	(gtk_xine_get_audio_channel), (gtk_xine_can_set_volume): plenty of
	fixes, save the config file in a place different from the one
	libgnomeui uses, load from gconf on instance_init, remove old code

2002-10-29  Yukihiro Nakai  <nakai@gnome.gr.jp>

	* configure.in: Add Japanese 'ja' to ALL_LINGUAS

2002-10-28  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (drop_cb): fix dropping a file that's not local
	* src/gtk-xine.c: (gtk_xine_realize): remove the codec reporting
	* src/totem.c: (drop_cb): same as GtkPlaylist

2002-10-28  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (drop_cb), (init_config),
	(gtk_playlist_add_one_mrl), (gtk_playlist_set_at_start):
	fix all the crack warnings
	* src/gtk-xine.c: (gtk_xine_realize), (gtk_xine_open),
	(gtk_xine_stop), (gtk_xine_close): fix the plugins detection,
	semantics for _open/_play and _close
	* src/gtk-xine.h:
	* src/totem.c: (totem_action_set_mrl): fix the time display, and
	remove the temporary commented hacks, remove the disable_output stuff,
	it's crack and not used anyway

2002-10-28  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (dest_size_cb), (frame_output_cb),
	(load_video_out_driver), (generate_mouse_event), (xine_thread),
	(gtk_xine_realize), (gtk_xine_set_speed), (gtk_xine_is_playing):
	fix the mouse event generation, the speed setting, and the
	display_ratio setting (int v. double)

2002-10-28  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_instance_init),
	(load_video_out_driver), (load_audio_out_driver), (xine_thread),
	(gtk_xine_realize), (gtk_xine_check), (gtk_xine_open),
	(gtk_xine_play), (gtk_xine_stop), (gtk_xine_set_speed),
	(gtk_xine_get_speed), (gtk_xine_get_position),
	(gtk_xine_set_audio_channel), (gtk_xine_can_set_volume),
	(gtk_xine_set_volume), (gtk_xine_get_volume),
	(gtk_xine_get_current_time), (gtk_xine_get_stream_length),
	(gtk_xine_is_playing), (gtk_xine_is_seekable):
	* src/gtk-xine.h:
	* src/totem.c: (volume_set_image), (totem_action_play),
	(totem_action_set_mrl), (totem_action_seek_relative),
	(on_mouse_click_fullscreen), (on_mouse_motion_event),
	(video_widget_create): much more work on the port, add gtk_xine_open
	function, change semantics of the gtk_xine_play function

2002-10-28  Bastien Nocera  <hadess@hadess.net>

	* configure.in: require 0.9.14
	* src/Makefile.am: remove -lxineutils
	* src/gtk-xine.c: 
	* src/input_gnomevfs.c: both files, first shot at porting, still
	compiles, probably very broken

============ Version 0.11.0

2002-10-27  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: disable prefs
	* src/gtk-playlist.c: (gtk_playlist_unset_playing):
	* src/gtk-xine.c: (load_video_out_driver): little cleanups
	* src/totem.c: (totem_action_exit): fix warning on exit

2002-10-25  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications: added asx support
	* data/totem.keys: ditto
	* src/gtk-playlist.c: (parse_entry), (parse_entries),
	(gtk_playlist_add_asx), (gtk_playlist_add_mrl): we can now parse asx
	playlists, tada!

2002-10-24  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in: added playlist coordinates
	* src/gtk-playlist.c: (gtk_playlist_finalize),
	(gtk_playlist_unrealize), (gtk_playlist_realize),
	(gtk_playlist_class_init): Save playlist coordinates between runs of
	Totem
	* src/gtk-xine.c: (gtk_xine_class_init), (gtk_xine_instance_init),
	(load_audio_out_driver), (configure_cb), (gtk_xine_realize),
	(gtk_xine_unrealize), (gtk_xine_expose), (gtk_xine_stop),
	(gtk_xine_set_fullscreen), (gtk_xine_is_fullscreen): some style
	cleanups
	* src/input_gnomevfs.c: (gnomevfs_plugin_close): only close if
	there's actually something to close
	* src/totem.c: (totem_action_exit): destroy the playlist before we
	close Totem

2002-10-24  Thomas Vander Stichele <thomas@apestaart.org>

  	* configure.in: fix AC_DEFINE* to take three arguments
          get rid of acconfig.h 
          appease libtool gods by switching around two macros
          poke fun at the master hacker

2002-10-23  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (time_to_string), (totem_action_play): display "2
	minutes and 30 seconds" as "2:30" not " 2:30", and update time in the
	label when we're playing the video

2002-10-23  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added more libtool fpic fu (from xine-lib)
	* src/Makefile.am: added -D_REENTRANT -D_FILE_OFFSET_BITS=64 thus
	making the gnome-vfs plugin actually work from totem itself, wheeee!

2002-10-23  Bastien Nocera  <hadess@hadess.net>

	* src/debug.h: remove debug for threads_enter/_leave
	* src/gtk-message.c: (gtk_message_make_selection_name): remove debug
	* src/gtk-xine.c: (gtk_xine_instance_init),
	(gtk_xine_set_fullscreen): move the Poor Man's Lock to the object,
	create and delete the window when entering/leaving fullscreen
	* src/totem.c: (totem_action_play), (on_mouse_click_fullscreen),
	(totem_callback_connect): more patching from John McCutchan
	<ttb@tentacle.dhs.org> for the fullscreen controls

2002-10-21  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: use a FileEntry instead of a simple entry
	* src/gtk-playlist.c: (gtk_tree_model_iter_previous),
	(gtk_tree_path_equals), (gtk_tree_selection_has_selected_foreach),
	(read_ini_line_int), (read_ini_line_string), (drop_cb),
	(update_current_from_playlist), (gtk_playlist_add_files),
	(gtk_playlist_foreach_selected), (gtk_playlist_remove_files),
	(init_columns), (treeview_row_changed), (init_treeview),
	(gtk_playlist_init), (gtk_playlist_finalize), (gtk_playlist_new),
	(gtk_playlist_add_one_mrl), (gtk_playlist_add_m3u),
	(gtk_playlist_add_pls), (gtk_playlist_add_mrl),
	(gtk_playlist_clear), (gtk_playlist_get_current_mrl),
	(gtk_playlist_has_previous_mrl), (gtk_playlist_has_next_mrl),
	(gtk_playlist_set_playing), (gtk_playlist_unset_playing),
	(gtk_playlist_set_previous), (gtk_playlist_set_next),
	(gtk_playlist_set_at_start), (gtk_playlist_class_init): remove all the
	debug (not needed anymore), add double-click to the playlist
	* src/totem.c: (totem_setup_preferences): make it compile again until
	I find the strength to write this boring code

2002-10-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (on_preferences1_activate), (hide_prefs),
	(update_buttons), (totem_callback_connect),
	(totem_setup_preferences), (main): add basic code for the preferences
	dialog

2002-10-21  Bastien Nocera  <hadess@hadess.net>

	* data/playlist.glade: added repeat check button
	* data/totem.schemas.in: added repeat configuration
	* src/gtk-playlist.c: (repeat_button_toggled), (update_repeat_cb),
	(init_config), (gtk_playlist_init), (gtk_playlist_new),
	(gtk_playlist_has_next_mrl), (gtk_playlist_set_next): add support for
	repeat, pressing next in repeat mode from the last song goes to the
	beginning of the list (Closes: #96048)
	* src/totem.c: (on_recent_file_activate): fix a leak when filename was
	NULL

2002-10-21  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_tree_selection_has_selected_foreach),
	(gtk_tree_selection_has_selected): urgh, still learning C bud ?

2002-10-21  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_tree_selection_has_selected_foreach),
	(gtk_tree_selection_has_selected), (selection_changed),
	(init_treeview): make the removed button's state depend on wether we
	have a selection or not, fixed a bug in the class_init (wrong offset
	for the current-removed signal
	* src/totem.c: (totem_action_set_mrl), (current_removed_cb): stop the
	playback when the current song is removed, and the playlist is empty

2002-10-21  Bastien Nocera  <hadess@hadess.net>

	* data/playlist.glade: the remove button is disabled by default
	* src/totem.c: (on_recent_file_activate): use
	gnome_vfs_get_local_path_from_uri rather than g_filename_from_uri, the
	glib function doesn't like non-UTF8

2002-10-21  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (totem_action_set_mrl), (seek_cb): patch by John
	McCutchan <ttb@tentacle.dhs.org>, to move the correct seekbars around

2002-10-19  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: added prefs dialog (not hooked yet)
	* data/totem.schemas.in: added VCD/DVD device configuration
	(Closes:#95653), default is /dev/cdrom, both Debian and Red Hat create
	the link by default
	* src/gtk-xine.c: (load_config_from_gconf): added support for optical
	media configuration
	* src/totem.c: (totem_action_open_files), (popup_hide),
	(on_motion_notify_event): removed debug, added support for dvd: and
	vcd: arguments (Closes:#95874)
	* src/video-utils.c: (gdk_window_set_fullscreen): added some more
	atoms needed for fullscreen

2002-10-19  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_set_fullscreen),
	(gtk_xine_set_show_cursor): just show/hide a window instead of
	creating a new one each time (Closes: #91892)

2002-10-19  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (popup_hide): disconnect the "popup_hide" callback
	before hiding the popup (Closes: #91836)

2002-10-19  Bastien Nocera  <hadess@hadess.net>

	* .cvsignore: upd
	* data/totem.glade: remove the additional events on the popups,
	they're already in the sources

2002-10-19  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am: added the gnome-vfs xine plugin
	* configure.in: libtool-fu
	* data/totem.applications: we can do URIs any day
	* data/totem.glade: controls popup
	* src/Makefile.am: upd
	* src/gtk-playlist.c: (gtk_playlist_add_one_mrl),
	(gtk_playlist_mrl_to_title): remove escapes from filenames before
	showing them
	* src/gtk-xine.c: (gtk_xine_instance_init), (frame_output_cb),
	(gtk_xine_set_fullscreen), (gtk_xine_is_seekable): cleanups, if stream
	length is 0, don't set it as seekable
	* src/input_gnomevfs.c: added, not functional yet because of build
	problems
	* src/totem.c: (play_pause_set_label), (volume_set_image),
	(totem_action_fullscreen_toggle), (totem_action_set_mrl),
	(totem_action_previous), (totem_action_next), (update_sliders_cb),
	(seek_cb), (vol_cb), (popup_hide), (on_mouse_motion_event),
	(on_motion_notify_event), (update_buttons),
	(totem_callback_connect), (main): merge patch by John McCutchan
	<ttb@tentacle.dhs.org> to show a controls popup in fullscreen mode,
	cleanup the patch, catch motion events on the popups so they don't
	flicker when moving the mouse over them

2002-10-12  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_add_mrl): add the files only once,
	not twice and buggily
	* src/totem.c: (totem_action_open_files): only add to recent files if
	we could add it to the playlist

2002-10-12  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (read_ini_line_int), (read_ini_line_string),
	(gtk_playlist_add_m3u), (gtk_playlist_add_pls),
	(gtk_playlist_add_mrl): added code to support shoutcast playlists
	* src/totem.c: (totem_action_error), (on_error_event): only show an
	error dialog if there isn't another one, and if the playlist is at the
	end

2002-10-11  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (eel_read_entire_file), (drop_cb),
	(gtk_playlist_add_files), (gtk_playlist_add_one_mrl),
	(gtk_playlist_add_m3u), (gtk_playlist_add_pls),
	(gtk_playlist_add_mrl):
	* src/gtk-playlist.h:
	* src/totem.c: (drop_cb), (on_recent_file_activate),
	(totem_action_open_files): m3u working on http URIs, possibility to
	set a display name already, when adding an mrl

2002-10-10  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications:
	* data/totem.keys: upd for m3u and shoutcast playlists support
	* src/gtk-playlist.c: (drop_cb), (gtk_playlist_add_one_mrl),
	(gtk_playlist_add_m3u), (gtk_playlist_add_mrl):
	* src/totem.c: (totem_action_open_files): m3u playlists
	support, shoutcast playlist to be done

2002-10-09  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-message.c: (selection_get_func),
	(clipboard_received_func), (gtk_program_register): updated
	* src/totem.c: (on_error_event): stop when video isn't supported

2002-10-06  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: upd
	* src/gtk-message.[ch]: added
	* src/gtk-playlist.c: (drop_cb): upd
	* src/gtk-xine.c: (gtk_xine_ratio_fits_screen): fix warnings
	* src/totem.c: (totem_action_fullscreen_toggle), (drop_cb),
	(on_error_event), (totem_callback_connect), (main): cleanups

2002-10-05  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_mrl_to_title): added this function
	to modify the URI for display
	* src/gtk-playlist.h: added
	* src/totem.c: (totem_action_set_mrl), (drop_cb): upd, and fixed drop
	crasher bug

2002-10-04  Bastien Nocera  <hadess@hadess.net>

	* .cvsignore: upd
	* README: upd
	* configure.in: upd for 0.11 (soon)
	* src/gtk-playlist.c: (drop_cb):
	* src/totem.c: (drop_cb): change g_filename_from_uri to
	gnome_vfs_get_local_path_from_uri which doesn't whine so much about my
	broken filenames

2002-10-03  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications: added http back
	* src/Makefile.am: upd for CVS libegg

2002-10-02  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in: added launch_once
	* src/Makefile.am: upd for libegg changes

2002-09-30  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am: added totem.spec.in and co
	* configure.in: generate totem.spec
	* totem.spec.in: added, thanks to Matthias Saou <matthias@rpmforge.net>

2002-09-27  James Willcox  <jwillcox@gnome.org>

	* src/totem.c: (totem_setup_recent):  Adjust to API changes in the
	recent-file code, and show the mime-type icons in the menu.

2002-09-23  James Willcox  <jwillcox@gnome.org>

	* data/lirc_example:  Added an example lirc file

2002-09-23  James Willcox  <jwillcox@gnome.org>

	Moved to lirc instead of irman for remote stuff.  New TotemRemote
	object.

	* acconfig.h:  s/TOTEM_IRMAN/TOTEM_REMOTE/
	* configure.in: check for lirc
	* src/Makefile.am:  remove totem-irman.[ch], add totem-remote.[ch]
	* src/totem-irman.c:  bye bye
	* src/totem-irman.h:
	* src/totem-remote.c: (totem_lirc_to_command),
	(totem_remote_read_code), (totem_remote_finalize),
	(totem_remote_class_init), (totem_remote_init),
	(totem_remote_get_type), (totem_remote_new):
	* src/totem-remote.h:
	* src/totem.c: (on_recent_file_activate),
	(totem_button_pressed_remote_cb), (totem_setup_recent), (main):

2002-09-23  Peteris Krisjanis <peteris.krisjanis@os.lv>

	* configure.in: Added Latvian (lv) to ALL_LINGUAS.

2002-09-23  Bastien Nocera  <hadess@hadess.net>

	* data/totem.desktop.in: mark Comment and Name as translatable
	* data/totem.glade: add a mnemonic to the Sound menu
	(patches from Pier Luigi Fiorini <plfiorini@supereva.it>)

2002-09-21  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in (ALL_LINGUAS): Added "no".
	
2002-09-16  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added Vietnamese (vi) to ALL_LINGUAS

2002-09-15  Bastien Nocera  <hadess@hadess.net>

	* data/totem.schemas.in: added /apps/totem/auto_resize
	* src/gtk-xine.c: (frame_output_cb), (gtk_xine_idle_signal),
	(gtk_xine_ratio_fits_screen), (gtk_xine_set_scale_ratio):
	implement automatically changing the ratio when the video changes size
	(Closes: #92320)

2002-09-15  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Added "ru" to ALL_LINGUAS.

2002-09-14  James Willcox  <jwillcox@gnome.org>

	* configure.in:  Remove uuid dependency

2002-09-11  James Willcox  <jwillcox@gnome.org>

	* data/totem.glade:  Removed the "Open Recent" submenu, and fixed a
	typo for "Next Stream" and "Previous Stream" (the keybindings were
	reversed)
	* src/totem.c: (totem_setup_recent):  Put recent items directly
	into the "Movie" menu, not in a submenu.

2002-09-10  Gustavo Maciel Dias Vieira  <gdvieira@zaz.com.br>

	* configure.in: Added pt_BR to ALL_LINGUAS.

2002-09-08  Hasbullah Bin Pit  <sebol@ikhlas.com>

        * configure.in: Added "ms"  and "da" to ALL_LINGUAS.

2002-09-05  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: fix Makefile.am for sloppy snorp ;)

2002-09-05  Bastien Nocera  <hadess@hadess.net>

	* configure.in: fixes for the irman tests for autoconf 2.53

2002-09-05  James Willcox  <jwillcox@gnome.org>

	* src/totem.c:  Make most of the actions public, and namespace them
	properly.

	* src/totem-irman.[ch]:  New files, adds support for the irman device

	* configure.in:  Check for irman library, headers, etc.

2002-09-04  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (toggle_playlist_from_playlist): patch by sebastien
	bacher <sebastien.bacher@insa-lyon.fr> to kill a crash bug when closing
	the playlist from the window manager

2002-09-03  James Willcox  <jwillcox@gnome.org>

	* src/totem.c (on_recent_file_activate):  Don't convert the URI to a
	local path.  Re-add the item to the list.

2002-09-03  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: oops, fix cut'n'paste PEBCAK

2002-09-03  Bastien Nocera  <hadess@hadess.net>

	* src/.cvsignore: upd
	* configure.in:
	* data/totem.glade:
	* src/Makefile.am:
	* src/totem.c: (on_recent_file_activate), (action_open_files),
	(totem_setup_recent), (main):
	* src/update-from-egg.sh: merge in big patch by James Willcox
	<jwillcox@gnome.org> for "Recent files" support, added Makefile.am
	fu for CVS users

2002-09-03  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "sv" to ALL_LINGUAS.

2002-09-02  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_class_init): initialise the
	parent_class, fixes a crash bug when closing the playlist from the wm
	close button. (thanks to Sebastien Bacher <seb128@debian.org> for help
	on this one)

============ Version 0.10.0

2002-08-31  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications: remove http from the list of supported URI
	schemes, it crashes and burn with xine 0.9.13 (release)

2002-08-31  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (action_handle_key): added ?Å as a key to put the scale
	ratio at (guess ?) ?Å of the original size (enhancement request by
	Hakon G <hakon_@everyday.com>)
	* README: upd

2002-08-31  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (xine_thread), (gtk_xine_idle_signal),
	(gtk_xine_set_fullscreen): made the fullscreen window a transient
	window for the main UI (the totem UI won't go over the top of the
	fullscreen window). All the keyboard commands available in fullscreen
	are still available (Closes: #92090)

2002-08-29  Bastien Nocera  <hadess@hadess.net>

	* src/video-utils.c: (old_wmspec_set_fullscreen),
	(gdk_window_set_fullscreen): add support for the old wm-spec, not
	tested (Closes: #91937)

2002-08-29  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_add_files),
	(gtk_playlist_init):
	* src/totem.c: (on_open1_activate): make file selectors remember the
	path they were in (Closes: #91894)

2002-08-29  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_class_init), (gtk_xine_instance_init),
	(video_window_translate_point), (xine_thread), (gtk_xine_realize),
	(gtk_xine_idle_signal), (xine_event), (gtk_xine_set_fullscreen):
	* src/gtk-xine.h: kill the use of GtkInvisible for the fullscreen
	window (this fixes the DVD menus in fullscreen), and handle the key
	presses in the xine_thread, kill the GC
	* src/totem.c: (action_handle_key), (on_video_key_release_event),
	(on_window_key_press_event), (totem_callback_connect),
	(video_widget_create): some cleanups in the kbd handling, and upd wrt
	changes in GtkXine

2002-08-28  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_finalize): add a bit more checks
	* src/gtk-xine.c: (video_window_translate_point),
	(generate_mouse_event), (xine_thread): add generation of the necessary
	xine mouse events to make DVD menus work

2002-08-28  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (frame_output_cb), (xine_thread):
	re-enable Expose event compression, should fix weird slow-downs

2002-08-28  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* data/Makefile.am: desktop_in_files in the EXTRA_DIST, not
	desktop_DATA

2002-08-28  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_get_mrls):
	* src/gtk-xine.h: return const char **
	* src/totem.c: (action_play_media): don't g_strfreev the mrls,
	and actually add them to the playlist, works better

2002-08-27  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_instance_init),
	(load_audio_out_driver), (gtk_xine_realize),
	(gtk_xine_is_fullscreen), (gtk_xine_get_current_time),
	(gtk_xine_get_stream_length), (gtk_xine_is_playing),
	(gtk_xine_is_seekable), (gtk_xine_can_play), (gtk_xine_get_mrls):
	* src/gtk-xine.h:
	* src/totem.c: (action_play_media), (drop_cb), (action_open_files),
	(on_play_dvd1_activate), (on_play_vcd1_activate),
	(totem_callback_connect), (video_widget_create):
	We should now be able to play DVDs and VCDs, please test,
	killed a bunch of mem leaks by the same token

2002-08-27  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (frame_output_cb), (gtk_xine_set_scale_ratio):
	fix the zooming so that it doesn't use xine_get_current_frame () (and
	leak like mad ;)

2002-08-27  Bastien Nocera  <hadess@hadess.net>

	* configure.in: pump up the minimum Xine version number to 0.9.13
	* src/gtk-xine.c: (gtk_xine_class_init), (xine_thread),
	(gtk_xine_realize), (key_press_event_cb),
	(gtk_xine_set_fullscreen): use non-deprecated call instead of
	gtk_type_new, kill the priv->toplevel window, remove all usage
	of XSetInputFocus with RevertToNone, make the fullscreen window grab
	keypresses by itself
	* src/gtk-xine.h: add key-press signal
	* src/totem.c: (totem_callback_connect), (video_widget_create):
	ditto

2002-08-27  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (gtk_xine_finalize), (load_video_out_driver),
	(load_audio_out_driver), (load_config_from_gconf), (xine_thread),
	(gtk_xine_realize), (gtk_xine_idle_signal), (gtk_xine_new),
	(gtk_xine_set_fullscreen), (gtk_xine_can_set_volume),
	(gtk_xine_set_scale_ratio): revert to a 0.9.1 state with these
	differences:
	- translate the fullscreen video window title
	- kill ->priv->fullscreen_width/height
	- fix a possible crash on exit bug
	- a bit of gdk-ification in the full-screen handling
	* src/gtk-xine.h: remove the xine.h include
	* src/video-utils.c: (wmspec_change_state),
	(gdk_window_set_fullscreen): upd

2002-08-26  Bastien Nocera  <hadess@hadess.net>

	* README: add snippet about black fullscreen bug
	* configure.in: added es to ALL_LINGUAS from Ricardo Mones Lastra
	<mones@trasgu.aic.uniovi.es>
	* src/gtk-xine.c: (load_config_from_gconf), (xine_thread),
	(gtk_xine_realize), (gtk_xine_idle_signal),
	(gtk_xine_set_fullscreen), (gtk_xine_set_scale_ratio):
	kill ->gc, some cleanups, re-enable some hacks so it keeps working,
	possible crash on exit fix from Hallski

2002-08-26  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade:
	* src/totem.c: (action_set_mrl): get the sensitivity right on the
	next/previous, and skip buttons

2002-08-25  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (dest_size_cb), (frame_output_cb), (xine_thread),
	(gtk_xine_realize), (gtk_xine_set_fullscreen),
	(gtk_xine_set_scale_ratio): kill fullscreen_width/height and the
	toplevel Window
	* src/video-utils.c: (wmspec_change_state),
	(gdk_window_set_fullscreen), (eel_gdk_window_set_invisible_cursor):
	* src/video-utils.h: some bug fixes wrt fullscreen

2002-08-25  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (load_video_out_driver), (load_audio_out_driver),
	(gtk_xine_realize), (gtk_xine_set_fullscreen),
	(gtk_xine_set_show_cursor): some little leaks plugged, use a GdkWindow
	for the full-screen window
	* src/video-utils.c: (wmspec_change_gdk_window_state),
	(gdk_window_set_fullscreen), (eel_gdk_window_set_invisible_cursor):
	borrow eel's cursor hiding stuff, use GdkWindows when possible
	* src/video-utils.h: api change

2002-08-25  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (load_video_out_driver), (gtk_xine_realize):
	use the gdk functions instead of the X ones when possible

2002-08-24  Christian Neumair  <christian-neumair@web.de>

	* configure.in (ALL_LINGUAS): Added German (de).

============ Version 0.9.1

2002-08-24  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* configure.in: 0.9.1
	* data/.cvsignore: upd
	* data/Makefile.am: upd
	* data/gtk-xine.schemas.in: removed
	* data/totem.schemas.in: added
	* src/gtk-xine.c: (load_config_from_gconf): change default
	* src/scrsaver.c: (fake_event), (scrsaver_disable),
	(scrsaver_enable): cleanups

============ Version 0.9

2002-08-24  Bastien Nocera  <hadess@hadess.net>

	* README: added 0.9 release details
	* configure.in: 0.9

2002-08-24  Bastien Nocera  <hadess@hadess.net>

	* data/totem.glade: disable DVD and VCD, as there's no code behind
	them yet

2002-08-24  Bastien Nocera  <hadess@hadess.net>

	* README:
	* data/totem.glade: added 1:2 zoom
	* src/gtk-xine.c: (gtk_xine_set_scale_ratio): implement with mucho
	hackery... but it works (whee!)
	* src/gtk-xine.h:
	* src/totem.c: (action_set_scale_ratio), (on_zoom_1_2_activate),
	(on_zoom_1_1_activate), (on_zoom_2_1_activate): implement these
	and add the 0,1 and 2 shortcuts

2002-08-24  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/gtk-xine.c: 
	* src/video-utils.c: (xwindow_set_fullscreen):
	* src/video-utils.h: move the fullscreen stuff to video-utils.[ch]

2002-08-23  Bastien Nocera  <hadess@hadess.net>

	* acconfig.h: added
	* configure.in: added tests for XTest
	* src/Makefile.am: added src/scrsaver.[ch]
	* src/gtk-xine.c: (xine_thread), (gtk_xine_realize),
	(gtk_xine_set_fullscreen): should disable the screensaver when playing
	full-screen now
	* src/scrsaver.c, src/scrsaver.h: nicked and adapted from sinek

2002-08-22  Bastien Nocera  <hadess@hadess.net>

	* data/totem.applications: add more supported URIs (http, mms...)
	* src/gtk-xine.c: (x_window_is_visible), (xine_thread),
	(gtk_xine_unrealize), (gtk_xine_toggle_aspect_ratio),
	(gtk_xine_set_scale_ratio): fix crashing bug when switching back and
	forth to a desktop with a fullscreen video on it, added non-working
	gtk_xine_set_scale_ratio api
	* src/gtk-xine.h:added non-working gtk_xine_set_scale_ratio api
	* README: added url for bugzilla

2002-08-15  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/totem.c: (drop_cb), (action_open_files):
	update the previous/next button when starting up on the cli

2002-08-12  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* data/.cvsignore: upd
	* data/Makefile.am:
	* data/gtk-xine.schemas.in: added
	* src/gtk-xine.c: (gtk_xine_finalize), (load_config_from_gconf),
	(gtk_xine_unrealize): fix configuration saving, beginnings of the
	configuration work
	* src/totem.c: (update_sliders_cb): update the volume pixmap if the
	volume was changed by an external source

2002-08-10  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* data/playlist.glade: moved the add and remove buttons together
	* data/totem.glade: some UI stuff, not implemented yet
	* src/gtk-xine.c:
	* src/gtk-xine.h: removed gtk_xine_save_config ()

2002-08-09  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/totem_logo.mpv: add new nifty logo
	* src/gtk-xine.c: (gtk_xine_class_init), (gtk_xine_finalize),
	(load_audio_out_driver), (load_config_from_gconf),
	(gtk_xine_realize), (gtk_xine_unrealize): beginnings of the the
	configuration stuff, and support new logo, fixes related to object
	destruction (should work ok now)
	* src/totem.c: (action_exit), (main_window_destroy_cb),
	(totem_callback_connect), (video_widget_create): fix exiting properly

2002-08-07  Bastien Nocera  <hadess@hadess.net>

	* .cvsignore: upd
	* src/totem.c: (action_play), (drop_cb), (on_open1_activate),
	(playlist_changed_cb): playlist fixes (dropping files, and open
	dialog)

2002-08-07  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* README:
	* configure.in:
	* data/*: moved the arch-all stuff to data/, add a user-install target
	for users to install the Nautilus configs if necessary, upd README,
	change the previous and next button to the proper ones

2002-08-07  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/gtk-xine.c: (gtk_xine_instance_init), (xine_thread),
	(gtk_xine_realize), (gtk_xine_new), (gtk_xine_check):
	* src/gtk-xine.h: add width and height args to gtk_xine_new,
	make gtk_xine_check do something useful
	* src/totem.c: (long_action), (action_error), (action_play),
	(action_play_pause), (action_fullscreen_toggle),
	(update_sliders_cb), (action_open_files), (on_error_event),
	(video_widget_create), (main): wait until Xine is up to make it play
	movies (using gtk_xine_check), mucho error dialog work.
	* src/totem.desktop.in: s/Media Player/Totem Movie Player/
	* src/totem.glade: move the sliders at 0 by default

2002-08-07  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added it to ALL_LINGUAS

2002-08-07  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-xine.c: (dest_size_cb), (frame_output_cb),
	(load_video_out_driver), (xine_thread), (configure_cb),
	(gtk_xine_realize), (gtk_xine_size_allocate):
	g_strfreev is nice, and fix some brain damage in configure_cb

2002-08-07  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/.cvsignore: added the marshal generated files
	* src/Makefile.am: upd
	* src/debug.h: fix declaration of TE and TL
	* src/gtk-xine.c:
	* src/gtk-xine.h: plenty of small fixes, and cleanups
	* src/totem.c: create the video widget after the window has been
	shown (should make it feel faster on slow machines), remove
	long_action()
	* src/totem.glade: make the video widget be at a 4:3 ratio by default

2002-08-06  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: added the marshal list
	* src/gtk-xine.c: (gtk_xine_class_init), (gtk_xine_instance_init),
	(gtk_xine_realize), (gtk_xine_idle_signal), (xine_event),
	(codec_reporting), (xine_error):
	* src/gtk-xine.h:
	* src/gtkxine-marshal.list: marshals
	* src/totem.c: (play_pause_set_label), (action_set_mrl),
	(action_previous), (action_next), (playlist_changed_cb),
	(current_removed_cb), (on_eos_event), (on_error_event),
	(video_widget_create), (main): mucho work wrt threading, deadlocks,
	etc. All the deadlocks should now be gone, the player itself probably
	behaves a bit bizzarely right now, I'll fix it soon.
	Thanks to Steve Baker and Owen Taylor for their great help.

2002-08-05  Bastien Nocera  <hadess@hadess.net>

	* README:
	* src/gtk-xine.c: (xine_error):
	* src/totem.c: (action_stop), (action_previous), (action_next),
	(on_about1_activate), (playlist_changed_cb), (main):
	added Guenter to the authors, fix typos (thanks Christophe Fergeau)
	add some commented out code that's buggy, damn threads

2002-08-04  Christophe Fergeau  <teuf@users.sourceforge.net>

	* configure.in: added fr.po 

2002-08-04  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/debug.h: added threads debugging
	* src/gtk-xine.c: (gtk_xine_class_init): moved threads init here
	* src/totem.applications:
	* src/totem.keys: added wav and fli handling
	* src/totem.c: (on_eos_event), (main): upd
	* src/totem.glade: add a Play DVD item, just to see

2002-08-02  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/gtk-playlist.c: (gtk_playlist_set_playing):
	* src/gtk-playlist.h: change the args for gtk_playlist_set_playing
	* src/gtk-xine.c: (gtk_xine_class_init), (gtk_xine_realize),
	(xine_error):
	* src/gtk-xine.h: add signals for the playing errors
	* src/totem.c: (action_set_mrl), (playlist_changed_cb),
	(on_play_error_event), (video_widget_create), (main):
	add crude error reporting, upd against gtk_playlist_set_playing
	API change

2002-08-02  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* configure.in: v0.8
	* src/Makefile.am: added totem.applications
	* src/totem.applications: addded, fixing nautilus integration
	* src/totem.c: (playlist_changed_cb): fixed dnd'ing a file that's
	already playing on the main window
	* src/totem.desktop.in: fixed pixmap location

2002-08-02  Bastien Nocera  <hadess@hadess.net>

	* README: 
	* configure.in:
	* src/Makefile.am:
	* src/gtk-playlist.c: (gtk_playlist_get_type),
	(gtk_playlist_finalize):
	* src/rb-ellipsizing-label.[ch]:
	* src/totem.c: (action_play_pause), (action_set_mrl),
	(label_create): removed eel dependency, made the title label bigger

2002-08-01  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (drop_cb), (init_treeview),
	(gtk_playlist_new): added dnd
	* src/gtk-playlist.h:
	* src/totem.c: (action_play), (action_play_pause),
	(action_set_mrl), (drop_cb), (on_play_pause_button_clicked),
	(action_open_files), (on_about1_activate), (playlist_changed_cb),
	(current_removed_cb), (on_eos_event), (video_widget_create),
	(totem_callback_connect): s/GTK_OBJECT/G_OBJECT/g, start playing when
	file is dropped on us, and more dnd related fixes

2002-08-01  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (volume_set_image), (action_set_mrl),
	(action_seek_relative), (action_volume_relative), (vol_cb):
	update the volume icon when the volume changes

2002-08-01  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: upd
	* src/gtk-xine.c: (xine_thread): remove extraneous debug
	* src/rhythmbox-volume-max.png:
	* src/rhythmbox-volume-medium.png:
	* src/rhythmbox-volume-min.png:
	* src/rhythmbox-volume-zero.png: added
	* src/stock_media_previous.png:
	* src/stock_media_next.png: change style to fwd/rwd
	* src/stock_media_pause.png:
	* src/stock_media_play.png: added
	* src/stock_media_play_pause.png:
	* src/stock_media_play_pause.xcf: removed
	* src/tb_volume.xpm:
	* src/tb_volume_off.xpm: removed
	* src/totem.c: (play_pause_set_label), (action_play),
	(action_play_pause), (action_set_mrl), (action_seek_relative),
	(on_play_pause_button_toggled), (seek_cb), (current_removed_cb),
	(on_eos_event), (totem_callback_connect), (main):
	* src/totem.glade: made the play/pause toggle a simple button and
	change the image depending on the status, moved the buttons to be in
	the same order as RB, started fixing the volume control

2002-08-01  Bastien Nocera  <hadess@hadess.net>

	* README:
	* src/Makefile.am:
	* src/gtk-playlist.c: (init_columns), (gtk_playlist_new):
	* src/gtk-xine.c: (gtk_xine_toggle_aspect_ratio):
	* src/gtk-xine.h:
	* src/totem.c: (action_exit), (play_pause_toggle_disconnected),
	(action_toggle_aspect_ratio), (on_toggle_aspect_ratio1_activate),
	(on_about1_activate), (on_window_key_press_event),
	(video_widget_create), (totem_callback_connect), (main):
	s/GTK_SIGNAL_FUNC/G_CALLBACK/g, added aspect ratio toggling (wishlisted
	by Michele Campeotto), use locate_file correctly
	* src/totem.glade: GUI for aspect ratio toggling

2002-07-31  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added --disable-debug flag
	* src/Makefile.am:
	* src/debug.h: added
	* src/gtk-playlist.c: (gtk_playlist_foreach_selected):
	* src/gtk-xine.c: (load_audio_out_driver), (xine_thread),
	(configure_cb), (gtk_xine_realize), (gtk_xine_size_allocate),
	(gtk_xine_play):
	* src/totem.c: (main): make use of shared debug macros, fix some build
	issues

2002-07-31  Bastien Nocera  <hadess@hadess.net>

	* src/totem.c: (action_error), (main): added more checks for the
	interface loading, so that we fail gracefully if it doesn't work
	Thanks thomasvs for pushing me into doing it

2002-07-31  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* README, NEWS, AUTHORS: upd
	* src/Makefile.am: forgot to add totem.keys
	* src/totem.c: (drop_cb), (on_about1_activate): fix the DND on the
	main controls

2002-07-31  Bastien Nocera  <hadess@hadess.net>

	* configure.in: upd to 0.7 (RELEASE!!!)
	* src/gtk-playlist.c:  disabled debug by default
	* src/totem.c: (disable_error_output), (playlist_changed_cb),
	(current_removed_cb), (main): added some way to kill off all of
	xine's debug output

2002-07-31  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_tree_model_iter_previous),
	(update_current_from_playlist), (gtk_playlist_add_files),
	(gtk_playlist_foreach_selected), (gtk_playlist_remove_files),
	(init_columns), (init_treeview), (gtk_playlist_init),
	(gtk_playlist_finalize), (gtk_playlist_new),
	(gtk_playlist_add_mrl), (gtk_playlist_clear),
	(gtk_playlist_get_current_mrl), (gtk_playlist_has_previous_mrl),
	(gtk_playlist_has_next_mrl), (gtk_playlist_set_playing),
	(gtk_playlist_unset_playing), (gtk_playlist_set_previous),
	(gtk_playlist_set_next), (gtk_playlist_set_at_start),
	(gtk_playlist_class_init): added debug, make items removal work,
	fix warnings wrt signal emission, fix last item's removal
	* src/totem.c: (action_exit), (current_removed_cb),
	(totem_callback_connect): make items removal work as it should

2002-07-31  Bastien Nocera  <hadess@hadess.net>

	* .cvsignore:
	* po/.cvsignore:
	* src/.cvsignore: added
	* src/gtk-playlist.c: (gtk_tree_model_iter_previous),
	(gtk_playlist_add_files), (gtk_playlist_foreach_selected),
	(gtk_playlist_remove_files), (init_treeview), (gtk_playlist_init),
	(gtk_playlist_finalize), (gtk_playlist_new),
	(gtk_playlist_add_mrl), (gtk_playlist_clear),
	(gtk_playlist_get_current_mrl), (gtk_playlist_has_previous_mrl),
	(gtk_playlist_has_next_mrl), (gtk_playlist_set_playing),
	(gtk_playlist_unset_playing), (gtk_playlist_set_previous),
	(gtk_playlist_set_next), (gtk_playlist_set_at_start),
	(gtk_playlist_class_init): s/details/_priv/, added "changed" and
	"current_removed" signals, made the add and remove buttons functional,
	added checks for the glade UI, convert the filename to utf8 before
	displaying them in the tree
	(mucho crashes with remove still), 
	* src/gtk-playlist.h: same
	* src/playlist.glade: upd
	* src/totem.c: (long_action), (action_exit), (action_open_files),
	(on_open1_activate), (playlist_changed_cb), (current_removed_cb),
	(totem_callback_connect), (main): allow multiple files selection in
	the open dialog

2002-07-31  Bastien Nocera  <hadess@hadess.net>

	* README: upd
	* src/gtk-playlist.c: (gtk_playlist_add_mrl), (gtk_playlist_clear):
	* src/gtk-playlist.h: add gtk_playlist_clear()
	* src/totem.c: (action_volume_relative), (update_sliders_cb),
	(seek_cb), (vol_cb), (on_open1_activate), (on_eos_event),
	(on_window_key_press_event), (update_buttons),
	(totem_callback_connect), (main): add volume control, remove debug,
	make open... work as it should (using the playlist), show the UI
	properly before starting the playback, update the next/previous
	buttons in the menus

2002-07-28  Bastien Nocera  <hadess@hadess.net>

	* src/gtk-playlist.c: (gtk_playlist_new),
	(gtk_playlist_unset_playing), (gtk_playlist_set_next),
	(gtk_playlist_set_at_start):
	* src/gtk-playlist.h:
	* src/totem.c: (play_pause_toggle_disconnected),
	(action_play_pause_real), (action_set_mrl), (action_previous),
	(action_next), (on_eos_event), (totem_callback_connect), (main):
	more playlist/eos work, now eo playlist and eo stream is handled
	correctly, all the deadlocks (that happened because of some nasty
	signals/threads interaction) are gone

2002-07-27  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/gtk-playlist.c: (gtk_playlist_new), (gtk_playlist_add_mrl),
	(gtk_playlist_set_playing), (gtk_playlist_unset_playing),
	(gtk_playlist_set_previous), (gtk_playlist_set_next):
	* src/gtk-playlist.h:
	* src/gtk-xine.c: (xine_error), (gtk_xine_play):
	* src/playlist-playing.png:
	* src/totem.c: (play_pause_toggle_disconnected),
	(action_play_pause_real), (action_set_mrl), (action_previous),
	(action_next), (on_previous_button_clicked),
	(on_next_button_clicked), (toggle_playlist_from_playlist),
	(on_window_key_press_event), (totem_callback_connect), (main):
	Cleanups, add real ability to skip backwards and forwards in the
	playlist. Yesh, yesh, it works!

2002-07-16  Bastien Nocera  <hadess@hadess.net>

	* configure.in: remove unneeded gob2 check

2002-07-16  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: use XINE_CFLAGS, not just CFLAGS
	* src/Makefile.in, Makefile.in, src/totem.desktop: removed

